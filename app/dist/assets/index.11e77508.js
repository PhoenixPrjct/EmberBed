import{aR as k,bn as $s,b3 as Y,a$ as bb,b2 as gb,a_ as mb,ah as le,c5 as ei,c6 as wb,b1 as vb,ac as Qd,b5 as Eb,b7 as Sb,p as el}from"./index.473a68e4.js";import{L as jh,z as Gh,O as X,Q as Ns,R as _b,V as Da,W as La,X as Ab,Y as Tb,Z as Pb,_ as Wh,$ as ut,a0 as Rb,a1 as Ma,a2 as Vh,a3 as Oi,a4 as kb,a5 as Cb}from"./collectionSubmission.00463ec6.js";import{b as Ss}from"./index.bfeaebb5.js";import"./user_store.67f2cfd7.js";var Jh={exports:{}},mf={},wf={};Object.defineProperty(wf,"__esModule",{value:!0});function Bb(t){var e=4,r=t.length,n=r%e;if(!n)return t;var s=r,i=e-n,a=r+i,o=k.Buffer.alloc(a);for(o.write(t);i--;)o.write("=",s++);return o.toString()}wf.default=Bb;Object.defineProperty(mf,"__esModule",{value:!0});var Ib=wf;function Xh(t,e){return e===void 0&&(e="utf8"),k.Buffer.isBuffer(t)?Nu(t.toString("base64")):Nu(k.Buffer.from(t,e).toString("base64"))}function Ob(t,e){return e===void 0&&(e="utf8"),k.Buffer.from(vf(t),"base64").toString(e)}function vf(t){return t=t.toString(),Ib.default(t).replace(/\-/g,"+").replace(/_/g,"/")}function Nu(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ub(t){return k.Buffer.from(vf(t),"base64")}var Xn=Xh;Xn.encode=Xh;Xn.decode=Ob;Xn.toBase64=vf;Xn.fromBase64=Nu;Xn.toBuffer=Ub;mf.default=Xn;(function(t){t.exports=mf.default,t.exports.default=t.exports})(Jh);var re=Jh.exports;const{Transform:$b}=jh.exports;var Nb=t=>class Yh extends $b{constructor(r,n,s,i,a){super(a),this._rate=r,this._capacity=n,this._delimitedSuffix=s,this._hashBitLength=i,this._options=a,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,s){let i=null;try{this.update(r,n)}catch(a){i=a}s(i)}_flush(r){let n=null;try{this.push(this.digest())}catch(s){n=s}r(n)}update(r,n){if(!k.Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return k.Buffer.isBuffer(r)||(r=k.Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new Yh(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const{Transform:Db}=jh.exports;var Lb=t=>class Zh extends Db{constructor(r,n,s,i){super(i),this._rate=r,this._capacity=n,this._delimitedSuffix=s,this._options=i,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,s){let i=null;try{this.update(r,n)}catch(a){i=a}s(i)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!k.Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return k.Buffer.isBuffer(r)||(r=k.Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let s=this._state.squeeze(r);return n!==void 0&&(s=s.toString(n)),s}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new Zh(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const Mb=Nb,Fb=Lb;var Hb=function(t){const e=Mb(t),r=Fb(t);return function(n,s){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new e(1152,448,null,224,s);case"keccak256":return new e(1088,512,null,256,s);case"keccak384":return new e(832,768,null,384,s);case"keccak512":return new e(576,1024,null,512,s);case"sha3-224":return new e(1152,448,6,224,s);case"sha3-256":return new e(1088,512,6,256,s);case"sha3-384":return new e(832,768,6,384,s);case"sha3-512":return new e(576,1024,6,512,s);case"shake128":return new r(1344,256,31,s);case"shake256":return new r(1088,512,31,s);default:throw new Error("Invald algorithm: "+n)}}},Qh={};const tl=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];Qh.p1600=function(t){for(let e=0;e<24;++e){const r=t[0]^t[10]^t[20]^t[30]^t[40],n=t[1]^t[11]^t[21]^t[31]^t[41],s=t[2]^t[12]^t[22]^t[32]^t[42],i=t[3]^t[13]^t[23]^t[33]^t[43],a=t[4]^t[14]^t[24]^t[34]^t[44],o=t[5]^t[15]^t[25]^t[35]^t[45],c=t[6]^t[16]^t[26]^t[36]^t[46],f=t[7]^t[17]^t[27]^t[37]^t[47],u=t[8]^t[18]^t[28]^t[38]^t[48],d=t[9]^t[19]^t[29]^t[39]^t[49];let l=u^(s<<1|i>>>31),x=d^(i<<1|s>>>31);const p=t[0]^l,h=t[1]^x,y=t[10]^l,b=t[11]^x,R=t[20]^l,v=t[21]^x,E=t[30]^l,A=t[31]^x,M=t[40]^l,q=t[41]^x;l=r^(a<<1|o>>>31),x=n^(o<<1|a>>>31);const L=t[2]^l,K=t[3]^x,$=t[12]^l,C=t[13]^x,g=t[22]^l,w=t[23]^x,T=t[32]^l,z=t[33]^x,H=t[42]^l,j=t[43]^x;l=s^(c<<1|f>>>31),x=i^(f<<1|c>>>31);const V=t[4]^l,me=t[5]^x,he=t[14]^l,m=t[15]^x,S=t[24]^l,U=t[25]^x,_=t[34]^l,P=t[35]^x,G=t[44]^l,xe=t[45]^x;l=a^(u<<1|d>>>31),x=o^(d<<1|u>>>31);const ne=t[6]^l,ee=t[7]^x,je=t[16]^l,Ge=t[17]^x,zr=t[26]^l,Ld=t[27]^x,Md=t[36]^l,Fd=t[37]^x,Hd=t[46]^l,qd=t[47]^x;l=c^(r<<1|n>>>31),x=f^(n<<1|r>>>31);const zd=t[8]^l,Kd=t[9]^x,jd=t[18]^l,Gd=t[19]^x,Wd=t[28]^l,Vd=t[29]^x,Jd=t[38]^l,Xd=t[39]^x,Yd=t[48]^l,Zd=t[49]^x,nc=p,sc=h,ic=b<<4|y>>>28,ac=y<<4|b>>>28,oc=R<<3|v>>>29,cc=v<<3|R>>>29,uc=A<<9|E>>>23,fc=E<<9|A>>>23,dc=M<<18|q>>>14,lc=q<<18|M>>>14,hc=L<<1|K>>>31,pc=K<<1|L>>>31,yc=C<<12|$>>>20,xc=$<<12|C>>>20,bc=g<<10|w>>>22,gc=w<<10|g>>>22,mc=z<<13|T>>>19,wc=T<<13|z>>>19,vc=H<<2|j>>>30,Ec=j<<2|H>>>30,Sc=me<<30|V>>>2,_c=V<<30|me>>>2,Ac=he<<6|m>>>26,Tc=m<<6|he>>>26,Pc=U<<11|S>>>21,Rc=S<<11|U>>>21,kc=_<<15|P>>>17,Cc=P<<15|_>>>17,Bc=xe<<29|G>>>3,Ic=G<<29|xe>>>3,Oc=ne<<28|ee>>>4,Uc=ee<<28|ne>>>4,$c=Ge<<23|je>>>9,Nc=je<<23|Ge>>>9,Dc=zr<<25|Ld>>>7,Lc=Ld<<25|zr>>>7,Mc=Md<<21|Fd>>>11,Fc=Fd<<21|Md>>>11,Hc=qd<<24|Hd>>>8,qc=Hd<<24|qd>>>8,zc=zd<<27|Kd>>>5,Kc=Kd<<27|zd>>>5,jc=jd<<20|Gd>>>12,Gc=Gd<<20|jd>>>12,Wc=Vd<<7|Wd>>>25,Vc=Wd<<7|Vd>>>25,Jc=Jd<<8|Xd>>>24,Xc=Xd<<8|Jd>>>24,Yc=Yd<<14|Zd>>>18,Zc=Zd<<14|Yd>>>18;t[0]=nc^~yc&Pc,t[1]=sc^~xc&Rc,t[10]=Oc^~jc&oc,t[11]=Uc^~Gc&cc,t[20]=hc^~Ac&Dc,t[21]=pc^~Tc&Lc,t[30]=zc^~ic&bc,t[31]=Kc^~ac&gc,t[40]=Sc^~$c&Wc,t[41]=_c^~Nc&Vc,t[2]=yc^~Pc&Mc,t[3]=xc^~Rc&Fc,t[12]=jc^~oc&mc,t[13]=Gc^~cc&wc,t[22]=Ac^~Dc&Jc,t[23]=Tc^~Lc&Xc,t[32]=ic^~bc&kc,t[33]=ac^~gc&Cc,t[42]=$c^~Wc&uc,t[43]=Nc^~Vc&fc,t[4]=Pc^~Mc&Yc,t[5]=Rc^~Fc&Zc,t[14]=oc^~mc&Bc,t[15]=cc^~wc&Ic,t[24]=Dc^~Jc&dc,t[25]=Lc^~Xc&lc,t[34]=bc^~kc&Hc,t[35]=gc^~Cc&qc,t[44]=Wc^~uc&vc,t[45]=Vc^~fc&Ec,t[6]=Mc^~Yc&nc,t[7]=Fc^~Zc&sc,t[16]=mc^~Bc&Oc,t[17]=wc^~Ic&Uc,t[26]=Jc^~dc&hc,t[27]=Xc^~lc&pc,t[36]=kc^~Hc&zc,t[37]=Cc^~qc&Kc,t[46]=uc^~vc&Sc,t[47]=fc^~Ec&_c,t[8]=Yc^~nc&yc,t[9]=Zc^~sc&xc,t[18]=Bc^~Oc&jc,t[19]=Ic^~Uc&Gc,t[28]=dc^~hc&Ac,t[29]=lc^~pc&Tc,t[38]=Hc^~zc&ic,t[39]=qc^~Kc&ac,t[48]=vc^~Sc&$c,t[49]=Ec^~_c&Nc,t[0]^=tl[e*2],t[1]^=tl[e*2+1]}};const ha=Qh;function Yn(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}Yn.prototype.initialize=function(t,e){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=t/8,this.count=0,this.squeezing=!1};Yn.prototype.absorb=function(t){for(let e=0;e<t.length;++e)this.state[~~(this.count/4)]^=t[e]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(ha.p1600(this.state),this.count=0)};Yn.prototype.absorbLastFewBits=function(t){this.state[~~(this.count/4)]^=t<<8*(this.count%4),(t&128)!==0&&this.count===this.blockSize-1&&ha.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),ha.p1600(this.state),this.count=0,this.squeezing=!0};Yn.prototype.squeeze=function(t){this.squeezing||this.absorbLastFewBits(1);const e=k.Buffer.alloc(t);for(let r=0;r<t;++r)e[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(ha.p1600(this.state),this.count=0);return e};Yn.prototype.copy=function(t){for(let e=0;e<50;++e)t.state[e]=this.state[e];t.blockSize=this.blockSize,t.count=this.count,t.squeezing=this.squeezing};var qb=Yn,zb=Hb(qb);function e0(t,e){return function(){return t.apply(e,arguments)}}const{toString:Kb}=Object.prototype,{getPrototypeOf:Ef}=Object,Fa=(t=>e=>{const r=Kb.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),rr=t=>(t=t.toLowerCase(),e=>Fa(e)===t),Ha=t=>e=>typeof e===t,{isArray:Zn}=Array,Ds=Ha("undefined");function jb(t){return t!==null&&!Ds(t)&&t.constructor!==null&&!Ds(t.constructor)&&At(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const t0=rr("ArrayBuffer");function Gb(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t0(t.buffer),e}const Wb=Ha("string"),At=Ha("function"),r0=Ha("number"),qa=t=>t!==null&&typeof t=="object",Vb=t=>t===!0||t===!1,Ki=t=>{if(Fa(t)!=="object")return!1;const e=Ef(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Jb=rr("Date"),Xb=rr("File"),Yb=rr("Blob"),Zb=rr("FileList"),Qb=t=>qa(t)&&At(t.pipe),eg=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||At(t.append)&&((e=Fa(t))==="formdata"||e==="object"&&At(t.toString)&&t.toString()==="[object FormData]"))},tg=rr("URLSearchParams"),rg=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ti(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),Zn(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{const i=r?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let o;for(n=0;n<a;n++)o=i[n],e.call(null,t[o],o,t)}}function n0(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const s0=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:$s)(),i0=t=>!Ds(t)&&t!==s0;function Du(){const{caseless:t}=i0(this)&&this||{},e={},r=(n,s)=>{const i=t&&n0(e,s)||s;Ki(e[i])&&Ki(n)?e[i]=Du(e[i],n):Ki(n)?e[i]=Du({},n):Zn(n)?e[i]=n.slice():e[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&ti(arguments[n],r);return e}const ng=(t,e,r,{allOwnKeys:n}={})=>(ti(e,(s,i)=>{r&&At(s)?t[i]=e0(s,r):t[i]=s},{allOwnKeys:n}),t),sg=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),ig=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},ag=(t,e,r,n)=>{let s,i,a;const o={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)a=s[i],(!n||n(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=r!==!1&&Ef(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},og=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},cg=t=>{if(!t)return null;if(Zn(t))return t;let e=t.length;if(!r0(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},ug=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ef(Uint8Array)),fg=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=n.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},dg=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},lg=rr("HTMLFormElement"),hg=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),rl=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),pg=rr("RegExp"),a0=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};ti(r,(s,i)=>{let a;(a=e(s,i,t))!==!1&&(n[i]=a||s)}),Object.defineProperties(t,n)},yg=t=>{a0(t,(e,r)=>{if(At(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(!!At(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},xg=(t,e)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return Zn(t)?n(t):n(String(t).split(e)),r},bg=()=>{},gg=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Qc="abcdefghijklmnopqrstuvwxyz",nl="0123456789",o0={DIGIT:nl,ALPHA:Qc,ALPHA_DIGIT:Qc+Qc.toUpperCase()+nl},mg=(t=16,e=o0.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function wg(t){return!!(t&&At(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const vg=t=>{const e=new Array(10),r=(n,s)=>{if(qa(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const i=Zn(n)?[]:{};return ti(n,(a,o)=>{const c=r(a,s+1);!Ds(c)&&(i[o]=c)}),e[s]=void 0,i}}return n};return r(t,0)},Eg=rr("AsyncFunction"),Sg=t=>t&&(qa(t)||At(t))&&At(t.then)&&At(t.catch);var B={isArray:Zn,isArrayBuffer:t0,isBuffer:jb,isFormData:eg,isArrayBufferView:Gb,isString:Wb,isNumber:r0,isBoolean:Vb,isObject:qa,isPlainObject:Ki,isUndefined:Ds,isDate:Jb,isFile:Xb,isBlob:Yb,isRegExp:pg,isFunction:At,isStream:Qb,isURLSearchParams:tg,isTypedArray:ug,isFileList:Zb,forEach:ti,merge:Du,extend:ng,trim:rg,stripBOM:sg,inherits:ig,toFlatObject:ag,kindOf:Fa,kindOfTest:rr,endsWith:og,toArray:cg,forEachEntry:fg,matchAll:dg,isHTMLForm:lg,hasOwnProperty:rl,hasOwnProp:rl,reduceDescriptors:a0,freezeMethods:yg,toObjectSet:xg,toCamelCase:hg,noop:bg,toFiniteNumber:gg,findKey:n0,global:s0,isContextDefined:i0,ALPHABET:o0,generateString:mg,isSpecCompliantForm:wg,toJSONObject:vg,isAsyncFn:Eg,isThenable:Sg};function ue(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s)}B.inherits(ue,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const c0=ue.prototype,u0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{u0[t]={value:t}});Object.defineProperties(ue,u0);Object.defineProperty(c0,"isAxiosError",{value:!0});ue.from=(t,e,r,n,s,i)=>{const a=Object.create(c0);return B.toFlatObject(t,a,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),ue.call(a,t.message,e,r,n,s),a.cause=t,a.name=t.name,i&&Object.assign(a,i),a};var _g=null;function Lu(t){return B.isPlainObject(t)||B.isArray(t)}function f0(t){return B.endsWith(t,"[]")?t.slice(0,-2):t}function sl(t,e,r){return t?t.concat(e).map(function(s,i){return s=f0(s),!r&&i?"["+s+"]":s}).join(r?".":""):e}function Ag(t){return B.isArray(t)&&!t.some(Lu)}const Tg=B.toFlatObject(B,{},null,function(e){return/^is[A-Z]/.test(e)});function za(t,e,r){if(!B.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=B.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,y){return!B.isUndefined(y[h])});const n=r.metaTokens,s=r.visitor||u,i=r.dots,a=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(e);if(!B.isFunction(s))throw new TypeError("visitor must be a function");function f(p){if(p===null)return"";if(B.isDate(p))return p.toISOString();if(!c&&B.isBlob(p))throw new ue("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(p)||B.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):k.Buffer.from(p):p}function u(p,h,y){let b=p;if(p&&!y&&typeof p=="object"){if(B.endsWith(h,"{}"))h=n?h:h.slice(0,-2),p=JSON.stringify(p);else if(B.isArray(p)&&Ag(p)||(B.isFileList(p)||B.endsWith(h,"[]"))&&(b=B.toArray(p)))return h=f0(h),b.forEach(function(v,E){!(B.isUndefined(v)||v===null)&&e.append(a===!0?sl([h],E,i):a===null?h:h+"[]",f(v))}),!1}return Lu(p)?!0:(e.append(sl(y,h,i),f(p)),!1)}const d=[],l=Object.assign(Tg,{defaultVisitor:u,convertValue:f,isVisitable:Lu});function x(p,h){if(!B.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+h.join("."));d.push(p),B.forEach(p,function(b,R){(!(B.isUndefined(b)||b===null)&&s.call(e,b,B.isString(R)?R.trim():R,h,l))===!0&&x(b,h?h.concat(R):[R])}),d.pop()}}if(!B.isObject(t))throw new TypeError("data must be an object");return x(t),e}function il(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Sf(t,e){this._pairs=[],t&&za(t,this,e)}const d0=Sf.prototype;d0.append=function(e,r){this._pairs.push([e,r])};d0.toString=function(e){const r=e?function(n){return e.call(this,n,il)}:il;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function Pg(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function l0(t,e,r){if(!e)return t;const n=r&&r.encode||Pg,s=r&&r.serialize;let i;if(s?i=s(e,r):i=B.isURLSearchParams(e)?e.toString():new Sf(e,r).toString(n),i){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Rg{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){B.forEach(this.handlers,function(n){n!==null&&e(n)})}}var al=Rg,h0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kg=typeof URLSearchParams<"u"?URLSearchParams:Sf,Cg=typeof FormData<"u"?FormData:null,Bg=typeof Blob<"u"?Blob:null,Ig={isBrowser:!0,classes:{URLSearchParams:kg,FormData:Cg,Blob:Bg},protocols:["http","https","file","blob","url","data"]};const p0=typeof window<"u"&&typeof document<"u",Og=(t=>p0&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),Ug=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")();var $g=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:p0,hasStandardBrowserWebWorkerEnv:Ug,hasStandardBrowserEnv:Og},Symbol.toStringTag,{value:"Module"})),Jt={...$g,...Ig};function Ng(t,e){return za(t,new Jt.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,i){return Jt.isNode&&B.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function Dg(t){return B.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Lg(t){const e={},r=Object.keys(t);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],e[i]=t[i];return e}function y0(t){function e(r,n,s,i){let a=r[i++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),c=i>=r.length;return a=!a&&B.isArray(s)?s.length:a,c?(B.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!o):((!s[a]||!B.isObject(s[a]))&&(s[a]=[]),e(r,n,s[a],i)&&B.isArray(s[a])&&(s[a]=Lg(s[a])),!o)}if(B.isFormData(t)&&B.isFunction(t.entries)){const r={};return B.forEachEntry(t,(n,s)=>{e(Dg(n),s,r,0)}),r}return null}function Mg(t,e,r){if(B.isString(t))try{return(e||JSON.parse)(t),B.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const _f={transitional:h0,adapter:["xhr","http"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=B.isObject(e);if(i&&B.isHTMLForm(e)&&(e=new FormData(e)),B.isFormData(e))return s?JSON.stringify(y0(e)):e;if(B.isArrayBuffer(e)||B.isBuffer(e)||B.isStream(e)||B.isFile(e)||B.isBlob(e))return e;if(B.isArrayBufferView(e))return e.buffer;if(B.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Ng(e,this.formSerializer).toString();if((o=B.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return za(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),Mg(e)):e}],transformResponse:[function(e){const r=this.transitional||_f.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(e&&B.isString(e)&&(n&&!this.responseType||s)){const a=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?ue.from(o,ue.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Jt.classes.FormData,Blob:Jt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],t=>{_f.headers[t]={}});var Af=_f;const Fg=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Hg=t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(function(a){s=a.indexOf(":"),r=a.substring(0,s).trim().toLowerCase(),n=a.substring(s+1).trim(),!(!r||e[r]&&Fg[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e};const ol=Symbol("internals");function ps(t){return t&&String(t).trim().toLowerCase()}function ji(t){return t===!1||t==null?t:B.isArray(t)?t.map(ji):String(t)}function qg(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const zg=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function eu(t,e,r,n,s){if(B.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!B.isString(e)){if(B.isString(n))return e.indexOf(n)!==-1;if(B.isRegExp(n))return n.test(e)}}function Kg(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function jg(t,e){const r=B.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,i,a){return this[n].call(this,e,s,i,a)},configurable:!0})})}class Ka{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function i(o,c,f){const u=ps(c);if(!u)throw new Error("header name must be a non-empty string");const d=B.findKey(s,u);(!d||s[d]===void 0||f===!0||f===void 0&&s[d]!==!1)&&(s[d||c]=ji(o))}const a=(o,c)=>B.forEach(o,(f,u)=>i(f,u,c));return B.isPlainObject(e)||e instanceof this.constructor?a(e,r):B.isString(e)&&(e=e.trim())&&!zg(e)?a(Hg(e),r):e!=null&&i(r,e,n),this}get(e,r){if(e=ps(e),e){const n=B.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return qg(s);if(B.isFunction(r))return r.call(this,s,n);if(B.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=ps(e),e){const n=B.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||eu(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function i(a){if(a=ps(a),a){const o=B.findKey(n,a);o&&(!r||eu(n,n[o],o,r))&&(delete n[o],s=!0)}}return B.isArray(e)?e.forEach(i):i(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!e||eu(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const r=this,n={};return B.forEach(this,(s,i)=>{const a=B.findKey(n,i);if(a){r[a]=ji(s),delete r[i];return}const o=e?Kg(i):String(i).trim();o!==i&&delete r[i],r[o]=ji(s),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return B.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&B.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[ol]=this[ol]={accessors:{}}).accessors,s=this.prototype;function i(a){const o=ps(a);n[o]||(jg(s,a),n[o]=!0)}return B.isArray(e)?e.forEach(i):i(e),this}}Ka.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);B.reduceDescriptors(Ka.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});B.freezeMethods(Ka);var dr=Ka;function tu(t,e){const r=this||Af,n=e||r,s=dr.from(n.headers);let i=n.data;return B.forEach(t,function(o){i=o.call(r,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function x0(t){return!!(t&&t.__CANCEL__)}function ri(t,e,r){ue.call(this,t??"canceled",ue.ERR_CANCELED,e,r),this.name="CanceledError"}B.inherits(ri,ue,{__CANCEL__:!0});function Gg(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new ue("Request failed with status code "+r.status,[ue.ERR_BAD_REQUEST,ue.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}var Wg=Jt.hasStandardBrowserEnv?{write(t,e,r,n,s,i){const a=[t+"="+encodeURIComponent(e)];B.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),B.isString(n)&&a.push("path="+n),B.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Vg(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Jg(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function b0(t,e){return t&&!Vg(e)?Jg(t,e):e}var Xg=Jt.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function s(i){let a=i;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=s(window.location.href),function(a){const o=B.isString(a)?s(a):a;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}();function Yg(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Zg(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,i=0,a;return e=e!==void 0?e:1e3,function(c){const f=Date.now(),u=n[i];a||(a=f),r[s]=c,n[s]=f;let d=i,l=0;for(;d!==s;)l+=r[d++],d=d%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),f-a<e)return;const x=u&&f-u;return x?Math.round(l*1e3/x):void 0}}function cl(t,e){let r=0;const n=Zg(50,250);return s=>{const i=s.loaded,a=s.lengthComputable?s.total:void 0,o=i-r,c=n(o),f=i<=a;r=i;const u={loaded:i,total:a,progress:a?i/a:void 0,bytes:o,rate:c||void 0,estimated:c&&a&&f?(a-i)/c:void 0,event:s};u[e?"download":"upload"]=!0,t(u)}}const Qg=typeof XMLHttpRequest<"u";var em=Qg&&function(t){return new Promise(function(r,n){let s=t.data;const i=dr.from(t.headers).normalize();let{responseType:a,withXSRFToken:o}=t,c;function f(){t.cancelToken&&t.cancelToken.unsubscribe(c),t.signal&&t.signal.removeEventListener("abort",c)}let u;if(B.isFormData(s)){if(Jt.hasStandardBrowserEnv||Jt.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((u=i.getContentType())!==!1){const[h,...y]=u?u.split(";").map(b=>b.trim()).filter(Boolean):[];i.setContentType([h||"multipart/form-data",...y].join("; "))}}let d=new XMLHttpRequest;if(t.auth){const h=t.auth.username||"",y=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(h+":"+y))}const l=b0(t.baseURL,t.url);d.open(t.method.toUpperCase(),l0(l,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function x(){if(!d)return;const h=dr.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),b={data:!a||a==="text"||a==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:h,config:t,request:d};Gg(function(v){r(v),f()},function(v){n(v),f()},b),d=null}if("onloadend"in d?d.onloadend=x:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(x)},d.onabort=function(){!d||(n(new ue("Request aborted",ue.ECONNABORTED,t,d)),d=null)},d.onerror=function(){n(new ue("Network Error",ue.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let y=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const b=t.transitional||h0;t.timeoutErrorMessage&&(y=t.timeoutErrorMessage),n(new ue(y,b.clarifyTimeoutError?ue.ETIMEDOUT:ue.ECONNABORTED,t,d)),d=null},Jt.hasStandardBrowserEnv&&(o&&B.isFunction(o)&&(o=o(t)),o||o!==!1&&Xg(l))){const h=t.xsrfHeaderName&&t.xsrfCookieName&&Wg.read(t.xsrfCookieName);h&&i.set(t.xsrfHeaderName,h)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&B.forEach(i.toJSON(),function(y,b){d.setRequestHeader(b,y)}),B.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),a&&a!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",cl(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",cl(t.onUploadProgress)),(t.cancelToken||t.signal)&&(c=h=>{!d||(n(!h||h.type?new ri(null,t,d):h),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(c),t.signal&&(t.signal.aborted?c():t.signal.addEventListener("abort",c)));const p=Yg(l);if(p&&Jt.protocols.indexOf(p)===-1){n(new ue("Unsupported protocol "+p+":",ue.ERR_BAD_REQUEST,t));return}d.send(s||null)})};const Mu={http:_g,xhr:em};B.forEach(Mu,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ul=t=>`- ${t}`,tm=t=>B.isFunction(t)||t===null||t===!1;var g0={getAdapter:t=>{t=B.isArray(t)?t:[t];const{length:e}=t;let r,n;const s={};for(let i=0;i<e;i++){r=t[i];let a;if(n=r,!tm(r)&&(n=Mu[(a=String(r)).toLowerCase()],n===void 0))throw new ue(`Unknown adapter '${a}'`);if(n)break;s[a||"#"+i]=n}if(!n){const i=Object.entries(s).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?i.length>1?`since :
`+i.map(ul).join(`
`):" "+ul(i[0]):"as no adapter specified";throw new ue("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:Mu};function ru(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ri(null,t)}function fl(t){return ru(t),t.headers=dr.from(t.headers),t.data=tu.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),g0.getAdapter(t.adapter||Af.adapter)(t).then(function(n){return ru(t),n.data=tu.call(t,t.transformResponse,n),n.headers=dr.from(n.headers),n},function(n){return x0(n)||(ru(t),n&&n.response&&(n.response.data=tu.call(t,t.transformResponse,n.response),n.response.headers=dr.from(n.response.headers))),Promise.reject(n)})}const dl=t=>t instanceof dr?t.toJSON():t;function Nn(t,e){e=e||{};const r={};function n(f,u,d){return B.isPlainObject(f)&&B.isPlainObject(u)?B.merge.call({caseless:d},f,u):B.isPlainObject(u)?B.merge({},u):B.isArray(u)?u.slice():u}function s(f,u,d){if(B.isUndefined(u)){if(!B.isUndefined(f))return n(void 0,f,d)}else return n(f,u,d)}function i(f,u){if(!B.isUndefined(u))return n(void 0,u)}function a(f,u){if(B.isUndefined(u)){if(!B.isUndefined(f))return n(void 0,f)}else return n(void 0,u)}function o(f,u,d){if(d in e)return n(f,u);if(d in t)return n(void 0,f)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(f,u)=>s(dl(f),dl(u),!0)};return B.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=c[u]||s,l=d(t[u],e[u],u);B.isUndefined(l)&&d!==o||(r[u]=l)}),r}const m0="1.6.7",Tf={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Tf[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const ll={};Tf.transitional=function(e,r,n){function s(i,a){return"[Axios v"+m0+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return(i,a,o)=>{if(e===!1)throw new ue(s(a," has been removed"+(r?" in "+r:"")),ue.ERR_DEPRECATED);return r&&!ll[a]&&(ll[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,a,o):!0}};function rm(t,e,r){if(typeof t!="object")throw new ue("options must be an object",ue.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const i=n[s],a=e[i];if(a){const o=t[i],c=o===void 0||a(o,i,t);if(c!==!0)throw new ue("option "+i+" must be "+c,ue.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ue("Unknown option "+i,ue.ERR_BAD_OPTION)}}var Fu={assertOptions:rm,validators:Tf};const gr=Fu.validators;class pa{constructor(e){this.defaults=e,this.interceptors={request:new al,response:new al}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Nn(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&Fu.assertOptions(n,{silentJSONParsing:gr.transitional(gr.boolean),forcedJSONParsing:gr.transitional(gr.boolean),clarifyTimeoutError:gr.transitional(gr.boolean)},!1),s!=null&&(B.isFunction(s)?r.paramsSerializer={serialize:s}:Fu.assertOptions(s,{encode:gr.function,serialize:gr.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=i&&B.merge(i.common,i[r.method]);i&&B.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),r.headers=dr.concat(a,i);const o=[];let c=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(r)===!1||(c=c&&h.synchronous,o.unshift(h.fulfilled,h.rejected))});const f=[];this.interceptors.response.forEach(function(h){f.push(h.fulfilled,h.rejected)});let u,d=0,l;if(!c){const p=[fl.bind(this),void 0];for(p.unshift.apply(p,o),p.push.apply(p,f),l=p.length,u=Promise.resolve(r);d<l;)u=u.then(p[d++],p[d++]);return u}l=o.length;let x=r;for(d=0;d<l;){const p=o[d++],h=o[d++];try{x=p(x)}catch(y){h.call(this,y);break}}try{u=fl.call(this,x)}catch(p){return Promise.reject(p)}for(d=0,l=f.length;d<l;)u=u.then(f[d++],f[d++]);return u}getUri(e){e=Nn(this.defaults,e);const r=b0(e.baseURL,e.url);return l0(r,e.params,e.paramsSerializer)}}B.forEach(["delete","get","head","options"],function(e){pa.prototype[e]=function(r,n){return this.request(Nn(n||{},{method:e,url:r,data:(n||{}).data}))}});B.forEach(["post","put","patch"],function(e){function r(n){return function(i,a,o){return this.request(Nn(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}pa.prototype[e]=r(),pa.prototype[e+"Form"]=r(!0)});var Gi=pa;class Pf{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(o=>{n.subscribe(o),i=o}).then(s);return a.cancel=function(){n.unsubscribe(i)},a},e(function(i,a,o){n.reason||(n.reason=new ri(i,a,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new Pf(function(s){e=s}),cancel:e}}}var nm=Pf;function sm(t){return function(r){return t.apply(null,r)}}function im(t){return B.isObject(t)&&t.isAxiosError===!0}const Hu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hu).forEach(([t,e])=>{Hu[e]=t});var am=Hu;function w0(t){const e=new Gi(t),r=e0(Gi.prototype.request,e);return B.extend(r,Gi.prototype,e,{allOwnKeys:!0}),B.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return w0(Nn(t,s))},r}const Oe=w0(Af);Oe.Axios=Gi;Oe.CanceledError=ri;Oe.CancelToken=nm;Oe.isCancel=x0;Oe.VERSION=m0;Oe.toFormData=za;Oe.AxiosError=ue;Oe.Cancel=Oe.CanceledError;Oe.all=function(e){return Promise.all(e)};Oe.spread=sm;Oe.isAxiosError=im;Oe.mergeConfig=Nn;Oe.AxiosHeaders=dr;Oe.formToJSON=t=>y0(B.isHTMLForm(t)?new FormData(t):t);Oe.getAdapter=g0.getAdapter;Oe.HttpStatusCode=am;Oe.default=Oe;var Rf=Oe,v0={};function Rt(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var om=Rt;Rt.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};Rt.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};Rt.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};Rt.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Rt.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};Rt.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};Rt.prototype.start=Rt.prototype.try;Rt.prototype.errors=function(){return this._errors};Rt.prototype.attempts=function(){return this._attempts};Rt.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var s=this._errors[n],i=s.message,a=(t[i]||0)+1;t[i]=a,a>=r&&(e=s,r=a)}return e};(function(t){var e=om;t.operation=function(r){var n=t.timeouts(r);return new e(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var s in r)n[s]=r[s];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],a=0;a<n.retries;a++)i.push(this.createTimeout(a,n));return r&&r.forever&&!i.length&&i.push(this.createTimeout(a,n)),i.sort(function(o,c){return o-c}),i},t.createTimeout=function(r,n){var s=n.randomize?Math.random()+1:1,i=Math.round(s*Math.max(n.minTimeout,1)*Math.pow(n.factor,r));return i=Math.min(i,n.maxTimeout),i},t.wrap=function(r,n,s){if(n instanceof Array&&(s=n,n=null),!s){s=[];for(var i in r)typeof r[i]=="function"&&s.push(i)}for(var a=0;a<s.length;a++){var o=s[a],c=r[o];r[o]=function(u){var d=t.operation(n),l=Array.prototype.slice.call(arguments,1),x=l.pop();l.push(function(p){d.retry(p)||(p&&(arguments[0]=d.mainError()),x.apply(this,arguments))}),d.attempt(function(){u.apply(r,l)})}.bind(r,c),r[o].options=n}}})(v0);var cm=v0,um=cm;function fm(t,e){function r(n,s){var i=e||{},a;"randomize"in i||(i.randomize=!0),a=um.operation(i);function o(u){s(u||new Error("Aborted"))}function c(u,d){if(u.bail){o(u);return}a.retry(u)?i.onRetry&&i.onRetry(u,d):s(a.mainError())}function f(u){var d;try{d=t(o,u)}catch(l){c(l,u);return}Promise.resolve(d).then(n).catch(function(x){c(x,u)})}a.attempt(f)}return new Promise(r)}var dm=fm,Mr=dm;function lm(t){class e extends t.arbundles.DataItem{Irys;signer;constructor(n,s,i){super(i?.dataIsRawTransaction===!0?k.Buffer.from(n):s.arbundles.createData(n,s.tokenConfig.getSigner(),{...i,anchor:i?.anchor??Gh.randomBytes(32).toString("base64").slice(0,32)}).getRaw()),this.Irys=s,this.signer=s.tokenConfig.getSigner()}sign(){return super.sign(this.signer)}get size(){return this.getRaw().length}async uploadWithReceipt(n){return(await this.Irys.uploader.uploadTransaction(this,{...n,getReceiptSignature:!0})).data}async upload(n){return(await this.Irys.uploader.uploadTransaction(this,n)).data}async getPrice(){return this.Irys.utils.getPrice(this.Irys.tokenConfig.name,this.size)}async isValid(){return t.arbundles.DataItem.verify(this.getRaw())}}return e}X.set({DECIMAL_PLACES:50});const hl=t=>new Promise(e=>setTimeout(e,t));class Ve{api;token;tokenConfig;arbundles;constructor(e,r,n){this.api=e,this.token=r,this.tokenConfig=n,this.arbundles=this.tokenConfig.irys.arbundles}static checkAndThrow(e,r,n){if(e?.status&&!(n??[]).includes(e.status)&&e.status!=200)throw new Error(`HTTP Error: ${r}: ${e.status} ${typeof e.data!="string"?e.statusText:e.data}`)}async getNonce(){const e=await this.api.get(`/account/withdrawals/${this.tokenConfig.name}?address=${this.tokenConfig.address}`);return Ve.checkAndThrow(e,"Getting withdrawal nonce"),e.data}async getBalance(e){const r=await this.api.get(`/account/balance/${this.tokenConfig.name}?address=${e}`);return Ve.checkAndThrow(r,"Getting balance"),new X(r.data.balance)}async getBundlerAddress(e){const r=await this.api.get("/info");Ve.checkAndThrow(r,"Getting Bundler address");const n=r.data.addresses[e];if(!n)throw new Error(`Specified bundler does not support token ${e}`);return n}async getPrice(e,r){const n=await this.api.get(`/price/${e}/${r}`);return Ve.checkAndThrow(n,"Getting storage cost"),new X(n.data)}async estimateFolderPrice(e){Array.isArray(e)&&(e={fileCount:e.length,totalBytes:e.reduce((a,o)=>a+o,0)});const r=e.headerSizeAvg??this.arbundles.createData("",this.tokenConfig.getSigner()).getRaw().length,s=(await this.getPrice(this.tokenConfig.name,r)).multipliedBy(e.fileCount);return(await this.getPrice(this.tokenConfig.name,e.totalBytes)).plus(s).decimalPlaces(0)}toAtomic(e){return new X(e).multipliedBy(this.tokenConfig.base[1])}fromAtomic(e){return new X(e).dividedBy(this.tokenConfig.base[1])}async confirmationPoll(e,r=30){if(this.tokenConfig.isSlow)return;r<0&&(r=0);let n,s;const i=async()=>{for(;!s;){if(await this.tokenConfig.getTx(e).then(f=>f?.confirmed).catch(f=>(n=f,!1)))return!0;await hl(1e3)}return!1},a=async()=>(await hl(r*1e3),s=!0,"RACE"),o=await Promise.race([a(),i()]);return o==="RACE"?(console.warn(`Tx ${e} didn't finalize after ${r} seconds ${n?` - ${n}`:""}`),n):o}unitConverter(e){return new X(e).dividedBy(this.tokenConfig.base[1])}async verifyReceipt(e){return Ve.verifyReceipt(this.arbundles,e)}static async verifyReceipt(e,r){const{id:n,deadlineHeight:s,timestamp:i,public:a,signature:o,version:c}=r,f=await e.deepHash([e.stringToBuffer("Bundlr"),e.stringToBuffer(c),e.stringToBuffer(n),e.stringToBuffer(s.toString()),e.stringToBuffer(i.toString())]);return await e.getCryptoDriver().verify(a,f,re.toBuffer(o))}async getReceipt(e){const r=`query {
      transactions(ids: ["${e}"]) {
        edges {
          node {
            receipt {
              signature
              timestamp
              version
              deadlineHeight
            }
          }
        }
      }
    }`,s=(await Mr(async()=>await this.api.post("/graphql",{query:r},{headers:{"content-type":"application/json"},validateStatus:o=>o===200})))?.data?.data?.transactions?.edges?.at(0)?.node?.receipt;if(!s)throw new Error(`Missing required receipt data from node for tx: ${e}`);const a={public:(await this.api.get("/public")).data,version:s.version,id:e,timestamp:s.timestamp,validatorSignatures:[],signature:s.signature,deadlineHeight:s.deadlineHeight,verify:async()=>!1};return a.verify=async()=>this.verifyReceipt(a),a}}async function hm(t,e,r){const n=t.tokenConfig,{deepHash:s,stringToBuffer:i}=n.irys.arbundles,o={publicKey:await n.getPublicKey(),currency:t.token,amount:new X(r).toString(),nonce:await t.getNonce(),signature:"",sigType:n.getSigner().signatureType},c=await s([i(o.currency),i(o.amount.toString()),i(o.nonce.toString())]);k.Buffer.isBuffer(o.publicKey)||(o.publicKey=k.Buffer.from(o.publicKey));const f=await n.sign(c),u=await n.verify(o.publicKey,c,f);o.publicKey=re.encode(o.publicKey),o.signature=re.encode(k.Buffer.from(f));const d=re.toBuffer(o.publicKey),l=re.toBuffer(o.signature),x=await s([i(o.currency),i(o.amount.toString()),i(o.nonce.toString())]),p=await n.verify(d,x,l),h=n.ownerToAddress(n.name=="arweave"?re.decode(o.publicKey):re.toBuffer(o.publicKey))===n.address;if(!(u||p||h))throw new Error(`Internal withdrawal validation failed - please report this!
Debug Info:${JSON.stringify(o)}`);const y=await e.post("/account/withdraw",o);if(y.status===202){const b=y.data.tx_id,R=await t.confirmationPoll(b);if(R!==!0)throw new Error(`Unable to confirm withdrawal tx ${b} ${R?R?.toString():""}`)}else Ve.checkAndThrow(y,"Withdrawing balance");return y.data}function E0(t,e){return function(){return t.apply(e,arguments)}}const{toString:pm}=Object.prototype,{getPrototypeOf:kf}=Object,ja=(t=>e=>{const r=pm.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),nr=t=>(t=t.toLowerCase(),e=>ja(e)===t),Ga=t=>e=>typeof e===t,{isArray:Qn}=Array,Ls=Ga("undefined");function ym(t){return t!==null&&!Ls(t)&&t.constructor!==null&&!Ls(t.constructor)&&Tt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const S0=nr("ArrayBuffer");function xm(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&S0(t.buffer),e}const bm=Ga("string"),Tt=Ga("function"),_0=Ga("number"),Wa=t=>t!==null&&typeof t=="object",gm=t=>t===!0||t===!1,Wi=t=>{if(ja(t)!=="object")return!1;const e=kf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},mm=nr("Date"),wm=nr("File"),vm=nr("Blob"),Em=nr("FileList"),Sm=t=>Wa(t)&&Tt(t.pipe),_m=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Tt(t.append)&&((e=ja(t))==="formdata"||e==="object"&&Tt(t.toString)&&t.toString()==="[object FormData]"))},Am=nr("URLSearchParams"),Tm=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ni(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),Qn(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{const i=r?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let o;for(n=0;n<a;n++)o=i[n],e.call(null,t[o],o,t)}}function A0(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const T0=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:$s)(),P0=t=>!Ls(t)&&t!==T0;function qu(){const{caseless:t}=P0(this)&&this||{},e={},r=(n,s)=>{const i=t&&A0(e,s)||s;Wi(e[i])&&Wi(n)?e[i]=qu(e[i],n):Wi(n)?e[i]=qu({},n):Qn(n)?e[i]=n.slice():e[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&ni(arguments[n],r);return e}const Pm=(t,e,r,{allOwnKeys:n}={})=>(ni(e,(s,i)=>{r&&Tt(s)?t[i]=E0(s,r):t[i]=s},{allOwnKeys:n}),t),Rm=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),km=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Cm=(t,e,r,n)=>{let s,i,a;const o={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)a=s[i],(!n||n(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=r!==!1&&kf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Bm=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},Im=t=>{if(!t)return null;if(Qn(t))return t;let e=t.length;if(!_0(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},Om=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&kf(Uint8Array)),Um=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=n.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},$m=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},Nm=nr("HTMLFormElement"),Dm=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),pl=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Lm=nr("RegExp"),R0=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};ni(r,(s,i)=>{let a;(a=e(s,i,t))!==!1&&(n[i]=a||s)}),Object.defineProperties(t,n)},Mm=t=>{R0(t,(e,r)=>{if(Tt(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(!!Tt(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Fm=(t,e)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return Qn(t)?n(t):n(String(t).split(e)),r},Hm=()=>{},qm=(t,e)=>(t=+t,Number.isFinite(t)?t:e),nu="abcdefghijklmnopqrstuvwxyz",yl="0123456789",k0={DIGIT:yl,ALPHA:nu,ALPHA_DIGIT:nu+nu.toUpperCase()+yl},zm=(t=16,e=k0.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function Km(t){return!!(t&&Tt(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const jm=t=>{const e=new Array(10),r=(n,s)=>{if(Wa(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const i=Qn(n)?[]:{};return ni(n,(a,o)=>{const c=r(a,s+1);!Ls(c)&&(i[o]=c)}),e[s]=void 0,i}}return n};return r(t,0)},Gm=nr("AsyncFunction"),Wm=t=>t&&(Wa(t)||Tt(t))&&Tt(t.then)&&Tt(t.catch);var I={isArray:Qn,isArrayBuffer:S0,isBuffer:ym,isFormData:_m,isArrayBufferView:xm,isString:bm,isNumber:_0,isBoolean:gm,isObject:Wa,isPlainObject:Wi,isUndefined:Ls,isDate:mm,isFile:wm,isBlob:vm,isRegExp:Lm,isFunction:Tt,isStream:Sm,isURLSearchParams:Am,isTypedArray:Om,isFileList:Em,forEach:ni,merge:qu,extend:Pm,trim:Tm,stripBOM:Rm,inherits:km,toFlatObject:Cm,kindOf:ja,kindOfTest:nr,endsWith:Bm,toArray:Im,forEachEntry:Um,matchAll:$m,isHTMLForm:Nm,hasOwnProperty:pl,hasOwnProp:pl,reduceDescriptors:R0,freezeMethods:Mm,toObjectSet:Fm,toCamelCase:Dm,noop:Hm,toFiniteNumber:qm,findKey:A0,global:T0,isContextDefined:P0,ALPHABET:k0,generateString:zm,isSpecCompliantForm:Km,toJSONObject:jm,isAsyncFn:Gm,isThenable:Wm};function fe(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s)}I.inherits(fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const C0=fe.prototype,B0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{B0[t]={value:t}});Object.defineProperties(fe,B0);Object.defineProperty(C0,"isAxiosError",{value:!0});fe.from=(t,e,r,n,s,i)=>{const a=Object.create(C0);return I.toFlatObject(t,a,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),fe.call(a,t.message,e,r,n,s),a.cause=t,a.name=t.name,i&&Object.assign(a,i),a};var Vm=null;function zu(t){return I.isPlainObject(t)||I.isArray(t)}function I0(t){return I.endsWith(t,"[]")?t.slice(0,-2):t}function xl(t,e,r){return t?t.concat(e).map(function(s,i){return s=I0(s),!r&&i?"["+s+"]":s}).join(r?".":""):e}function Jm(t){return I.isArray(t)&&!t.some(zu)}const Xm=I.toFlatObject(I,{},null,function(e){return/^is[A-Z]/.test(e)});function Va(t,e,r){if(!I.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=I.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,y){return!I.isUndefined(y[h])});const n=r.metaTokens,s=r.visitor||u,i=r.dots,a=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(e);if(!I.isFunction(s))throw new TypeError("visitor must be a function");function f(p){if(p===null)return"";if(I.isDate(p))return p.toISOString();if(!c&&I.isBlob(p))throw new fe("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(p)||I.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):k.Buffer.from(p):p}function u(p,h,y){let b=p;if(p&&!y&&typeof p=="object"){if(I.endsWith(h,"{}"))h=n?h:h.slice(0,-2),p=JSON.stringify(p);else if(I.isArray(p)&&Jm(p)||(I.isFileList(p)||I.endsWith(h,"[]"))&&(b=I.toArray(p)))return h=I0(h),b.forEach(function(v,E){!(I.isUndefined(v)||v===null)&&e.append(a===!0?xl([h],E,i):a===null?h:h+"[]",f(v))}),!1}return zu(p)?!0:(e.append(xl(y,h,i),f(p)),!1)}const d=[],l=Object.assign(Xm,{defaultVisitor:u,convertValue:f,isVisitable:zu});function x(p,h){if(!I.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+h.join("."));d.push(p),I.forEach(p,function(b,R){(!(I.isUndefined(b)||b===null)&&s.call(e,b,I.isString(R)?R.trim():R,h,l))===!0&&x(b,h?h.concat(R):[R])}),d.pop()}}if(!I.isObject(t))throw new TypeError("data must be an object");return x(t),e}function bl(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Cf(t,e){this._pairs=[],t&&Va(t,this,e)}const O0=Cf.prototype;O0.append=function(e,r){this._pairs.push([e,r])};O0.toString=function(e){const r=e?function(n){return e.call(this,n,bl)}:bl;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function Ym(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function U0(t,e,r){if(!e)return t;const n=r&&r.encode||Ym,s=r&&r.serialize;let i;if(s?i=s(e,r):i=I.isURLSearchParams(e)?e.toString():new Cf(e,r).toString(n),i){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Zm{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){I.forEach(this.handlers,function(n){n!==null&&e(n)})}}var gl=Zm,$0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Qm=typeof URLSearchParams<"u"?URLSearchParams:Cf,e1=typeof FormData<"u"?FormData:null,t1=typeof Blob<"u"?Blob:null,r1={isBrowser:!0,classes:{URLSearchParams:Qm,FormData:e1,Blob:t1},protocols:["http","https","file","blob","url","data"]};const N0=typeof window<"u"&&typeof document<"u",n1=(t=>N0&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),s1=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")();var i1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:N0,hasStandardBrowserWebWorkerEnv:s1,hasStandardBrowserEnv:n1},Symbol.toStringTag,{value:"Module"})),Xt={...i1,...r1};function a1(t,e){return Va(t,new Xt.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,i){return Xt.isNode&&I.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function o1(t){return I.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function c1(t){const e={},r=Object.keys(t);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],e[i]=t[i];return e}function D0(t){function e(r,n,s,i){let a=r[i++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),c=i>=r.length;return a=!a&&I.isArray(s)?s.length:a,c?(I.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!o):((!s[a]||!I.isObject(s[a]))&&(s[a]=[]),e(r,n,s[a],i)&&I.isArray(s[a])&&(s[a]=c1(s[a])),!o)}if(I.isFormData(t)&&I.isFunction(t.entries)){const r={};return I.forEachEntry(t,(n,s)=>{e(o1(n),s,r,0)}),r}return null}function u1(t,e,r){if(I.isString(t))try{return(e||JSON.parse)(t),I.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Bf={transitional:$0,adapter:["xhr","http"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=I.isObject(e);if(i&&I.isHTMLForm(e)&&(e=new FormData(e)),I.isFormData(e))return s?JSON.stringify(D0(e)):e;if(I.isArrayBuffer(e)||I.isBuffer(e)||I.isStream(e)||I.isFile(e)||I.isBlob(e))return e;if(I.isArrayBufferView(e))return e.buffer;if(I.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return a1(e,this.formSerializer).toString();if((o=I.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Va(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),u1(e)):e}],transformResponse:[function(e){const r=this.transitional||Bf.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(e&&I.isString(e)&&(n&&!this.responseType||s)){const a=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?fe.from(o,fe.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xt.classes.FormData,Blob:Xt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};I.forEach(["delete","get","head","post","put","patch"],t=>{Bf.headers[t]={}});var If=Bf;const f1=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var d1=t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(function(a){s=a.indexOf(":"),r=a.substring(0,s).trim().toLowerCase(),n=a.substring(s+1).trim(),!(!r||e[r]&&f1[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e};const ml=Symbol("internals");function ys(t){return t&&String(t).trim().toLowerCase()}function Vi(t){return t===!1||t==null?t:I.isArray(t)?t.map(Vi):String(t)}function l1(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const h1=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function su(t,e,r,n,s){if(I.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!I.isString(e)){if(I.isString(n))return e.indexOf(n)!==-1;if(I.isRegExp(n))return n.test(e)}}function p1(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function y1(t,e){const r=I.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,i,a){return this[n].call(this,e,s,i,a)},configurable:!0})})}class Ja{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function i(o,c,f){const u=ys(c);if(!u)throw new Error("header name must be a non-empty string");const d=I.findKey(s,u);(!d||s[d]===void 0||f===!0||f===void 0&&s[d]!==!1)&&(s[d||c]=Vi(o))}const a=(o,c)=>I.forEach(o,(f,u)=>i(f,u,c));return I.isPlainObject(e)||e instanceof this.constructor?a(e,r):I.isString(e)&&(e=e.trim())&&!h1(e)?a(d1(e),r):e!=null&&i(r,e,n),this}get(e,r){if(e=ys(e),e){const n=I.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return l1(s);if(I.isFunction(r))return r.call(this,s,n);if(I.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=ys(e),e){const n=I.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||su(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function i(a){if(a=ys(a),a){const o=I.findKey(n,a);o&&(!r||su(n,n[o],o,r))&&(delete n[o],s=!0)}}return I.isArray(e)?e.forEach(i):i(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!e||su(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const r=this,n={};return I.forEach(this,(s,i)=>{const a=I.findKey(n,i);if(a){r[a]=Vi(s),delete r[i];return}const o=e?p1(i):String(i).trim();o!==i&&delete r[i],r[o]=Vi(s),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return I.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&I.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[ml]=this[ml]={accessors:{}}).accessors,s=this.prototype;function i(a){const o=ys(a);n[o]||(y1(s,a),n[o]=!0)}return I.isArray(e)?e.forEach(i):i(e),this}}Ja.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);I.reduceDescriptors(Ja.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});I.freezeMethods(Ja);var lr=Ja;function iu(t,e){const r=this||If,n=e||r,s=lr.from(n.headers);let i=n.data;return I.forEach(t,function(o){i=o.call(r,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function L0(t){return!!(t&&t.__CANCEL__)}function si(t,e,r){fe.call(this,t??"canceled",fe.ERR_CANCELED,e,r),this.name="CanceledError"}I.inherits(si,fe,{__CANCEL__:!0});function x1(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new fe("Request failed with status code "+r.status,[fe.ERR_BAD_REQUEST,fe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}var b1=Xt.hasStandardBrowserEnv?{write(t,e,r,n,s,i){const a=[t+"="+encodeURIComponent(e)];I.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),I.isString(n)&&a.push("path="+n),I.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function g1(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function m1(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function M0(t,e){return t&&!g1(e)?m1(t,e):e}var w1=Xt.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function s(i){let a=i;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=s(window.location.href),function(a){const o=I.isString(a)?s(a):a;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}();function v1(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function E1(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,i=0,a;return e=e!==void 0?e:1e3,function(c){const f=Date.now(),u=n[i];a||(a=f),r[s]=c,n[s]=f;let d=i,l=0;for(;d!==s;)l+=r[d++],d=d%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),f-a<e)return;const x=u&&f-u;return x?Math.round(l*1e3/x):void 0}}function wl(t,e){let r=0;const n=E1(50,250);return s=>{const i=s.loaded,a=s.lengthComputable?s.total:void 0,o=i-r,c=n(o),f=i<=a;r=i;const u={loaded:i,total:a,progress:a?i/a:void 0,bytes:o,rate:c||void 0,estimated:c&&a&&f?(a-i)/c:void 0,event:s};u[e?"download":"upload"]=!0,t(u)}}const S1=typeof XMLHttpRequest<"u";var _1=S1&&function(t){return new Promise(function(r,n){let s=t.data;const i=lr.from(t.headers).normalize();let{responseType:a,withXSRFToken:o}=t,c;function f(){t.cancelToken&&t.cancelToken.unsubscribe(c),t.signal&&t.signal.removeEventListener("abort",c)}let u;if(I.isFormData(s)){if(Xt.hasStandardBrowserEnv||Xt.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((u=i.getContentType())!==!1){const[h,...y]=u?u.split(";").map(b=>b.trim()).filter(Boolean):[];i.setContentType([h||"multipart/form-data",...y].join("; "))}}let d=new XMLHttpRequest;if(t.auth){const h=t.auth.username||"",y=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(h+":"+y))}const l=M0(t.baseURL,t.url);d.open(t.method.toUpperCase(),U0(l,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function x(){if(!d)return;const h=lr.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),b={data:!a||a==="text"||a==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:h,config:t,request:d};x1(function(v){r(v),f()},function(v){n(v),f()},b),d=null}if("onloadend"in d?d.onloadend=x:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(x)},d.onabort=function(){!d||(n(new fe("Request aborted",fe.ECONNABORTED,t,d)),d=null)},d.onerror=function(){n(new fe("Network Error",fe.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let y=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const b=t.transitional||$0;t.timeoutErrorMessage&&(y=t.timeoutErrorMessage),n(new fe(y,b.clarifyTimeoutError?fe.ETIMEDOUT:fe.ECONNABORTED,t,d)),d=null},Xt.hasStandardBrowserEnv&&(o&&I.isFunction(o)&&(o=o(t)),o||o!==!1&&w1(l))){const h=t.xsrfHeaderName&&t.xsrfCookieName&&b1.read(t.xsrfCookieName);h&&i.set(t.xsrfHeaderName,h)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&I.forEach(i.toJSON(),function(y,b){d.setRequestHeader(b,y)}),I.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),a&&a!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",wl(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",wl(t.onUploadProgress)),(t.cancelToken||t.signal)&&(c=h=>{!d||(n(!h||h.type?new si(null,t,d):h),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(c),t.signal&&(t.signal.aborted?c():t.signal.addEventListener("abort",c)));const p=v1(l);if(p&&Xt.protocols.indexOf(p)===-1){n(new fe("Unsupported protocol "+p+":",fe.ERR_BAD_REQUEST,t));return}d.send(s||null)})};const Ku={http:Vm,xhr:_1};I.forEach(Ku,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const vl=t=>`- ${t}`,A1=t=>I.isFunction(t)||t===null||t===!1;var F0={getAdapter:t=>{t=I.isArray(t)?t:[t];const{length:e}=t;let r,n;const s={};for(let i=0;i<e;i++){r=t[i];let a;if(n=r,!A1(r)&&(n=Ku[(a=String(r)).toLowerCase()],n===void 0))throw new fe(`Unknown adapter '${a}'`);if(n)break;s[a||"#"+i]=n}if(!n){const i=Object.entries(s).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?i.length>1?`since :
`+i.map(vl).join(`
`):" "+vl(i[0]):"as no adapter specified";throw new fe("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:Ku};function au(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new si(null,t)}function El(t){return au(t),t.headers=lr.from(t.headers),t.data=iu.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),F0.getAdapter(t.adapter||If.adapter)(t).then(function(n){return au(t),n.data=iu.call(t,t.transformResponse,n),n.headers=lr.from(n.headers),n},function(n){return L0(n)||(au(t),n&&n.response&&(n.response.data=iu.call(t,t.transformResponse,n.response),n.response.headers=lr.from(n.response.headers))),Promise.reject(n)})}const Sl=t=>t instanceof lr?t.toJSON():t;function Dn(t,e){e=e||{};const r={};function n(f,u,d){return I.isPlainObject(f)&&I.isPlainObject(u)?I.merge.call({caseless:d},f,u):I.isPlainObject(u)?I.merge({},u):I.isArray(u)?u.slice():u}function s(f,u,d){if(I.isUndefined(u)){if(!I.isUndefined(f))return n(void 0,f,d)}else return n(f,u,d)}function i(f,u){if(!I.isUndefined(u))return n(void 0,u)}function a(f,u){if(I.isUndefined(u)){if(!I.isUndefined(f))return n(void 0,f)}else return n(void 0,u)}function o(f,u,d){if(d in e)return n(f,u);if(d in t)return n(void 0,f)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(f,u)=>s(Sl(f),Sl(u),!0)};return I.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=c[u]||s,l=d(t[u],e[u],u);I.isUndefined(l)&&d!==o||(r[u]=l)}),r}const H0="1.6.7",Of={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Of[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const _l={};Of.transitional=function(e,r,n){function s(i,a){return"[Axios v"+H0+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return(i,a,o)=>{if(e===!1)throw new fe(s(a," has been removed"+(r?" in "+r:"")),fe.ERR_DEPRECATED);return r&&!_l[a]&&(_l[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,a,o):!0}};function T1(t,e,r){if(typeof t!="object")throw new fe("options must be an object",fe.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const i=n[s],a=e[i];if(a){const o=t[i],c=o===void 0||a(o,i,t);if(c!==!0)throw new fe("option "+i+" must be "+c,fe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new fe("Unknown option "+i,fe.ERR_BAD_OPTION)}}var ju={assertOptions:T1,validators:Of};const mr=ju.validators;class ya{constructor(e){this.defaults=e,this.interceptors={request:new gl,response:new gl}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Dn(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&ju.assertOptions(n,{silentJSONParsing:mr.transitional(mr.boolean),forcedJSONParsing:mr.transitional(mr.boolean),clarifyTimeoutError:mr.transitional(mr.boolean)},!1),s!=null&&(I.isFunction(s)?r.paramsSerializer={serialize:s}:ju.assertOptions(s,{encode:mr.function,serialize:mr.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=i&&I.merge(i.common,i[r.method]);i&&I.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),r.headers=lr.concat(a,i);const o=[];let c=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(r)===!1||(c=c&&h.synchronous,o.unshift(h.fulfilled,h.rejected))});const f=[];this.interceptors.response.forEach(function(h){f.push(h.fulfilled,h.rejected)});let u,d=0,l;if(!c){const p=[El.bind(this),void 0];for(p.unshift.apply(p,o),p.push.apply(p,f),l=p.length,u=Promise.resolve(r);d<l;)u=u.then(p[d++],p[d++]);return u}l=o.length;let x=r;for(d=0;d<l;){const p=o[d++],h=o[d++];try{x=p(x)}catch(y){h.call(this,y);break}}try{u=El.call(this,x)}catch(p){return Promise.reject(p)}for(d=0,l=f.length;d<l;)u=u.then(f[d++],f[d++]);return u}getUri(e){e=Dn(this.defaults,e);const r=M0(e.baseURL,e.url);return U0(r,e.params,e.paramsSerializer)}}I.forEach(["delete","get","head","options"],function(e){ya.prototype[e]=function(r,n){return this.request(Dn(n||{},{method:e,url:r,data:(n||{}).data}))}});I.forEach(["post","put","patch"],function(e){function r(n){return function(i,a,o){return this.request(Dn(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}ya.prototype[e]=r(),ya.prototype[e+"Form"]=r(!0)});var Ji=ya;class Uf{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(o=>{n.subscribe(o),i=o}).then(s);return a.cancel=function(){n.unsubscribe(i)},a},e(function(i,a,o){n.reason||(n.reason=new si(i,a,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new Uf(function(s){e=s}),cancel:e}}}var P1=Uf;function R1(t){return function(r){return t.apply(null,r)}}function k1(t){return I.isObject(t)&&t.isAxiosError===!0}const Gu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gu).forEach(([t,e])=>{Gu[e]=t});var C1=Gu;function q0(t){const e=new Ji(t),r=E0(Ji.prototype.request,e);return I.extend(r,Ji.prototype,e,{allOwnKeys:!0}),I.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return q0(Dn(t,s))},r}const Ue=q0(If);Ue.Axios=Ji;Ue.CanceledError=si;Ue.CancelToken=P1;Ue.isCancel=L0;Ue.VERSION=H0;Ue.toFormData=Va;Ue.AxiosError=fe;Ue.Cancel=Ue.CanceledError;Ue.all=function(e){return Promise.all(e)};Ue.spread=R1;Ue.isAxiosError=k1;Ue.mergeConfig=Dn;Ue.AxiosHeaders=lr;Ue.formToJSON=t=>D0(I.isHTMLForm(t)?new FormData(t):t);Ue.getAdapter=F0.getAdapter;Ue.HttpStatusCode=C1;Ue.default=Ue;var B1=Ue;class I1{queryVars={};queryFields;queryInfo;_query;url;config;resultTracker={numPages:0,numResults:0,done:!1};constructor({url:e,retryConfig:r,query:n,queryName:s,opts:i}){if(!e)throw new Error("URL is required");if(this.url=new URL(e),this.config={first:!1,userProvided:!1,numPages:1/0,numResults:1e3,retryOpts:{retries:3,maxTimeout:2e3,minTimeout:500,...r}},n===!1)return this;if(!n)throw new Error(`Unable to find query with name ${s}`);if(this.queryInfo={...n},this.queryFields=n.query,s.includes("arweave")&&this.url.host==="node1.bundlr.network"&&(this.url=new URL("https://arweave.net/graphql")),!i?.skipVariableSetters)for(const a of Object.keys(n.vars)){if(this[a])throw new Error(`Field setter ${a} has a key conflict - disable with opts.skipVariableSetters OR change the field name and add to query.remapVars`);this[a]=o=>(this.queryVars[a]=o,this)}return this}buildQuery(){if(this.config.userProvided)return this;const e=c=>JSON.stringify(c,(f,u)=>{if(u instanceof Array)return u[0];if(typeof u=="object")return u;if(u!==!1)return""}).replaceAll(":","").replaceAll('"',"").replaceAll(",",`
          `),r=e(this.queryFields),n=e({pageInfo:{[this.queryInfo.paging?.hasNextPage??"hasNextPage"]:void 0}}).slice(1,-1),s=this.queryInfo.enumValues,i={...this.queryInfo.vars,...this.queryVars};for(const[c,f]of Object.entries(this.queryInfo.remapVars??{}))if(i?.[c]!==void 0){if(typeof f=="function"){const u=f(c,i[c],i);if(!u)continue;const[d,l]=u;if(i[d]=l,d===c)continue}else i[f]=i[c];i[c]=void 0}const a=JSON.stringify(i,function(c,f){return f===void 0||f instanceof Array||typeof f=="object"||typeof f=="number"||s?.includes(c)?f:`'${f}'`}).replaceAll('"',"").replaceAll("'",'"').slice(1,-1);if(!this?.queryInfo?.name)throw new Error("Query name is undefined!");const o=this.queryInfo.paging?`query {
      ${this.queryInfo.name}(
        ${a}
      ) {
        edges {
          cursor
          node ${r}
        }
        ${n}
      }
    }`:`query {
    ${this.queryInfo.name}(
      ${a}
    ) 
    ${r}
  }`;return this._query=o,this}async getPage(){if(this.resultTracker.done)return;if(this.buildQuery(),!this._query)throw new Error("Unable to run undefined query");let e;try{e=await Mr(async n=>{const s=await B1(this.url.toString(),{method:"post",headers:{"Content-Type":"application/json"},data:{query:this._query}});if(s.data.errors)throw s;return s},this.config.retryOpts)}catch(n){throw new Error(`Error running query
 ${this._query} - ${n.message?n.message+" -":""} (${JSON.stringify(n?.data?.errors.map(s=>s.message)??n?.errors??n)}) `)}if(this.config.userProvided)return this.trimmer([e.data.data].flat(20));const r=e.data.data[this.queryInfo.name];if(this.queryInfo.paging){const n=r.pageInfo[this.queryInfo.paging.hasNextPage]?r.edges.at(-1)[this.queryInfo.paging.cursor]:void 0;return this.queryVars.after=n,this.trimmer(r.edges.map(s=>s.node))}return this.trimmer([r].flat(20))}trimmer(e){const r=++this.resultTracker.numPages,n=this.resultTracker.numResults+=e.length;if(e.length===0)return this.resultTracker.done=!0,e;if(r>=this?.config?.numPages&&(this.resultTracker.done=!0),n>=this?.config?.numResults){this.resultTracker.done=!0;const s=this.config.numResults-(n-e.length);return e.slice(0,s)}return e}async first(){return(await this.getPage())?.at(0)??void 0}maxPages(e){return this.config.numPages=e,this}limit(e){return this.config.numResults=e,this}async all(){const e=[];do{const r=await this.getPage();if(!r)break;e.push(...r)}while(this.queryVars.after);return e}async*generator(){do{const e=await this.getPage();if(!e)return;for(const r of e)yield r}while(this.queryVars.after)}stream(){return Ns.Readable.from(this.generator())}query(e){return this._query=e,this.config.userProvided=!0,this}fields(e,r=!1){const n=(s,i,a)=>{for(const o of Object.keys(a)){let c=i[o];Array.isArray(c)&&(c=c[0]);const f=a[o];if(c===void 0)throw new Error(`Illegal field ${s}${o}`);typeof f=="object"&&n(s+o+".",c,f)}};return r||n("",this.queryFields,e),this.queryFields=e,this}variables(e){return this.queryVars={...this.queryVars,...e},this}async toQuery(){return await this.buildQuery(),this._query}tReturn(){return"tReturn"}tQuery(){return"tQuery"}tVars(){return"tVars"}async then(e,r){return this.all().then(e,r)}async catch(e){return this.then().catch(e)}async finally(e){return this.then().finally(e)}}const O1={id:"",timestamp:0,height:"",previous:""},U1={ids:void 0,minHeight:void 0,maxHeight:void 0,pageSize:10,after:void 0,sort:"DESC"},$1={name:"blocks",query:O1,vars:U1,enumValues:["sort"],remapVars:{pageSize:"first",sort:(t,e)=>[t,e==="ASC"?"HEIGHT_ASC":"HEIGHT_DESC"],minHeight:(t,e,r)=>{r.height={...r.height,min:e},r.minHeight=void 0},maxHeight:(t,e,r)=>{r.height={...r.height,max:e},r.maxHeight=void 0}},paging:{hasNextPage:"hasNextPage",cursor:"cursor"}},N1={id:"",anchor:"",signature:"",recipient:"",owner:{address:"",key:""},fee:{winston:"",ar:""},quantity:{winston:"",ar:""},data:{size:"",type:""},tags:[{name:"",value:""}],block:{id:"",timestamp:0,height:0,previous:""},bundledIn:{id:""}},D1={ids:void 0,from:void 0,to:void 0,tags:void 0,bundledIn:void 0,minHeight:void 0,maxHeight:void 0,pageSize:10,after:void 0,sort:"DESC"},L1={name:"transactions",query:N1,enumValues:["sort"],vars:D1,remapVars:{pageSize:"first",from:"owners",to:"recipients",sort:(t,e)=>[t,e==="ASC"?"HEIGHT_ASC":"HEIGHT_DESC"],minHeight:(t,e,r)=>{r.block={...r.block,min:e},r.minHeight=void 0},maxHeight:(t,e,r)=>{r.block={...r.block,max:e},r.maxHeight=void 0}},paging:{hasNextPage:"hasNextPage",cursor:"cursor"}},M1={id:"",receipt:{deadlineHeight:0,signature:"",timestamp:0,version:""},tags:[{name:"",value:""}],address:"",token:"",signature:"",timestamp:0},F1={ids:void 0,after:void 0,token:void 0,from:void 0,pageSize:100,sort:"ASC",tags:void 0,fromTimestamp:void 0,toTimestamp:void 0},H1={name:"transactions",query:M1,enumValues:["order"],vars:F1,remapVars:{pageSize:"first",sort:"order",from:"owners",fromTimestamp:(t,e,r)=>{r.timestamp={...r.timestamp,from:new Date(e).getTime()},r.fromTimestamp=void 0},toTimestamp:(t,e,r)=>{r.timestamp={...r.timestamp,to:new Date(e).getTime()},r.toTimestamp=void 0}},paging:{hasNextPage:"hasNextPage",cursor:"cursor"}},q1={"irys:transactions":H1,"arweave:transactions":L1,"arweave:blocks":$1};class Al{opts;constructor(e={url:new URL("https://node1.bundlr.network/graphql")}){if(!e.url)throw new Error("URL is required");e.url=new URL(e.url),this.opts=e}search(e,r){const n=r?.query??q1[e];return new I1({...this.opts,query:n,queryName:e})}}class z0{api;utils;uploader;funder;address;token;tokenConfig;provenance;transactions;_readyPromise;url;arbundles;IrysTransaction;static VERSION="0.0.2";constructor({url:e,arbundles:r}){this.url=e,this.arbundles=r,this.IrysTransaction=lm(this)}get signer(){return this.tokenConfig.getSigner()}get search(){const e=new Al({url:new URL("/graphql",this.url)});return e.search.bind(e)}query(e){return new Al(e??{url:this.url})}async withdrawBalance(e){return hm(this.utils,this.api,e)}async getLoadedBalance(){if(!this.address)throw new Error("address is undefined");return this.utils.getBalance(this.address)}async getBalance(e){return this.utils.getBalance(e)}async fund(e,r){return this.funder.fund(e,r)}async getPrice(e){return this.utils.getPrice(this.token,e)}async verifyReceipt(e){return Ve.verifyReceipt(this.arbundles,e)}createTransaction(e,r){return new this.IrysTransaction(e,this,r)}getSigner(){return this.tokenConfig.getSigner()}async upload(e,r){return this.uploader.uploadData(e,r)}async uploadWithReceipt(e,r){return this.uploader.uploadData(e,{...r,upload:{getReceiptSignature:!0}})}async ready(){return this.tokenConfig.ready&&await this.tokenConfig.ready(),this.address=this.tokenConfig.address,this}get transaction(){const e=this;return{fromRaw(r){return new e.IrysTransaction(r,e,{dataIsRawTransaction:!0})}}}}class z1{_instance;cookieMap=new Map;config;constructor(e){e&&this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e),this._instance=void 0}getConfig(){return this.config}async requestInterceptor(e){const r=this.cookieMap.get(new URL(e.baseURL??"").host);return r&&(e.headers.cookie=r),e}async responseInterceptor(e){const r=e.headers?.["set-cookie"];return r&&this.cookieMap.set(e.request.host,r),e}mergeDefaults(e){return{url:e.url,timeout:e.timeout??2e4,logging:e.logging??!1,logger:e.logger??console.log,headers:{...e.headers,"x-irys-js-sdk-version":z0.VERSION},withCredentials:e.withCredentials??!1,retry:{retries:3,maxTimeout:5e3}}}async get(e,r){try{return await this.request(e,{...r,method:"GET"})}catch(n){if(n.response?.status)return n.response;throw n}}async post(e,r,n){try{return await this.request(e,{data:r,...n,method:"POST"})}catch(s){if(s.response?.status)return s.response;throw s}}get instance(){if(this._instance)return this._instance;const e=Rf.create({baseURL:this.config.url.toString(),timeout:this.config.timeout,maxContentLength:1024*1024*512,headers:this.config.headers,withCredentials:this.config.withCredentials});return this.config.withCredentials&&(e.interceptors.request.use(this.requestInterceptor.bind(this)),e.interceptors.response.use(this.responseInterceptor.bind(this))),this.config.logging&&(e.interceptors.request.use(r=>(this.config.logger(`Requesting: ${r.baseURL}/${r.url}`),r)),e.interceptors.response.use(r=>(this.config.logger(`Response: ${r.config.url} - ${r.status}`),r))),this._instance=e}async request(e,r){const n=this.instance,s=r?.url??new URL(e,this.config.url).toString();return Mr(i=>n({...r,url:s}),{...this.config.retry,...r?.retry})}}class K1{utils;constructor(e){this.utils=e}async fund(e,r=1){const n=new X(e);if(!n.isInteger())throw new Error("must use an integer for funding amount");const s=this.utils.tokenConfig,i=await this.utils.getBundlerAddress(this.utils.token);let a;if(s.needsFee){const d=await s.getFee(s.base[0]==="winston"?0:n,i);a=X.isBigNumber(d)?d.multipliedBy(r).integerValue(X.ROUND_CEIL):d}const o=await s.createTx(n,i,a);let c;try{c=await s.sendTx(o.tx)}catch(d){throw d}if(o.txId??=c,!o.txId)throw new Error("Undefined transaction ID");Ve.checkAndThrow(c,`Sending transaction to the ${this.utils.token} network`);let f=await this.utils.confirmationPoll(o.txId);if(!await this.submitTransaction(o.txId).catch(d=>{f=d}))throw new Error(`failed to post funding tx - ${o.txId} - keep this id! 
 ${f?` - ${f?.message??f}`:""}`);return{reward:X.isBigNumber(a)?a.toString():JSON.stringify(a),target:i,quantity:n.toString(),id:o.txId}}async submitTransaction(e){return await Mr(async()=>{const r=await this.utils.api.post(`/account/balance/${this.utils.token}`,{tx_id:e});return Ve.checkAndThrow(r,`Posting transaction ${e} information to the bundler`,[202]),r},{retries:5,maxTimeout:1e3,minTimeout:100,randomize:!0})}async submitFundTransaction(e){return this.submitTransaction(e)}}const j1="logger/5.7.0";let Tl=!1,Pl=!1;const Xi={debug:1,default:2,info:2,warning:3,error:4,off:5};let Rl=Xi.default,ou=null;function G1(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const kl=G1();var Wu;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(Wu||(Wu={}));var Nt;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(Nt||(Nt={}));const Cl="0123456789abcdef";class D{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();Xi[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(Rl>Xi[n])&&console.log.apply(console,r)}debug(...e){this._log(D.levels.DEBUG,e)}info(...e){this._log(D.levels.INFO,e)}warn(...e){this._log(D.levels.WARNING,e)}makeError(e,r,n){if(Pl)return this.makeError("censored error",r,{});r||(r=D.errors.UNKNOWN_ERROR),n||(n={});const s=[];Object.keys(n).forEach(c=>{const f=n[c];try{if(f instanceof Uint8Array){let u="";for(let d=0;d<f.length;d++)u+=Cl[f[d]>>4],u+=Cl[f[d]&15];s.push(c+"=Uint8Array(0x"+u+")")}else s.push(c+"="+JSON.stringify(f))}catch{s.push(c+"="+JSON.stringify(n[c].toString()))}}),s.push(`code=${r}`),s.push(`version=${this.version}`);const i=e;let a="";switch(r){case Nt.NUMERIC_FAULT:{a="NUMERIC_FAULT";const c=e;switch(c){case"overflow":case"underflow":case"division-by-zero":a+="-"+c;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result";break}break}case Nt.CALL_EXCEPTION:case Nt.INSUFFICIENT_FUNDS:case Nt.MISSING_NEW:case Nt.NONCE_EXPIRED:case Nt.REPLACEMENT_UNDERPRICED:case Nt.TRANSACTION_REPLACED:case Nt.UNPREDICTABLE_GAS_LIMIT:a=r;break}a&&(e+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),s.length&&(e+=" ("+s.join(", ")+")");const o=new Error(e);return o.reason=i,o.code=r,Object.keys(n).forEach(function(c){o[c]=n[c]}),o}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,D.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,s){e||this.throwError(r,n,s)}assertArgument(e,r,n,s){e||this.throwArgumentError(r,n,s)}checkNormalize(e){kl&&this.throwError("platform missing String.prototype.normalize",D.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:kl})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,D.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,D.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,D.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,D.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",D.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",D.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",D.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return ou||(ou=new D(j1)),ou}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",D.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Tl){if(!e)return;this.globalLogger().throwError("error censorship permanent",D.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Pl=!!e,Tl=!!r}static setLogLevel(e){const r=Xi[e.toLowerCase()];if(r==null){D.globalLogger().warn("invalid log level - "+e);return}Rl=r}static from(e){return new D(e)}}D.errors=Nt;D.levels=Wu;const W1="bytes/5.7.0",Re=new D(W1);function K0(t){return!!t.toHexString}function Bn(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return Bn(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function $f(t){return Ie(t)&&!(t.length%2)||Xa(t)}function Bl(t){return typeof t=="number"&&t==t&&t%1===0}function Xa(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!Bl(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!Bl(r)||r<0||r>=256)return!1}return!0}function F(t,e){if(e||(e={}),typeof t=="number"){Re.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),Bn(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),K0(t)&&(t=t.toHexString()),Ie(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":Re.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let s=0;s<r.length;s+=2)n.push(parseInt(r.substring(s,s+2),16));return Bn(new Uint8Array(n))}return Xa(t)?Bn(new Uint8Array(t)):Re.throwArgumentError("invalid arrayify value","value",t)}function it(t){const e=t.map(s=>F(s)),r=e.reduce((s,i)=>s+i.length,0),n=new Uint8Array(r);return e.reduce((s,i)=>(n.set(i,s),s+i.length),0),Bn(n)}function hr(t){let e=F(t);if(e.length===0)return e;let r=0;for(;r<e.length&&e[r]===0;)r++;return r&&(e=e.slice(r)),e}function V1(t,e){t=F(t),t.length>e&&Re.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),Bn(r)}function Ie(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const cu="0123456789abcdef";function W(t,e){if(e||(e={}),typeof t=="number"){Re.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=cu[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),K0(t))return t.toHexString();if(Ie(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":Re.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(Xa(t)){let r="0x";for(let n=0;n<t.length;n++){let s=t[n];r+=cu[(s&240)>>4]+cu[s&15]}return r}return Re.throwArgumentError("invalid hexlify value","value",t)}function j0(t){if(typeof t!="string")t=W(t);else if(!Ie(t)||t.length%2)return null;return(t.length-2)/2}function Xr(t,e,r){return typeof t!="string"?t=W(t):(!Ie(t)||t.length%2)&&Re.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function Wr(t){let e="0x";return t.forEach(r=>{e+=W(r).substring(2)}),e}function at(t,e){for(typeof t!="string"?t=W(t):Ie(t)||Re.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&Re.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function es(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if($f(t)){let r=F(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=W(r.slice(0,32)),e.s=W(r.slice(32,64))):r.length===65?(e.r=W(r.slice(0,32)),e.s=W(r.slice(32,64)),e.v=r[64]):Re.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:Re.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=W(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const s=V1(F(e._vs),32);e._vs=W(s);const i=s[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=i:e.recoveryParam!==i&&Re.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),s[0]&=127;const a=W(s);e.s==null?e.s=a:e.s!==a&&Re.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?Re.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const s=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==s&&Re.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!Ie(e.r)?Re.throwArgumentError("signature missing or invalid r","signature",t):e.r=at(e.r,32),e.s==null||!Ie(e.s)?Re.throwArgumentError("signature missing or invalid s","signature",t):e.s=at(e.s,32);const r=F(e.s);r[0]>=128&&Re.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=W(r);e._vs&&(Ie(e._vs)||Re.throwArgumentError("signature invalid _vs","signature",t),e._vs=at(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&Re.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function Il(t){return t=es(t),W(it([t.r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}const J1="bignumber/5.7.0";var xa=Y.BN;const or=new D(J1),uu={},Ol=9007199254740991;let Ul=!1;class J{constructor(e,r){e!==uu&&or.throwError("cannot call constructor directly; use BigNumber.from",D.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return nt(se(this).fromTwos(e))}toTwos(e){return nt(se(this).toTwos(e))}abs(){return this._hex[0]==="-"?J.from(this._hex.substring(1)):this}add(e){return nt(se(this).add(se(e)))}sub(e){return nt(se(this).sub(se(e)))}div(e){return J.from(e).isZero()&&xt("division-by-zero","div"),nt(se(this).div(se(e)))}mul(e){return nt(se(this).mul(se(e)))}mod(e){const r=se(e);return r.isNeg()&&xt("division-by-zero","mod"),nt(se(this).umod(r))}pow(e){const r=se(e);return r.isNeg()&&xt("negative-power","pow"),nt(se(this).pow(r))}and(e){const r=se(e);return(this.isNegative()||r.isNeg())&&xt("unbound-bitwise-result","and"),nt(se(this).and(r))}or(e){const r=se(e);return(this.isNegative()||r.isNeg())&&xt("unbound-bitwise-result","or"),nt(se(this).or(r))}xor(e){const r=se(e);return(this.isNegative()||r.isNeg())&&xt("unbound-bitwise-result","xor"),nt(se(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&xt("negative-width","mask"),nt(se(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&xt("negative-width","shl"),nt(se(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&xt("negative-width","shr"),nt(se(this).shrn(e))}eq(e){return se(this).eq(se(e))}lt(e){return se(this).lt(se(e))}lte(e){return se(this).lte(se(e))}gt(e){return se(this).gt(se(e))}gte(e){return se(this).gte(se(e))}isNegative(){return this._hex[0]==="-"}isZero(){return se(this).isZero()}toNumber(){try{return se(this).toNumber()}catch{xt("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return or.throwError("this platform does not support BigInt",D.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?Ul||(Ul=!0,or.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?or.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",D.errors.UNEXPECTED_ARGUMENT,{}):or.throwError("BigNumber.toString does not accept parameters",D.errors.UNEXPECTED_ARGUMENT,{})),se(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof J)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new J(uu,Ms(e)):e.match(/^-?[0-9]+$/)?new J(uu,Ms(new xa(e))):or.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&xt("underflow","BigNumber.from",e),(e>=Ol||e<=-Ol)&&xt("overflow","BigNumber.from",e),J.from(String(e));const r=e;if(typeof r=="bigint")return J.from(r.toString());if(Xa(r))return J.from(W(r));if(r)if(r.toHexString){const n=r.toHexString();if(typeof n=="string")return J.from(n)}else{let n=r._hex;if(n==null&&r.type==="BigNumber"&&(n=r.hex),typeof n=="string"&&(Ie(n)||n[0]==="-"&&Ie(n.substring(1))))return J.from(n)}return or.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function Ms(t){if(typeof t!="string")return Ms(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&or.throwArgumentError("invalid hex","value",t),t=Ms(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function nt(t){return J.from(Ms(t))}function se(t){const e=J.from(t).toHexString();return e[0]==="-"?new xa("-"+e.substring(3),16):new xa(e.substring(2),16)}function xt(t,e,r){const n={fault:t,operation:e};return r!=null&&(n.value=r),or.throwError(t,D.errors.NUMERIC_FAULT,n)}function X1(t){return new xa(t,36).toString(16)}class Y1{publicKey;signatureType;signatureLength;ownerLength;pem;static verify(e,r,n,s){throw new Error("You must implement verify method on child")}}var pe;(function(t){t[t.ARWEAVE=1]="ARWEAVE",t[t.ED25519=2]="ED25519",t[t.ETHEREUM=3]="ETHEREUM",t[t.SOLANA=4]="SOLANA",t[t.INJECTEDAPTOS=5]="INJECTEDAPTOS",t[t.MULTIAPTOS=6]="MULTIAPTOS",t[t.TYPEDETHEREUM=7]="TYPEDETHEREUM"})(pe||(pe={}));const Se={[pe.ARWEAVE]:{sigLength:512,pubLength:512,sigName:"arweave"},[pe.ED25519]:{sigLength:64,pubLength:32,sigName:"ed25519"},[pe.ETHEREUM]:{sigLength:65,pubLength:65,sigName:"ethereum"},[pe.SOLANA]:{sigLength:64,pubLength:32,sigName:"solana"},[pe.INJECTEDAPTOS]:{sigLength:64,pubLength:32,sigName:"injectedAptos"},[pe.MULTIAPTOS]:{sigLength:64*32+4,pubLength:32*32+1,sigName:"multiAptos"},[pe.TYPEDETHEREUM]:{sigLength:65,pubLength:42,sigName:"typedEthereum"}};class ii{_key;pk;ownerLength=Se[2].pubLength;signatureLength=Se[2].sigLength;_publicKey;get publicKey(){return this._publicKey}signatureType=2;constructor(e,r){this._key=e,this.pk=r}get key(){throw new Error("You must implement `key`")}sign(e){return _b(k.Buffer.from(e),k.Buffer.from(this.key))}static async verify(e,r,n){let s=e;return typeof e=="string"&&(s=re.toBuffer(e)),Da(k.Buffer.from(n),k.Buffer.from(r),k.Buffer.from(s))}}function tt(t){let e=0;for(const s of t)e+=s.byteLength;const r=new Uint8Array(e);let n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let s=1;s<t.length;s++)r.set(new Uint8Array(t[s]),n),n+=t[s].byteLength;return r}function G0(t){const e=Dt(t);return Nf(e)}function Nf(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}function ye(t){return new TextEncoder().encode(t)}function Vu(t){return Mt(ye(t))}function Dt(t){return new Uint8Array(bb(J0(t)))}function W0(t){return gb(new Uint8Array(t))}function Mt(t){return V0(W0(t))}function V0(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function J0(t){t=t.replace(/\-/g,"+").replace(/\_/g,"/");let e;return t.length%4==0?e=0:e=4-t.length%4,t.concat("=".repeat(e))}function Z1(t){return new X(t).shiftedBy(-12)}function Q1(t){return new X(t).shiftedBy(12)}var ew=Object.freeze(Object.defineProperty({__proto__:null,concatBuffers:tt,b64UrlToString:G0,bufferToString:Nf,stringToBuffer:ye,stringToB64Url:Vu,b64UrlToBuffer:Dt,bufferTob64:W0,bufferTob64Url:Mt,b64UrlEncode:V0,b64UrlDecode:J0,winstonToAr:Z1,arToWinston:Q1},Symbol.toStringTag,{value:"Module"}));class Yi{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){this.driver=crypto?.subtle}async generateJWK(){const e=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),r=await this.driver.exportKey("jwk",e.privateKey);return{kty:r.kty,e:r.e,n:r.n,d:r.d,p:r.p,q:r.q,dp:r.dp,dq:r.dq,qi:r.qi}}async sign(e,r,{saltLength:n}={saltLength:32}){const s=await this.driver.sign({name:"RSA-PSS",saltLength:n},await this.jwkToCryptoKey(e),r);return new Uint8Array(s)}async hash(e,r="SHA-256"){const n=await this.driver.digest(r,e);return new Uint8Array(n)}async verify(e,r,n){const s={kty:"RSA",e:"AQAB",n:e},i=await this.jwkToPublicCryptoKey(s),a=await this.driver.digest("SHA-256",r),o=await this.driver.verify({name:"RSA-PSS",saltLength:0},i,n,r),c=await this.driver.verify({name:"RSA-PSS",saltLength:32},i,n,r),f=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((i.algorithm.modulusLength-1)/8)-a.byteLength-2},i,n,r);return o||c||f}async jwkToCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}async encrypt(e,r,n){const s=await this.driver.importKey("raw",typeof r=="string"?ye(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),i=await this.driver.deriveKey({name:"PBKDF2",salt:ye(n||"salt"),iterations:1e5,hash:"SHA-256"},s,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),a=new Uint8Array(16);crypto.getRandomValues(a);const o=await this.driver.encrypt({name:"AES-CBC",iv:a},i,e);return tt([a,o])}async decrypt(e,r,n){const s=await this.driver.importKey("raw",typeof r=="string"?ye(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),i=await this.driver.deriveKey({name:"PBKDF2",salt:ye(n||"salt"),iterations:1e5,hash:"SHA-256"},s,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),a=e.slice(0,16),o=await this.driver.decrypt({name:"AES-CBC",iv:a},i,e.slice(16));return tt([o])}}async function ts(t){if(typeof t[Symbol.asyncIterator]=="function"){const s=t,i=La("sha384");let a=0;for await(const f of s)a+=f.byteLength,i.update(f);const o=tt([ye("blob"),ye(a.toString())]),c=tt([await We().hash(o,"SHA-384"),i.digest()]);return await We().hash(c,"SHA-384")}else if(Array.isArray(t)){const s=tt([ye("list"),ye(t.length.toString())]);return await X0(t,await We().hash(s,"SHA-384"))}const e=t,r=tt([ye("blob"),ye(e.byteLength.toString())]),n=tt([await We().hash(r,"SHA-384"),await We().hash(e,"SHA-384")]);return await We().hash(n,"SHA-384")}async function X0(t,e){if(t.length<1)return e;const r=tt([e,await ts(t[0])]),n=await We().hash(r,"SHA-384");return await X0(t.slice(1),n)}class ks extends Error{type;response;constructor(e,r={}){r.message?super(r.message):super(),this.type=e,this.response=r.response}getType(){return this.type}}function Cs(t){let e=t.data;if(typeof t.data=="string")try{e=JSON.parse(t.data)}catch{}if(t.data instanceof ArrayBuffer||t.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch{}return e?e.error||e:t.statusText||"unknown"}class tw{api;network;constructor(e,r){this.api=e,this.network=r}async getByHash(e){const r=await this.api.get(`block/hash/${e}`);if(r.status===200)return r.data;throw r.status===404?new ks("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getByHeight(e){const r=await this.api.get(`block/height/${e}`);if(r.status===200)return r.data;throw r.status===404?new ks("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getCurrent(){const{current:e}=await this.network.getInfo();return await this.getByHash(e)}}const Ir=256*1024,rw=32*1024,_s=32,yn=32;class nw{crypto;constructor(e){this.crypto=e.deps.crypto}async chunkData(e){const r=[];let n=e,s=0;for(;n.byteLength>=Ir;){let i=Ir;const a=n.byteLength-Ir;a>0&&a<rw&&(i=Math.ceil(n.byteLength/2));const o=n.slice(0,i),c=await this.crypto.hash(o);s+=o.byteLength,r.push({dataHash:c,minByteRange:s-o.byteLength,maxByteRange:s}),n=n.slice(i)}return r.push({dataHash:await this.crypto.hash(n),minByteRange:s,maxByteRange:s+n.byteLength}),r}async generateLeaves(e){return Promise.all(e.map(async({dataHash:r,minByteRange:n,maxByteRange:s})=>({type:"leaf",id:await this.hash(await Promise.all([this.hash(r),this.hash(Ui(s))])),dataHash:r,minByteRange:n,maxByteRange:s})))}async computeRootHash(e){return(await this.generateTree(e)).id}async generateTree(e){return await this.buildLayers(await this.generateLeaves(await this.chunkData(e)))}async generateTransactionChunks(e){const r=await this.chunkData(e),n=await this.generateLeaves(r),s=await this.buildLayers(n),i=await this.generateProofs(s),a=r.slice(-1)[0];return a.maxByteRange-a.minByteRange===0&&(r.splice(r.length-1,1),i.splice(i.length-1,1)),{data_root:s.id,chunks:r,proofs:i}}async buildLayers(e,r=0){if(e.length<2)return e[0];const n=[];for(let s=0;s<e.length;s+=2)n.push(await this.hashBranch(e[s],e[s+1]));return this.buildLayers(n,r+1)}generateProofs(e){const r=this.resolveBranchProofs(e);return Array.isArray(r)?Y0(r):[r]}resolveBranchProofs(e,r=new Uint8Array,n=0){if(e.type=="leaf")return{offset:e.maxByteRange-1,proof:tt([r,e.dataHash,Ui(e.maxByteRange)])};if(e.type=="branch"){const s=tt([r,e.leftChild.id,e.rightChild.id,Ui(e.byteRange)]);return[this.resolveBranchProofs(e.leftChild,s,n+1),this.resolveBranchProofs(e.rightChild,s,n+1)]}throw new Error("Unexpected node type")}async validatePath(e,r,n,s,i){if(s<=0)return!1;if(r>=s)return this.validatePath(e,0,s-1,s,i);if(r<0)return this.validatePath(e,0,0,s,i);if(i.length==yn+_s){const l=i.slice(0,yn),x=i.slice(l.length,l.length+_s),p=await this.hash([await this.hash(l),await this.hash(x)]);return Nl(e,p)?{offset:s-1,leftBound:n,rightBound:s,chunkSize:s-n}:!1}const a=i.slice(0,yn),o=i.slice(a.length,a.length+yn),c=i.slice(a.length+o.length,a.length+o.length+_s),f=$l(c),u=i.slice(a.length+o.length+c.length),d=await this.hash([await this.hash(a),await this.hash(o),await this.hash(c)]);return Nl(e,d)?r<f?await this.validatePath(a,r,n,Math.min(s,f),u):await this.validatePath(o,r,Math.max(n,f),s,u):!1}async hashBranch(e,r){return r?{type:"branch",id:await this.hash([await this.hash(e.id),await this.hash(r.id),await this.hash(Ui(e.maxByteRange))]),byteRange:e.maxByteRange,maxByteRange:r.maxByteRange,leftChild:e,rightChild:r}:e}async hash(e){return Array.isArray(e)&&(e=ci.utils.concatBuffers(e)),new Uint8Array(await this.crypto.hash(e))}async debug(e,r=""){if(e.byteLength<1)return r;const n=e.slice(0,yn),s=e.slice(n.length,n.length+yn),i=e.slice(n.length+s.length,n.length+s.length+_s),a=$l(i),o=e.slice(n.length+s.length+i.length),c=await this.hash([await this.hash(n),await this.hash(s),await this.hash(i)]),f=`${r}
${JSON.stringify(k.Buffer.from(n))},${JSON.stringify(k.Buffer.from(s))},${a} => ${JSON.stringify(c)}`;return this.debug(o,f)}}function Y0(t){const e=[];return t.forEach(r=>{Array.isArray(r)?e.push(...Y0(r)):e.push(r)}),e}function Ui(t){const e=new Uint8Array(_s);for(let r=e.length-1;r>=0;r--){const n=t%256;e[r]=n,t=(t-n)/256}return e}function $l(t){let e=0;for(let r=0;r<t.length;r++)e*=256,e+=t[r];return e}const Nl=(t,e)=>t.every((r,n)=>e[n]===r);class sw{api;constructor(e){this.api=e}async getTransactionMetadata(e){const r=await this.api.get(`tx/${e}/offset`);if(r.status===200)return r.data;throw new Error(`Unable to get transaction offset: ${Cs(r)}`)}async getChunk(e){const r=await this.api.get(`chunk/${e}`);if(r.status===200)return r.data;throw new Error(`Unable to get chunk: ${Cs(r)}`)}async getChunkData(e){const r=await this.getChunk(e);return Dt(r.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e,r){const n=await this.getTransactionMetadata(e),s=parseInt(n.size),i=new Uint8Array(s);let a=0;for await(const o of this.concurrentChunkDownloader(e,r))i.set(o,a),a+=o.length;return i}async*concurrentChunkDownloader(e,r){const n={concurrency:10,...r},s=await this.getTransactionMetadata(e),i=new X(s.offset),a=new X(s.size),o=i.minus(a).plus(1);let c=0;const f=Math.ceil(a.dividedBy(Ir).toNumber()),u=h=>this.getChunkData(h.toString()).then(y=>(c+=y.length,y)),d=[],l=f-2,x=Math.min(l,n.concurrency);let p=0;for(let h=0;h<x;h++)d.push(u(o.plus(Ir*p++)));for(;p<l;)d.push(u(o.plus(Ir*p++))),yield d.shift();for(;d.length>0;)yield d.shift();if(yield u(o.plus(Ir*p++)),a.isGreaterThan(c)&&(yield u(o.plus(Ir*p++))),!a.isEqualTo(c))throw new Error(`got ${c}B, expected ${a.toString()}B`)}}function iw(t,e){const r=t;return r.deepHash=new e.deepHash({deps:{utils:{stringToBuffer:ye,concatBuffers:tt},crypto:t}}),r}class aw{crypto;utils;constructor({deps:e}){this.crypto=e.crypto,this.utils=e.utils}async deepHash(e){if(Array.isArray(e)){const s=this.utils.concatBuffers([this.utils.stringToBuffer("list"),this.utils.stringToBuffer(e.length.toString())]);return await this.deepHashChunks(e,await this.crypto.hash(s,"SHA-384"))}const r=this.utils.concatBuffers([this.utils.stringToBuffer("blob"),this.utils.stringToBuffer(e.byteLength.toString())]),n=this.utils.concatBuffers([await this.crypto.hash(r,"SHA-384"),await this.crypto.hash(e,"SHA-384")]);return await this.crypto.hash(n,"SHA-384")}async deepHashChunks(e,r){if(e.length<1)return r;const n=this.utils.concatBuffers([r,await this.deepHash(e[0])]),s=await this.crypto.hash(n,"SHA-384");return await this.deepHashChunks(e.slice(1),s)}}function Z0(t,e){return function(){return t.apply(e,arguments)}}const{toString:ow}=Object.prototype,{getPrototypeOf:Df}=Object,Ya=(t=>e=>{const r=ow.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),sr=t=>(t=t.toLowerCase(),e=>Ya(e)===t),Za=t=>e=>typeof e===t,{isArray:rs}=Array,Fs=Za("undefined");function cw(t){return t!==null&&!Fs(t)&&t.constructor!==null&&!Fs(t.constructor)&&Pt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Q0=sr("ArrayBuffer");function uw(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Q0(t.buffer),e}const fw=Za("string"),Pt=Za("function"),ep=Za("number"),Qa=t=>t!==null&&typeof t=="object",dw=t=>t===!0||t===!1,Zi=t=>{if(Ya(t)!=="object")return!1;const e=Df(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},lw=sr("Date"),hw=sr("File"),pw=sr("Blob"),yw=sr("FileList"),xw=t=>Qa(t)&&Pt(t.pipe),bw=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Pt(t.append)&&((e=Ya(t))==="formdata"||e==="object"&&Pt(t.toString)&&t.toString()==="[object FormData]"))},gw=sr("URLSearchParams"),mw=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ai(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),rs(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{const i=r?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let o;for(n=0;n<a;n++)o=i[n],e.call(null,t[o],o,t)}}function tp(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const rp=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:$s)(),np=t=>!Fs(t)&&t!==rp;function Ju(){const{caseless:t}=np(this)&&this||{},e={},r=(n,s)=>{const i=t&&tp(e,s)||s;Zi(e[i])&&Zi(n)?e[i]=Ju(e[i],n):Zi(n)?e[i]=Ju({},n):rs(n)?e[i]=n.slice():e[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&ai(arguments[n],r);return e}const ww=(t,e,r,{allOwnKeys:n}={})=>(ai(e,(s,i)=>{r&&Pt(s)?t[i]=Z0(s,r):t[i]=s},{allOwnKeys:n}),t),vw=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Ew=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Sw=(t,e,r,n)=>{let s,i,a;const o={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)a=s[i],(!n||n(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=r!==!1&&Df(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},_w=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},Aw=t=>{if(!t)return null;if(rs(t))return t;let e=t.length;if(!ep(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},Tw=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Df(Uint8Array)),Pw=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=n.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},Rw=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},kw=sr("HTMLFormElement"),Cw=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),Dl=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Bw=sr("RegExp"),sp=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};ai(r,(s,i)=>{let a;(a=e(s,i,t))!==!1&&(n[i]=a||s)}),Object.defineProperties(t,n)},Iw=t=>{sp(t,(e,r)=>{if(Pt(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(!!Pt(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Ow=(t,e)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return rs(t)?n(t):n(String(t).split(e)),r},Uw=()=>{},$w=(t,e)=>(t=+t,Number.isFinite(t)?t:e),fu="abcdefghijklmnopqrstuvwxyz",Ll="0123456789",ip={DIGIT:Ll,ALPHA:fu,ALPHA_DIGIT:fu+fu.toUpperCase()+Ll},Nw=(t=16,e=ip.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r};function Dw(t){return!!(t&&Pt(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Lw=t=>{const e=new Array(10),r=(n,s)=>{if(Qa(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const i=rs(n)?[]:{};return ai(n,(a,o)=>{const c=r(a,s+1);!Fs(c)&&(i[o]=c)}),e[s]=void 0,i}}return n};return r(t,0)},Mw=sr("AsyncFunction"),Fw=t=>t&&(Qa(t)||Pt(t))&&Pt(t.then)&&Pt(t.catch);var O={isArray:rs,isArrayBuffer:Q0,isBuffer:cw,isFormData:bw,isArrayBufferView:uw,isString:fw,isNumber:ep,isBoolean:dw,isObject:Qa,isPlainObject:Zi,isUndefined:Fs,isDate:lw,isFile:hw,isBlob:pw,isRegExp:Bw,isFunction:Pt,isStream:xw,isURLSearchParams:gw,isTypedArray:Tw,isFileList:yw,forEach:ai,merge:Ju,extend:ww,trim:mw,stripBOM:vw,inherits:Ew,toFlatObject:Sw,kindOf:Ya,kindOfTest:sr,endsWith:_w,toArray:Aw,forEachEntry:Pw,matchAll:Rw,isHTMLForm:kw,hasOwnProperty:Dl,hasOwnProp:Dl,reduceDescriptors:sp,freezeMethods:Iw,toObjectSet:Ow,toCamelCase:Cw,noop:Uw,toFiniteNumber:$w,findKey:tp,global:rp,isContextDefined:np,ALPHABET:ip,generateString:Nw,isSpecCompliantForm:Dw,toJSONObject:Lw,isAsyncFn:Mw,isThenable:Fw};function de(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s)}O.inherits(de,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:O.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const ap=de.prototype,op={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{op[t]={value:t}});Object.defineProperties(de,op);Object.defineProperty(ap,"isAxiosError",{value:!0});de.from=(t,e,r,n,s,i)=>{const a=Object.create(ap);return O.toFlatObject(t,a,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),de.call(a,t.message,e,r,n,s),a.cause=t,a.name=t.name,i&&Object.assign(a,i),a};var Hw=null;function Xu(t){return O.isPlainObject(t)||O.isArray(t)}function cp(t){return O.endsWith(t,"[]")?t.slice(0,-2):t}function Ml(t,e,r){return t?t.concat(e).map(function(s,i){return s=cp(s),!r&&i?"["+s+"]":s}).join(r?".":""):e}function qw(t){return O.isArray(t)&&!t.some(Xu)}const zw=O.toFlatObject(O,{},null,function(e){return/^is[A-Z]/.test(e)});function eo(t,e,r){if(!O.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=O.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,y){return!O.isUndefined(y[h])});const n=r.metaTokens,s=r.visitor||u,i=r.dots,a=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&O.isSpecCompliantForm(e);if(!O.isFunction(s))throw new TypeError("visitor must be a function");function f(p){if(p===null)return"";if(O.isDate(p))return p.toISOString();if(!c&&O.isBlob(p))throw new de("Blob is not supported. Use a Buffer instead.");return O.isArrayBuffer(p)||O.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):k.Buffer.from(p):p}function u(p,h,y){let b=p;if(p&&!y&&typeof p=="object"){if(O.endsWith(h,"{}"))h=n?h:h.slice(0,-2),p=JSON.stringify(p);else if(O.isArray(p)&&qw(p)||(O.isFileList(p)||O.endsWith(h,"[]"))&&(b=O.toArray(p)))return h=cp(h),b.forEach(function(v,E){!(O.isUndefined(v)||v===null)&&e.append(a===!0?Ml([h],E,i):a===null?h:h+"[]",f(v))}),!1}return Xu(p)?!0:(e.append(Ml(y,h,i),f(p)),!1)}const d=[],l=Object.assign(zw,{defaultVisitor:u,convertValue:f,isVisitable:Xu});function x(p,h){if(!O.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+h.join("."));d.push(p),O.forEach(p,function(b,R){(!(O.isUndefined(b)||b===null)&&s.call(e,b,O.isString(R)?R.trim():R,h,l))===!0&&x(b,h?h.concat(R):[R])}),d.pop()}}if(!O.isObject(t))throw new TypeError("data must be an object");return x(t),e}function Fl(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Lf(t,e){this._pairs=[],t&&eo(t,this,e)}const up=Lf.prototype;up.append=function(e,r){this._pairs.push([e,r])};up.toString=function(e){const r=e?function(n){return e.call(this,n,Fl)}:Fl;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function Kw(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fp(t,e,r){if(!e)return t;const n=r&&r.encode||Kw,s=r&&r.serialize;let i;if(s?i=s(e,r):i=O.isURLSearchParams(e)?e.toString():new Lf(e,r).toString(n),i){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class jw{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){O.forEach(this.handlers,function(n){n!==null&&e(n)})}}var Hl=jw,dp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Gw=typeof URLSearchParams<"u"?URLSearchParams:Lf,Ww=typeof FormData<"u"?FormData:null,Vw=typeof Blob<"u"?Blob:null,Jw={isBrowser:!0,classes:{URLSearchParams:Gw,FormData:Ww,Blob:Vw},protocols:["http","https","file","blob","url","data"]};const lp=typeof window<"u"&&typeof document<"u",Xw=(t=>lp&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),Yw=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")();var Zw=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:lp,hasStandardBrowserWebWorkerEnv:Yw,hasStandardBrowserEnv:Xw},Symbol.toStringTag,{value:"Module"})),Yt={...Zw,...Jw};function Qw(t,e){return eo(t,new Yt.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,i){return Yt.isNode&&O.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function e2(t){return O.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function t2(t){const e={},r=Object.keys(t);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],e[i]=t[i];return e}function hp(t){function e(r,n,s,i){let a=r[i++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),c=i>=r.length;return a=!a&&O.isArray(s)?s.length:a,c?(O.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!o):((!s[a]||!O.isObject(s[a]))&&(s[a]=[]),e(r,n,s[a],i)&&O.isArray(s[a])&&(s[a]=t2(s[a])),!o)}if(O.isFormData(t)&&O.isFunction(t.entries)){const r={};return O.forEachEntry(t,(n,s)=>{e(e2(n),s,r,0)}),r}return null}function r2(t,e,r){if(O.isString(t))try{return(e||JSON.parse)(t),O.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const Mf={transitional:dp,adapter:["xhr","http"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=O.isObject(e);if(i&&O.isHTMLForm(e)&&(e=new FormData(e)),O.isFormData(e))return s?JSON.stringify(hp(e)):e;if(O.isArrayBuffer(e)||O.isBuffer(e)||O.isStream(e)||O.isFile(e)||O.isBlob(e))return e;if(O.isArrayBufferView(e))return e.buffer;if(O.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Qw(e,this.formSerializer).toString();if((o=O.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return eo(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),r2(e)):e}],transformResponse:[function(e){const r=this.transitional||Mf.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(e&&O.isString(e)&&(n&&!this.responseType||s)){const a=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?de.from(o,de.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Yt.classes.FormData,Blob:Yt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};O.forEach(["delete","get","head","post","put","patch"],t=>{Mf.headers[t]={}});var Ff=Mf;const n2=O.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var s2=t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(function(a){s=a.indexOf(":"),r=a.substring(0,s).trim().toLowerCase(),n=a.substring(s+1).trim(),!(!r||e[r]&&n2[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e};const ql=Symbol("internals");function xs(t){return t&&String(t).trim().toLowerCase()}function Qi(t){return t===!1||t==null?t:O.isArray(t)?t.map(Qi):String(t)}function i2(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const a2=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function du(t,e,r,n,s){if(O.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!O.isString(e)){if(O.isString(n))return e.indexOf(n)!==-1;if(O.isRegExp(n))return n.test(e)}}function o2(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function c2(t,e){const r=O.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,i,a){return this[n].call(this,e,s,i,a)},configurable:!0})})}class to{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function i(o,c,f){const u=xs(c);if(!u)throw new Error("header name must be a non-empty string");const d=O.findKey(s,u);(!d||s[d]===void 0||f===!0||f===void 0&&s[d]!==!1)&&(s[d||c]=Qi(o))}const a=(o,c)=>O.forEach(o,(f,u)=>i(f,u,c));return O.isPlainObject(e)||e instanceof this.constructor?a(e,r):O.isString(e)&&(e=e.trim())&&!a2(e)?a(s2(e),r):e!=null&&i(r,e,n),this}get(e,r){if(e=xs(e),e){const n=O.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return i2(s);if(O.isFunction(r))return r.call(this,s,n);if(O.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=xs(e),e){const n=O.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||du(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function i(a){if(a=xs(a),a){const o=O.findKey(n,a);o&&(!r||du(n,n[o],o,r))&&(delete n[o],s=!0)}}return O.isArray(e)?e.forEach(i):i(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!e||du(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const r=this,n={};return O.forEach(this,(s,i)=>{const a=O.findKey(n,i);if(a){r[a]=Qi(s),delete r[i];return}const o=e?o2(i):String(i).trim();o!==i&&delete r[i],r[o]=Qi(s),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return O.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&O.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[ql]=this[ql]={accessors:{}}).accessors,s=this.prototype;function i(a){const o=xs(a);n[o]||(c2(s,a),n[o]=!0)}return O.isArray(e)?e.forEach(i):i(e),this}}to.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);O.reduceDescriptors(to.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});O.freezeMethods(to);var pr=to;function lu(t,e){const r=this||Ff,n=e||r,s=pr.from(n.headers);let i=n.data;return O.forEach(t,function(o){i=o.call(r,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function pp(t){return!!(t&&t.__CANCEL__)}function oi(t,e,r){de.call(this,t??"canceled",de.ERR_CANCELED,e,r),this.name="CanceledError"}O.inherits(oi,de,{__CANCEL__:!0});function u2(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new de("Request failed with status code "+r.status,[de.ERR_BAD_REQUEST,de.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}var f2=Yt.hasStandardBrowserEnv?{write(t,e,r,n,s,i){const a=[t+"="+encodeURIComponent(e)];O.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),O.isString(n)&&a.push("path="+n),O.isString(s)&&a.push("domain="+s),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function d2(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function l2(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function yp(t,e){return t&&!d2(e)?l2(t,e):e}var h2=Yt.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function s(i){let a=i;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=s(window.location.href),function(a){const o=O.isString(a)?s(a):a;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}();function p2(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function y2(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,i=0,a;return e=e!==void 0?e:1e3,function(c){const f=Date.now(),u=n[i];a||(a=f),r[s]=c,n[s]=f;let d=i,l=0;for(;d!==s;)l+=r[d++],d=d%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),f-a<e)return;const x=u&&f-u;return x?Math.round(l*1e3/x):void 0}}function zl(t,e){let r=0;const n=y2(50,250);return s=>{const i=s.loaded,a=s.lengthComputable?s.total:void 0,o=i-r,c=n(o),f=i<=a;r=i;const u={loaded:i,total:a,progress:a?i/a:void 0,bytes:o,rate:c||void 0,estimated:c&&a&&f?(a-i)/c:void 0,event:s};u[e?"download":"upload"]=!0,t(u)}}const x2=typeof XMLHttpRequest<"u";var b2=x2&&function(t){return new Promise(function(r,n){let s=t.data;const i=pr.from(t.headers).normalize();let{responseType:a,withXSRFToken:o}=t,c;function f(){t.cancelToken&&t.cancelToken.unsubscribe(c),t.signal&&t.signal.removeEventListener("abort",c)}let u;if(O.isFormData(s)){if(Yt.hasStandardBrowserEnv||Yt.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((u=i.getContentType())!==!1){const[h,...y]=u?u.split(";").map(b=>b.trim()).filter(Boolean):[];i.setContentType([h||"multipart/form-data",...y].join("; "))}}let d=new XMLHttpRequest;if(t.auth){const h=t.auth.username||"",y=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(h+":"+y))}const l=yp(t.baseURL,t.url);d.open(t.method.toUpperCase(),fp(l,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function x(){if(!d)return;const h=pr.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),b={data:!a||a==="text"||a==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:h,config:t,request:d};u2(function(v){r(v),f()},function(v){n(v),f()},b),d=null}if("onloadend"in d?d.onloadend=x:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(x)},d.onabort=function(){!d||(n(new de("Request aborted",de.ECONNABORTED,t,d)),d=null)},d.onerror=function(){n(new de("Network Error",de.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let y=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const b=t.transitional||dp;t.timeoutErrorMessage&&(y=t.timeoutErrorMessage),n(new de(y,b.clarifyTimeoutError?de.ETIMEDOUT:de.ECONNABORTED,t,d)),d=null},Yt.hasStandardBrowserEnv&&(o&&O.isFunction(o)&&(o=o(t)),o||o!==!1&&h2(l))){const h=t.xsrfHeaderName&&t.xsrfCookieName&&f2.read(t.xsrfCookieName);h&&i.set(t.xsrfHeaderName,h)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&O.forEach(i.toJSON(),function(y,b){d.setRequestHeader(b,y)}),O.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),a&&a!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",zl(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",zl(t.onUploadProgress)),(t.cancelToken||t.signal)&&(c=h=>{!d||(n(!h||h.type?new oi(null,t,d):h),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(c),t.signal&&(t.signal.aborted?c():t.signal.addEventListener("abort",c)));const p=p2(l);if(p&&Yt.protocols.indexOf(p)===-1){n(new de("Unsupported protocol "+p+":",de.ERR_BAD_REQUEST,t));return}d.send(s||null)})};const Yu={http:Hw,xhr:b2};O.forEach(Yu,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Kl=t=>`- ${t}`,g2=t=>O.isFunction(t)||t===null||t===!1;var xp={getAdapter:t=>{t=O.isArray(t)?t:[t];const{length:e}=t;let r,n;const s={};for(let i=0;i<e;i++){r=t[i];let a;if(n=r,!g2(r)&&(n=Yu[(a=String(r)).toLowerCase()],n===void 0))throw new de(`Unknown adapter '${a}'`);if(n)break;s[a||"#"+i]=n}if(!n){const i=Object.entries(s).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?i.length>1?`since :
`+i.map(Kl).join(`
`):" "+Kl(i[0]):"as no adapter specified";throw new de("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:Yu};function hu(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new oi(null,t)}function jl(t){return hu(t),t.headers=pr.from(t.headers),t.data=lu.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),xp.getAdapter(t.adapter||Ff.adapter)(t).then(function(n){return hu(t),n.data=lu.call(t,t.transformResponse,n),n.headers=pr.from(n.headers),n},function(n){return pp(n)||(hu(t),n&&n.response&&(n.response.data=lu.call(t,t.transformResponse,n.response),n.response.headers=pr.from(n.response.headers))),Promise.reject(n)})}const Gl=t=>t instanceof pr?t.toJSON():t;function Ln(t,e){e=e||{};const r={};function n(f,u,d){return O.isPlainObject(f)&&O.isPlainObject(u)?O.merge.call({caseless:d},f,u):O.isPlainObject(u)?O.merge({},u):O.isArray(u)?u.slice():u}function s(f,u,d){if(O.isUndefined(u)){if(!O.isUndefined(f))return n(void 0,f,d)}else return n(f,u,d)}function i(f,u){if(!O.isUndefined(u))return n(void 0,u)}function a(f,u){if(O.isUndefined(u)){if(!O.isUndefined(f))return n(void 0,f)}else return n(void 0,u)}function o(f,u,d){if(d in e)return n(f,u);if(d in t)return n(void 0,f)}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(f,u)=>s(Gl(f),Gl(u),!0)};return O.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=c[u]||s,l=d(t[u],e[u],u);O.isUndefined(l)&&d!==o||(r[u]=l)}),r}const bp="1.6.7",Hf={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Hf[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Wl={};Hf.transitional=function(e,r,n){function s(i,a){return"[Axios v"+bp+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return(i,a,o)=>{if(e===!1)throw new de(s(a," has been removed"+(r?" in "+r:"")),de.ERR_DEPRECATED);return r&&!Wl[a]&&(Wl[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,a,o):!0}};function m2(t,e,r){if(typeof t!="object")throw new de("options must be an object",de.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const i=n[s],a=e[i];if(a){const o=t[i],c=o===void 0||a(o,i,t);if(c!==!0)throw new de("option "+i+" must be "+c,de.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new de("Unknown option "+i,de.ERR_BAD_OPTION)}}var Zu={assertOptions:m2,validators:Hf};const wr=Zu.validators;class ba{constructor(e){this.defaults=e,this.interceptors={request:new Hl,response:new Hl}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Ln(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&Zu.assertOptions(n,{silentJSONParsing:wr.transitional(wr.boolean),forcedJSONParsing:wr.transitional(wr.boolean),clarifyTimeoutError:wr.transitional(wr.boolean)},!1),s!=null&&(O.isFunction(s)?r.paramsSerializer={serialize:s}:Zu.assertOptions(s,{encode:wr.function,serialize:wr.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=i&&O.merge(i.common,i[r.method]);i&&O.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),r.headers=pr.concat(a,i);const o=[];let c=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(r)===!1||(c=c&&h.synchronous,o.unshift(h.fulfilled,h.rejected))});const f=[];this.interceptors.response.forEach(function(h){f.push(h.fulfilled,h.rejected)});let u,d=0,l;if(!c){const p=[jl.bind(this),void 0];for(p.unshift.apply(p,o),p.push.apply(p,f),l=p.length,u=Promise.resolve(r);d<l;)u=u.then(p[d++],p[d++]);return u}l=o.length;let x=r;for(d=0;d<l;){const p=o[d++],h=o[d++];try{x=p(x)}catch(y){h.call(this,y);break}}try{u=jl.call(this,x)}catch(p){return Promise.reject(p)}for(d=0,l=f.length;d<l;)u=u.then(f[d++],f[d++]);return u}getUri(e){e=Ln(this.defaults,e);const r=yp(e.baseURL,e.url);return fp(r,e.params,e.paramsSerializer)}}O.forEach(["delete","get","head","options"],function(e){ba.prototype[e]=function(r,n){return this.request(Ln(n||{},{method:e,url:r,data:(n||{}).data}))}});O.forEach(["post","put","patch"],function(e){function r(n){return function(i,a,o){return this.request(Ln(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}ba.prototype[e]=r(),ba.prototype[e+"Form"]=r(!0)});var ea=ba;class qf{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const a=new Promise(o=>{n.subscribe(o),i=o}).then(s);return a.cancel=function(){n.unsubscribe(i)},a},e(function(i,a,o){n.reason||(n.reason=new oi(i,a,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new qf(function(s){e=s}),cancel:e}}}var w2=qf;function v2(t){return function(r){return t.apply(null,r)}}function E2(t){return O.isObject(t)&&t.isAxiosError===!0}const Qu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Qu).forEach(([t,e])=>{Qu[e]=t});var S2=Qu;function gp(t){const e=new ea(t),r=Z0(ea.prototype.request,e);return O.extend(r,ea.prototype,e,{allOwnKeys:!0}),O.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return gp(Ln(t,s))},r}const $e=gp(Ff);$e.Axios=ea;$e.CanceledError=oi;$e.CancelToken=w2;$e.isCancel=pp;$e.VERSION=bp;$e.toFormData=eo;$e.AxiosError=de;$e.Cancel=$e.CanceledError;$e.all=function(e){return Promise.all(e)};$e.spread=v2;$e.isAxiosError=E2;$e.mergeConfig=Ln;$e.AxiosHeaders=pr;$e.formToJSON=t=>hp(O.isHTMLForm(t)?new FormData(t):t);$e.getAdapter=xp.getAdapter;$e.HttpStatusCode=S2;$e.default=$e;var _2=$e;class Vl{_instance;cookieMap=new Map;config;constructor(e){e&&this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e),this._instance=void 0}getConfig(){return this.config}async requestInterceptor(e){const r=this.cookieMap.get(new URL(e.baseURL??"").host);return r&&(e.headers.cookie=r),e}async responseInterceptor(e){const r=e.headers?.["set-cookie"];return r&&this.cookieMap.set(e.request.host,r),e}mergeDefaults(e){return e.headers??={},e.network&&!Object.keys(e.headers).includes("x-network")&&(e.headers["x-network"]=e.network),{url:e.url,timeout:e.timeout??2e4,logging:e.logging??!1,logger:e.logger??console.log,headers:{...e.headers,"x-irys-arweave-version":ci.VERSION},withCredentials:e.withCredentials??!1,retry:{retries:3,maxTimeout:5e3}}}async get(e,r){try{return await this.request(e,{...r,method:"GET"})}catch(n){if(n.response?.status)return n.response;throw n}}async post(e,r,n){try{return await this.request(e,{data:r,...n,method:"POST"})}catch(s){if(s.response?.status)return s.response;throw s}}get instance(){if(this._instance)return this._instance;const e=_2.create({baseURL:this.config.url.toString(),timeout:this.config.timeout,maxContentLength:1024*1024*512,headers:this.config.headers,withCredentials:this.config.withCredentials});return this.config.withCredentials&&(e.interceptors.request.use(this.requestInterceptor.bind(this)),e.interceptors.response.use(this.responseInterceptor.bind(this))),this.config.logging&&(e.interceptors.request.use(r=>(this.config.logger(`Requesting: ${r.baseURL}/${r.url}`),r)),e.interceptors.response.use(r=>(this.config.logger(`Response: ${r.config.url} - ${r.status}`),r))),this._instance=e}async request(e,r){const n=this.instance,s=r?.url??new URL(e,this.config.url).toString();return Mr(i=>n({...r,url:s}),{...this.config.retry,...r?.retry})}}const Jl=t=>typeof t!="string"&&"url"in t,A2={maxAttempts:15,randomlySelect:!0};class T2{minerInstances=[];globalConfig;gatewayInstances=[];constructor({gateways:e,miners:r,opts:n}){this.globalConfig=n?.globalConfig??{},r&&this.addMiners(r),e&&this.addGateways(e)}async addPeersFrom(e,r){const n=(await this.get("",{url:new URL("/peers",e).toString()})).data;this.addMiners(n.slice(0,r?.limit).map(s=>`http://${s}`))}addMiners(e){e.forEach(r=>this.minerInstances.push(new Vl(Jl(r)?r:{url:new URL(r),...this.globalConfig})))}addGateways(e){e.forEach(r=>this.gatewayInstances.push(new Vl(Jl(r)?r:{url:new URL(r),...this.globalConfig})))}async get(e,r){return this.request(e,{...r,method:"GET"})}async post(e,r,n){return this.request(e,{data:r,...n,method:"POST"})}async request(e,r){const n={...A2,...r?.fallback};let s=0;const i=r?.gatewayOnly?this.gatewayInstances:this.gatewayInstances.concat(this.minerInstances),a=Math.min(Math.max(n?.maxAttempts,1),i.length),o=n?.onFallback;if(i.length===0)throw new Error("Unable to run request due to 0 configured gateways/miners.");for(;s++<a;){const c=i.at(n?.randomlySelect?Math.floor(Math.random()*i.length):s-1);if(!!c)try{return await c.request(e,{...r})}catch(f){if(o?.(f,c),s>=a)throw f}}throw new Error("unreachable")}}class mp{get(e,r){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);if(this[e]instanceof Uint8Array)return r&&r.decode&&r.string?Nf(this[e]):r&&r.decode&&!r.string?this[e]:Mt(this[e]);if(this[e]instanceof Array){if(r?.decode!==void 0||r?.string!==void 0)throw e==="tags"&&console.warn(`Did you mean to use 'transaction["tags"]' ?`),new Error("Cannot decode or stringify an array.");return this[e]}return r&&r.decode==!0?r&&r.string?G0(this[e]):Dt(this[e]):this[e]}}class P2 extends mp{name;value;constructor(e,r){super(),this.name=e,this.value=r}}class wt extends mp{format=2;id="";last_tx="";owner="";tags=[];target="";quantity="0";data_size="0";data=new Uint8Array;data_root="";reward="0";signature="";merkle;deepHash;chunks;constructor({attributes:e,deps:r}){super(),this.merkle=r.merkle,this.deepHash=r.deepHash,Object.assign(this,e),typeof this.data=="string"&&(this.data=Dt(this.data)),e.tags&&(this.tags=e.tags)}addTag(e,r){this.tags.push({name:Vu(e),value:Vu(r)})}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:Mt(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(e){this.owner=e}setSignature({id:e,owner:r,reward:n,tags:s,signature:i}){this.id=e,this.owner=r,n&&(this.reward=n),s&&(this.tags=s),this.signature=i}async prepareChunks(e){!this.chunks&&e.byteLength>0&&(this.chunks=await this.merkle.generateTransactionChunks(e),this.data_root=Mt(this.chunks.data_root)),!this.chunks&&e.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(e,r){if(!this.chunks)throw new Error("Chunks have not been prepared");const n=this.chunks.proofs[e],s=this.chunks.chunks[e];return{data_root:this.data_root,data_size:this.data_size,data_path:Mt(n.proof),offset:n.offset.toString(),chunk:Mt(r.slice(s.minByteRange,s.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:const e=this.tags.reduce((n,s)=>tt([n,Dt(s.name),Dt(s.value)]),new Uint8Array);return tt([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),ye(this.quantity),ye(this.reward),this.get("last_tx",{decode:!0,string:!1}),e]);case 2:this.data_root||await this.prepareChunks(this.data);const r=this.tags.map(n=>[Dt(n.name),Dt(n.value)]);return await this.deepHash.deepHash([ye(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),ye(this.quantity),ye(this.reward),this.get("last_tx",{decode:!0,string:!1}),r,ye(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}}class R2{api;constructor(e){this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}}const Xl=1,k2=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],Yl=1e3*40;class Bs{chunkIndex=0;txPosted=!1;transaction;lastRequestTimeEnd=0;totalErrors=0;data;lastResponseStatus=0;lastResponseError="";get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}crypto;api;merkle;deepHash;constructor({deps:e,transaction:r}){if(!r.id)throw new Error("Transaction is not signed");if(!r.chunks)throw new Error("Transaction chunks not prepared");this.api=e.api,this.crypto=e.crypto,this.merkle=e.merkle,this.deepHash=e.deepHash,this.data=r.data,this.transaction=new wt({attributes:Object.assign({},r,{data:new Uint8Array(0)}),deps:{merkle:e.merkle,deepHash:e.deepHash}})}async uploadChunk(e){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let r=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+Yl-Date.now(),Yl);if(r>0&&(r=r-r*Math.random()*.3,await new Promise(a=>setTimeout(a,r))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}e&&(this.chunkIndex=e);const n=this.transaction.getChunk(e||this.chunkIndex,this.data);if(!await this.merkle.validatePath(this.transaction.chunks.data_root,parseInt(n.offset),0,parseInt(n.data_size),Dt(n.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);const i=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(a=>(console.error(a.message),{status:-1,data:{error:a.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=i.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=Cs(i),k2.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized({serialized:e,data:r,deps:n}){if(!e||typeof e.chunkIndex!="number"||typeof e.transaction!="object")throw new Error("Serialized object does not match expected format.");const s=new wt(e.transaction);s.chunks||await s.prepareChunks(r);const i=new Bs({deps:n,transaction:s});if(i.chunkIndex=e.chunkIndex,i.lastRequestTimeEnd=e.lastRequestTimeEnd,i.lastResponseError=e.lastResponseError,i.lastResponseStatus=e.lastResponseStatus,i.txPosted=e.txPosted,i.data=r,i.transaction.data_root!==e.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return i}static async fromTransactionId(e,r){const n=await e.get(`tx/${r}`);if(n.status!==200)throw new Error(`Tx ${r} not found: ${n.status}`);const s=n.data;return s.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:s}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=Xl){this.transaction.data=this.data;const n=await this.api.post("tx",this.transaction).catch(s=>(console.error(s),{status:-1,data:{error:s.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=n.status,this.transaction.data=new Uint8Array(0),n.status>=200&&n.status<300){this.txPosted=!0,this.chunkIndex=Xl;return}throw this.lastResponseError=Cs(n),new Error(`Unable to upload transaction: ${n.status}, ${this.lastResponseError}`)}const r=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=r.status,!(r.status>=200&&r.status<300))throw this.lastResponseError=Cs(r),new Error(`Unable to upload transaction: ${r.status}, ${this.lastResponseError}`);this.txPosted=!0}}class C2{api;crypto;chunks;merkle;deepHash;constructor({deps:e}){this.api=e.api,this.crypto=e.crypto,this.chunks=e.chunks,this.merkle=e.merkle,this.deepHash=e.deepHash}getTransactionAnchor(){return this.api.get("tx_anchor",{transformResponse:[]}).then(e=>e.data)}getPrice(e,r){const n=r?`price/${e}/${r}`:`price/${e}`;return this.api.get(n,{transformResponse:[function(s){return s}]}).then(s=>s.data)}async get(e){const r=await this.api.get(`tx/${e}`);if(r.status==200){const n=parseInt(r.data.data_size);if(r.data.format>=2&&n>0&&n<=1024*1024*12){const s=await this.getData(e);return new wt({attributes:{...r.data,data:s},deps:{merkle:this.merkle,deepHash:this.deepHash}})}return new wt({attributes:{...r.data,format:r.data.format||1},deps:{merkle:this.merkle,deepHash:this.deepHash}})}throw r.status===404?new ks("TX_NOT_FOUND"):r.status===410?new ks("TX_FAILED"):new ks("TX_INVALID")}fromRaw(e){return new wt({attributes:e,deps:{merkle:this.merkle,deepHash:this.deepHash}})}getStatus(e){return this.api.get(`tx/${e}/status`).then(r=>r.status===200?{status:200,confirmed:r.data}:{status:r.status,confirmed:null})}async getData(e){let r;try{r=(await this.api.get(`/${e}`,{responseType:"arraybuffer"})).data}catch(n){console.error(`Error while trying to download contiguous data from gateway cache for ${e}`),console.error(n)}if(!r){console.warn(`Falling back to chunks for ${e}`);try{r=await this.chunks.downloadChunkedData(e)}catch(n){console.error(`Error while trying to download chunked data for ${e}`),console.error(n)}}if(!r)throw new Error(`${e} data was not found!`);return r}async getDataStream(e){let r;try{const n=(await this.api.get(`/${e}`,{responseType:"arraybuffer"})).data;r=async function*(){yield n}()}catch(n){console.error(`Error while trying to download contiguous data from gateway cache for ${e}`),console.error(n)}if(!r){console.warn(`Falling back to chunks for ${e}`);try{r=this.chunks.concurrentChunkDownloader(e)}catch(n){console.error(`Error while trying to download chunked data for ${e}`),console.error(n)}}if(!r)throw new Error(`${e} data was not found!`);return r}async sign(e,r,n){const i=typeof r=="object"&&(o=>{let c=!0;return["n","e","d","p","q","dp","dq","qi"].map(f=>!(f in o)&&(c=!1)),c})(r),a=typeof arweaveWallet=="object";if(!i&&!a)throw new Error("No valid JWK or external wallet found to sign transaction.");if(a){try{(await arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}e.tags=e.tags.map(c=>new P2(c.name,c.value));const o=await arweaveWallet.sign(e,n);e.setSignature({id:o.id,owner:o.owner,reward:o.reward,tags:o.tags,signature:o.signature})}else if(i){e.setOwner(r.n);const o=await e.getSignatureData(),c=await this.crypto.sign(r,o,n),f=await this.crypto.hash(c);e.setSignature({id:Mt(f),owner:r.n,signature:Mt(c)})}else throw new Error("An error occurred while signing. Check wallet is valid")}async verify(e){const r=await e.getSignatureData(),n=e.get("signature",{decode:!0,string:!1}),s=Mt(await this.crypto.hash(n));if(e.id!==s)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(e.owner,r,n)}async post(e){if(typeof e=="string"?e=new wt({attributes:JSON.parse(e),deps:{merkle:this.merkle,deepHash:this.deepHash}}):typeof e.readInt32BE=="function"?e=new wt({attributes:JSON.parse(e.toString()),deps:{merkle:this.merkle,deepHash:this.deepHash}}):typeof e=="object"&&!(e instanceof wt)&&(e=new wt({attributes:e,deps:{merkle:this.merkle,deepHash:this.deepHash}})),!(e instanceof wt))throw new Error("Must be Transaction object");e.chunks||await e.prepareChunks(e.data);const r=await this.getUploader(e,e.data);try{for(;!r.isComplete;)await r.uploadChunk()}catch(n){if(r.lastResponseStatus>0)return{status:r.lastResponseStatus,statusText:r.lastResponseError,data:{error:r.lastResponseError}};throw n}return{status:200,statusText:"OK",data:{}}}async getUploader(e,r){let n;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),e instanceof wt){if(r||(r=e.data),!(r instanceof Uint8Array))throw new Error("Data format is invalid");e.chunks||await e.prepareChunks(r),n=new Bs({transaction:e,deps:{api:this.api,crypto:this.crypto,merkle:this.merkle,deepHash:this.deepHash}}),(!n.data||n.data.length===0)&&(n.data=r)}else{if(typeof e=="string"&&(e=await Bs.fromTransactionId(this.api,e)),!r||!(r instanceof Uint8Array))throw new Error("Must provide data when resuming upload");n=await Bs.fromSerialized({deps:{api:this.api,merkle:this.merkle,crypto:this.crypto,deepHash:this.deepHash},serialized:e,data:r})}return n}async*upload(e,r){const n=await this.getUploader(e,r);for(;!n.isComplete;)await n.uploadChunk(),yield n;return n}}class B2{api;crypto;constructor(e,r){this.api=e,this.crypto=r}getBalance(e){return this.api.get(`wallet/${e}/balance`,{transformResponse:[function(r){return r}]}).then(r=>r.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(r=>r.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return Mt(await this.crypto.hash(Dt(e)))}}class ci{config;api;wallets;transactions;network;blocks;chunks;static init;static utils=ew;crypto;deepHash;merkle;static VERSION="0.0.1";constructor(e){if(this.config=e,!e.crypto)throw new Error("config.crypto is required");this.crypto=iw(e.crypto,{deepHash:aw}),this.deepHash=this.crypto.deepHash;const r=e.gateways?Array.isArray(e.gateways)?e.gateways:[e.gateways]:void 0;this.api=new T2({gateways:r,miners:e.miners}),this.wallets=new B2(this.api,this.crypto),this.chunks=new sw(this.api),this.network=new R2(this.api),this.blocks=new tw(this.api,this.network),this.merkle=new nw({deps:{crypto:this.crypto}}),this.transactions=new C2({deps:{api:this.api,crypto:e.crypto,chunks:this.chunks,merkle:this.merkle,deepHash:this.deepHash}})}get utils(){return ci.utils}getConfig(){return this.config}async createTransaction(e,r){const n={};if(Object.assign(n,e),!e.data&&!(e.target&&e.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(e.owner==null&&r&&r!=="use_wallet"&&(n.owner=r.n),e.last_tx==null&&(n.last_tx=await this.transactions.getTransactionAnchor()),typeof e.data=="string"&&(e.data=ye(e.data)),e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),e.data&&!(e.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(e.reward==null){const i=e.data?e.data.byteLength:0;n.reward=await this.transactions.getPrice(i,n.target)}n.data_root="",n.data_size=e.data?e.data.byteLength.toString():"0",n.data=e.data||new Uint8Array(0);const s=new wt({attributes:n,deps:{merkle:this.merkle,deepHash:this.deepHash}});return await s.getSignatureData(),s}}class zf extends ci{constructor(e,r){super({crypto:r?.crypto??new Yi,...r,gateways:e??"https://arweave.net"})}static init(e){return new zf(e)}}const I2=Yi.default?Yi.default:Yi;class wp extends I2{getPublicKey(e){throw new Error("Unimplemented")}}let O2;function We(){return O2??=new wp}class vp{_key;pk;signatureType=1;ownerLength=Se[1].pubLength;signatureLength=Se[1].sigLength;_publicKey;get publicKey(){return this._publicKey}constructor(e,r){this._key=e,this.pk=r,r||(this.pk=We().getPublicKey(JSON.parse(e)))}sign(e){return Ab("sha256").update(e).sign({key:this._key,padding:Tb.RSA_PKCS1_PSS_PADDING})}static async verify(e,r,n){return await We().verify(k.Buffer.isBuffer(e)?re.encode(e):e,r,n)}}const sn=Pb.define,U2=sn("RSAPublicKey",function(){this.seq().obj(this.key("n").int(),this.key("e").int())}),Ep=sn("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())});sn("PublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(Ep),this.key("publicKey").bitstr())});const Sp=sn("Version",function(){this.int({0:"two-prime",1:"multi"})}),$2=sn("OtherPrimeInfos",function(){this.seq().obj(this.key("ri").int(),this.key("di").int(),this.key("ti").int())}),N2=sn("RSAPrivateKey",function(){this.seq().obj(this.key("version").use(Sp),this.key("n").int(),this.key("e").int(),this.key("d").int(),this.key("p").int(),this.key("q").int(),this.key("dp").int(),this.key("dq").int(),this.key("qi").int(),this.key("other").optional().use($2))});sn("PrivateKeyInfo",function(){this.seq().obj(this.key("version").use(Sp),this.key("algorithm").use(Ep),this.key("privateKey").bitstr())});function D2(t){return{n:vr(t.n),e:vr(t.e),d:t.d&&vr(t.d),p:t.p&&vr(t.p),q:t.q&&vr(t.q),dp:t.dp&&vr(t.dp),dq:t.dq&&vr(t.dq),qi:t.qi&&vr(t.qi)}}function L2(t){return new Y(k.Buffer.from(t,"base64"))}function vr(t){return/^[0-9]+$/.test(t)?new Y(t,10):L2(t)}function M2(t){const e=D2(t),r=!!e.d,n=r?"PRIVATE":"PUBLIC",s="-----BEGIN RSA "+n+` KEY-----
`,i=`
-----END RSA `+n+` KEY-----
`;let a=k.Buffer.alloc(0);r?(e.version="two-prime",a=N2.encode(e,"der")):a=U2.encode(e,"der");const o=a.toString("base64").match(/.{1,64}/g).join(`
`);return s+o+i}class ro extends vp{jwk;constructor(e){super(M2(e),e.n),this.jwk=e}get publicKey(){if(!this.pk)throw new Error("ArweaveSigner - pk is undefined");return re.toBuffer(this.pk)}sign(e){return We().sign(this.jwk,e)}static async verify(e,r,n){return await We().verify(e,r,n)}}class _p{_publicKey;ownerLength=Se[2].pubLength;signatureLength=Se[2].sigLength;signatureType=2;pem;provider;constructor(e){if(this.provider=e,!this.provider.publicKey)throw new Error("InjectedSolanaSigner - provider.publicKey is undefined");this._publicKey=this.provider.publicKey.toBuffer()}get publicKey(){return this._publicKey}async sign(e){if(!this.provider.signMessage)throw new Error("Selected Wallet does not support message signing");return await this.provider.signMessage(e)}static async verify(e,r,n){let s=e;return typeof e=="string"&&(s=re.toBuffer(e)),Da(k.Buffer.from(n),k.Buffer.from(r),k.Buffer.from(s))}}function ze(t){return"0x"+Wh.keccak_256(F(t))}const F2=J.from(-1),H2=J.from(0),q2=J.from(1),z2=J.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),K2="strings/5.7.0",Ap=new D(K2);var Yr;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(Yr||(Yr={}));var ft;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(ft||(ft={}));function j2(t,e,r,n,s){return Ap.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function Tp(t,e,r,n,s){if(t===ft.BAD_PREFIX||t===ft.UNEXPECTED_CONTINUE){let i=0;for(let a=e+1;a<r.length&&r[a]>>6===2;a++)i++;return i}return t===ft.OVERRUN?r.length-e-1:0}function G2(t,e,r,n,s){return t===ft.OVERLONG?(n.push(s),0):(n.push(65533),Tp(t,e,r))}const W2=Object.freeze({error:j2,ignore:Tp,replace:G2});function V2(t,e){e==null&&(e=W2.error),t=F(t);const r=[];let n=0;for(;n<t.length;){const s=t[n++];if(s>>7===0){r.push(s);continue}let i=null,a=null;if((s&224)===192)i=1,a=127;else if((s&240)===224)i=2,a=2047;else if((s&248)===240)i=3,a=65535;else{(s&192)===128?n+=e(ft.UNEXPECTED_CONTINUE,n-1,t,r):n+=e(ft.BAD_PREFIX,n-1,t,r);continue}if(n-1+i>=t.length){n+=e(ft.OVERRUN,n-1,t,r);continue}let o=s&(1<<8-i-1)-1;for(let c=0;c<i;c++){let f=t[n];if((f&192)!=128){n+=e(ft.MISSING_CONTINUE,n,t,r),o=null;break}o=o<<6|f&63,n++}if(o!==null){if(o>1114111){n+=e(ft.OUT_OF_RANGE,n-1-i,t,r,o);continue}if(o>=55296&&o<=57343){n+=e(ft.UTF16_SURROGATE,n-1-i,t,r,o);continue}if(o<=a){n+=e(ft.OVERLONG,n-1-i,t,r,o);continue}r.push(o)}}return r}function tr(t,e=Yr.current){e!=Yr.current&&(Ap.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);if(s<128)r.push(s);else if(s<2048)r.push(s>>6|192),r.push(s&63|128);else if((s&64512)==55296){n++;const i=t.charCodeAt(n);if(n>=t.length||(i&64512)!==56320)throw new Error("invalid utf-8 string");const a=65536+((s&1023)<<10)+(i&1023);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(a&63|128)}else r.push(s>>12|224),r.push(s>>6&63|128),r.push(s&63|128)}return F(r)}function J2(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function X2(t,e){return J2(V2(t,e))}function Gr(t){return ze(tr(t))}const Y2="hash/5.7.0",Z2=`Ethereum Signed Message:
`;function no(t){return typeof t=="string"&&(t=tr(t)),ze(it([tr(Z2),tr(String(t.length)),t]))}const Q2="rlp/5.7.0",ev=new D(Q2);function Zl(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Pp(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(i){n=n.concat(Pp(i))}),n.length<=55)return n.unshift(192+n.length),n;const s=Zl(n.length);return s.unshift(247+s.length),s.concat(n)}$f(t)||ev.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(F(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=Zl(e.length);return r.unshift(183+r.length),r.concat(e)}function Hs(t){return W(Pp(t))}const tv="address/5.7.0",kn=new D(tv);function Ql(t){Ie(t,20)||kn.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let s=0;s<40;s++)r[s]=e[s].charCodeAt(0);const n=F(ze(r));for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(n[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const rv=9007199254740991;function nv(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const Kf={};for(let t=0;t<10;t++)Kf[String(t)]=String(t);for(let t=0;t<26;t++)Kf[String.fromCharCode(65+t)]=String(10+t);const eh=Math.floor(nv(rv));function sv(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>Kf[n]).join("");for(;e.length>=eh;){let n=e.substring(0,eh);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function Me(t){let e=null;if(typeof t!="string"&&kn.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=Ql(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&kn.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==sv(t)&&kn.throwArgumentError("bad icap checksum","address",t),e=X1(t.substring(4));e.length<40;)e="0"+e;e=Ql("0x"+e)}else kn.throwArgumentError("invalid address","address",t);return e}function iv(t){let e=null;try{e=Me(t.from)}catch{kn.throwArgumentError("missing from address","transaction",t)}const r=hr(F(J.from(t.nonce).toHexString()));return Me(Xr(ze(Hs([e,r])),12))}const av="properties/5.7.0";var ov=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?i(u.value):s(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const ga=new D(av);function N(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function As(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function ur(t){return ov(this,void 0,void 0,function*(){const e=Object.keys(t).map(n=>{const s=t[n];return Promise.resolve(s).then(i=>({key:n,value:i}))});return(yield Promise.all(e)).reduce((n,s)=>(n[s.key]=s.value,n),{})})}function cv(t,e){(!t||typeof t!="object")&&ga.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(r=>{e[r]||ga.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)})}function Nr(t){const e={};for(const r in t)e[r]=t[r];return e}const uv={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Rp(t){if(t==null||uv[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch{continue}if(!Rp(n))return!1}return!0}return ga.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function fv(t){if(Rp(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>Mn(e)));if(typeof t=="object"){const e={};for(const r in t){const n=t[r];n!==void 0&&N(e,r,Mn(n))}return e}return ga.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function Mn(t){return fv(t)}class ns{constructor(e){for(const r in e)this[r]=Mn(e[r])}}var dv=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?i(u.value):s(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Te=new D(Y2),kp=new Uint8Array(32);kp.fill(0);const lv=J.from(-1),Cp=J.from(0),Bp=J.from(1),hv=J.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function pv(t){const e=F(t),r=e.length%32;return r?Wr([e,kp.slice(r)]):W(e)}const yv=at(Bp.toHexString(),32),xv=at(Cp.toHexString(),32),th={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},pu=["name","version","chainId","verifyingContract","salt"];function rh(t){return function(e){return typeof e!="string"&&Te.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const bv={name:rh("name"),version:rh("version"),chainId:function(t){try{return J.from(t).toString()}catch{}return Te.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return Me(t).toLowerCase()}catch{}return Te.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=F(t);if(e.length!==32)throw new Error("bad length");return W(e)}catch{}return Te.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function yu(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&Te.throwArgumentError("invalid numeric width","type",t);const s=hv.mask(r?n-1:n),i=r?s.add(Bp).mul(lv):Cp;return function(a){const o=J.from(a);return(o.lt(i)||o.gt(s))&&Te.throwArgumentError(`value out-of-bounds for ${t}`,"value",a),at(o.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(r===0||r>32||e[1]!==String(r))&&Te.throwArgumentError("invalid bytes width","type",t),function(n){return F(n).length!==r&&Te.throwArgumentError(`invalid length for ${t}`,"value",n),pv(n)}}}switch(t){case"address":return function(e){return at(Me(e),32)};case"bool":return function(e){return e?yv:xv};case"bytes":return function(e){return ze(e)};case"string":return function(e){return Gr(e)}}return null}function nh(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}class st{constructor(e){N(this,"types",Object.freeze(Mn(e))),N(this,"_encoderCache",{}),N(this,"_types",{});const r={},n={},s={};Object.keys(e).forEach(o=>{r[o]={},n[o]=[],s[o]={}});for(const o in e){const c={};e[o].forEach(f=>{c[f.name]&&Te.throwArgumentError(`duplicate variable name ${JSON.stringify(f.name)} in ${JSON.stringify(o)}`,"types",e),c[f.name]=!0;const u=f.type.match(/^([^\x5b]*)(\x5b|$)/)[1];u===o&&Te.throwArgumentError(`circular type reference to ${JSON.stringify(u)}`,"types",e),!yu(u)&&(n[u]||Te.throwArgumentError(`unknown type ${JSON.stringify(u)}`,"types",e),n[u].push(o),r[o][u]=!0)})}const i=Object.keys(n).filter(o=>n[o].length===0);i.length===0?Te.throwArgumentError("missing primary type","types",e):i.length>1&&Te.throwArgumentError(`ambiguous primary types or unused types: ${i.map(o=>JSON.stringify(o)).join(", ")}`,"types",e),N(this,"primaryType",i[0]);function a(o,c){c[o]&&Te.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",e),c[o]=!0,Object.keys(r[o]).forEach(f=>{!n[f]||(a(f,c),Object.keys(c).forEach(u=>{s[u][f]=!0}))}),delete c[o]}a(this.primaryType,{});for(const o in s){const c=Object.keys(s[o]);c.sort(),this._types[o]=nh(o,e[o])+c.map(f=>nh(f,e[f])).join("")}}getEncoder(e){let r=this._encoderCache[e];return r||(r=this._encoderCache[e]=this._getEncoder(e)),r}_getEncoder(e){{const s=yu(e);if(s)return s}const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const s=r[1],i=this.getEncoder(s),a=parseInt(r[3]);return o=>{a>=0&&o.length!==a&&Te.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",o);let c=o.map(i);return this._types[s]&&(c=c.map(ze)),ze(Wr(c))}}const n=this.types[e];if(n){const s=Gr(this._types[e]);return i=>{const a=n.map(({name:o,type:c})=>{const f=this.getEncoder(c)(i[o]);return this._types[c]?ze(f):f});return a.unshift(s),Wr(a)}}return Te.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const r=this._types[e];return r||Te.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return ze(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(yu(e))return n(e,r);const s=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(s){const a=s[1],o=parseInt(s[3]);return o>=0&&r.length!==o&&Te.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(c=>this._visit(a,c,n))}const i=this.types[e];return i?i.reduce((a,{name:o,type:c})=>(a[o]=this._visit(c,r[o],n),a),{}):Te.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new st(e)}static getPrimaryType(e){return st.from(e).primaryType}static hashStruct(e,r,n){return st.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){const s=th[n];s||Te.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:s})}return r.sort((n,s)=>pu.indexOf(n.name)-pu.indexOf(s.name)),st.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return Wr(["0x1901",st.hashDomain(e),st.from(r).hash(n)])}static hash(e,r,n){return ze(st.encode(e,r,n))}static resolveNames(e,r,n,s){return dv(this,void 0,void 0,function*(){e=Nr(e);const i={};e.verifyingContract&&!Ie(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const a=st.from(r);a.visit(n,(o,c)=>(o==="address"&&!Ie(c,20)&&(i[c]="0x"),c));for(const o in i)i[o]=yield s(o);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),n=a.visit(n,(o,c)=>o==="address"&&i[c]?i[c]:c),{domain:e,value:n}})}static getPayload(e,r,n){st.hashDomain(e);const s={},i=[];pu.forEach(c=>{const f=e[c];f!=null&&(s[c]=bv[c](f),i.push({name:c,type:th[c]}))});const a=st.from(r),o=Nr(r);return o.EIP712Domain?Te.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):o.EIP712Domain=i,a.encode(n),{types:o,domain:s,primaryType:a.primaryType,message:a.visit(n,(c,f)=>{if(c.match(/^bytes(\d*)/))return W(F(f));if(c.match(/^u?int/))return J.from(f).toString();switch(c){case"address":return f.toLowerCase();case"bool":return!!f;case"string":return typeof f!="string"&&Te.throwArgumentError("invalid string","value",f),f}return Te.throwArgumentError("unsupported type","type",c)})}}}function ss(t,e,r){return r={path:e,exports:{},require:function(n,s){return gv(n,s??r.path)}},t(r,r.exports),r.exports}function gv(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var jf=Ip;function Ip(t,e){if(!t)throw new Error(e||"Assertion failed")}Ip.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Ft=ss(function(t,e){var r=e;function n(a,o){if(Array.isArray(a))return a.slice();if(!a)return[];var c=[];if(typeof a!="string"){for(var f=0;f<a.length;f++)c[f]=a[f]|0;return c}if(o==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var f=0;f<a.length;f+=2)c.push(parseInt(a[f]+a[f+1],16))}else for(var f=0;f<a.length;f++){var u=a.charCodeAt(f),d=u>>8,l=u&255;d?c.push(d,l):c.push(l)}return c}r.toArray=n;function s(a){return a.length===1?"0"+a:a}r.zero2=s;function i(a){for(var o="",c=0;c<a.length;c++)o+=s(a[c].toString(16));return o}r.toHex=i,r.encode=function(o,c){return c==="hex"?i(o):o}}),yt=ss(function(t,e){var r=e;r.assert=jf,r.toArray=Ft.toArray,r.zero2=Ft.zero2,r.toHex=Ft.toHex,r.encode=Ft.encode;function n(c,f,u){var d=new Array(Math.max(c.bitLength(),u)+1);d.fill(0);for(var l=1<<f+1,x=c.clone(),p=0;p<d.length;p++){var h,y=x.andln(l-1);x.isOdd()?(y>(l>>1)-1?h=(l>>1)-y:h=y,x.isubn(h)):h=0,d[p]=h,x.iushrn(1)}return d}r.getNAF=n;function s(c,f){var u=[[],[]];c=c.clone(),f=f.clone();for(var d=0,l=0,x;c.cmpn(-d)>0||f.cmpn(-l)>0;){var p=c.andln(3)+d&3,h=f.andln(3)+l&3;p===3&&(p=-1),h===3&&(h=-1);var y;(p&1)===0?y=0:(x=c.andln(7)+d&7,(x===3||x===5)&&h===2?y=-p:y=p),u[0].push(y);var b;(h&1)===0?b=0:(x=f.andln(7)+l&7,(x===3||x===5)&&p===2?b=-h:b=h),u[1].push(b),2*d===y+1&&(d=1-d),2*l===b+1&&(l=1-l),c.iushrn(1),f.iushrn(1)}return u}r.getJSF=s;function i(c,f,u){var d="_"+f;c.prototype[f]=function(){return this[d]!==void 0?this[d]:this[d]=u.call(this)}}r.cachedProperty=i;function a(c){return typeof c=="string"?r.toArray(c,"hex"):c}r.parseBytes=a;function o(c){return new Y(c,"hex","le")}r.intFromLE=o}),ma=yt.getNAF,mv=yt.getJSF,wa=yt.assert;function Fr(t,e){this.type=t,this.p=new Y(e.p,16),this.red=e.prime?Y.red(e.prime):Y.mont(this.p),this.zero=new Y(0).toRed(this.red),this.one=new Y(1).toRed(this.red),this.two=new Y(2).toRed(this.red),this.n=e.n&&new Y(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var an=Fr;Fr.prototype.point=function(){throw new Error("Not implemented")};Fr.prototype.validate=function(){throw new Error("Not implemented")};Fr.prototype._fixedNafMul=function(e,r){wa(e.precomputed);var n=e._getDoubles(),s=ma(r,1,this._bitLength),i=(1<<n.step+1)-(n.step%2===0?2:1);i/=3;var a=[],o,c;for(o=0;o<s.length;o+=n.step){c=0;for(var f=o+n.step-1;f>=o;f--)c=(c<<1)+s[f];a.push(c)}for(var u=this.jpoint(null,null,null),d=this.jpoint(null,null,null),l=i;l>0;l--){for(o=0;o<a.length;o++)c=a[o],c===l?d=d.mixedAdd(n.points[o]):c===-l&&(d=d.mixedAdd(n.points[o].neg()));u=u.add(d)}return u.toP()};Fr.prototype._wnafMul=function(e,r){var n=4,s=e._getNAFPoints(n);n=s.wnd;for(var i=s.points,a=ma(r,n,this._bitLength),o=this.jpoint(null,null,null),c=a.length-1;c>=0;c--){for(var f=0;c>=0&&a[c]===0;c--)f++;if(c>=0&&f++,o=o.dblp(f),c<0)break;var u=a[c];wa(u!==0),e.type==="affine"?u>0?o=o.mixedAdd(i[u-1>>1]):o=o.mixedAdd(i[-u-1>>1].neg()):u>0?o=o.add(i[u-1>>1]):o=o.add(i[-u-1>>1].neg())}return e.type==="affine"?o.toP():o};Fr.prototype._wnafMulAdd=function(e,r,n,s,i){var a=this._wnafT1,o=this._wnafT2,c=this._wnafT3,f=0,u,d,l;for(u=0;u<s;u++){l=r[u];var x=l._getNAFPoints(e);a[u]=x.wnd,o[u]=x.points}for(u=s-1;u>=1;u-=2){var p=u-1,h=u;if(a[p]!==1||a[h]!==1){c[p]=ma(n[p],a[p],this._bitLength),c[h]=ma(n[h],a[h],this._bitLength),f=Math.max(c[p].length,f),f=Math.max(c[h].length,f);continue}var y=[r[p],null,null,r[h]];r[p].y.cmp(r[h].y)===0?(y[1]=r[p].add(r[h]),y[2]=r[p].toJ().mixedAdd(r[h].neg())):r[p].y.cmp(r[h].y.redNeg())===0?(y[1]=r[p].toJ().mixedAdd(r[h]),y[2]=r[p].add(r[h].neg())):(y[1]=r[p].toJ().mixedAdd(r[h]),y[2]=r[p].toJ().mixedAdd(r[h].neg()));var b=[-3,-1,-5,-7,0,7,5,1,3],R=mv(n[p],n[h]);for(f=Math.max(R[0].length,f),c[p]=new Array(f),c[h]=new Array(f),d=0;d<f;d++){var v=R[0][d]|0,E=R[1][d]|0;c[p][d]=b[(v+1)*3+(E+1)],c[h][d]=0,o[p]=y}}var A=this.jpoint(null,null,null),M=this._wnafT4;for(u=f;u>=0;u--){for(var q=0;u>=0;){var L=!0;for(d=0;d<s;d++)M[d]=c[d][u]|0,M[d]!==0&&(L=!1);if(!L)break;q++,u--}if(u>=0&&q++,A=A.dblp(q),u<0)break;for(d=0;d<s;d++){var K=M[d];K!==0&&(K>0?l=o[d][K-1>>1]:K<0&&(l=o[d][-K-1>>1].neg()),l.type==="affine"?A=A.mixedAdd(l):A=A.add(l))}}for(u=0;u<s;u++)o[u]=null;return i?A:A.toP()};function Bt(t,e){this.curve=t,this.type=e,this.precomputed=null}Fr.BasePoint=Bt;Bt.prototype.eq=function(){throw new Error("Not implemented")};Bt.prototype.validate=function(){return this.curve.validate(this)};Fr.prototype.decodePoint=function(e,r){e=yt.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?wa(e[e.length-1]%2===0):e[0]===7&&wa(e[e.length-1]%2===1);var s=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return s}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Bt.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Bt.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Bt.prototype.encode=function(e,r){return yt.encode(this._encode(r),e)};Bt.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Bt.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Bt.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],s=this,i=0;i<r;i+=e){for(var a=0;a<e;a++)s=s.dbl();n.push(s)}return{step:e,points:n}};Bt.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,s=n===1?null:this.dbl(),i=1;i<n;i++)r[i]=r[i-1].add(s);return{wnd:e,points:r}};Bt.prototype._getBeta=function(){return null};Bt.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var Gf=ss(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var s=function(){};s.prototype=n.prototype,r.prototype=new s,r.prototype.constructor=r}}}),wv=yt.assert;function It(t){an.call(this,"short",t),this.a=new Y(t.a,16).toRed(this.red),this.b=new Y(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Gf(It,an);var vv=It;It.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new Y(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);r=s[0].cmp(s[1])<0?s[0]:s[1],r=r.toRed(this.red)}if(e.lambda)n=new Y(e.lambda,16);else{var i=this._getEndoRoots(this.n);this.g.mul(i[0]).x.cmp(this.g.x.redMul(r))===0?n=i[0]:(n=i[1],wv(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var a;return e.basis?a=e.basis.map(function(o){return{a:new Y(o.a,16),b:new Y(o.b,16)}}):a=this._getEndoBasis(n),{beta:r,lambda:n,basis:a}}};It.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:Y.mont(e),n=new Y(2).toRed(r).redInvm(),s=n.redNeg(),i=new Y(3).toRed(r).redNeg().redSqrt().redMul(n),a=s.redAdd(i).fromRed(),o=s.redSub(i).fromRed();return[a,o]};It.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,s=this.n.clone(),i=new Y(1),a=new Y(0),o=new Y(0),c=new Y(1),f,u,d,l,x,p,h,y=0,b,R;n.cmpn(0)!==0;){var v=s.div(n);b=s.sub(v.mul(n)),R=o.sub(v.mul(i));var E=c.sub(v.mul(a));if(!d&&b.cmp(r)<0)f=h.neg(),u=i,d=b.neg(),l=R;else if(d&&++y===2)break;h=b,s=n,n=b,o=i,i=R,c=a,a=E}x=b.neg(),p=R;var A=d.sqr().add(l.sqr()),M=x.sqr().add(p.sqr());return M.cmp(A)>=0&&(x=f,p=u),d.negative&&(d=d.neg(),l=l.neg()),x.negative&&(x=x.neg(),p=p.neg()),[{a:d,b:l},{a:x,b:p}]};It.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],s=r[1],i=s.b.mul(e).divRound(this.n),a=n.b.neg().mul(e).divRound(this.n),o=i.mul(n.a),c=a.mul(s.a),f=i.mul(n.b),u=a.mul(s.b),d=e.sub(o).sub(c),l=f.add(u).neg();return{k1:d,k2:l}};It.prototype.pointFromX=function(e,r){e=new Y(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),s=n.redSqrt();if(s.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var i=s.fromRed().isOdd();return(r&&!i||!r&&i)&&(s=s.redNeg()),this.point(e,s)};It.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,s=this.a.redMul(r),i=r.redSqr().redMul(r).redIAdd(s).redIAdd(this.b);return n.redSqr().redISub(i).cmpn(0)===0};It.prototype._endoWnafMulAdd=function(e,r,n){for(var s=this._endoWnafT1,i=this._endoWnafT2,a=0;a<e.length;a++){var o=this._endoSplit(r[a]),c=e[a],f=c._getBeta();o.k1.negative&&(o.k1.ineg(),c=c.neg(!0)),o.k2.negative&&(o.k2.ineg(),f=f.neg(!0)),s[a*2]=c,s[a*2+1]=f,i[a*2]=o.k1,i[a*2+1]=o.k2}for(var u=this._wnafMulAdd(1,s,i,a*2,n),d=0;d<a*2;d++)s[d]=null,i[d]=null;return u};function Ke(t,e,r,n){an.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Y(e,16),this.y=new Y(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Gf(Ke,an.BasePoint);It.prototype.point=function(e,r,n){return new Ke(this,e,r,n)};It.prototype.pointFromJSON=function(e,r){return Ke.fromJSON(this,e,r)};Ke.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,s=function(i){return n.point(i.x.redMul(n.endo.beta),i.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(s)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(s)}}}return r}};Ke.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Ke.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var s=e.point(r[0],r[1],n);if(!r[2])return s;function i(o){return e.point(o[0],o[1],n)}var a=r[2];return s.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[s].concat(a.doubles.points.map(i))},naf:a.naf&&{wnd:a.naf.wnd,points:[s].concat(a.naf.points.map(i))}},s};Ke.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Ke.prototype.isInfinity=function(){return this.inf};Ke.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),s=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,s)};Ke.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),s=e.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(s),a=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};Ke.prototype.getX=function(){return this.x.fromRed()};Ke.prototype.getY=function(){return this.y.fromRed()};Ke.prototype.mul=function(e){return e=new Y(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Ke.prototype.mulAdd=function(e,r,n){var s=[this,r],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(s,i):this.curve._wnafMulAdd(1,s,i,2)};Ke.prototype.jmulAdd=function(e,r,n){var s=[this,r],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(s,i,!0):this.curve._wnafMulAdd(1,s,i,2,!0)};Ke.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Ke.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,s=function(i){return i.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(s)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(s)}}}return r};Ke.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Xe(t,e,r,n){an.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Y(0)):(this.x=new Y(e,16),this.y=new Y(r,16),this.z=new Y(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Gf(Xe,an.BasePoint);It.prototype.jpoint=function(e,r,n){return new Xe(this,e,r,n)};Xe.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),s=this.y.redMul(r).redMul(e);return this.curve.point(n,s)};Xe.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Xe.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),s=this.x.redMul(r),i=e.x.redMul(n),a=this.y.redMul(r.redMul(e.z)),o=e.y.redMul(n.redMul(this.z)),c=s.redSub(i),f=a.redSub(o);if(c.cmpn(0)===0)return f.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=c.redSqr(),d=u.redMul(c),l=s.redMul(u),x=f.redSqr().redIAdd(d).redISub(l).redISub(l),p=f.redMul(l.redISub(x)).redISub(a.redMul(d)),h=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(x,p,h)};Xe.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,s=e.x.redMul(r),i=this.y,a=e.y.redMul(r).redMul(this.z),o=n.redSub(s),c=i.redSub(a);if(o.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=o.redSqr(),u=f.redMul(o),d=n.redMul(f),l=c.redSqr().redIAdd(u).redISub(d).redISub(d),x=c.redMul(d.redISub(l)).redISub(i.redMul(u)),p=this.z.redMul(o);return this.curve.jpoint(l,x,p)};Xe.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var s=this.curve.a,i=this.curve.tinv,a=this.x,o=this.y,c=this.z,f=c.redSqr().redSqr(),u=o.redAdd(o);for(r=0;r<e;r++){var d=a.redSqr(),l=u.redSqr(),x=l.redSqr(),p=d.redAdd(d).redIAdd(d).redIAdd(s.redMul(f)),h=a.redMul(l),y=p.redSqr().redISub(h.redAdd(h)),b=h.redISub(y),R=p.redMul(b);R=R.redIAdd(R).redISub(x);var v=u.redMul(c);r+1<e&&(f=f.redMul(x)),a=y,c=v,u=R}return this.curve.jpoint(a,u.redMul(i),c)};Xe.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Xe.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var s=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(s).redISub(a);o=o.redIAdd(o);var c=s.redAdd(s).redIAdd(s),f=c.redSqr().redISub(o).redISub(o),u=a.redIAdd(a);u=u.redIAdd(u),u=u.redIAdd(u),e=f,r=c.redMul(o.redISub(f)).redISub(u),n=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),l=this.y.redSqr(),x=l.redSqr(),p=this.x.redAdd(l).redSqr().redISub(d).redISub(x);p=p.redIAdd(p);var h=d.redAdd(d).redIAdd(d),y=h.redSqr(),b=x.redIAdd(x);b=b.redIAdd(b),b=b.redIAdd(b),e=y.redISub(p).redISub(p),r=h.redMul(p.redISub(e)).redISub(b),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};Xe.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var s=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(s).redISub(a);o=o.redIAdd(o);var c=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),f=c.redSqr().redISub(o).redISub(o);e=f;var u=a.redIAdd(a);u=u.redIAdd(u),u=u.redIAdd(u),r=c.redMul(o.redISub(f)).redISub(u),n=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),l=this.y.redSqr(),x=this.x.redMul(l),p=this.x.redSub(d).redMul(this.x.redAdd(d));p=p.redAdd(p).redIAdd(p);var h=x.redIAdd(x);h=h.redIAdd(h);var y=h.redAdd(h);e=p.redSqr().redISub(y),n=this.y.redAdd(this.z).redSqr().redISub(l).redISub(d);var b=l.redSqr();b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b),r=p.redMul(h.redISub(e)).redISub(b)}return this.curve.jpoint(e,r,n)};Xe.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,s=this.z,i=s.redSqr().redSqr(),a=r.redSqr(),o=n.redSqr(),c=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(i)),f=r.redAdd(r);f=f.redIAdd(f);var u=f.redMul(o),d=c.redSqr().redISub(u.redAdd(u)),l=u.redISub(d),x=o.redSqr();x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var p=c.redMul(l).redISub(x),h=n.redAdd(n).redMul(s);return this.curve.jpoint(d,p,h)};Xe.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),s=r.redSqr(),i=e.redAdd(e).redIAdd(e),a=i.redSqr(),o=this.x.redAdd(r).redSqr().redISub(e).redISub(s);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(a);var c=o.redSqr(),f=s.redIAdd(s);f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var u=i.redIAdd(o).redSqr().redISub(a).redISub(c).redISub(f),d=r.redMul(u);d=d.redIAdd(d),d=d.redIAdd(d);var l=this.x.redMul(c).redISub(d);l=l.redIAdd(l),l=l.redIAdd(l);var x=this.y.redMul(u.redMul(f.redISub(u)).redISub(o.redMul(c)));x=x.redIAdd(x),x=x.redIAdd(x),x=x.redIAdd(x);var p=this.z.redAdd(o).redSqr().redISub(n).redISub(c);return this.curve.jpoint(l,x,p)};Xe.prototype.mul=function(e,r){return e=new Y(e,r),this.curve._wnafMul(this,e)};Xe.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var s=r.redMul(this.z),i=n.redMul(e.z);return this.y.redMul(i).redISub(e.y.redMul(s)).cmpn(0)===0};Xe.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var s=e.clone(),i=this.curve.redN.redMul(r);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(i),this.x.cmp(n)===0)return!0}};Xe.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Xe.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var ta=ss(function(t,e){var r=e;r.base=an,r.short=vv,r.mont=null,r.edwards=null}),ra=ss(function(t,e){var r=e,n=yt.assert;function s(o){o.type==="short"?this.curve=new ta.short(o):o.type==="edwards"?this.curve=new ta.edwards(o):this.curve=new ta.mont(o),this.g=this.curve.g,this.n=this.curve.n,this.hash=o.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=s;function i(o,c){Object.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){var f=new s(c);return Object.defineProperty(r,o,{configurable:!0,enumerable:!0,value:f}),f}})}i("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:ut.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),i("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:ut.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),i("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:ut.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),i("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:ut.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),i("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:ut.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),i("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ut.sha256,gRed:!1,g:["9"]}),i("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ut.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch{a=void 0}i("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:ut.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})});function Dr(t){if(!(this instanceof Dr))return new Dr(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Ft.toArray(t.entropy,t.entropyEnc||"hex"),r=Ft.toArray(t.nonce,t.nonceEnc||"hex"),n=Ft.toArray(t.pers,t.persEnc||"hex");jf(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var Op=Dr;Dr.prototype._init=function(e,r,n){var s=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(s),this._reseed=1,this.reseedInterval=281474976710656};Dr.prototype._hmac=function(){return new ut.hmac(this.hash,this.K)};Dr.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Dr.prototype.reseed=function(e,r,n,s){typeof r!="string"&&(s=n,n=r,r=null),e=Ft.toArray(e,r),n=Ft.toArray(n,s),jf(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Dr.prototype.generate=function(e,r,n,s){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(s=n,n=r,r=null),n&&(n=Ft.toArray(n,s||"hex"),this._update(n));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var a=i.slice(0,e);return this._update(n),this._reseed++,Ft.encode(a,r)};var ef=yt.assert;function Qe(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Wf=Qe;Qe.fromPublic=function(e,r,n){return r instanceof Qe?r:new Qe(e,{pub:r,pubEnc:n})};Qe.fromPrivate=function(e,r,n){return r instanceof Qe?r:new Qe(e,{priv:r,privEnc:n})};Qe.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Qe.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Qe.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Qe.prototype._importPrivate=function(e,r){this.priv=new Y(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Qe.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?ef(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&ef(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Qe.prototype.derive=function(e){return e.validate()||ef(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Qe.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};Qe.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};Qe.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Ev=yt.assert;function so(t,e){if(t instanceof so)return t;this._importDER(t,e)||(Ev(t.r&&t.s,"Signature without r or s"),this.r=new Y(t.r,16),this.s=new Y(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var io=so;function Sv(){this.place=0}function xu(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var s=0,i=0,a=e.place;i<n;i++,a++)s<<=8,s|=t[a],s>>>=0;return s<=127?!1:(e.place=a,s)}function sh(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}so.prototype._importDER=function(e,r){e=yt.toArray(e,r);var n=new Sv;if(e[n.place++]!==48)return!1;var s=xu(e,n);if(s===!1||s+n.place!==e.length||e[n.place++]!==2)return!1;var i=xu(e,n);if(i===!1)return!1;var a=e.slice(n.place,i+n.place);if(n.place+=i,e[n.place++]!==2)return!1;var o=xu(e,n);if(o===!1||e.length!==o+n.place)return!1;var c=e.slice(n.place,o+n.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new Y(a),this.s=new Y(c),this.recoveryParam=null,!0};function bu(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}so.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=sh(r),n=sh(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var s=[2];bu(s,r.length),s=s.concat(r),s.push(2),bu(s,n.length);var i=s.concat(n),a=[48];return bu(a,i.length),a=a.concat(i),yt.encode(a,e)};var _v=function(){throw new Error("unsupported")},Up=yt.assert;function kt(t){if(!(this instanceof kt))return new kt(t);typeof t=="string"&&(Up(Object.prototype.hasOwnProperty.call(ra,t),"Unknown curve "+t),t=ra[t]),t instanceof ra.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var Av=kt;kt.prototype.keyPair=function(e){return new Wf(this,e)};kt.prototype.keyFromPrivate=function(e,r){return Wf.fromPrivate(this,e,r)};kt.prototype.keyFromPublic=function(e,r){return Wf.fromPublic(this,e,r)};kt.prototype.genKeyPair=function(e){e||(e={});for(var r=new Op({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||_v(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),s=this.n.sub(new Y(2));;){var i=new Y(r.generate(n));if(!(i.cmp(s)>0))return i.iaddn(1),this.keyFromPrivate(i)}};kt.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};kt.prototype.sign=function(e,r,n,s){typeof n=="object"&&(s=n,n=null),s||(s={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new Y(e,16));for(var i=this.n.byteLength(),a=r.getPrivate().toArray("be",i),o=e.toArray("be",i),c=new Op({hash:this.hash,entropy:a,nonce:o,pers:s.pers,persEnc:s.persEnc||"utf8"}),f=this.n.sub(new Y(1)),u=0;;u++){var d=s.k?s.k(u):new Y(c.generate(this.n.byteLength()));if(d=this._truncateToN(d,!0),!(d.cmpn(1)<=0||d.cmp(f)>=0)){var l=this.g.mul(d);if(!l.isInfinity()){var x=l.getX(),p=x.umod(this.n);if(p.cmpn(0)!==0){var h=d.invm(this.n).mul(p.mul(r.getPrivate()).iadd(e));if(h=h.umod(this.n),h.cmpn(0)!==0){var y=(l.getY().isOdd()?1:0)|(x.cmp(p)!==0?2:0);return s.canonical&&h.cmp(this.nh)>0&&(h=this.n.sub(h),y^=1),new io({r:p,s:h,recoveryParam:y})}}}}}};kt.prototype.verify=function(e,r,n,s){e=this._truncateToN(new Y(e,16)),n=this.keyFromPublic(n,s),r=new io(r,"hex");var i=r.r,a=r.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var o=a.invm(this.n),c=o.mul(e).umod(this.n),f=o.mul(i).umod(this.n),u;return this.curve._maxwellTrick?(u=this.g.jmulAdd(c,n.getPublic(),f),u.isInfinity()?!1:u.eqXToP(i)):(u=this.g.mulAdd(c,n.getPublic(),f),u.isInfinity()?!1:u.getX().umod(this.n).cmp(i)===0)};kt.prototype.recoverPubKey=function(t,e,r,n){Up((3&r)===r,"The recovery param is more than two bits"),e=new io(e,n);var s=this.n,i=new Y(t),a=e.r,o=e.s,c=r&1,f=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");f?a=this.curve.pointFromX(a.add(this.curve.n),c):a=this.curve.pointFromX(a,c);var u=e.r.invm(s),d=s.sub(i).mul(u).umod(s),l=o.mul(u).umod(s);return this.g.mulAdd(d,a,l)};kt.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new io(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var s=0;s<4;s++){var i;try{i=this.recoverPubKey(t,e,s)}catch{continue}if(i.eq(r))return s}throw new Error("Unable to find valid recovery factor")};var Tv=ss(function(t,e){var r=e;r.version="6.5.4",r.utils=yt,r.rand=function(){throw new Error("unsupported")},r.curve=ta,r.curves=ra,r.ec=Av,r.eddsa=null}),Pv=Tv.ec;const Rv="signing-key/5.7.0",tf=new D(Rv);let gu=null;function jt(){return gu||(gu=new Pv("secp256k1")),gu}class In{constructor(e){N(this,"curve","secp256k1"),N(this,"privateKey",W(e)),j0(this.privateKey)!==32&&tf.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=jt().keyFromPrivate(F(this.privateKey));N(this,"publicKey","0x"+r.getPublic(!1,"hex")),N(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),N(this,"_isSigningKey",!0)}_addPoint(e){const r=jt().keyFromPublic(F(this.publicKey)),n=jt().keyFromPublic(F(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=jt().keyFromPrivate(F(this.privateKey)),n=F(e);n.length!==32&&tf.throwArgumentError("bad digest length","digest",e);const s=r.sign(n,{canonical:!0});return es({recoveryParam:s.recoveryParam,r:at("0x"+s.r.toString(16),32),s:at("0x"+s.s.toString(16),32)})}computeSharedSecret(e){const r=jt().keyFromPrivate(F(this.privateKey)),n=jt().keyFromPublic(F(Np(e)));return at("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function $p(t,e){const r=es(e),n={r:F(r.r),s:F(r.s)};return"0x"+jt().recoverPubKey(F(t),n,r.recoveryParam).encode("hex",!1)}function Np(t,e){const r=F(t);if(r.length===32){const n=new In(r);return e?"0x"+jt().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return e?W(r):"0x"+jt().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return e?"0x"+jt().keyFromPublic(r).getPublic(!0,"hex"):W(r)}return tf.throwArgumentError("invalid public or private key","key","[REDACTED]")}const kv="transactions/5.7.0",Lt=new D(kv);var ih;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(ih||(ih={}));const Cv=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],Bv={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function $r(t){const e=Np(t);return Me(Xr(ze(Xr(e,1)),12))}function Dp(t,e){return $r($p(F(t),e))}function dt(t,e){const r=hr(J.from(t).toHexString());return r.length>32&&Lt.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function mu(t,e){return{address:Me(t),storageKeys:(e||[]).map((r,n)=>(j0(r)!==32&&Lt.throwArgumentError("invalid access list storageKey",`accessList[${t}:${n}]`,r),r.toLowerCase()))}}function Lp(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(r.length>2&&Lt.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),mu(r[0],r[1])):mu(r.address,r.storageKeys));const e=Object.keys(t).map(r=>{const n=t[r].reduce((s,i)=>(s[i]=!0,s),{});return mu(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function Mp(t){return Lp(t).map(e=>[e.address,e.storageKeys])}function Iv(t,e){if(t.gasPrice!=null){const n=J.from(t.gasPrice),s=J.from(t.maxFeePerGas||0);n.eq(s)||Lt.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:s})}const r=[dt(t.chainId||0,"chainId"),dt(t.nonce||0,"nonce"),dt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),dt(t.maxFeePerGas||0,"maxFeePerGas"),dt(t.gasLimit||0,"gasLimit"),t.to!=null?Me(t.to):"0x",dt(t.value||0,"value"),t.data||"0x",Mp(t.accessList||[])];if(e){const n=es(e);r.push(dt(n.recoveryParam,"recoveryParam")),r.push(hr(n.r)),r.push(hr(n.s))}return Wr(["0x02",Hs(r)])}function Ov(t,e){const r=[dt(t.chainId||0,"chainId"),dt(t.nonce||0,"nonce"),dt(t.gasPrice||0,"gasPrice"),dt(t.gasLimit||0,"gasLimit"),t.to!=null?Me(t.to):"0x",dt(t.value||0,"value"),t.data||"0x",Mp(t.accessList||[])];if(e){const n=es(e);r.push(dt(n.recoveryParam,"recoveryParam")),r.push(hr(n.r)),r.push(hr(n.s))}return Wr(["0x01",Hs(r)])}function Uv(t,e){cv(t,Bv);const r=[];Cv.forEach(function(a){let o=t[a.name]||[];const c={};a.numeric&&(c.hexPad="left"),o=F(W(o,c)),a.length&&o.length!==a.length&&o.length>0&&Lt.throwArgumentError("invalid length for "+a.name,"transaction:"+a.name,o),a.maxLength&&(o=hr(o),o.length>a.maxLength&&Lt.throwArgumentError("invalid length for "+a.name,"transaction:"+a.name,o)),r.push(W(o))});let n=0;if(t.chainId!=null?(n=t.chainId,typeof n!="number"&&Lt.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!$f(e)&&e.v>28&&(n=Math.floor((e.v-35)/2)),n!==0&&(r.push(W(n)),r.push("0x"),r.push("0x")),!e)return Hs(r);const s=es(e);let i=27+s.recoveryParam;return n!==0?(r.pop(),r.pop(),r.pop(),i+=n*2+8,s.v>28&&s.v!==i&&Lt.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):s.v!==i&&Lt.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),r.push(W(i)),r.push(hr(F(s.r))),r.push(hr(F(s.s))),Hs(r)}function ah(t,e){if(t.type==null||t.type===0)return t.accessList!=null&&Lt.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),Uv(t,e);switch(t.type){case 1:return Ov(t,e);case 2:return Iv(t,e)}return Lt.throwError(`unsupported transaction type: ${t.type}`,D.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}const $v="abstract-provider/5.7.0";var Nv=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?i(u.value):s(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Dv=new D($v);class ao{constructor(){Dv.checkAbstract(new.target,ao),N(this,"_isProvider",!0)}getFeeData(){return Nv(this,void 0,void 0,function*(){const{block:e,gasPrice:r}=yield ur({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(a=>null)});let n=null,s=null,i=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,i=J.from("1500000000"),s=e.baseFeePerGas.mul(2).add(i)),{lastBaseFeePerGas:n,maxFeePerGas:s,maxPriorityFeePerGas:i,gasPrice:r}})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}}const Lv="abstract-signer/5.7.0";var Ot=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?i(u.value):s(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const bt=new D(Lv),Mv=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],Fv=[D.errors.INSUFFICIENT_FUNDS,D.errors.NONCE_EXPIRED,D.errors.REPLACEMENT_UNDERPRICED];class ui{constructor(){bt.checkAbstract(new.target,ui),N(this,"_isSigner",!0)}getBalance(e){return Ot(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return Ot(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return Ot(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const r=yield ur(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return Ot(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield ur(this.checkTransaction(e));return yield this.provider.call(n,r)})}sendTransaction(e){return Ot(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const r=yield this.populateTransaction(e),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return Ot(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Ot(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Ot(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return Ot(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)Mv.indexOf(n)===-1&&bt.throwArgumentError("invalid transaction key: "+n,"transaction",e);const r=Nr(e);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&bt.throwArgumentError("from address mismatch","transaction",e),n[0])),r}populateTransaction(e){return Ot(this,void 0,void 0,function*(){const r=yield ur(this.checkTransaction(e));r.to!=null&&(r.to=Promise.resolve(r.to).then(s=>Ot(this,void 0,void 0,function*(){if(s==null)return null;const i=yield this.resolveName(s);return i==null&&bt.throwArgumentError("provided ENS name resolves to null","tx.to",s),i})),r.to.catch(s=>{}));const n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?bt.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(r.type===0||r.type===1)&&n&&bt.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{const s=yield this.getFeeData();if(r.type==null)if(s.maxFeePerGas!=null&&s.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const i=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=i,r.maxPriorityFeePerGas=i}else r.maxFeePerGas==null&&(r.maxFeePerGas=s.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=s.maxPriorityFeePerGas);else s.gasPrice!=null?(n&&bt.throwError("network does not support EIP-1559",D.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=s.gasPrice),r.type=0):bt.throwError("failed to get consistent fee data",D.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=s.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=s.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(s=>{if(Fv.indexOf(s.code)>=0)throw s;return bt.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",D.errors.UNPREDICTABLE_GAS_LIMIT,{error:s,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(s=>(s[1]!==0&&s[0]!==s[1]&&bt.throwArgumentError("chainId address mismatch","transaction",e),s[0])),yield ur(r)})}_checkProvider(e){this.provider||bt.throwError("missing provider",D.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class Vf extends ui{constructor(e,r){super(),N(this,"address",e),N(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,r){return Promise.resolve().then(()=>{bt.throwError(e,D.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new Vf(this.address,e)}}class Fp{constructor(e){N(this,"alphabet",e),N(this,"base",e.length),N(this,"_alphabetMap",{}),N(this,"_leader",e.charAt(0));for(let r=0;r<e.length;r++)this._alphabetMap[e.charAt(r)]=r}encode(e){let r=F(e);if(r.length===0)return"";let n=[0];for(let i=0;i<r.length;++i){let a=r[i];for(let o=0;o<n.length;++o)a+=n[o]<<8,n[o]=a%this.base,a=a/this.base|0;for(;a>0;)n.push(a%this.base),a=a/this.base|0}let s="";for(let i=0;r[i]===0&&i<r.length-1;++i)s+=this._leader;for(let i=n.length-1;i>=0;--i)s+=this.alphabet[n[i]];return s}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let r=[];if(e.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<e.length;n++){let s=this._alphabetMap[e[n]];if(s===void 0)throw new Error("Non-base"+this.base+" character");let i=s;for(let a=0;a<r.length;++a)i+=r[a]*this.base,r[a]=i&255,i>>=8;for(;i>0;)r.push(i&255),i>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)r.push(0);return F(new Uint8Array(r.reverse()))}}new Fp("abcdefghijklmnopqrstuvwxyz234567");const Hp=new Fp("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var qs;(function(t){t.sha256="sha256",t.sha512="sha512"})(qs||(qs={}));const Hv="sha2/5.7.0",qv=new D(Hv);function zv(t){return"0x"+ut.ripemd160().update(F(t)).digest("hex")}function zs(t){return"0x"+ut.sha256().update(F(t)).digest("hex")}function va(t,e,r){return qs[t]||qv.throwError("unsupported algorithm "+t,D.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+ut.hmac(ut[t],F(e)).update(F(r)).digest("hex")}function Jf(t,e,r,n,s){t=F(t),e=F(e);let i,a=1;const o=new Uint8Array(n),c=new Uint8Array(e.length+4);c.set(e);let f,u;for(let d=1;d<=a;d++){c[e.length]=d>>24&255,c[e.length+1]=d>>16&255,c[e.length+2]=d>>8&255,c[e.length+3]=d&255;let l=F(va(s,t,c));i||(i=l.length,u=new Uint8Array(i),a=Math.ceil(n/i),f=n-(a-1)*i),u.set(l);for(let h=1;h<r;h++){l=F(va(s,t,l));for(let y=0;y<i;y++)u[y]^=l[y]}const x=(d-1)*i,p=d===a?f:i;o.set(F(u).slice(0,p),x)}return W(o)}const Kv="wordlists/5.7.0",jv=new D(Kv);class fi{constructor(e){jv.checkAbstract(new.target,fi),N(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const r=[];for(let n=0;n<2048;n++){const s=e.getWord(n);if(n!==e.getWordIndex(s))return"0x";r.push(s)}return Gr(r.join(`
`)+`
`)}static register(e,r){r||(r=e.locale)}}const Gv="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let Is=null;function oh(t){if(Is==null&&(Is=Gv.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),fi.check(t)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw Is=null,new Error("BIP39 Wordlist for en (English) FAILED")}class Wv extends fi{constructor(){super("en")}getWord(e){return oh(this),Is[e]}getWordIndex(e){return oh(this),Is.indexOf(e)}}const qp=new Wv;fi.register(qp);const ch={en:qp},Vv="hdnode/5.7.0",Ea=new D(Vv),Jv=J.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Xv=tr("Bitcoin seed"),bs=2147483648;function zp(t){return(1<<t)-1<<8-t}function Yv(t){return(1<<t)-1}function $i(t){return at(W(t),32)}function uh(t){return Hp.encode(it([t,Xr(zs(zs(t)),0,4)]))}function Xf(t){if(t==null)return ch.en;if(typeof t=="string"){const e=ch[t];return e==null&&Ea.throwArgumentError("unknown locale","wordlist",t),e}return t}const xn={},Ks="m/44'/60'/0'/0/0";class Et{constructor(e,r,n,s,i,a,o,c){if(e!==xn)throw new Error("HDNode constructor cannot be called directly");if(r){const f=new In(r);N(this,"privateKey",f.privateKey),N(this,"publicKey",f.compressedPublicKey)}else N(this,"privateKey",null),N(this,"publicKey",W(n));N(this,"parentFingerprint",s),N(this,"fingerprint",Xr(zv(zs(this.publicKey)),0,4)),N(this,"address",$r(this.publicKey)),N(this,"chainCode",i),N(this,"index",a),N(this,"depth",o),c==null?(N(this,"mnemonic",null),N(this,"path",null)):typeof c=="string"?(N(this,"mnemonic",null),N(this,"path",c)):(N(this,"mnemonic",c),N(this,"path",c.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return uh(it([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",W(this.depth),this.parentFingerprint,at(W(this.index),4),this.chainCode,this.privateKey!=null?it(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new Et(xn,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let r=this.path;r&&(r+="/"+(e&~bs));const n=new Uint8Array(37);if(e&bs){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set(F(this.privateKey),1),r&&(r+="'")}else n.set(F(this.publicKey));for(let d=24;d>=0;d-=8)n[33+(d>>3)]=e>>24-d&255;const s=F(va(qs.sha512,this.chainCode,n)),i=s.slice(0,32),a=s.slice(32);let o=null,c=null;this.privateKey?o=$i(J.from(i).add(this.privateKey).mod(Jv)):c=new In(W(i))._addPoint(this.publicKey);let f=r;const u=this.mnemonic;return u&&(f=Object.freeze({phrase:u.phrase,path:r,locale:u.locale||"en"})),new Et(xn,o,c,this.fingerprint,$i(a),e,this.depth+1,f)}derivePath(e){const r=e.split("/");if(r.length===0||r[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);r[0]==="m"&&r.shift();let n=this;for(let s=0;s<r.length;s++){const i=r[s];if(i.match(/^[0-9]+'$/)){const a=parseInt(i.substring(0,i.length-1));if(a>=bs)throw new Error("invalid path index - "+i);n=n._derive(bs+a)}else if(i.match(/^[0-9]+$/)){const a=parseInt(i);if(a>=bs)throw new Error("invalid path index - "+i);n=n._derive(a)}else throw new Error("invalid path component - "+i)}return n}static _fromSeed(e,r){const n=F(e);if(n.length<16||n.length>64)throw new Error("invalid seed");const s=F(va(qs.sha512,Xv,n));return new Et(xn,$i(s.slice(0,32)),null,"0x00000000",$i(s.slice(32)),0,0,r)}static fromMnemonic(e,r,n){return n=Xf(n),e=Yf(Kp(e,n),n),Et._fromSeed(Zv(e,r),{phrase:e,path:"m",locale:n.locale})}static fromSeed(e){return Et._fromSeed(e,null)}static fromExtendedKey(e){const r=Hp.decode(e);(r.length!==82||uh(r.slice(0,78))!==e)&&Ea.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const n=r[4],s=W(r.slice(5,9)),i=parseInt(W(r.slice(9,13)).substring(2),16),a=W(r.slice(13,45)),o=r.slice(45,78);switch(W(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new Et(xn,null,W(o),s,a,i,n,null);case"0x0488ade4":case"0x04358394 ":if(o[0]!==0)break;return new Et(xn,W(o.slice(1)),null,s,a,i,n,null)}return Ea.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function Zv(t,e){e||(e="");const r=tr("mnemonic"+e,Yr.NFKD);return Jf(tr(t,Yr.NFKD),r,2048,64,"sha512")}function Kp(t,e){e=Xf(e),Ea.checkNormalize();const r=e.split(t);if(r.length%3!==0)throw new Error("invalid mnemonic");const n=F(new Uint8Array(Math.ceil(11*r.length/8)));let s=0;for(let f=0;f<r.length;f++){let u=e.getWordIndex(r[f].normalize("NFKD"));if(u===-1)throw new Error("invalid mnemonic");for(let d=0;d<11;d++)u&1<<10-d&&(n[s>>3]|=1<<7-s%8),s++}const i=32*r.length/3,a=r.length/3,o=zp(a);if((F(zs(n.slice(0,i/8)))[0]&o)!==(n[n.length-1]&o))throw new Error("invalid checksum");return W(n.slice(0,i/8))}function Yf(t,e){if(e=Xf(e),t=F(t),t.length%4!==0||t.length<16||t.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let a=0;a<t.length;a++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=t[a],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=t[a]>>8-n,r.push(t[a]&Yv(8-n)),n+=3);const s=t.length/4,i=F(zs(t))[0]&zp(s);return r[r.length-1]<<=s,r[r.length-1]|=i>>8-s,e.join(r.map(a=>e.getWord(a)))}const Qv="random/5.7.0",rf=new D(Qv);function e3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof $s<"u")return $s;throw new Error("unable to locate global object")}const fh=e3();let na=fh.crypto||fh.msCrypto;(!na||!na.getRandomValues)&&(rf.warn("WARNING: Missing strong random number source"),na={getRandomValues:function(t){return rf.throwError("no secure random source avaialble",D.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function Ts(t){(t<=0||t>1024||t%1||t!=t)&&rf.throwArgumentError("invalid length","length",t);const e=new Uint8Array(t);return na.getRandomValues(e),F(e)}var jp={exports:{}};(function(t,e){(function(r){function n(m){return parseInt(m)===m}function s(m){if(!n(m.length))return!1;for(var S=0;S<m.length;S++)if(!n(m[S])||m[S]<0||m[S]>255)return!1;return!0}function i(m,S){if(m.buffer&&ArrayBuffer.isView(m)&&m.name==="Uint8Array")return S&&(m.slice?m=m.slice():m=Array.prototype.slice.call(m)),m;if(Array.isArray(m)){if(!s(m))throw new Error("Array contains invalid value: "+m);return new Uint8Array(m)}if(n(m.length)&&s(m))return new Uint8Array(m);throw new Error("unsupported array-like object")}function a(m){return new Uint8Array(m)}function o(m,S,U,_,P){(_!=null||P!=null)&&(m.slice?m=m.slice(_,P):m=Array.prototype.slice.call(m,_,P)),S.set(m,U)}var c=function(){function m(U){var _=[],P=0;for(U=encodeURI(U);P<U.length;){var G=U.charCodeAt(P++);G===37?(_.push(parseInt(U.substr(P,2),16)),P+=2):_.push(G)}return i(_)}function S(U){for(var _=[],P=0;P<U.length;){var G=U[P];G<128?(_.push(String.fromCharCode(G)),P++):G>191&&G<224?(_.push(String.fromCharCode((G&31)<<6|U[P+1]&63)),P+=2):(_.push(String.fromCharCode((G&15)<<12|(U[P+1]&63)<<6|U[P+2]&63)),P+=3)}return _.join("")}return{toBytes:m,fromBytes:S}}(),f=function(){function m(_){for(var P=[],G=0;G<_.length;G+=2)P.push(parseInt(_.substr(G,2),16));return P}var S="0123456789abcdef";function U(_){for(var P=[],G=0;G<_.length;G++){var xe=_[G];P.push(S[(xe&240)>>4]+S[xe&15])}return P.join("")}return{toBytes:m,fromBytes:U}}(),u={16:10,24:12,32:14},d=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],l=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],x=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],p=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],h=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],y=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],b=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],R=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],v=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],E=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],A=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],M=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],q=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],L=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],K=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function $(m){for(var S=[],U=0;U<m.length;U+=4)S.push(m[U]<<24|m[U+1]<<16|m[U+2]<<8|m[U+3]);return S}var C=function(m){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:i(m,!0)}),this._prepare()};C.prototype._prepare=function(){var m=u[this.key.length];if(m==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var S=0;S<=m;S++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var U=(m+1)*4,_=this.key.length/4,P=$(this.key),G,S=0;S<_;S++)G=S>>2,this._Ke[G][S%4]=P[S],this._Kd[m-G][S%4]=P[S];for(var xe=0,ne=_,ee;ne<U;){if(ee=P[_-1],P[0]^=l[ee>>16&255]<<24^l[ee>>8&255]<<16^l[ee&255]<<8^l[ee>>24&255]^d[xe]<<24,xe+=1,_!=8)for(var S=1;S<_;S++)P[S]^=P[S-1];else{for(var S=1;S<_/2;S++)P[S]^=P[S-1];ee=P[_/2-1],P[_/2]^=l[ee&255]^l[ee>>8&255]<<8^l[ee>>16&255]<<16^l[ee>>24&255]<<24;for(var S=_/2+1;S<_;S++)P[S]^=P[S-1]}for(var S=0,je,Ge;S<_&&ne<U;)je=ne>>2,Ge=ne%4,this._Ke[je][Ge]=P[S],this._Kd[m-je][Ge]=P[S++],ne++}for(var je=1;je<m;je++)for(var Ge=0;Ge<4;Ge++)ee=this._Kd[je][Ge],this._Kd[je][Ge]=M[ee>>24&255]^q[ee>>16&255]^L[ee>>8&255]^K[ee&255]},C.prototype.encrypt=function(m){if(m.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var S=this._Ke.length-1,U=[0,0,0,0],_=$(m),P=0;P<4;P++)_[P]^=this._Ke[0][P];for(var G=1;G<S;G++){for(var P=0;P<4;P++)U[P]=p[_[P]>>24&255]^h[_[(P+1)%4]>>16&255]^y[_[(P+2)%4]>>8&255]^b[_[(P+3)%4]&255]^this._Ke[G][P];_=U.slice()}for(var xe=a(16),ne,P=0;P<4;P++)ne=this._Ke[S][P],xe[4*P]=(l[_[P]>>24&255]^ne>>24)&255,xe[4*P+1]=(l[_[(P+1)%4]>>16&255]^ne>>16)&255,xe[4*P+2]=(l[_[(P+2)%4]>>8&255]^ne>>8)&255,xe[4*P+3]=(l[_[(P+3)%4]&255]^ne)&255;return xe},C.prototype.decrypt=function(m){if(m.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var S=this._Kd.length-1,U=[0,0,0,0],_=$(m),P=0;P<4;P++)_[P]^=this._Kd[0][P];for(var G=1;G<S;G++){for(var P=0;P<4;P++)U[P]=R[_[P]>>24&255]^v[_[(P+3)%4]>>16&255]^E[_[(P+2)%4]>>8&255]^A[_[(P+1)%4]&255]^this._Kd[G][P];_=U.slice()}for(var xe=a(16),ne,P=0;P<4;P++)ne=this._Kd[S][P],xe[4*P]=(x[_[P]>>24&255]^ne>>24)&255,xe[4*P+1]=(x[_[(P+3)%4]>>16&255]^ne>>16)&255,xe[4*P+2]=(x[_[(P+2)%4]>>8&255]^ne>>8)&255,xe[4*P+3]=(x[_[(P+1)%4]&255]^ne)&255;return xe};var g=function(m){if(!(this instanceof g))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new C(m)};g.prototype.encrypt=function(m){if(m=i(m),m.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var S=a(m.length),U=a(16),_=0;_<m.length;_+=16)o(m,U,0,_,_+16),U=this._aes.encrypt(U),o(U,S,_);return S},g.prototype.decrypt=function(m){if(m=i(m),m.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var S=a(m.length),U=a(16),_=0;_<m.length;_+=16)o(m,U,0,_,_+16),U=this._aes.decrypt(U),o(U,S,_);return S};var w=function(m,S){if(!(this instanceof w))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!S)S=a(16);else if(S.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=i(S,!0),this._aes=new C(m)};w.prototype.encrypt=function(m){if(m=i(m),m.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var S=a(m.length),U=a(16),_=0;_<m.length;_+=16){o(m,U,0,_,_+16);for(var P=0;P<16;P++)U[P]^=this._lastCipherblock[P];this._lastCipherblock=this._aes.encrypt(U),o(this._lastCipherblock,S,_)}return S},w.prototype.decrypt=function(m){if(m=i(m),m.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var S=a(m.length),U=a(16),_=0;_<m.length;_+=16){o(m,U,0,_,_+16),U=this._aes.decrypt(U);for(var P=0;P<16;P++)S[_+P]=U[P]^this._lastCipherblock[P];o(m,this._lastCipherblock,0,_,_+16)}return S};var T=function(m,S,U){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!S)S=a(16);else if(S.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");U||(U=1),this.segmentSize=U,this._shiftRegister=i(S,!0),this._aes=new C(m)};T.prototype.encrypt=function(m){if(m.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var S=i(m,!0),U,_=0;_<S.length;_+=this.segmentSize){U=this._aes.encrypt(this._shiftRegister);for(var P=0;P<this.segmentSize;P++)S[_+P]^=U[P];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(S,this._shiftRegister,16-this.segmentSize,_,_+this.segmentSize)}return S},T.prototype.decrypt=function(m){if(m.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var S=i(m,!0),U,_=0;_<S.length;_+=this.segmentSize){U=this._aes.encrypt(this._shiftRegister);for(var P=0;P<this.segmentSize;P++)S[_+P]^=U[P];o(this._shiftRegister,this._shiftRegister,0,this.segmentSize),o(m,this._shiftRegister,16-this.segmentSize,_,_+this.segmentSize)}return S};var z=function(m,S){if(!(this instanceof z))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!S)S=a(16);else if(S.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=i(S,!0),this._lastPrecipherIndex=16,this._aes=new C(m)};z.prototype.encrypt=function(m){for(var S=i(m,!0),U=0;U<S.length;U++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),S[U]^=this._lastPrecipher[this._lastPrecipherIndex++];return S},z.prototype.decrypt=z.prototype.encrypt;var H=function(m){if(!(this instanceof H))throw Error("Counter must be instanitated with `new`");m!==0&&!m&&(m=1),typeof m=="number"?(this._counter=a(16),this.setValue(m)):this.setBytes(m)};H.prototype.setValue=function(m){if(typeof m!="number"||parseInt(m)!=m)throw new Error("invalid counter value (must be an integer)");for(var S=15;S>=0;--S)this._counter[S]=m%256,m=m>>8},H.prototype.setBytes=function(m){if(m=i(m,!0),m.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=m},H.prototype.increment=function(){for(var m=15;m>=0;m--)if(this._counter[m]===255)this._counter[m]=0;else{this._counter[m]++;break}};var j=function(m,S){if(!(this instanceof j))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",S instanceof H||(S=new H(S)),this._counter=S,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new C(m)};j.prototype.encrypt=function(m){for(var S=i(m,!0),U=0;U<S.length;U++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),S[U]^=this._remainingCounter[this._remainingCounterIndex++];return S},j.prototype.decrypt=j.prototype.encrypt;function V(m){m=i(m,!0);var S=16-m.length%16,U=a(m.length+S);o(m,U);for(var _=m.length;_<U.length;_++)U[_]=S;return U}function me(m){if(m=i(m,!0),m.length<16)throw new Error("PKCS#7 invalid length");var S=m[m.length-1];if(S>16)throw new Error("PKCS#7 padding byte out of range");for(var U=m.length-S,_=0;_<S;_++)if(m[U+_]!==S)throw new Error("PKCS#7 invalid padding byte");var P=a(U);return o(m,P,0,0,U),P}var he={AES:C,Counter:H,ModeOfOperation:{ecb:g,cbc:w,cfb:T,ofb:z,ctr:j},utils:{hex:f,utf8:c},padding:{pkcs7:{pad:V,strip:me}},_arrayTest:{coerceArray:i,createArray:a,copyArray:o}};t.exports=he})()})(jp);var Zt=jp.exports;const Gp="json-wallets/5.7.0";function Vr(t){return typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),F(t)}function gs(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function Zf(t){return typeof t=="string"?tr(t,Yr.NFKC):F(t)}function ke(t,e){let r=t;const n=e.toLowerCase().split("/");for(let s=0;s<n.length;s++){let i=null;for(const a in r)if(a.toLowerCase()===n[s]){i=r[a];break}if(i===null)return null;r=i}return r}function t3(t){const e=F(t);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const r=W(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const r3=new D(Gp);class n3 extends ns{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function Wp(t,e){const r=JSON.parse(t);e=Zf(e);const n=Me(ke(r,"ethaddr")),s=Vr(ke(r,"encseed"));(!s||s.length%16!==0)&&r3.throwArgumentError("invalid encseed","json",t);const i=F(Jf(e,e,2e3,32,"sha256")).slice(0,16),a=s.slice(0,16),o=s.slice(16),c=new Zt.ModeOfOperation.cbc(i,a),f=Zt.padding.pkcs7.strip(F(c.decrypt(o)));let u="";for(let x=0;x<f.length;x++)u+=String.fromCharCode(f[x]);const d=tr(u),l=ze(d);return new n3({_isCrowdsaleAccount:!0,address:n,privateKey:l})}function Vp(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return e.encseed&&e.ethaddr}function Jp(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}var Xp={exports:{}};(function(t,e){(function(r){function s(h){const y=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let b=1779033703,R=3144134277,v=1013904242,E=2773480762,A=1359893119,M=2600822924,q=528734635,L=1541459225;const K=new Uint32Array(64);function $(j){let V=0,me=j.length;for(;me>=64;){let he=b,m=R,S=v,U=E,_=A,P=M,G=q,xe=L,ne,ee,je,Ge,zr;for(ee=0;ee<16;ee++)je=V+ee*4,K[ee]=(j[je]&255)<<24|(j[je+1]&255)<<16|(j[je+2]&255)<<8|j[je+3]&255;for(ee=16;ee<64;ee++)ne=K[ee-2],Ge=(ne>>>17|ne<<32-17)^(ne>>>19|ne<<32-19)^ne>>>10,ne=K[ee-15],zr=(ne>>>7|ne<<32-7)^(ne>>>18|ne<<32-18)^ne>>>3,K[ee]=(Ge+K[ee-7]|0)+(zr+K[ee-16]|0)|0;for(ee=0;ee<64;ee++)Ge=(((_>>>6|_<<32-6)^(_>>>11|_<<32-11)^(_>>>25|_<<32-25))+(_&P^~_&G)|0)+(xe+(y[ee]+K[ee]|0)|0)|0,zr=((he>>>2|he<<32-2)^(he>>>13|he<<32-13)^(he>>>22|he<<32-22))+(he&m^he&S^m&S)|0,xe=G,G=P,P=_,_=U+Ge|0,U=S,S=m,m=he,he=Ge+zr|0;b=b+he|0,R=R+m|0,v=v+S|0,E=E+U|0,A=A+_|0,M=M+P|0,q=q+G|0,L=L+xe|0,V+=64,me-=64}}$(h);let C,g=h.length%64,w=h.length/536870912|0,T=h.length<<3,z=g<56?56:120,H=h.slice(h.length-g,h.length);for(H.push(128),C=g+1;C<z;C++)H.push(0);return H.push(w>>>24&255),H.push(w>>>16&255),H.push(w>>>8&255),H.push(w>>>0&255),H.push(T>>>24&255),H.push(T>>>16&255),H.push(T>>>8&255),H.push(T>>>0&255),$(H),[b>>>24&255,b>>>16&255,b>>>8&255,b>>>0&255,R>>>24&255,R>>>16&255,R>>>8&255,R>>>0&255,v>>>24&255,v>>>16&255,v>>>8&255,v>>>0&255,E>>>24&255,E>>>16&255,E>>>8&255,E>>>0&255,A>>>24&255,A>>>16&255,A>>>8&255,A>>>0&255,M>>>24&255,M>>>16&255,M>>>8&255,M>>>0&255,q>>>24&255,q>>>16&255,q>>>8&255,q>>>0&255,L>>>24&255,L>>>16&255,L>>>8&255,L>>>0&255]}function i(h,y,b){h=h.length<=64?h:s(h);const R=64+y.length+4,v=new Array(R),E=new Array(64);let A,M=[];for(A=0;A<64;A++)v[A]=54;for(A=0;A<h.length;A++)v[A]^=h[A];for(A=0;A<y.length;A++)v[64+A]=y[A];for(A=R-4;A<R;A++)v[A]=0;for(A=0;A<64;A++)E[A]=92;for(A=0;A<h.length;A++)E[A]^=h[A];function q(){for(let L=R-1;L>=R-4;L--){if(v[L]++,v[L]<=255)return;v[L]=0}}for(;b>=32;)q(),M=M.concat(s(E.concat(s(v)))),b-=32;return b>0&&(q(),M=M.concat(s(E.concat(s(v))).slice(0,b))),M}function a(h,y,b,R,v){let E;for(u(h,(2*b-1)*16,v,0,16),E=0;E<2*b;E++)f(h,E*16,v,16),c(v,R),u(v,0,h,y+E*16,16);for(E=0;E<b;E++)u(h,y+E*2*16,h,E*16,16);for(E=0;E<b;E++)u(h,y+(E*2+1)*16,h,(E+b)*16,16)}function o(h,y){return h<<y|h>>>32-y}function c(h,y){u(h,0,y,0,16);for(let b=8;b>0;b-=2)y[4]^=o(y[0]+y[12],7),y[8]^=o(y[4]+y[0],9),y[12]^=o(y[8]+y[4],13),y[0]^=o(y[12]+y[8],18),y[9]^=o(y[5]+y[1],7),y[13]^=o(y[9]+y[5],9),y[1]^=o(y[13]+y[9],13),y[5]^=o(y[1]+y[13],18),y[14]^=o(y[10]+y[6],7),y[2]^=o(y[14]+y[10],9),y[6]^=o(y[2]+y[14],13),y[10]^=o(y[6]+y[2],18),y[3]^=o(y[15]+y[11],7),y[7]^=o(y[3]+y[15],9),y[11]^=o(y[7]+y[3],13),y[15]^=o(y[11]+y[7],18),y[1]^=o(y[0]+y[3],7),y[2]^=o(y[1]+y[0],9),y[3]^=o(y[2]+y[1],13),y[0]^=o(y[3]+y[2],18),y[6]^=o(y[5]+y[4],7),y[7]^=o(y[6]+y[5],9),y[4]^=o(y[7]+y[6],13),y[5]^=o(y[4]+y[7],18),y[11]^=o(y[10]+y[9],7),y[8]^=o(y[11]+y[10],9),y[9]^=o(y[8]+y[11],13),y[10]^=o(y[9]+y[8],18),y[12]^=o(y[15]+y[14],7),y[13]^=o(y[12]+y[15],9),y[14]^=o(y[13]+y[12],13),y[15]^=o(y[14]+y[13],18);for(let b=0;b<16;++b)h[b]+=y[b]}function f(h,y,b,R){for(let v=0;v<R;v++)b[v]^=h[y+v]}function u(h,y,b,R,v){for(;v--;)b[R++]=h[y++]}function d(h){if(!h||typeof h.length!="number")return!1;for(let y=0;y<h.length;y++){const b=h[y];if(typeof b!="number"||b%1||b<0||b>=256)return!1}return!0}function l(h,y){if(typeof h!="number"||h%1)throw new Error("invalid "+y);return h}function x(h,y,b,R,v,E,A){if(b=l(b,"N"),R=l(R,"r"),v=l(v,"p"),E=l(E,"dkLen"),b===0||(b&b-1)!==0)throw new Error("N must be power of 2");if(b>2147483647/128/R)throw new Error("N too large");if(R>2147483647/128/v)throw new Error("r too large");if(!d(h))throw new Error("password must be an array or buffer");if(h=Array.prototype.slice.call(h),!d(y))throw new Error("salt must be an array or buffer");y=Array.prototype.slice.call(y);let M=i(h,y,v*128*R);const q=new Uint32Array(v*32*R);for(let _=0;_<q.length;_++){const P=_*4;q[_]=(M[P+3]&255)<<24|(M[P+2]&255)<<16|(M[P+1]&255)<<8|(M[P+0]&255)<<0}const L=new Uint32Array(64*R),K=new Uint32Array(32*R*b),$=32*R,C=new Uint32Array(16),g=new Uint32Array(16),w=v*b*2;let T=0,z=null,H=!1,j=0,V=0,me,he;const m=A?parseInt(1e3/R):4294967295,S=typeof setImmediate<"u"?setImmediate:setTimeout,U=function(){if(H)return A(new Error("cancelled"),T/w);let _;switch(j){case 0:he=V*32*R,u(q,he,L,0,$),j=1,me=0;case 1:_=b-me,_>m&&(_=m);for(let G=0;G<_;G++)u(L,0,K,(me+G)*$,$),a(L,$,R,C,g);if(me+=_,T+=_,A){const G=parseInt(1e3*T/w);if(G!==z){if(H=A(null,T/w),H)break;z=G}}if(me<b)break;me=0,j=2;case 2:_=b-me,_>m&&(_=m);for(let G=0;G<_;G++){const xe=(2*R-1)*16,ne=L[xe]&b-1;f(K,ne*$,L,$),a(L,$,R,C,g)}if(me+=_,T+=_,A){const G=parseInt(1e3*T/w);if(G!==z){if(H=A(null,T/w),H)break;z=G}}if(me<b)break;if(u(L,0,q,he,$),V++,V<v){j=0;break}M=[];for(let G=0;G<q.length;G++)M.push(q[G]>>0&255),M.push(q[G]>>8&255),M.push(q[G]>>16&255),M.push(q[G]>>24&255);const P=i(h,M,E);return A&&A(null,1,P),P}A&&S(U)};if(!A)for(;;){const _=U();if(_!=null)return _}U()}const p={scrypt:function(h,y,b,R,v,E,A){return new Promise(function(M,q){let L=0;A&&A(0),x(h,y,b,R,v,E,function(K,$,C){if(K)q(K);else if(C)A&&L!==1&&A(1),M(new Uint8Array(C));else if(A&&$!==L)return L=$,A($)})})},syncScrypt:function(h,y,b,R,v,E){return new Uint8Array(x(h,y,b,R,v,E))}};t.exports=p})()})(Xp);var Qf=Xp.exports,s3=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?i(u.value):s(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const nf=new D(Gp);function dh(t){return t!=null&&t.mnemonic&&t.mnemonic.phrase}class i3 extends ns{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function a3(t,e,r){if(ke(t,"crypto/cipher")==="aes-128-ctr"){const s=Vr(ke(t,"crypto/cipherparams/iv")),i=new Zt.Counter(s),a=new Zt.ModeOfOperation.ctr(e,i);return F(a.decrypt(r))}return null}function Yp(t,e){const r=Vr(ke(t,"crypto/ciphertext"));if(W(ze(it([e.slice(16,32),r]))).substring(2)!==ke(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const s=a3(t,e.slice(0,16),r);s||nf.throwError("unsupported cipher",D.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const i=e.slice(32,64),a=$r(s);if(t.address){let c=t.address.toLowerCase();if(c.substring(0,2)!=="0x"&&(c="0x"+c),Me(c)!==a)throw new Error("address mismatch")}const o={_isKeystoreAccount:!0,address:a,privateKey:W(s)};if(ke(t,"x-ethers/version")==="0.1"){const c=Vr(ke(t,"x-ethers/mnemonicCiphertext")),f=Vr(ke(t,"x-ethers/mnemonicCounter")),u=new Zt.Counter(f),d=new Zt.ModeOfOperation.ctr(i,u),l=ke(t,"x-ethers/path")||Ks,x=ke(t,"x-ethers/locale")||"en",p=F(d.decrypt(c));try{const h=Yf(p,x),y=Et.fromMnemonic(h,null,x).derivePath(l);if(y.privateKey!=o.privateKey)throw new Error("mnemonic mismatch");o.mnemonic=y.mnemonic}catch(h){if(h.code!==D.errors.INVALID_ARGUMENT||h.argument!=="wordlist")throw h}}return new i3(o)}function Zp(t,e,r,n,s){return F(Jf(t,e,r,n,s))}function o3(t,e,r,n,s){return Promise.resolve(Zp(t,e,r,n,s))}function Qp(t,e,r,n,s){const i=Zf(e),a=ke(t,"crypto/kdf");if(a&&typeof a=="string"){const o=function(c,f){return nf.throwArgumentError("invalid key-derivation function parameters",c,f)};if(a.toLowerCase()==="scrypt"){const c=Vr(ke(t,"crypto/kdfparams/salt")),f=parseInt(ke(t,"crypto/kdfparams/n")),u=parseInt(ke(t,"crypto/kdfparams/r")),d=parseInt(ke(t,"crypto/kdfparams/p"));(!f||!u||!d)&&o("kdf",a),(f&f-1)!==0&&o("N",f);const l=parseInt(ke(t,"crypto/kdfparams/dklen"));return l!==32&&o("dklen",l),n(i,c,f,u,d,64,s)}else if(a.toLowerCase()==="pbkdf2"){const c=Vr(ke(t,"crypto/kdfparams/salt"));let f=null;const u=ke(t,"crypto/kdfparams/prf");u==="hmac-sha256"?f="sha256":u==="hmac-sha512"?f="sha512":o("prf",u);const d=parseInt(ke(t,"crypto/kdfparams/c")),l=parseInt(ke(t,"crypto/kdfparams/dklen"));return l!==32&&o("dklen",l),r(i,c,d,l,f)}}return nf.throwArgumentError("unsupported key-derivation function","kdf",a)}function c3(t,e){const r=JSON.parse(t),n=Qp(r,e,Zp,Qf.syncScrypt);return Yp(r,n)}function u3(t,e,r){return s3(this,void 0,void 0,function*(){const n=JSON.parse(t),s=yield Qp(n,e,o3,Qf.scrypt,r);return Yp(n,s)})}function f3(t,e,r,n){try{if(Me(t.address)!==$r(t.privateKey))throw new Error("address/privateKey mismatch");if(dh(t)){const y=t.mnemonic;if(Et.fromMnemonic(y.phrase,null,y.locale).derivePath(y.path||Ks).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(y){return Promise.reject(y)}typeof r=="function"&&!n&&(n=r,r={}),r||(r={});const s=F(t.privateKey),i=Zf(e);let a=null,o=null,c=null;if(dh(t)){const y=t.mnemonic;a=F(Kp(y.phrase,y.locale||"en")),o=y.path||Ks,c=y.locale||"en"}let f=r.client;f||(f="ethers.js");let u=null;r.salt?u=F(r.salt):u=Ts(32);let d=null;if(r.iv){if(d=F(r.iv),d.length!==16)throw new Error("invalid iv")}else d=Ts(16);let l=null;if(r.uuid){if(l=F(r.uuid),l.length!==16)throw new Error("invalid uuid")}else l=Ts(16);let x=1<<17,p=8,h=1;return r.scrypt&&(r.scrypt.N&&(x=r.scrypt.N),r.scrypt.r&&(p=r.scrypt.r),r.scrypt.p&&(h=r.scrypt.p)),Qf.scrypt(i,u,x,p,h,64,n).then(y=>{y=F(y);const b=y.slice(0,16),R=y.slice(16,32),v=y.slice(32,64),E=new Zt.Counter(d),A=new Zt.ModeOfOperation.ctr(b,E),M=F(A.encrypt(s)),q=ze(it([R,M])),L={address:t.address.substring(2).toLowerCase(),id:t3(l),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:W(d).substring(2)},ciphertext:W(M).substring(2),kdf:"scrypt",kdfparams:{salt:W(u).substring(2),n:x,dklen:32,p:h,r:p},mac:q.substring(2)}};if(a){const K=Ts(16),$=new Zt.Counter(K),C=new Zt.ModeOfOperation.ctr(v,$),g=F(C.encrypt(a)),w=new Date,T=w.getUTCFullYear()+"-"+gs(w.getUTCMonth()+1,2)+"-"+gs(w.getUTCDate(),2)+"T"+gs(w.getUTCHours(),2)+"-"+gs(w.getUTCMinutes(),2)+"-"+gs(w.getUTCSeconds(),2)+".0Z";L["x-ethers"]={client:f,gethFilename:"UTC--"+T+"--"+L.address,mnemonicCounter:W(K).substring(2),mnemonicCiphertext:W(g).substring(2),path:o,locale:c,version:"0.1"}}return JSON.stringify(L)})}function d3(t,e,r){if(Vp(t)){r&&r(0);const n=Wp(t,e);return r&&r(1),Promise.resolve(n)}return Jp(t)?u3(t,e,r):Promise.reject(new Error("invalid JSON wallet"))}function l3(t,e){if(Vp(t))return Wp(t,e);if(Jp(t))return c3(t,e);throw new Error("invalid JSON wallet")}const h3="wallet/5.7.0";var lh=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?i(u.value):s(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const bn=new D(h3);function p3(t){return t!=null&&Ie(t.privateKey,32)&&t.address!=null}function y3(t){const e=t.mnemonic;return e&&e.phrase}class Or extends ui{constructor(e,r){if(super(),p3(e)){const n=new In(e.privateKey);if(N(this,"_signingKey",()=>n),N(this,"address",$r(this.publicKey)),this.address!==Me(e.address)&&bn.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),y3(e)){const s=e.mnemonic;N(this,"_mnemonic",()=>({phrase:s.phrase,path:s.path||Ks,locale:s.locale||"en"}));const i=this.mnemonic,a=Et.fromMnemonic(i.phrase,null,i.locale).derivePath(i.path);$r(a.privateKey)!==this.address&&bn.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else N(this,"_mnemonic",()=>null)}else{if(In.isSigningKey(e))e.curve!=="secp256k1"&&bn.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),N(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const n=new In(e);N(this,"_signingKey",()=>n)}N(this,"_mnemonic",()=>null),N(this,"address",$r(this.publicKey))}r&&!ao.isProvider(r)&&bn.throwArgumentError("invalid provider","provider",r),N(this,"provider",r||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new Or(this,e)}signTransaction(e){return ur(e).then(r=>{r.from!=null&&(Me(r.from)!==this.address&&bn.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete r.from);const n=this._signingKey().signDigest(ze(ah(r)));return ah(r,n)})}signMessage(e){return lh(this,void 0,void 0,function*(){return Il(this._signingKey().signDigest(no(e)))})}_signTypedData(e,r,n){return lh(this,void 0,void 0,function*(){const s=yield st.resolveNames(e,r,n,i=>(this.provider==null&&bn.throwError("cannot resolve ENS names without a provider",D.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:i}),this.provider.resolveName(i)));return Il(this._signingKey().signDigest(st.hash(s.domain,r,s.value)))})}encrypt(e,r,n){if(typeof r=="function"&&!n&&(n=r,r={}),n&&typeof n!="function")throw new Error("invalid callback");return r||(r={}),f3(this,e,r,n)}static createRandom(e){let r=Ts(16);e||(e={}),e.extraEntropy&&(r=F(Xr(ze(it([r,e.extraEntropy])),0,16)));const n=Yf(r,e.locale);return Or.fromMnemonic(n,e.path,e.locale)}static fromEncryptedJson(e,r,n){return d3(e,r,n).then(s=>new Or(s))}static fromEncryptedJsonSync(e,r){return new Or(l3(e,r))}static fromMnemonic(e,r,n){return r||(r=Ks),new Or(Et.fromMnemonic(e,null,n).derivePath(r))}}function x3(t,e){return Dp(no(t),e)}function ey(t,e,r,n){return Dp(st.hash(t,e,r),n)}class b3{signer;publicKey;ownerLength=Se[pe.ETHEREUM].pubLength;signatureLength=Se[pe.ETHEREUM].sigLength;signatureType=pe.ETHEREUM;constructor(e){this.signer=e.getSigner()}async setPublicKey(){const e="sign this message to connect to Bundlr.Network",r=await this.signer.signMessage(e),n=await no(e),s=$p(F(n),r);this.publicKey=k.Buffer.from(F(s))}async sign(e){this.publicKey||await this.setPublicKey();const r=await this.signer.signMessage(e);return k.Buffer.from(r.slice(2),"hex")}static verify(e,r,n){const s=$r(e);return x3(r,n)===s}}var g3=mb,m3="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",w3=g3(m3),ms=w3;class ed extends ii{get publicKey(){return ms.decode(this.pk)}get key(){return ms.decode(this._key)}constructor(e){const r=ms.decode(e);super(ms.encode(r.subarray(0,32)),ms.encode(r.subarray(32,64)))}}const be={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function vt(t,e){if(!t)throw new Error(e)}function ce(t,e,r){if(vt(e instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){const n=r.join(", "),s=`Expected ${t} to be an Uint8Array with length [${n}]`;vt(r.includes(e.length),s)}else{const n=`Expected ${t} to be an Uint8Array with length ${r}`;vt(e.length===r,n)}}function Kr(t){vt(_n(t)==="Boolean","Expected compressed to be a Boolean")}function Ut(t=r=>new Uint8Array(r),e){return typeof t=="function"&&(t=t(e)),ce("output",t,e),t}function _n(t){return Object.prototype.toString.call(t).slice(8,-1)}var v3=t=>({contextRandomize(e){switch(vt(e===null||e instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),e!==null&&ce("seed",e,32),t.contextRandomize(e)){case 1:throw new Error(be.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(e){return ce("private key",e,32),t.privateKeyVerify(e)===0},privateKeyNegate(e){switch(ce("private key",e,32),t.privateKeyNegate(e)){case 0:return e;case 1:throw new Error(be.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(e,r){switch(ce("private key",e,32),ce("tweak",r,32),t.privateKeyTweakAdd(e,r)){case 0:return e;case 1:throw new Error(be.TWEAK_ADD)}},privateKeyTweakMul(e,r){switch(ce("private key",e,32),ce("tweak",r,32),t.privateKeyTweakMul(e,r)){case 0:return e;case 1:throw new Error(be.TWEAK_MUL)}},publicKeyVerify(e){return ce("public key",e,[33,65]),t.publicKeyVerify(e)===0},publicKeyCreate(e,r=!0,n){switch(ce("private key",e,32),Kr(r),n=Ut(n,r?33:65),t.publicKeyCreate(n,e)){case 0:return n;case 1:throw new Error(be.SECKEY_INVALID);case 2:throw new Error(be.PUBKEY_SERIALIZE)}},publicKeyConvert(e,r=!0,n){switch(ce("public key",e,[33,65]),Kr(r),n=Ut(n,r?33:65),t.publicKeyConvert(n,e)){case 0:return n;case 1:throw new Error(be.PUBKEY_PARSE);case 2:throw new Error(be.PUBKEY_SERIALIZE)}},publicKeyNegate(e,r=!0,n){switch(ce("public key",e,[33,65]),Kr(r),n=Ut(n,r?33:65),t.publicKeyNegate(n,e)){case 0:return n;case 1:throw new Error(be.PUBKEY_PARSE);case 2:throw new Error(be.IMPOSSIBLE_CASE);case 3:throw new Error(be.PUBKEY_SERIALIZE)}},publicKeyCombine(e,r=!0,n){vt(Array.isArray(e),"Expected public keys to be an Array"),vt(e.length>0,"Expected public keys array will have more than zero items");for(const s of e)ce("public key",s,[33,65]);switch(Kr(r),n=Ut(n,r?33:65),t.publicKeyCombine(n,e)){case 0:return n;case 1:throw new Error(be.PUBKEY_PARSE);case 2:throw new Error(be.PUBKEY_COMBINE);case 3:throw new Error(be.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(e,r,n=!0,s){switch(ce("public key",e,[33,65]),ce("tweak",r,32),Kr(n),s=Ut(s,n?33:65),t.publicKeyTweakAdd(s,e,r)){case 0:return s;case 1:throw new Error(be.PUBKEY_PARSE);case 2:throw new Error(be.TWEAK_ADD)}},publicKeyTweakMul(e,r,n=!0,s){switch(ce("public key",e,[33,65]),ce("tweak",r,32),Kr(n),s=Ut(s,n?33:65),t.publicKeyTweakMul(s,e,r)){case 0:return s;case 1:throw new Error(be.PUBKEY_PARSE);case 2:throw new Error(be.TWEAK_MUL)}},signatureNormalize(e){switch(ce("signature",e,64),t.signatureNormalize(e)){case 0:return e;case 1:throw new Error(be.SIG_PARSE)}},signatureExport(e,r){ce("signature",e,64),r=Ut(r,72);const n={output:r,outputlen:72};switch(t.signatureExport(n,e)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(be.SIG_PARSE);case 2:throw new Error(be.IMPOSSIBLE_CASE)}},signatureImport(e,r){switch(ce("signature",e),r=Ut(r,64),t.signatureImport(r,e)){case 0:return r;case 1:throw new Error(be.SIG_PARSE);case 2:throw new Error(be.IMPOSSIBLE_CASE)}},ecdsaSign(e,r,n={},s){ce("message",e,32),ce("private key",r,32),vt(_n(n)==="Object","Expected options to be an Object"),n.data!==void 0&&ce("options.data",n.data),n.noncefn!==void 0&&vt(_n(n.noncefn)==="Function","Expected options.noncefn to be a Function"),s=Ut(s,64);const i={signature:s,recid:null};switch(t.ecdsaSign(i,e,r,n.data,n.noncefn)){case 0:return i;case 1:throw new Error(be.SIGN);case 2:throw new Error(be.IMPOSSIBLE_CASE)}},ecdsaVerify(e,r,n){switch(ce("signature",e,64),ce("message",r,32),ce("public key",n,[33,65]),t.ecdsaVerify(e,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(be.SIG_PARSE);case 2:throw new Error(be.PUBKEY_PARSE)}},ecdsaRecover(e,r,n,s=!0,i){switch(ce("signature",e,64),vt(_n(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),ce("message",n,32),Kr(s),i=Ut(i,s?33:65),t.ecdsaRecover(i,e,r,n)){case 0:return i;case 1:throw new Error(be.SIG_PARSE);case 2:throw new Error(be.RECOVER);case 3:throw new Error(be.IMPOSSIBLE_CASE)}},ecdh(e,r,n={},s){switch(ce("public key",e,[33,65]),ce("private key",r,32),vt(_n(n)==="Object","Expected options to be an Object"),n.data!==void 0&&ce("options.data",n.data),n.hashfn!==void 0?(vt(_n(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&ce("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&ce("options.ybuf",n.ybuf,32),ce("output",s)):s=Ut(s,32),t.ecdh(s,e,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return s;case 1:throw new Error(be.PUBKEY_PARSE);case 2:throw new Error(be.ECDH)}}});const E3=Rb.ec,Kt=new E3("secp256k1"),ie=Kt.curve,ve=ie.n.constructor;function S3(t,e){let r=new ve(e);if(r.cmp(ie.p)>=0)return null;r=r.toRed(ie.red);let n=r.redSqr().redIMul(r).redIAdd(ie.b).redSqrt();return t===3!==n.isOdd()&&(n=n.redNeg()),Kt.keyPair({pub:{x:r,y:n}})}function _3(t,e,r){let n=new ve(e),s=new ve(r);if(n.cmp(ie.p)>=0||s.cmp(ie.p)>=0||(n=n.toRed(ie.red),s=s.toRed(ie.red),(t===6||t===7)&&s.isOdd()!==(t===7)))return null;const i=n.redSqr().redIMul(n);return s.redSqr().redISub(i.redIAdd(ie.b)).isZero()?Kt.keyPair({pub:{x:n,y:s}}):null}function Er(t){const e=t[0];switch(e){case 2:case 3:return t.length!==33?null:S3(e,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:_3(e,t.subarray(1,33),t.subarray(33,65));default:return null}}function jr(t,e){const r=e.encode(null,t.length===33);for(let n=0;n<t.length;++n)t[n]=r[n]}var A3={contextRandomize(){return 0},privateKeyVerify(t){const e=new ve(t);return e.cmp(ie.n)<0&&!e.isZero()?0:1},privateKeyNegate(t){const e=new ve(t),r=ie.n.sub(e).umod(ie.n).toArrayLike(Uint8Array,"be",32);return t.set(r),0},privateKeyTweakAdd(t,e){const r=new ve(e);if(r.cmp(ie.n)>=0||(r.iadd(new ve(t)),r.cmp(ie.n)>=0&&r.isub(ie.n),r.isZero()))return 1;const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},privateKeyTweakMul(t,e){let r=new ve(e);if(r.cmp(ie.n)>=0||r.isZero())return 1;r.imul(new ve(t)),r.cmp(ie.n)>=0&&(r=r.umod(ie.n));const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},publicKeyVerify(t){return Er(t)===null?1:0},publicKeyCreate(t,e){const r=new ve(e);if(r.cmp(ie.n)>=0||r.isZero())return 1;const n=Kt.keyFromPrivate(e).getPublic();return jr(t,n),0},publicKeyConvert(t,e){const r=Er(e);if(r===null)return 1;const n=r.getPublic();return jr(t,n),0},publicKeyNegate(t,e){const r=Er(e);if(r===null)return 1;const n=r.getPublic();return n.y=n.y.redNeg(),jr(t,n),0},publicKeyCombine(t,e){const r=new Array(e.length);for(let s=0;s<e.length;++s)if(r[s]=Er(e[s]),r[s]===null)return 1;let n=r[0].getPublic();for(let s=1;s<r.length;++s)n=n.add(r[s].pub);return n.isInfinity()?2:(jr(t,n),0)},publicKeyTweakAdd(t,e,r){const n=Er(e);if(n===null)return 1;if(r=new ve(r),r.cmp(ie.n)>=0)return 2;const s=n.getPublic().add(ie.g.mul(r));return s.isInfinity()?2:(jr(t,s),0)},publicKeyTweakMul(t,e,r){const n=Er(e);if(n===null)return 1;if(r=new ve(r),r.cmp(ie.n)>=0||r.isZero())return 2;const s=n.getPublic().mul(r);return jr(t,s),0},signatureNormalize(t){const e=new ve(t.subarray(0,32)),r=new ve(t.subarray(32,64));return e.cmp(ie.n)>=0||r.cmp(ie.n)>=0?1:(r.cmp(Kt.nh)===1&&t.set(ie.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,e){const r=e.subarray(0,32),n=e.subarray(32,64);if(new ve(r).cmp(ie.n)>=0||new ve(n).cmp(ie.n)>=0)return 1;const{output:s}=t;let i=s.subarray(4,4+33);i[0]=0,i.set(r,1);let a=33,o=0;for(;a>1&&i[o]===0&&!(i[o+1]&128);--a,++o);if(i=i.subarray(o),i[0]&128||a>1&&i[0]===0&&!(i[1]&128))return 1;let c=s.subarray(6+33,6+33+33);c[0]=0,c.set(n,1);let f=33,u=0;for(;f>1&&c[u]===0&&!(c[u+1]&128);--f,++u);return c=c.subarray(u),c[0]&128||f>1&&c[0]===0&&!(c[1]&128)?1:(t.outputlen=6+a+f,s[0]=48,s[1]=t.outputlen-2,s[2]=2,s[3]=i.length,s.set(i,4),s[4+a]=2,s[5+a]=c.length,s.set(c,6+a),0)},signatureImport(t,e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return 1;const r=e[3];if(r===0||5+r>=e.length||e[4+r]!==2)return 1;const n=e[5+r];if(n===0||6+r+n!==e.length||e[4]&128||r>1&&e[4]===0&&!(e[5]&128)||e[r+6]&128||n>1&&e[r+6]===0&&!(e[r+7]&128))return 1;let s=e.subarray(4,4+r);if(s.length===33&&s[0]===0&&(s=s.subarray(1)),s.length>32)return 1;let i=e.subarray(6+r);if(i.length===33&&i[0]===0&&(i=i.slice(1)),i.length>32)throw new Error("S length is too long");let a=new ve(s);a.cmp(ie.n)>=0&&(a=new ve(0));let o=new ve(e.subarray(6+r));return o.cmp(ie.n)>=0&&(o=new ve(0)),t.set(a.toArrayLike(Uint8Array,"be",32),0),t.set(o.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,e,r,n,s){if(s){const o=s;s=c=>{const f=o(e,r,null,n,c);if(!(f instanceof Uint8Array&&f.length===32))throw new Error("This is the way");return new ve(f)}}const i=new ve(r);if(i.cmp(ie.n)>=0||i.isZero())return 1;let a;try{a=Kt.sign(e,r,{canonical:!0,k:s,pers:n})}catch{return 1}return t.signature.set(a.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(a.s.toArrayLike(Uint8Array,"be",32),32),t.recid=a.recoveryParam,0},ecdsaVerify(t,e,r){const n={r:t.subarray(0,32),s:t.subarray(32,64)},s=new ve(n.r),i=new ve(n.s);if(s.cmp(ie.n)>=0||i.cmp(ie.n)>=0)return 1;if(i.cmp(Kt.nh)===1||s.isZero()||i.isZero())return 3;const a=Er(r);if(a===null)return 2;const o=a.getPublic();return Kt.verify(e,n,o)?0:3},ecdsaRecover(t,e,r,n){const s={r:e.slice(0,32),s:e.slice(32,64)},i=new ve(s.r),a=new ve(s.s);if(i.cmp(ie.n)>=0||a.cmp(ie.n)>=0)return 1;if(i.isZero()||a.isZero())return 2;let o;try{o=Kt.recoverPubKey(n,s,r)}catch{return 2}return jr(t,o),0},ecdh(t,e,r,n,s,i,a){const o=Er(e);if(o===null)return 1;const c=new ve(r);if(c.cmp(ie.n)>=0||c.isZero())return 2;const f=o.getPublic().mul(c);if(s===void 0){const u=f.encode(null,!0),d=Kt.hash().update(u).digest();for(let l=0;l<32;++l)t[l]=d[l]}else{i||(i=new Uint8Array(32));const u=f.getX().toArray("be",32);for(let p=0;p<32;++p)i[p]=u[p];a||(a=new Uint8Array(32));const d=f.getY().toArray("be",32);for(let p=0;p<32;++p)a[p]=d[p];const l=s(i,a,n);if(!(l instanceof Uint8Array&&l.length===t.length))return 2;t.set(l)}return 0}},Sa=v3(A3);function js(t){return t=ty(t),zb("keccak256").update(t).digest()}function ty(t){if(!k.Buffer.isBuffer(t))if(Array.isArray(t))t=k.Buffer.from(t);else if(typeof t=="string")ry(t)?t=k.Buffer.from(td(ny(t)),"hex"):t=k.Buffer.from(t);else if(typeof t=="number")t=iy(t);else if(t==null)t=k.Buffer.allocUnsafe(0);else if(Y.isBN(t))t=t.toArrayLike(k.Buffer);else if(t.toArray)t=k.Buffer.from(t.toArray());else throw new Error("invalid type");return t}function ry(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}function td(t){if(typeof t!="string")throw new Error(`while padding to even, value must be string, is currently ${typeof t}, while padToEven.`);return t.length%2&&(t=`0${t}`),t}function ny(t){return typeof t!="string"?t:sy(t)?t.slice(2):t}function sy(t){if(typeof t!="string")throw new Error("value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.startsWith("0x")}function iy(t){const e=ay(t);return k.Buffer.from(td(e.slice(2)),"hex")}function ay(t){return`0x${t.toString(16)}`}typeof window<"u"&&(window.keccak256=js);const T3={intToBuffer:iy,intToHex:ay,isHexPrefixed:sy,stripHexPrefix:ny,padToEven:td,isHexString:ry,toBuffer:ty};class oy{_key;ownerLength=Se[pe.ETHEREUM].pubLength;signatureLength=Se[pe.ETHEREUM].sigLength;signatureType=pe.ETHEREUM;pk;constructor(e,r){this._key=e,this.pk=r.toString("hex")}get publicKey(){throw new Error("You must implement `publicKey`")}get key(){return k.Buffer.from(this._key,"hex")}static async verify(e,r,n){let s=e;typeof e=="string"&&(s=re.toBuffer(e));let i=!1;try{i=Sa.ecdsaVerify(n,js(k.Buffer.from(r)),s)}catch{}return i}async sign(e){return Sa.ecdsaSign(js(k.Buffer.from(e)),k.Buffer.from(this.key)).signature}}class oo extends oy{get publicKey(){return k.Buffer.from(this.pk,"hex")}constructor(e){e.startsWith("0x")&&(e=e.slice(2));const r=k.Buffer.from(e,"hex"),n=Sa.publicKeyCreate(r,!1);super(e,k.Buffer.from(n))}async sign(e){return new Or(this._key).signMessage(e).then(n=>k.Buffer.from(n.slice(2),"hex"))}static async verify(e,r,n){return Sa.ecdsaVerify(n.length===65?n.slice(0,-1):n,F(no(r)),typeof e=="string"?re.toBuffer(e):e)}}class P3 extends oo{}class sf extends ed{constructor(e){super(e.replace("ed25519:",""))}}class R3 extends ii{get publicKey(){return k.Buffer.from(this.pk)}get key(){return k.Buffer.from(this._key)}constructor(e,r){super(e.subarray(0,32),r)}}class _a extends _p{signatureType=4;constructor(e){super(e)}async sign(e){return super.sign(k.Buffer.from(k.Buffer.from(e).toString("hex")))}static async verify(e,r,n){return super.verify(e,k.Buffer.from(k.Buffer.from(r).toString("hex")),n)}}class k3 extends ed{signatureType=4;constructor(e){super(e)}async sign(e){return super.sign(k.Buffer.from(k.Buffer.from(e).toString("hex")))}static async verify(e,r,n){return super.verify(e,k.Buffer.from(k.Buffer.from(r).toString("hex")),n)}}class C3 extends ii{constructor(e,r){super(e,r)}get publicKey(){return k.Buffer.from(this.pk.slice(2),"hex")}get key(){return k.Buffer.from(this._key.slice(2),"hex")}}class Aa{_publicKey;ownerLength=Se[pe.INJECTEDAPTOS].pubLength;signatureLength=Se[pe.INJECTEDAPTOS].sigLength;signatureType=pe.INJECTEDAPTOS;pem;provider;constructor(e,r){this.provider=e,this._publicKey=r}get publicKey(){return this._publicKey}async sign(e){if(!this.provider.signMessage)throw new Error("Selected Wallet does not support message signing");const r=await this.provider.signMessage({message:k.Buffer.from(e).toString("hex"),nonce:"bundlr"});return k.Buffer.from(r.signature,"hex")}static async verify(e,r,n){const s=e;return Da(k.Buffer.from(n),k.Buffer.from(`APTOS
message: ${k.Buffer.from(r).toString("hex")}
nonce: bundlr`),k.Buffer.from(s))}}class cy{_publicKey;ownerLength=Se[pe.MULTIAPTOS].pubLength;signatureLength=Se[pe.MULTIAPTOS].sigLength;signatureType=pe.MULTIAPTOS;collectSignatures;provider;constructor(e,r){this._publicKey=e,this.collectSignatures=r}get publicKey(){return this._publicKey}async sign(e){const{signatures:r,bitmap:n}=await this.collectSignatures(e),s=128,i=new Uint8Array([0,0,0,0]),a=new Set;n.forEach(f=>{if(f>=32)throw new Error(`Invalid bit value ${f}.`);if(a.has(f))throw new Error("Duplicated bits detected.");a.add(f);const u=Math.floor(f/8);let d=i[u];d|=s>>f%8,i[u]=d});const o=k.Buffer.alloc(this.signatureLength);let c=0;for(let f=0;f<32;f++)n.includes(f)&&o.set(r[c++],f*64);return o.set(i,this.signatureLength-4),o}static async verify(e,r,n){const i=Se[pe.MULTIAPTOS].sigLength-4,a=n.slice(0,i),o=n.slice(i);let c=!1;for(let f=0;f<32;f++){const u=Math.floor(f/8),d=f-u*8;if((o[u]&128>>d)!==0){const x=a.slice(f*64,(f+1)*64),p=e.slice(f*32,(f+1)*32);await Da(k.Buffer.from(x),k.Buffer.from(r),k.Buffer.from(p))||(c=!0)}}return!c}}class uy extends oo{ownerLength=Se[pe.TYPEDETHEREUM].pubLength;signatureLength=Se[pe.TYPEDETHEREUM].sigLength;signatureType=pe.TYPEDETHEREUM;address;signer;constructor(e){super(e),this.address="0x"+js(super.publicKey.slice(1)).slice(-20).toString("hex"),this.signer=new Or(e)}get publicKey(){return k.Buffer.from(this.address)}async sign(e){const r=await this.signer._signTypedData(Ta,Pa,{address:this.address,"Transaction hash":e});return k.Buffer.from(r.slice(2),"hex")}static async verify(e,r,n){const s=e.toString(),i=ey(Ta,Pa,{address:s,"Transaction hash":r},n);return s.toLowerCase()===i.toLowerCase()}}const Ta={name:"Bundlr",version:"1"},Pa={Bundlr:[{name:"Transaction hash",type:"bytes"},{name:"address",type:"address"}]};class rd{ownerLength=Se[pe.TYPEDETHEREUM].pubLength;signatureLength=Se[pe.TYPEDETHEREUM].sigLength;signatureType=pe.TYPEDETHEREUM;address;signer;publicKey;constructor(e){this.signer=e.getSigner()}async ready(){this.address=(await this.signer.getAddress()).toString().toLowerCase(),this.publicKey=k.Buffer.from(this.address)}async sign(e){const r=await this.signer._signTypedData(Ta,Pa,{address:this.address,"Transaction hash":e});return k.Buffer.from(r.slice(2),"hex")}static verify(e,r,n){const s=e.toString(),i=ey(Ta,Pa,{address:s,"Transaction hash":r},n);return s.toLowerCase()===i.toLowerCase()}}class B3{signer;publicKey;ownerLength=Se[pe.ARWEAVE].pubLength;signatureLength=Se[pe.ARWEAVE].sigLength;signatureType=pe.ARWEAVE;arweave;constructor(e,r){this.signer=e,this.arweave=r}async setPublicKey(){const e=await this.signer.getActivePublicKey();this.publicKey=re.toBuffer(e)}async sign(e){this.publicKey||await this.setPublicKey();const r={name:"RSA-PSS",saltLength:32},n=await this.signer.signature(e,r);return new Uint8Array(Object.values(n).map(i=>+i))}static async verify(e,r,n){return await We().verify(e,r,n)}}const nd={1:ro,2:ii,3:oo,4:_a,5:Aa,6:cy,7:uy};async function af(t){return ts([ye("dataitem"),ye("1"),ye(t.signatureType.toString()),t.rawOwner,t.rawTarget,t.rawAnchor,t.rawTags,t.rawData])}function di(t,e){const r=new Uint8Array(t);if(e<0)throw new Error("Array is unsigned, cannot represent -ve numbers");if(e>2**(t*8)-1)throw new Error(`Number ${e} is too large for an array of ${t} bytes`);for(let n=0;n<r.length;n++){const s=e&255;r[n]=s,e=(e-s)/256}return r}function of(t){return di(8,t)}function fy(t){return di(2,t)}function I3(t){return di(16,t)}function cf(t){return di(32,t)}function Le(t){let e=0;for(let r=t.length-1;r>=0;r--)e=e*256+t[r];return e}class sd{buf;pos;constructor(e=k.Buffer.alloc(ad),r=0){this.buf=e,this.pos=r}writeTags(e){if(!Array.isArray(e))throw new Error("input must be array");const r=e.length;let n;if(r)for(this.writeLong(r),n=0;n<r;n++){const s=e[n];if(typeof s?.name!="string"||typeof s?.value!="string")throw new Error(`Invalid tag format for ${s}, expected {name:string, value: string}`);this.writeString(s.name),this.writeString(s.value)}this.writeLong(0)}toBuffer(){const e=k.Buffer.alloc(this.pos);if(this.pos>this.buf.length)throw new Error(`Too many tag bytes (${this.pos} > ${this.buf.length})`);return this.buf.copy(e,0,0,this.pos),e}writeLong(e){const r=this.buf;let n,s;if(e>=-1073741824&&e<1073741824){s=e>=0?e<<1:~e<<1|1;do r[this.pos]=s&127,s>>=7;while(s&&(r[this.pos++]|=128))}else{n=e>=0?e*2:-e*2-1;do r[this.pos]=n&127,n/=128;while(n>=1&&(r[this.pos++]|=128))}this.pos++,this.buf=r}writeString(e){const r=k.Buffer.byteLength(e),n=this.buf;this.writeLong(r);let s=this.pos;if(this.pos+=r,!(this.pos>n.length)){if(r>64)this.buf.write(e,this.pos-r,r,"utf8");else{let i,a,o,c;for(i=0,a=r;i<a;i++)o=e.charCodeAt(i),o<128?n[s++]=o:o<2048?(n[s++]=o>>6|192,n[s++]=o&63|128):(o&64512)===55296&&((c=e.charCodeAt(i+1))&64512)===56320?(o=65536+((o&1023)<<10)+(c&1023),i++,n[s++]=o>>18|240,n[s++]=o>>12&63|128,n[s++]=o>>6&63|128,n[s++]=o&63|128):(n[s++]=o>>12|224,n[s++]=o>>6&63|128,n[s++]=o&63|128)}this.buf=n}}readLong(){let e=0,r=0;const n=this.buf;let s,i,a,o;do s=n[this.pos++],i=s&128,e|=(s&127)<<r,r+=7;while(i&&r<28);if(i){a=e,o=268435456;do s=n[this.pos++],a+=(s&127)*o,o*=128;while(s&128);return(a%2?-(a+1):a)/2}return e>>1^-(e&1)}skipLong(){const e=this.buf;for(;e[this.pos++]&128;);}readTags(){const e=[];let r;for(;r=this.readLong();)for(r<0&&(r=-r,this.skipLong());r--;){const n=this.readString(),s=this.readString();e.push({name:n,value:s})}return e}readString(){const e=this.readLong(),r=this.pos,n=this.buf;if(this.pos+=e,this.pos>n.length)throw new Error("TAP Position out of range");return this.buf.slice(r,r+e).toString()}}function dy(t){if(t?.length===0)return k.Buffer.allocUnsafe(0);const e=new sd;return e.writeTags(t),e.toBuffer()}function Ra(t){return new sd(t).readTags()}const id=80,ad=4096;class yr{binary;_id;constructor(e){this.binary=e}static isDataItem(e){return e.binary!==void 0}get signatureType(){const e=Le(this.binary.subarray(0,2));if(pe?.[e]!==void 0)return e;throw new Error("Unknown signature type: "+e)}async isValid(){return yr.verify(this.binary)}get id(){return re.encode(this.rawId)}set id(e){this._id=re.toBuffer(e)}get rawId(){return La("sha256").update(this.rawSignature).digest()}set rawId(e){this._id=e}get rawSignature(){return this.binary.subarray(2,2+this.signatureLength)}get signature(){return re.encode(this.rawSignature)}set rawOwner(e){if(e.byteLength!=this.ownerLength)throw new Error(`Expected raw owner (pubkey) to be ${this.ownerLength} bytes, got ${e.byteLength} bytes.`);this.binary.set(e,2+this.signatureLength)}get rawOwner(){return this.binary.subarray(2+this.signatureLength,2+this.signatureLength+this.ownerLength)}get signatureLength(){return Se[this.signatureType].sigLength}get owner(){return re.encode(this.rawOwner)}get ownerLength(){return Se[this.signatureType].pubLength}get rawTarget(){const e=this.getTargetStart();return this.binary[e]==1?this.binary.subarray(e+1,e+33):k.Buffer.alloc(0)}get target(){return re.encode(this.rawTarget)}get rawAnchor(){const e=this.getAnchorStart();return this.binary[e]==1?this.binary.subarray(e+1,e+33):k.Buffer.alloc(0)}get anchor(){return this.rawAnchor.toString()}get rawTags(){const e=this.getTagsStart(),r=Le(this.binary.subarray(e+8,e+16));return this.binary.subarray(e+16,e+16+r)}get tags(){const e=this.getTagsStart();if(Le(this.binary.subarray(e,e+8))==0)return[];const n=Le(this.binary.subarray(e+8,e+16));return Ra(k.Buffer.from(this.binary.subarray(e+16,e+16+n)))}get tagsB64Url(){return this.tags.map(r=>({name:re.encode(r.name),value:re.encode(r.value)}))}getStartOfData(){const e=this.getTagsStart(),r=this.binary.subarray(e+8,e+16),n=Le(r);return e+16+n}get rawData(){const e=this.getTagsStart(),r=this.binary.subarray(e+8,e+16),n=Le(r),s=e+16+n;return this.binary.subarray(s,this.binary.length)}get data(){return re.encode(this.rawData)}getRaw(){return this.binary}async sign(e){return this._id=await cd(this,e),this.rawId}async setSignature(e){this.binary.set(e,2),this._id=k.Buffer.from(await We().hash(e))}isSigned(){return(this._id?.length??0)>0}toJSON(){return{signature:this.signature,owner:this.owner,target:this.target,tags:this.tags.map(e=>({name:re.encode(e.name),value:re.encode(e.value)})),data:this.data}}static async verify(e){if(e.byteLength<id)return!1;const r=new yr(e),n=r.signatureType,s=r.getTagsStart(),i=Le(e.subarray(s,s+8)),a=e.subarray(s+8,s+16),o=Le(a);if(o>ad)return!1;if(i>0)try{if(Ra(k.Buffer.from(e.subarray(s+16,s+16+o))).length!==i)return!1}catch{return!1}const c=nd[n],f=await af(r);return await c.verify(r.rawOwner,f,r.rawSignature)}async getSignatureData(){return af(this)}getTagsStart(){const e=this.getTargetStart(),r=this.binary[e]==1;let n=e+(r?33:1);return n+=this.binary[n]==1?33:1,n}getTargetStart(){return 2+this.signatureLength+this.ownerLength}getAnchorStart(){let e=this.getTargetStart()+1;return e+=this.binary[this.getTargetStart()]==1?32:0,e}}const qt=32;class od{length;items;binary;constructor(e){this.binary=e,this.length=this.getDataItemCount(),this.items=this.getItems()}getRaw(){return this.binary}get(e){if(typeof e=="number"){if(e>=this.length)throw new RangeError("Index out of range");return this.getByIndex(e)}else return this.getById(e)}getSizes(){const e=[];for(let r=qt;r<qt+64*this.length;r+=64)e.push(Le(this.binary.subarray(r,r+32)));return e}getIds(){const e=[];for(let r=qt;r<qt+64*this.length;r+=64){const n=this.binary.subarray(r+32,r+64);if(n.length===0)throw new Error("Invalid bundle, id specified in headers doesn't exist");e.push(re.encode(n))}return e}getIdBy(e){if(e>this.length-1)throw new RangeError("Index of bundle out of range");const r=64+64*e;return re.encode(this.binary.subarray(r,r+32))}async toTransaction(e,r,n){const s=await r.createTransaction({data:this.binary,...e},n);return s.addTag("Bundle-Format","binary"),s.addTag("Bundle-Version","2.0.0"),s}async verify(){for(const e of this.items){const r=await e.isValid(),n=re(La("sha256").update(e.rawSignature).digest());if(!(r&&e.id===n))return!1}return!0}getOffset(e){let r=0;for(let n=qt;n<qt+64*this.length;n+=64){const s=Le(this.binary.subarray(n,n+32));r+=s;const i=this.binary.subarray(n+32,n+64);if(k.Buffer.compare(i,e)===0)return{startOffset:r,size:s}}return{startOffset:-1,size:-1}}getByIndex(e){let r=0;const n=this.getBundleStart();let s=0,i,a;for(let u=qt;u<qt+64*this.length;u+=64){if(i=Le(this.binary.subarray(u,u+32)),s++===e){a=this.binary.subarray(u+32,u+64);break}r+=i}const o=n+r,c=this.binary.subarray(o,o+i),f=new yr(c);return f.rawId=a,f}getById(e){const r=re.toBuffer(e),n=this.getOffset(r);if(n.startOffset===-1)throw new Error("Transaction not found");const i=this.getBundleStart()+n.startOffset;return new yr(this.binary.subarray(i,i+n.size))}getDataItemCount(){return Le(this.binary.subarray(0,32))}getBundleStart(){return 32+64*this.length}getItems(){const e=new Array(this.length);let r=0;const n=this.getBundleStart();let s=0;for(let i=qt;i<qt+64*this.length;i+=64){const a=Le(this.binary.subarray(i,i+32)),o=this.binary.subarray(i+32,i+64);if(o.length===0)throw new Error("Invalid bundle, id specified in headers doesn't exist");const c=n+r,f=this.binary.subarray(c,c+a);r+=a;const u=new yr(f);u.rawId=o,e[s]=u,s++}return e}}function O3(t){return new od(t)}async function ly(t,e){const r=new Uint8Array(64*t.length),n=await Promise.all(t.map(async(i,a)=>{const o=i.isSigned()?i.rawId:await cd(i,e),c=new Uint8Array(64);return c.set(cf(i.getRaw().byteLength),0),c.set(o,32),r.set(c,64*a),i.getRaw()})).then(i=>k.Buffer.concat(i)),s=k.Buffer.concat([k.Buffer.from(cf(t.length)),k.Buffer.from(r),n]);return new od(s)}async function hy(t,e){const r=await af(t),n=await e.sign(r),s=await We().hash(n);return{signature:k.Buffer.from(n),id:k.Buffer.from(s)}}async function cd(t,e){const{signature:r,id:n}=await hy(t,e);return t.getRaw().set(r,2),n}function ud(t,e,r){const n=e.publicKey,s=r?.target?re.toBuffer(r.target):null,i=1+(s?.byteLength??0),a=r?.anchor?k.Buffer.from(r.anchor):null,o=1+(a?.byteLength??0),c=(r?.tags?.length??0)>0?dy(r?.tags):null,f=16+(c?c.byteLength:0),u=typeof t=="string"?k.Buffer.from(t):k.Buffer.from(t),d=u.byteLength,l=2+e.signatureLength+e.ownerLength+i+o+f+d,x=k.Buffer.alloc(l);if(x.set(fy(e.signatureType),0),x.set(new Uint8Array(e.signatureLength).fill(0),2),n.byteLength!==e.ownerLength)throw new Error(`Owner must be ${e.ownerLength} bytes, but was incorrectly ${n.byteLength}`);x.set(n,2+e.signatureLength);const p=2+e.signatureLength+e.ownerLength;if(x[p]=s?1:0,s){if(s.byteLength!==32)throw new Error(`Target must be 32 bytes but was incorrectly ${s.byteLength}`);x.set(s,p+1)}const h=p+i;let y=h+1;if(x[h]=a?1:0,a){if(y+=a.byteLength,a.byteLength!==32)throw new Error("Anchor must be 32 bytes");x.set(a,h+1)}x.set(of(r?.tags?.length??0),y);const b=of(c?.byteLength??0);x.set(b,y+8),c&&x.set(c,y+16);const R=y+f;return x.set(u,R),new yr(x)}class U3{signatureType;rawSignature;signature;signatureLength;rawOwner;owner;ownerLength;rawTarget;target;rawAnchor;anchor;rawTags;tags;rawData;data;static async verify(...e){throw new Error("You must implement `verify`")}}var $3=Object.freeze(Object.defineProperty({__proto__:null,Signer:Y1,indexToType:nd,Curve25519:ii,Rsa4096:vp,secp256k1:oy,ArweaveSigner:ro,InjectedSolanaSigner:_p,SolanaSigner:ed,PolygonSigner:P3,NearSigner:sf,EthereumSigner:oo,AlgorandSigner:R3,HexInjectedSolanaSigner:_a,HexSolanaSigner:k3,AptosSigner:C3,InjectedAptosSigner:Aa,MultiSignatureAptosSigner:cy,TypedEthereumSigner:uy,ArconnectSigner:B3,InjectedEthereumSigner:b3,InjectedTypedEthereumSigner:rd,keccak256:js,exportForTesting:T3,unbundleData:O3,bundleAndSignData:ly,getSignatureAndId:hy,sign:cd,createData:ud,Bundle:od,BundleItem:U3,get SignatureConfig(){return pe},SIG_CONFIG:Se,MIN_BINARY_SIZE:id,MAX_TAG_BYTES:ad,DataItem:yr,AVSCTap:sd,serializeTags:dy,deserializeTags:Ra,longToNByteArray:di,longTo8ByteArray:of,shortTo2ByteArray:fy,longTo16ByteArray:I3,longTo32ByteArray:cf,byteArrayToLong:Le,stringToBuffer:ye,concatBuffers:tt,deepHash:ts,Arweave:zf,CryptoDriver:wp,getCryptoDriver:We},Symbol.toStringTag,{value:"Module"}));async function hh(t){const e=py(t);let r=(await e.next()).value;r=await et(e,r,32);const n=Le(r.subarray(0,32));r=r.subarray(32);const s=64*n;r=await et(e,r,s);const i=new Array(n);for(let c=0;c<s;c+=64)i[c/64]=[Le(r.subarray(c,c+32)),re(k.Buffer.from(r.subarray(c+32,c+64)))];r=r.subarray(s);let a=32+s;const o=[];for(const[c,f]of i){r=await et(e,r,id),r=await et(e,r,2);const u=Le(r.subarray(0,2));r=r.subarray(2);const{sigLength:d,pubLength:l,sigName:x}=Se[u];r=await et(e,r,d);const p=r.subarray(0,d);r=r.subarray(d),r=await et(e,r,l);const h=r.subarray(0,l);r=r.subarray(l),r=await et(e,r,1);const y=r[0]===1;y&&(r=await et(e,r,33));const b=y?r.subarray(1,33):k.Buffer.allocUnsafe(0);r=r.subarray(y?33:1),r=await et(e,r,1);const R=r[0]===1;R&&(r=await et(e,r,33));const v=R?r.subarray(1,33):k.Buffer.allocUnsafe(0);r=r.subarray(R?33:1),r=await et(e,r,8);const E=Le(r.subarray(0,8));r=r.subarray(8),r=await et(e,r,8);const A=Le(r.subarray(0,8));r=r.subarray(8),r=await et(e,r,A);const M=r.subarray(0,A),q=E!==0&&A!==0?Ra(k.Buffer.from(M)):[];if(q.length!==E)throw new Error("Tags lengths don't match");r=r.subarray(A);const L=new Ns.Transform;L._transform=function(w,T,z){this.push(w),z()};const K=ts([ye("dataitem"),ye("1"),ye(u.toString()),h,b,v,M,L]),$=2+d+l+(y?33:1)+(R?33:1)+16+A,C=c-$;if(r.byteLength>C)L.write(r.subarray(0,C)),r=r.subarray(C);else{let w=r.byteLength;for(L.write(r);C>w;){if(r=(await e.next()).value,!r)throw new Error(`Not enough data bytes  expected: ${C} received: ${w}`);w+=r.byteLength,w>C?L.write(r.subarray(0,r.byteLength-(w-C))):L.write(r)}r=r.subarray(r.byteLength-(w-C))}if(L.end(),f!==re(La("sha256").update(p).digest()))throw new Error("ID doesn't match signature");if(!await nd[u].verify(h,await K,p))throw new Error("Invalid signature");o.push({id:f,sigName:x,signature:re(k.Buffer.from(p)),target:re(k.Buffer.from(b)),anchor:re(k.Buffer.from(v)),owner:re(k.Buffer.from(h)),tags:q,dataOffset:a+$,dataSize:C}),a+=$+C}return o}async function N3(t,e,r,n){const s=ud("",r,n),i=new Ns.PassThrough,a=[ye("dataitem"),ye("1"),ye(s.signatureType.toString()),s.rawOwner,s.rawTarget,s.rawAnchor,s.rawTags,t],o=await ts(a),c=k.Buffer.from(await r.sign(o));return s.setSignature(c),i.write(s.getRaw()),e.pipe(i)}async function et(t,e,r){if(e.byteLength>=r)return e;const{done:n,value:s}=await t.next();if(n&&!s)throw new Error("Invalid buffer");return et(t,k.Buffer.concat([k.Buffer.from(e),k.Buffer.from(s)]),r)}async function*py(t){for await(const e of t)yield e}const D3={readBytes:et,getReader:py};var L3=Object.freeze(Object.defineProperty({__proto__:null,processStream:hh,streamSigner:N3,default:hh,streamExportForTesting:D3},Symbol.toStringTag,{value:"Module"}));const M3={...$3,stream:L3};globalThis.arbundles??=M3;var F3=Object.freeze(Object.defineProperty({__proto__:null,createData:ud,DataItem:yr,deepHash:ts,stringToBuffer:ye,getCryptoDriver:We,bundleAndSignData:ly},Symbol.toStringTag,{value:"Module"}));class co{base;wallet;_address;providerUrl;providerInstance;ticker;name;irys;minConfirm=5;isSlow=!1;needsFee=!0;inheritsRPC=!1;constructor(e){Object.assign(this,e)}get address(){return this._address}async ready(){this._address=this.wallet?this.ownerToAddress(await this.getPublicKey()):void 0}async getId(e){return re.encode(k.Buffer.from(await We().hash(await e.rawSignature())))}async price(){return yy(this.ticker)}}async function yy(t){const e=await Rf.get(`https://api.redstone.finance/prices?symbol=${t}&provider=redstone&limit=1`);return await Ve.checkAndThrow(e,"Getting price data"),e.data[0].value}const H3=rd;class uo extends co{signer;w3signer;inheritsRPC=!0;constructor(e){super(e),this.base=["wei",1e18]}async getTx(e){const n=await this.providerInstance.getTransaction(e);if(!n)throw new Error("Tx doesn't exist");if(!n.to)throw new Error(`Unable to resolve transactions ${e} receiver`);return{from:n.from,to:n.to,blockHeight:n.blockNumber?new X(n.blockNumber):void 0,amount:new X(n.value.toHexString(),16),pending:!n.blockNumber,confirmed:n.confirmations>=this.minConfirm}}ownerToAddress(e){return e.toString().toLowerCase()}async sign(e){return(await this.getSigner()).sign(e)}getSigner(){return this.signer||(this.signer=new rd(this.wallet)),this.signer}async verify(e,r,n){return H3.verify(e,r,n)}async getCurrentHeight(){const r=await this.providerInstance.send("eth_blockNumber",[]);return new X(r,16)}async getFee(e,r){const n=this.providerInstance,s={to:r,from:this.address,value:"0x"+new X(e).toString(16)},i=await n.estimateGas(s),a=await n.getGasPrice();return new X(i.mul(a).toString())}async sendTx(e){const n=await this.w3signer.sendTransaction(e);return n?n.hash:void 0}async createTx(e,r,n){const s=J.from(new X(e).toFixed()),i=this.w3signer,a=await i.estimateGas({to:r,from:this.address,value:s.toHexString()});let o=await i.getGasPrice();this.name==="matic"&&(o=J.from(new X(o.toString()).multipliedBy(10).decimalPlaces(0).toString()));const c=await i.populateTransaction({to:r,from:this.address,value:s.toHexString(),gasPrice:o,gasLimit:a});return{txId:void 0,tx:c}}async getPublicKey(){return this.address}async ready(){this.w3signer=await this.wallet.getSigner(),this._address=(await this.w3signer.getAddress()).toString().toLowerCase(),await this.getSigner().ready(),this.providerInstance=this.wallet,await this.providerInstance?._ready?.()}}var fo={},lo={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyType=void 0,function(e){e[e.ED25519=0]="ED25519"}(t.KeyType||(t.KeyType={}))})(lo);var ho={},li={};Object.defineProperty(li,"__esModule",{value:!0});li.KeyPairBase=void 0;class q3{}li.KeyPairBase=q3;var hi={},pi={},xy={},po={};Object.defineProperty(po,"__esModule",{value:!0});po.Assignable=void 0;class z3{constructor(e){Object.keys(e).map(r=>{this[r]=e[r]})}}po.Assignable=z3;var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.ErrorContext=Qt.TypedError=Qt.ArgumentTypeError=Qt.PositionalArgsError=void 0;class K3 extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}Qt.PositionalArgsError=K3;class j3 extends Error{constructor(e,r,n){super(`Expected ${r} for '${e}' argument, but got '${JSON.stringify(n)}'`)}}Qt.ArgumentTypeError=j3;class G3 extends Error{constructor(e,r,n){super(e),this.type=r||"UntypedError",this.context=n}}Qt.TypedError=G3;class W3{constructor(e){this.transactionHash=e}}Qt.ErrorContext=W3;var by={},gy={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.IdType=void 0,function(e){e.Transaction="transaction",e.Receipt="receipt"}(t.IdType||(t.IdType={}))})(gy);var my={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=void 0,function(e){e.Unknown="Unknown",e.Pending="Pending",e.Failure="Failure"}(t.ExecutionStatusBasic||(t.ExecutionStatusBasic={})),function(e){e.NotStarted="NotStarted",e.Started="Started",e.Failure="Failure"}(t.FinalExecutionStatusBasic||(t.FinalExecutionStatusBasic={}))})(my);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=t.IdType=void 0;var e=gy;Object.defineProperty(t,"IdType",{enumerable:!0,get:function(){return e.IdType}});var r=my;Object.defineProperty(t,"ExecutionStatusBasic",{enumerable:!0,get:function(){return r.ExecutionStatusBasic}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return r.FinalExecutionStatusBasic}})})(by);(function(t){var e=le&&le.__createBinding||(Object.create?function(n,s,i,a){a===void 0&&(a=i);var o=Object.getOwnPropertyDescriptor(s,i);(!o||("get"in o?!s.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,a,o)}:function(n,s,i,a){a===void 0&&(a=i),n[a]=s[i]}),r=le&&le.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(po,t),r(Qt,t),r(by,t)})(xy);var V3=le&&le.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pi,"__esModule",{value:!0});pi.PublicKey=void 0;const J3=xy,wu=ei,X3=V3(Ma.exports),ka=lo;function Y3(t){switch(t){case ka.KeyType.ED25519:return"ed25519";default:throw new Error(`Unknown key type ${t}`)}}function Z3(t){switch(t.toLowerCase()){case"ed25519":return ka.KeyType.ED25519;default:throw new Error(`Unknown key type ${t}`)}}class Os extends J3.Assignable{static from(e){return typeof e=="string"?Os.fromString(e):e}static fromString(e){const r=e.split(":");if(r.length===1)return new Os({keyType:ka.KeyType.ED25519,data:(0,wu.baseDecode)(r[0])});if(r.length===2)return new Os({keyType:Z3(r[0]),data:(0,wu.baseDecode)(r[1])});throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${Y3(this.keyType)}:${(0,wu.baseEncode)(this.data)}`}verify(e,r){switch(this.keyType){case ka.KeyType.ED25519:return X3.default.sign.detached.verify(e,r,this.data);default:throw new Error(`Unknown key type ${this.keyType}`)}}}pi.PublicKey=Os;var Q3=le&&le.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hi,"__esModule",{value:!0});hi.KeyPairEd25519=void 0;const vu=ei,Eu=Q3(Ma.exports),e6=lo,t6=li,r6=pi;class fd extends t6.KeyPairBase{constructor(e){super();const r=Eu.default.sign.keyPair.fromSecretKey((0,vu.baseDecode)(e));this.publicKey=new r6.PublicKey({keyType:e6.KeyType.ED25519,data:r.publicKey}),this.secretKey=e}static fromRandom(){const e=Eu.default.sign.keyPair();return new fd((0,vu.baseEncode)(e.secretKey))}sign(e){return{signature:Eu.default.sign.detached(e,(0,vu.baseDecode)(this.secretKey)),publicKey:this.publicKey}}verify(e,r){return this.publicKey.verify(e,r)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}hi.KeyPairEd25519=fd;Object.defineProperty(ho,"__esModule",{value:!0});ho.KeyPair=void 0;const n6=li,Su=hi;class s6 extends n6.KeyPairBase{static fromRandom(e){switch(e.toUpperCase()){case"ED25519":return Su.KeyPairEd25519.fromRandom();default:throw new Error(`Unknown curve ${e}`)}}static fromString(e){const r=e.split(":");if(r.length===1)return new Su.KeyPairEd25519(r[0]);if(r.length===2)switch(r[0].toUpperCase()){case"ED25519":return new Su.KeyPairEd25519(r[1]);default:throw new Error(`Unknown curve: ${r[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}ho.KeyPair=s6;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.KeyPairEd25519=t.KeyPair=t.KeyType=void 0;var e=lo;Object.defineProperty(t,"KeyType",{enumerable:!0,get:function(){return e.KeyType}});var r=ho;Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return r.KeyPair}});var n=hi;Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return n.KeyPairEd25519}});var s=pi;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return s.PublicKey}})})(fo);var wy={},yo={},vy={},xo={},is={};Object.defineProperty(is,"__esModule",{value:!0});is.KeyStore=void 0;class i6{}is.KeyStore=i6;var gn=le&&le.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?i(u.value):s(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};Object.defineProperty(xo,"__esModule",{value:!0});xo.InMemoryKeyStore=void 0;const a6=fo,o6=is;class c6 extends o6.KeyStore{constructor(){super(),this.keys={}}setKey(e,r,n){return gn(this,void 0,void 0,function*(){this.keys[`${r}:${e}`]=n.toString()})}getKey(e,r){return gn(this,void 0,void 0,function*(){const n=this.keys[`${r}:${e}`];return n?a6.KeyPair.fromString(n):null})}removeKey(e,r){return gn(this,void 0,void 0,function*(){delete this.keys[`${r}:${e}`]})}clear(){return gn(this,void 0,void 0,function*(){this.keys={}})}getNetworks(){return gn(this,void 0,void 0,function*(){const e=new Set;return Object.keys(this.keys).forEach(r=>{const n=r.split(":");e.add(n[1])}),Array.from(e.values())})}getAccounts(e){return gn(this,void 0,void 0,function*(){const r=new Array;return Object.keys(this.keys).forEach(n=>{const s=n.split(":");s[s.length-1]===e&&r.push(s.slice(0,s.length-1).join(":"))}),r})}toString(){return"InMemoryKeyStore"}}xo.InMemoryKeyStore=c6;var bo={},mn=le&&le.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?i(u.value):s(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};Object.defineProperty(bo,"__esModule",{value:!0});bo.MergeKeyStore=void 0;const u6=is;class f6 extends u6.KeyStore{constructor(e,r={writeKeyStoreIndex:0}){super(),this.options=r,this.keyStores=e}setKey(e,r,n){return mn(this,void 0,void 0,function*(){yield this.keyStores[this.options.writeKeyStoreIndex].setKey(e,r,n)})}getKey(e,r){return mn(this,void 0,void 0,function*(){for(const n of this.keyStores){const s=yield n.getKey(e,r);if(s)return s}return null})}removeKey(e,r){return mn(this,void 0,void 0,function*(){for(const n of this.keyStores)yield n.removeKey(e,r)})}clear(){return mn(this,void 0,void 0,function*(){for(const e of this.keyStores)yield e.clear()})}getNetworks(){return mn(this,void 0,void 0,function*(){const e=new Set;for(const r of this.keyStores)for(const n of yield r.getNetworks())e.add(n);return Array.from(e)})}getAccounts(e){return mn(this,void 0,void 0,function*(){const r=new Set;for(const n of this.keyStores)for(const s of yield n.getAccounts(e))r.add(s);return Array.from(r)})}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}bo.MergeKeyStore=f6;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MergeKeyStore=t.KeyStore=t.InMemoryKeyStore=void 0;var e=xo;Object.defineProperty(t,"InMemoryKeyStore",{enumerable:!0,get:function(){return e.InMemoryKeyStore}});var r=is;Object.defineProperty(t,"KeyStore",{enumerable:!0,get:function(){return r.KeyStore}});var n=bo;Object.defineProperty(t,"MergeKeyStore",{enumerable:!0,get:function(){return n.MergeKeyStore}})})(vy);var wn=le&&le.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?i(u.value):s(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};Object.defineProperty(yo,"__esModule",{value:!0});yo.BrowserLocalStorageKeyStore=void 0;const d6=fo,l6=vy,h6="near-api-js:keystore:";class p6 extends l6.KeyStore{constructor(e=window.localStorage,r=h6){super(),this.localStorage=e,this.prefix=r}setKey(e,r,n){return wn(this,void 0,void 0,function*(){this.localStorage.setItem(this.storageKeyForSecretKey(e,r),n.toString())})}getKey(e,r){return wn(this,void 0,void 0,function*(){const n=this.localStorage.getItem(this.storageKeyForSecretKey(e,r));return n?d6.KeyPair.fromString(n):null})}removeKey(e,r){return wn(this,void 0,void 0,function*(){this.localStorage.removeItem(this.storageKeyForSecretKey(e,r))})}clear(){return wn(this,void 0,void 0,function*(){for(const e of this.storageKeys())e.startsWith(this.prefix)&&this.localStorage.removeItem(e)})}getNetworks(){return wn(this,void 0,void 0,function*(){const e=new Set;for(const r of this.storageKeys())if(r.startsWith(this.prefix)){const n=r.substring(this.prefix.length).split(":");e.add(n[1])}return Array.from(e.values())})}getAccounts(e){return wn(this,void 0,void 0,function*(){const r=new Array;for(const n of this.storageKeys())if(n.startsWith(this.prefix)){const s=n.substring(this.prefix.length).split(":");s[1]===e&&r.push(s[0])}return r})}storageKeyForSecretKey(e,r){return`${this.prefix}${r}:${e}`}*storageKeys(){for(let e=0;e<this.localStorage.length;e++)yield this.localStorage.key(e)}}yo.BrowserLocalStorageKeyStore=p6;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserLocalStorageKeyStore=void 0;var e=yo;Object.defineProperty(t,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return e.BrowserLocalStorageKeyStore}})})(wy);var An={},Fn={},ae={},on={},go={};Object.defineProperty(go,"__esModule",{value:!0});go.Assignable=void 0;class y6{constructor(e){Object.keys(e).map(r=>{this[r]=e[r]})}}go.Assignable=y6;var er={};Object.defineProperty(er,"__esModule",{value:!0});er.ErrorContext=er.TypedError=er.ArgumentTypeError=er.PositionalArgsError=void 0;class x6 extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}er.PositionalArgsError=x6;class b6 extends Error{constructor(e,r,n){super(`Expected ${r} for '${e}' argument, but got '${JSON.stringify(n)}'`)}}er.ArgumentTypeError=b6;class g6 extends Error{constructor(e,r,n){super(e),this.type=r||"UntypedError",this.context=n}}er.TypedError=g6;class m6{constructor(e){this.transactionHash=e}}er.ErrorContext=m6;var Ey={},Sy={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.IdType=void 0,function(e){e.Transaction="transaction",e.Receipt="receipt"}(t.IdType||(t.IdType={}))})(Sy);var _y={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=void 0,function(e){e.Unknown="Unknown",e.Pending="Pending",e.Failure="Failure"}(t.ExecutionStatusBasic||(t.ExecutionStatusBasic={})),function(e){e.NotStarted="NotStarted",e.Started="Started",e.Failure="Failure"}(t.FinalExecutionStatusBasic||(t.FinalExecutionStatusBasic={}))})(_y);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=t.IdType=void 0;var e=Sy;Object.defineProperty(t,"IdType",{enumerable:!0,get:function(){return e.IdType}});var r=_y;Object.defineProperty(t,"ExecutionStatusBasic",{enumerable:!0,get:function(){return r.ExecutionStatusBasic}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return r.FinalExecutionStatusBasic}})})(Ey);(function(t){var e=le&&le.__createBinding||(Object.create?function(n,s,i,a){a===void 0&&(a=i);var o=Object.getOwnPropertyDescriptor(s,i);(!o||("get"in o?!s.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,a,o)}:function(n,s,i,a){a===void 0&&(a=i),n[a]=s[i]}),r=le&&le.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(go,t),r(er,t),r(Ey,t)})(on);Object.defineProperty(ae,"__esModule",{value:!0});ae.Action=ae.SignedDelegate=ae.DeleteAccount=ae.DeleteKey=ae.AddKey=ae.Stake=ae.Transfer=ae.FunctionCall=ae.DeployContract=ae.CreateAccount=ae.IAction=ae.AccessKey=ae.AccessKeyPermission=ae.FullAccessPermission=ae.FunctionCallPermission=void 0;const mo=on;class Ay{constructor(e){if(Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(r=>{this[r]=e[r],this.enum=r})}}class w6 extends mo.Assignable{}ae.FunctionCallPermission=w6;class v6 extends mo.Assignable{}ae.FullAccessPermission=v6;class E6 extends Ay{}ae.AccessKeyPermission=E6;class S6 extends mo.Assignable{}ae.AccessKey=S6;class ir extends mo.Assignable{}ae.IAction=ir;class _6 extends ir{}ae.CreateAccount=_6;class A6 extends ir{}ae.DeployContract=A6;class T6 extends ir{}ae.FunctionCall=T6;class P6 extends ir{}ae.Transfer=P6;class R6 extends ir{}ae.Stake=R6;class k6 extends ir{}ae.AddKey=k6;class C6 extends ir{}ae.DeleteKey=C6;class B6 extends ir{}ae.DeleteAccount=B6;class I6 extends ir{}ae.SignedDelegate=I6;class O6 extends Ay{}ae.Action=O6;Object.defineProperty(Fn,"__esModule",{value:!0});Fn.actionCreators=Fn.stringifyJsonOrBytes=void 0;const Ee=ae;function U6(){return new Ee.AccessKey({permission:new Ee.AccessKeyPermission({fullAccess:new Ee.FullAccessPermission({})})})}function $6(t,e,r){return new Ee.AccessKey({permission:new Ee.AccessKeyPermission({functionCall:new Ee.FunctionCallPermission({receiverId:t,allowance:r,methodNames:e})})})}function N6(){return new Ee.Action({createAccount:new Ee.CreateAccount({})})}function D6(t){return new Ee.Action({deployContract:new Ee.DeployContract({code:t})})}function Ty(t){return t.byteLength!==void 0&&t.byteLength===t.length?t:k.Buffer.from(JSON.stringify(t))}Fn.stringifyJsonOrBytes=Ty;function L6(t,e,r,n,s=Ty,i=!1){return i?new Ee.Action({functionCall:new Ee.FunctionCall({methodName:t,args:e,gas:r,deposit:n})}):new Ee.Action({functionCall:new Ee.FunctionCall({methodName:t,args:s(e),gas:r,deposit:n})})}function M6(t){return new Ee.Action({transfer:new Ee.Transfer({deposit:t})})}function F6(t,e){return new Ee.Action({stake:new Ee.Stake({stake:t,publicKey:e})})}function H6(t,e){return new Ee.Action({addKey:new Ee.AddKey({publicKey:t,accessKey:e})})}function q6(t){return new Ee.Action({deleteKey:new Ee.DeleteKey({publicKey:t})})}function z6(t){return new Ee.Action({deleteAccount:new Ee.DeleteAccount({beneficiaryId:t})})}function K6({delegateAction:t,signature:e}){return new Ee.Action({signedDelegate:new Ee.SignedDelegate({delegateAction:t,signature:e})})}Fn.actionCreators={addKey:H6,createAccount:N6,deleteAccount:z6,deleteKey:q6,deployContract:D6,fullAccessKey:U6,functionCall:L6,functionCallAccessKey:$6,signedDelegate:K6,stake:F6,transfer:M6};var yi={},wo={},Py={},vo={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyType=void 0,function(e){e[e.ED25519=0]="ED25519"}(t.KeyType||(t.KeyType={}))})(vo);var Eo={},xi={};Object.defineProperty(xi,"__esModule",{value:!0});xi.KeyPairBase=void 0;class j6{}xi.KeyPairBase=j6;var bi={},gi={},G6=le&&le.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gi,"__esModule",{value:!0});gi.PublicKey=void 0;const W6=on,_u=ei,V6=G6(Ma.exports),Ca=vo;function J6(t){switch(t){case Ca.KeyType.ED25519:return"ed25519";default:throw new Error(`Unknown key type ${t}`)}}function X6(t){switch(t.toLowerCase()){case"ed25519":return Ca.KeyType.ED25519;default:throw new Error(`Unknown key type ${t}`)}}class Us extends W6.Assignable{static from(e){return typeof e=="string"?Us.fromString(e):e}static fromString(e){const r=e.split(":");if(r.length===1)return new Us({keyType:Ca.KeyType.ED25519,data:(0,_u.baseDecode)(r[0])});if(r.length===2)return new Us({keyType:X6(r[0]),data:(0,_u.baseDecode)(r[1])});throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${J6(this.keyType)}:${(0,_u.baseEncode)(this.data)}`}verify(e,r){switch(this.keyType){case Ca.KeyType.ED25519:return V6.default.sign.detached.verify(e,r,this.data);default:throw new Error(`Unknown key type ${this.keyType}`)}}}gi.PublicKey=Us;var Y6=le&&le.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bi,"__esModule",{value:!0});bi.KeyPairEd25519=void 0;const Au=ei,Tu=Y6(Ma.exports),Z6=vo,Q6=xi,e4=gi;class dd extends Q6.KeyPairBase{constructor(e){super();const r=Tu.default.sign.keyPair.fromSecretKey((0,Au.baseDecode)(e));this.publicKey=new e4.PublicKey({keyType:Z6.KeyType.ED25519,data:r.publicKey}),this.secretKey=e}static fromRandom(){const e=Tu.default.sign.keyPair();return new dd((0,Au.baseEncode)(e.secretKey))}sign(e){return{signature:Tu.default.sign.detached(e,(0,Au.baseDecode)(this.secretKey)),publicKey:this.publicKey}}verify(e,r){return this.publicKey.verify(e,r)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}bi.KeyPairEd25519=dd;Object.defineProperty(Eo,"__esModule",{value:!0});Eo.KeyPair=void 0;const t4=xi,Pu=bi;class r4 extends t4.KeyPairBase{static fromRandom(e){switch(e.toUpperCase()){case"ED25519":return Pu.KeyPairEd25519.fromRandom();default:throw new Error(`Unknown curve ${e}`)}}static fromString(e){const r=e.split(":");if(r.length===1)return new Pu.KeyPairEd25519(r[0]);if(r.length===2)switch(r[0].toUpperCase()){case"ED25519":return new Pu.KeyPairEd25519(r[1]);default:throw new Error(`Unknown curve: ${r[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}Eo.KeyPair=r4;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.KeyPairEd25519=t.KeyPair=t.KeyType=void 0;var e=vo;Object.defineProperty(t,"KeyType",{enumerable:!0,get:function(){return e.KeyType}});var r=Eo;Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return r.KeyPair}});var n=bi;Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return n.KeyPairEd25519}});var s=gi;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return s.PublicKey}})})(Py);var Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.buildDelegateAction=Zr.DelegateAction=void 0;const n4=on;class Ry extends n4.Assignable{}Zr.DelegateAction=Ry;function s4({actions:t,maxBlockHeight:e,nonce:r,publicKey:n,receiverId:s,senderId:i}){return new Ry({senderId:i,receiverId:s,actions:t,nonce:r,maxBlockHeight:e,publicKey:n})}Zr.buildDelegateAction=s4;var So={};Object.defineProperty(So,"__esModule",{value:!0});So.DelegateActionPrefix=void 0;const i4=on,a4=Math.pow(2,30),o4={MetaTransactions:366};class c4 extends i4.Assignable{}class u4 extends c4{constructor(e){super({prefix:a4+e})}}class f4 extends u4{constructor(){super(o4.MetaTransactions)}}So.DelegateActionPrefix=f4;var as={};Object.defineProperty(as,"__esModule",{value:!0});as.Signature=void 0;const d4=on;class l4 extends d4.Assignable{}as.Signature=l4;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SCHEMA=t.SignedTransaction=t.Transaction=t.decodeSignedTransaction=t.decodeTransaction=t.encodeTransaction=t.encodeSignedDelegate=t.encodeDelegateAction=void 0;const e=Py,r=on,n=ei,s=ae,i=Zr,a=So,o=as;function c(h){return new Uint8Array([...(0,n.serialize)(t.SCHEMA,new a.DelegateActionPrefix),...(0,n.serialize)(t.SCHEMA,h)])}t.encodeDelegateAction=c;function f(h){return(0,n.serialize)(t.SCHEMA,h)}t.encodeSignedDelegate=f;function u(h){return(0,n.serialize)(t.SCHEMA,h)}t.encodeTransaction=u;function d(h){return(0,n.deserialize)(t.SCHEMA,x,h)}t.decodeTransaction=d;function l(h){return(0,n.deserialize)(t.SCHEMA,p,h)}t.decodeSignedTransaction=l;class x extends r.Assignable{encode(){return u(this)}static decode(y){return d(y)}}t.Transaction=x;class p extends r.Assignable{encode(){return u(this)}static decode(y){return l(y)}}t.SignedTransaction=p,t.SCHEMA=new Map([[o.Signature,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[p,{kind:"struct",fields:[["transaction",x],["signature",o.Signature]]}],[x,{kind:"struct",fields:[["signerId","string"],["publicKey",e.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[s.Action]]]}],[e.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[s.AccessKey,{kind:"struct",fields:[["nonce","u64"],["permission",s.AccessKeyPermission]]}],[s.AccessKeyPermission,{kind:"enum",field:"enum",values:[["functionCall",s.FunctionCallPermission],["fullAccess",s.FullAccessPermission]]}],[s.FunctionCallPermission,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[s.FullAccessPermission,{kind:"struct",fields:[]}],[s.Action,{kind:"enum",field:"enum",values:[["createAccount",s.CreateAccount],["deployContract",s.DeployContract],["functionCall",s.FunctionCall],["transfer",s.Transfer],["stake",s.Stake],["addKey",s.AddKey],["deleteKey",s.DeleteKey],["deleteAccount",s.DeleteAccount],["signedDelegate",s.SignedDelegate]]}],[s.CreateAccount,{kind:"struct",fields:[]}],[s.DeployContract,{kind:"struct",fields:[["code",["u8"]]]}],[s.FunctionCall,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[s.Transfer,{kind:"struct",fields:[["deposit","u128"]]}],[s.Stake,{kind:"struct",fields:[["stake","u128"],["publicKey",e.PublicKey]]}],[s.AddKey,{kind:"struct",fields:[["publicKey",e.PublicKey],["accessKey",s.AccessKey]]}],[s.DeleteKey,{kind:"struct",fields:[["publicKey",e.PublicKey]]}],[s.DeleteAccount,{kind:"struct",fields:[["beneficiaryId","string"]]}],[i.DelegateAction,{kind:"struct",fields:[["senderId","string"],["receiverId","string"],["actions",[s.Action]],["nonce","u64"],["maxBlockHeight","u64"],["publicKey",e.PublicKey]]}],[a.DelegateActionPrefix,{kind:"struct",fields:[["prefix","u32"]]}],[s.SignedDelegate,{kind:"struct",fields:[["delegateAction",i.DelegateAction],["signature",o.Signature]]}]])})(wo);Object.defineProperty(yi,"__esModule",{value:!0});yi.createTransaction=void 0;const h4=wo;function p4(t,e,r,n,s,i){return new h4.Transaction({signerId:t,publicKey:e,nonce:n,receiverId:r,actions:s,blockHash:i})}yi.createTransaction=p4;var Hn={},ld=le&&le.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?i(u.value):s(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})},y4=le&&le.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.signDelegateAction=Hn.signTransaction=void 0;const ky=y4(Vh.exports),x4=ae,b4=yi,Ba=wo,Cy=as;function ph(t,e,r,n){return ld(this,void 0,void 0,function*(){const s=(0,Ba.encodeTransaction)(t),i=new Uint8Array(ky.default.sha256.array(s)),a=yield e.signMessage(s,r,n),o=new Ba.SignedTransaction({transaction:t,signature:new Cy.Signature({keyType:t.publicKey.keyType,data:a.signature})});return[i,o]})}function g4(...t){return ld(this,void 0,void 0,function*(){if(t[0].constructor===Ba.Transaction){const[e,r,n,s]=t;return ph(e,r,n,s)}else{const[e,r,n,s,i,a,o]=t,c=yield i.getPublicKey(a,o),f=(0,b4.createTransaction)(a,c,e,r,n,s);return ph(f,i,a,o)}})}Hn.signTransaction=g4;function m4({delegateAction:t,signer:e}){return ld(this,void 0,void 0,function*(){const r=(0,Ba.encodeDelegateAction)(t),n=yield e.sign(r),s=new x4.SignedDelegate({delegateAction:t,signature:new Cy.Signature({keyType:t.publicKey.keyType,data:n})});return{hash:new Uint8Array(ky.default.sha256.array(r)),signedDelegateAction:s}})}Hn.signDelegateAction=m4;(function(t){var e=le&&le.__createBinding||(Object.create?function(n,s,i,a){a===void 0&&(a=i);var o=Object.getOwnPropertyDescriptor(s,i);(!o||("get"in o?!s.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(n,a,o)}:function(n,s,i,a){a===void 0&&(a=i),n[a]=s[i]}),r=le&&le.__exportStar||function(n,s){for(var i in n)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&e(s,n,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(Fn,t),r(ae,t),r(yi,t),r(Zr,t),r(wo,t),r(Hn,t),r(as,t)})(An);class w4 extends co{keyPair;near;constructor(e){super(e),this.near=this.wallet._near,this.base=["yoctoNEAR",1e25]}async ready(){if(!this.wallet.isSignedIn())throw new Error("Wallet has not been signed in!");const e=new wy.BrowserLocalStorageKeyStore,r=this.wallet.account();if(this.keyPair=await e.getKey(this.wallet._networkId,r.accountId),!this.keyPair){this.keyPair=fo.KeyPair.fromRandom("ed25519");const n=this.keyPair.getPublicKey().toString();await e.setKey(this.wallet._networkId,r.accountId,this.keyPair),await r.addKey(n)}this._address=await this.wallet.getAccountId(),this.providerInstance=this.wallet._near.connection.provider}async getTx(e){const r=await this.providerInstance,[n,s]=e.split(":"),i=await r.txStatusReceipts(Ss.decode(s),n),a=await r.block(i.transaction_outcome.block_hash),o=(await r.block({finality:"final"})).header.height;if(i.receipts_outcome[0].outcome.status.SuccessValue!=="")throw new Error("Transaction failed!");const c=i.receipts[0].receipt.Action.actions[0].Transfer.deposit??0;return{from:n,to:i.transaction.receiver_id,amount:new X(c),blockHeight:new X(a.header.height),pending:!1,confirmed:o-a.header.height>=this.minConfirm}}ownerToAddress(e){const r=typeof e=="string"?e:Ss.encode(e);return k.Buffer.from(Ss.decode(r.replace("ed25519:",""))).toString("hex")}async sign(e){return this.getSigner().sign(e)}getSigner(){return new sf(this.keyPair.secretKey)}async verify(e,r,n){return sf.verify(e,r,n)}async getCurrentHeight(){const e=await this.providerInstance.status();return new X(e.sync_info.latest_block_height)}async getFee(e,r){const n=(await this.providerInstance.block({finality:"final"})).header.height,s=await this.providerInstance.gasPrice(n);return new X(s.gas_price).multipliedBy(45e10)}async sendTx(e){const r=await this.providerInstance.sendTransaction(e);return`${this.address}:${r.transaction.hash}`}async createTx(e,r,n){if(!this.address)throw new Error("Address is undefined - you might be missing a wallet, or have not run Irys.ready()");const s=await this.providerInstance.query({request_type:"view_access_key",finality:"final",account_id:this.address,public_key:this.keyPair.getPublicKey().toString()}),i=++s.nonce,a=k.Buffer.from(Ss.decode(s.block_hash)),o=[An.actionCreators.transfer(new Y(new X(e).toString()))],c=An.createTransaction(this.address,this.keyPair.getPublicKey(),r,i,o,a),f=wb(An.SCHEMA,c),u=new Uint8Array(Vh.exports.sha256.array(f)),d=this.keyPair.sign(u);return{tx:new An.SignedTransaction({transaction:c,signature:new An.Signature({keyType:c.publicKey.keyType,data:d.signature})}),txId:void 0}}async getPublicKey(){return k.Buffer.from(this.keyPair.getPublicKey().data)}}class v4 extends co{signer;minConfirm=1;constructor(e){super(e),this.base=["lamports",1e9]}async getProvider(){return this.providerInstance||(this.providerInstance=new vb(this.providerUrl,{confirmTransactionInitialTimeout:6e4,commitment:"confirmed"})),this.providerInstance}async getTx(e){const r=await this.getProvider(),n=await r.getTransaction(e,{commitment:"confirmed"});if(!n)throw new Error("Confirmed tx not found");const s=await r.getSlot("confirmed");if(!n.meta)throw new Error(`Unable to resolve transaction ${e}`);const i=new X(n.meta.postBalances[1]).minus(new X(n.meta.preBalances[1]));return{from:n.transaction.message.accountKeys[0].toBase58(),to:n.transaction.message.accountKeys[1].toBase58(),amount:i,blockHeight:new X(n.slot),pending:!1,confirmed:s-n.slot>=1}}ownerToAddress(e){return typeof e=="string"&&(e=k.Buffer.from(e)),Ss.encode(e)}async sign(e){return await(await this.getSigner()).sign(e)}getSigner(){return this.signer||(this.signer=new _a(this.wallet)),this.signer}verify(e,r,n){return _a.verify(e,r,n)}async getCurrentHeight(){return new X((await(await this.getProvider()).getEpochInfo()).blockHeight??0)}async getFee(e,r){return new X(5e3)}async sendTx(e){return await this.wallet.sendTransaction(e,await this.getProvider(),{skipPreflight:!0})}async createTx(e,r,n){const s=new Qd(await this.getPublicKey()),i=await Mr(async o=>{try{return await(await this.getProvider()).getRecentBlockhash()}catch(c){throw c.message?.includes("blockhash")?c:(o(c),new Error("Unreachable"))}},{retries:3,minTimeout:1e3}),a=new Eb({recentBlockhash:i.blockhash,feePayer:s});return a.add(Sb.transfer({fromPubkey:s,toPubkey:new Qd(r),lamports:+new X(e).toNumber()})),{tx:a,txId:void 0}}async getPublicKey(){if(!this.wallet.publicKey)throw new Error("Wallet.publicKey is undefined");return this.wallet.publicKey.toBuffer()}}const mi="abi/5.7.0",oe=new D(mi),Qr={};let yh={calldata:!0,memory:!0,storage:!0},E4={calldata:!0,memory:!0};function Ni(t,e){if(t==="bytes"||t==="string"){if(yh[e])return!0}else if(t==="address"){if(e==="payable")return!0}else if((t.indexOf("[")>=0||t==="tuple")&&E4[e])return!0;return(yh[e]||e==="payable")&&oe.throwArgumentError("invalid modifier","name",e),!1}function S4(t,e){let r=t;function n(o){oe.throwArgumentError(`unexpected character at position ${o}`,"param",t)}t=t.replace(/\s/g," ");function s(o){let c={type:"",name:"",parent:o,state:{allowType:!0}};return e&&(c.indexed=!1),c}let i={type:"",name:"",state:{allowType:!0}},a=i;for(let o=0;o<t.length;o++){let c=t[o];switch(c){case"(":a.state.allowType&&a.type===""?a.type="tuple":a.state.allowParams||n(o),a.state.allowType=!1,a.type=Tn(a.type),a.components=[s(a)],a=a.components[0];break;case")":delete a.state,a.name==="indexed"&&(e||n(o),a.indexed=!0,a.name=""),Ni(a.type,a.name)&&(a.name=""),a.type=Tn(a.type);let f=a;a=a.parent,a||n(o),delete f.parent,a.state.allowParams=!1,a.state.allowName=!0,a.state.allowArray=!0;break;case",":delete a.state,a.name==="indexed"&&(e||n(o),a.indexed=!0,a.name=""),Ni(a.type,a.name)&&(a.name=""),a.type=Tn(a.type);let u=s(a.parent);a.parent.components.push(u),delete a.parent,a=u;break;case" ":a.state.allowType&&a.type!==""&&(a.type=Tn(a.type),delete a.state.allowType,a.state.allowName=!0,a.state.allowParams=!0),a.state.allowName&&a.name!==""&&(a.name==="indexed"?(e||n(o),a.indexed&&n(o),a.indexed=!0,a.name=""):Ni(a.type,a.name)?a.name="":a.state.allowName=!1);break;case"[":a.state.allowArray||n(o),a.type+=c,a.state.allowArray=!1,a.state.allowName=!1,a.state.readArray=!0;break;case"]":a.state.readArray||n(o),a.type+=c,a.state.readArray=!1,a.state.allowArray=!0,a.state.allowName=!0;break;default:a.state.allowType?(a.type+=c,a.state.allowParams=!0,a.state.allowArray=!0):a.state.allowName?(a.name+=c,delete a.state.allowArray):a.state.readArray?a.type+=c:n(o)}}return a.parent&&oe.throwArgumentError("unexpected eof","param",t),delete i.state,a.name==="indexed"?(e||n(r.length-7),a.indexed&&n(r.length-7),a.indexed=!0,a.name=""):Ni(a.type,a.name)&&(a.name=""),i.type=Tn(i.type),i}function sa(t,e){for(let r in e)N(t,r,e[r])}const ge=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),_4=new RegExp(/^(.*)\[([0-9]*)\]$/);class He{constructor(e,r){e!==Qr&&oe.throwError("use fromString",D.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),sa(this,r);let n=this.type.match(_4);n?sa(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:He.fromObject({type:n[1],components:this.components}),baseType:"array"}):sa(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=ge.sighash),ge[e]||oe.throwArgumentError("invalid format type","format",e),e===ge.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(s=>JSON.parse(s.format(e)))),JSON.stringify(n)}let r="";return this.baseType==="array"?(r+=this.arrayChildren.format(e),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==ge.sighash&&(r+=this.type),r+="("+this.components.map(n=>n.format(e)).join(e===ge.full?", ":",")+")"):r+=this.type,e!==ge.sighash&&(this.indexed===!0&&(r+=" indexed"),e===ge.full&&this.name&&(r+=" "+this.name)),r}static from(e,r){return typeof e=="string"?He.fromString(e,r):He.fromObject(e)}static fromObject(e){return He.isParamType(e)?e:new He(Qr,{name:e.name||null,type:Tn(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(He.fromObject):null})}static fromString(e,r){function n(s){return He.fromObject({name:s.name,type:s.type,indexed:s.indexed,components:s.components})}return n(S4(e,!!r))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function Gs(t,e){return T4(t).map(r=>He.fromString(r,e))}class fr{constructor(e,r){e!==Qr&&oe.throwError("use a static from method",D.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),sa(this,r),this._isFragment=!0,Object.freeze(this)}static from(e){return fr.isFragment(e)?e:typeof e=="string"?fr.fromString(e):fr.fromObject(e)}static fromObject(e){if(fr.isFragment(e))return e;switch(e.type){case"function":return Vt.fromObject(e);case"event":return cr.fromObject(e);case"constructor":return Wt.fromObject(e);case"error":return Ur.fromObject(e);case"fallback":case"receive":return null}return oe.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?cr.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?Vt.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?Wt.fromString(e.trim()):e.split(" ")[0]==="error"?Ur.fromString(e.substring(5).trim()):oe.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class cr extends fr{format(e){if(e||(e=ge.sighash),ge[e]||oe.throwArgumentError("invalid format type","format",e),e===ge.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==ge.sighash&&(r+="event "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===ge.full?", ":",")+") ",e!==ge.sighash&&this.anonymous&&(r+="anonymous "),r.trim()}static from(e){return typeof e=="string"?cr.fromString(e):cr.fromObject(e)}static fromObject(e){if(cr.isEventFragment(e))return e;e.type!=="event"&&oe.throwArgumentError("invalid event object","value",e);const r={name:Ws(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(He.fromObject):[],type:"event"};return new cr(Qr,r)}static fromString(e){let r=e.match(Vs);r||oe.throwArgumentError("invalid event string","value",e);let n=!1;return r[3].split(" ").forEach(s=>{switch(s.trim()){case"anonymous":n=!0;break;case"":break;default:oe.warn("unknown modifier: "+s)}}),cr.fromObject({name:r[1].trim(),anonymous:n,inputs:Gs(r[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function By(t,e){e.gas=null;let r=t.split("@");return r.length!==1?(r.length>2&&oe.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||oe.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=J.from(r[1]),r[0]):t}function Iy(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach(r=>{switch(r.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+r)}})}function Oy(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return t.stateMutability!=null?(e.stateMutability=t.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",t.constant!=null&&!!t.constant!==e.constant&&oe.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable=e.stateMutability==="payable",t.payable!=null&&!!t.payable!==e.payable&&oe.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):t.payable!=null?(e.payable=!!t.payable,t.constant==null&&!e.payable&&t.type!=="constructor"&&oe.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&oe.throwArgumentError("cannot have constant payable function","value",t)):t.constant!=null?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):t.type!=="constructor"&&oe.throwArgumentError("unable to determine stateMutability","value",t),e}class Wt extends fr{format(e){if(e||(e=ge.sighash),ge[e]||oe.throwArgumentError("invalid format type","format",e),e===ge.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});e===ge.sighash&&oe.throwError("cannot format a constructor for sighash",D.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let r="constructor("+this.inputs.map(n=>n.format(e)).join(e===ge.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "),r.trim()}static from(e){return typeof e=="string"?Wt.fromString(e):Wt.fromObject(e)}static fromObject(e){if(Wt.isConstructorFragment(e))return e;e.type!=="constructor"&&oe.throwArgumentError("invalid constructor object","value",e);let r=Oy(e);r.constant&&oe.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(He.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?J.from(e.gas):null};return new Wt(Qr,n)}static fromString(e){let r={type:"constructor"};e=By(e,r);let n=e.match(Vs);return(!n||n[1].trim()!=="constructor")&&oe.throwArgumentError("invalid constructor string","value",e),r.inputs=Gs(n[2].trim(),!1),Iy(n[3].trim(),r),Wt.fromObject(r)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class Vt extends Wt{format(e){if(e||(e=ge.sighash),ge[e]||oe.throwArgumentError("invalid format type","format",e),e===ge.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==ge.sighash&&(r+="function "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===ge.full?", ":",")+") ",e!==ge.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "):this.constant&&(r+="view "),this.outputs&&this.outputs.length&&(r+="returns ("+this.outputs.map(n=>n.format(e)).join(", ")+") "),this.gas!=null&&(r+="@"+this.gas.toString()+" ")),r.trim()}static from(e){return typeof e=="string"?Vt.fromString(e):Vt.fromObject(e)}static fromObject(e){if(Vt.isFunctionFragment(e))return e;e.type!=="function"&&oe.throwArgumentError("invalid function object","value",e);let r=Oy(e);const n={type:e.type,name:Ws(e.name),constant:r.constant,inputs:e.inputs?e.inputs.map(He.fromObject):[],outputs:e.outputs?e.outputs.map(He.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?J.from(e.gas):null};return new Vt(Qr,n)}static fromString(e){let r={type:"function"};e=By(e,r);let n=e.split(" returns ");n.length>2&&oe.throwArgumentError("invalid function string","value",e);let s=n[0].match(Vs);if(s||oe.throwArgumentError("invalid function signature","value",e),r.name=s[1].trim(),r.name&&Ws(r.name),r.inputs=Gs(s[2],!1),Iy(s[3].trim(),r),n.length>1){let i=n[1].match(Vs);(i[1].trim()!=""||i[3].trim()!="")&&oe.throwArgumentError("unexpected tokens","value",e),r.outputs=Gs(i[2],!1)}else r.outputs=[];return Vt.fromObject(r)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function xh(t){const e=t.format();return(e==="Error(string)"||e==="Panic(uint256)")&&oe.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class Ur extends fr{format(e){if(e||(e=ge.sighash),ge[e]||oe.throwArgumentError("invalid format type","format",e),e===ge.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==ge.sighash&&(r+="error "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===ge.full?", ":",")+") ",r.trim()}static from(e){return typeof e=="string"?Ur.fromString(e):Ur.fromObject(e)}static fromObject(e){if(Ur.isErrorFragment(e))return e;e.type!=="error"&&oe.throwArgumentError("invalid error object","value",e);const r={type:e.type,name:Ws(e.name),inputs:e.inputs?e.inputs.map(He.fromObject):[]};return xh(new Ur(Qr,r))}static fromString(e){let r={type:"error"},n=e.match(Vs);return n||oe.throwArgumentError("invalid error signature","value",e),r.name=n[1].trim(),r.name&&Ws(r.name),r.inputs=Gs(n[2],!1),xh(Ur.fromObject(r))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function Tn(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const A4=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Ws(t){return(!t||!t.match(A4))&&oe.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const Vs=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function T4(t){t=t.trim();let e=[],r="",n=0;for(let s=0;s<t.length;s++){let i=t[s];i===","&&n===0?(e.push(r),r=""):(r+=i,i==="("?n++:i===")"&&(n--,n===-1&&oe.throwArgumentError("unbalanced parenthesis","value",t)))}return r&&e.push(r),e}const hd=new D(mi);function P4(t){const e=[],r=function(n,s){if(!!Array.isArray(s))for(let i in s){const a=n.slice();a.push(i);try{r(a,s[i])}catch(o){e.push({path:a,error:o})}}};return r([],t),e}class br{constructor(e,r,n,s){this.name=e,this.type=r,this.localName=n,this.dynamic=s}_throwError(e,r){hd.throwArgumentError(e,this.localName,r)}}class uf{constructor(e){N(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Wr(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(it(e._data))}writeBytes(e){let r=F(e);const n=r.length%this.wordSize;return n&&(r=it([r,this._padding.slice(n)])),this._writeData(r)}_getValue(e){let r=F(J.from(e));return r.length>this.wordSize&&hd.throwError("value out-of-bounds",D.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:r.length}),r.length%this.wordSize&&(r=it([this._padding.slice(r.length%this.wordSize),r])),r}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,r=>{this._data[e]=this._getValue(r)}}}class Ia{constructor(e,r,n,s){N(this,"_data",F(e)),N(this,"wordSize",r||32),N(this,"_coerceFunc",n),N(this,"allowLoose",s),this._offset=0}get data(){return W(this._data)}get consumed(){return this._offset}static coerce(e,r){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(r=r.toNumber()),r}coerce(e,r){return this._coerceFunc?this._coerceFunc(e,r):Ia.coerce(e,r)}_peekBytes(e,r,n){let s=Math.ceil(r/this.wordSize)*this.wordSize;return this._offset+s>this._data.length&&(this.allowLoose&&n&&this._offset+r<=this._data.length?s=r:hd.throwError("data out-of-bounds",D.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+s})),this._data.slice(this._offset,this._offset+s)}subReader(e){return new Ia(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,r){let n=this._peekBytes(0,e,!!r);return this._offset+=n.length,n.slice(0,e)}readValue(){return J.from(this.readBytes(this.wordSize))}}class R4 extends br{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){try{r=Me(r)}catch(n){this._throwError(n.message,r)}return e.writeValue(r)}decode(e){return Me(at(e.readValue().toHexString(),20))}}class k4 extends br{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,r){return this.coder.encode(e,r)}decode(e){return this.coder.decode(e)}}const Cn=new D(mi);function Uy(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let c={};n=e.map(f=>{const u=f.localName;return u||Cn.throwError("cannot encode object for signature with missing names",D.errors.INVALID_ARGUMENT,{argument:"values",coder:f,value:r}),c[u]&&Cn.throwError("cannot encode object for signature with duplicate names",D.errors.INVALID_ARGUMENT,{argument:"values",coder:f,value:r}),c[u]=!0,r[u]})}else Cn.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&Cn.throwArgumentError("types/value length mismatch","tuple",r);let s=new uf(t.wordSize),i=new uf(t.wordSize),a=[];e.forEach((c,f)=>{let u=n[f];if(c.dynamic){let d=i.length;c.encode(i,u);let l=s.writeUpdatableValue();a.push(x=>{l(x+d)})}else c.encode(s,u)}),a.forEach(c=>{c(s.length)});let o=t.appendWriter(s);return o+=t.appendWriter(i),o}function $y(t,e){let r=[],n=t.subReader(0);e.forEach(i=>{let a=null;if(i.dynamic){let o=t.readValue(),c=n.subReader(o.toNumber());try{a=i.decode(c)}catch(f){if(f.code===D.errors.BUFFER_OVERRUN)throw f;a=f,a.baseType=i.name,a.name=i.localName,a.type=i.type}}else try{a=i.decode(t)}catch(o){if(o.code===D.errors.BUFFER_OVERRUN)throw o;a=o,a.baseType=i.name,a.name=i.localName,a.type=i.type}a!=null&&r.push(a)});const s=e.reduce((i,a)=>{const o=a.localName;return o&&(i[o]||(i[o]=0),i[o]++),i},{});e.forEach((i,a)=>{let o=i.localName;if(!o||s[o]!==1||(o==="length"&&(o="_length"),r[o]!=null))return;const c=r[a];c instanceof Error?Object.defineProperty(r,o,{enumerable:!0,get:()=>{throw c}}):r[o]=c});for(let i=0;i<r.length;i++){const a=r[i];a instanceof Error&&Object.defineProperty(r,i,{enumerable:!0,get:()=>{throw a}})}return Object.freeze(r)}class C4 extends br{constructor(e,r,n){const s=e.type+"["+(r>=0?r:"")+"]",i=r===-1||e.dynamic;super("array",s,n,i),this.coder=e,this.length=r}defaultValue(){const e=this.coder.defaultValue(),r=[];for(let n=0;n<this.length;n++)r.push(e);return r}encode(e,r){Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;n===-1&&(n=r.length,e.writeValue(r.length)),Cn.checkArgumentCount(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let i=0;i<r.length;i++)s.push(this.coder);return Uy(e,s,r)}decode(e){let r=this.length;r===-1&&(r=e.readValue().toNumber(),r*32>e._data.length&&Cn.throwError("insufficient data length",D.errors.BUFFER_OVERRUN,{length:e._data.length,count:r}));let n=[];for(let s=0;s<r;s++)n.push(new k4(this.coder));return e.coerce(this.name,$y(e,n))}}class B4 extends br{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){return e.writeValue(r?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class Ny extends br{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=F(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class I4 extends Ny{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,W(super.decode(e)))}}class O4 extends br{constructor(e,r){let n="bytes"+String(e);super(n,n,r,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,r){let n=F(r);return n.length!==this.size&&this._throwError("incorrect data length",r),e.writeBytes(n)}decode(e){return e.coerce(this.name,W(e.readBytes(this.size)))}}class U4 extends br{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}class $4 extends br{constructor(e,r,n){const s=(r?"int":"uint")+e*8;super(s,s,n,!1),this.size=e,this.signed=r}defaultValue(){return 0}encode(e,r){let n=J.from(r),s=z2.mask(e.wordSize*8);if(this.signed){let i=s.mask(this.size*8-1);(n.gt(i)||n.lt(i.add(q2).mul(F2)))&&this._throwError("value out-of-bounds",r)}else(n.lt(H2)||n.gt(s.mask(this.size*8)))&&this._throwError("value out-of-bounds",r);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let r=e.readValue().mask(this.size*8);return this.signed&&(r=r.fromTwos(this.size*8)),e.coerce(this.name,r)}}class N4 extends Ny{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,tr(r))}decode(e){return X2(super.decode(e))}}class Di extends br{constructor(e,r){let n=!1;const s=[];e.forEach(a=>{a.dynamic&&(n=!0),s.push(a.type)});const i="tuple("+s.join(",")+")";super("tuple",i,r,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const r=this.coders.reduce((n,s)=>{const i=s.localName;return i&&(n[i]||(n[i]=0),n[i]++),n},{});return this.coders.forEach((n,s)=>{let i=n.localName;!i||r[i]!==1||(i==="length"&&(i="_length"),e[i]==null&&(e[i]=e[s]))}),Object.freeze(e)}encode(e,r){return Uy(e,this.coders,r)}decode(e){return e.coerce(this.name,$y(e,this.coders))}}const Li=new D(mi),D4=new RegExp(/^bytes([0-9]*)$/),L4=new RegExp(/^(u?int)([0-9]*)$/);class M4{constructor(e){N(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new R4(e.name);case"bool":return new B4(e.name);case"string":return new N4(e.name);case"bytes":return new I4(e.name);case"array":return new C4(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Di((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new U4(e.name)}let r=e.type.match(L4);if(r){let n=parseInt(r[2]||"256");return(n===0||n>256||n%8!==0)&&Li.throwArgumentError("invalid "+r[1]+" bit length","param",e),new $4(n/8,r[1]==="int",e.name)}if(r=e.type.match(D4),r){let n=parseInt(r[1]);return(n===0||n>32)&&Li.throwArgumentError("invalid bytes length","param",e),new O4(n,e.name)}return Li.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,r){return new Ia(e,this._getWordSize(),this.coerceFunc,r)}_getWriter(){return new uf(this._getWordSize())}getDefaultValue(e){const r=e.map(s=>this._getCoder(He.from(s)));return new Di(r,"_").defaultValue()}encode(e,r){e.length!==r.length&&Li.throwError("types/values length mismatch",D.errors.INVALID_ARGUMENT,{count:{types:e.length,values:r.length},value:{types:e,values:r}});const n=e.map(a=>this._getCoder(He.from(a))),s=new Di(n,"_"),i=this._getWriter();return s.encode(i,r),i.data}decode(e,r,n){const s=e.map(a=>this._getCoder(He.from(a)));return new Di(s,"_").decode(this._getReader(F(r),n))}}const F4=new M4,Ae=new D(mi);class H4 extends ns{}class q4 extends ns{}class z4 extends ns{}class ff extends ns{static isIndexed(e){return!!(e&&e._isIndexed)}}const K4={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function bh(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class gh{constructor(e){let r=[];typeof e=="string"?r=JSON.parse(e):r=e,N(this,"fragments",r.map(n=>fr.from(n)).filter(n=>n!=null)),N(this,"_abiCoder",As(new.target,"getAbiCoder")()),N(this,"functions",{}),N(this,"errors",{}),N(this,"events",{}),N(this,"structs",{}),this.fragments.forEach(n=>{let s=null;switch(n.type){case"constructor":if(this.deploy){Ae.warn("duplicate definition - constructor");return}N(this,"deploy",n);return;case"function":s=this.functions;break;case"event":s=this.events;break;case"error":s=this.errors;break;default:return}let i=n.format();if(s[i]){Ae.warn("duplicate definition - "+i);return}s[i]=n}),this.deploy||N(this,"deploy",Wt.from({payable:!1,type:"constructor"})),N(this,"_isInterface",!0)}format(e){e||(e=ge.full),e===ge.sighash&&Ae.throwArgumentError("interface does not support formatting sighash","format",e);const r=this.fragments.map(n=>n.format(e));return e===ge.json?JSON.stringify(r.map(n=>JSON.parse(n))):r}static getAbiCoder(){return F4}static getAddress(e){return Me(e)}static getSighash(e){return Xr(Gr(e.format()),0,4)}static getEventTopic(e){return Gr(e.format())}getFunction(e){if(Ie(e)){for(const n in this.functions)if(e===this.getSighash(n))return this.functions[n];Ae.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),s=Object.keys(this.functions).filter(i=>i.split("(")[0]===n);return s.length===0?Ae.throwArgumentError("no matching function","name",n):s.length>1&&Ae.throwArgumentError("multiple matching functions","name",n),this.functions[s[0]]}const r=this.functions[Vt.fromString(e).format()];return r||Ae.throwArgumentError("no matching function","signature",e),r}getEvent(e){if(Ie(e)){const n=e.toLowerCase();for(const s in this.events)if(n===this.getEventTopic(s))return this.events[s];Ae.throwArgumentError("no matching event","topichash",n)}if(e.indexOf("(")===-1){const n=e.trim(),s=Object.keys(this.events).filter(i=>i.split("(")[0]===n);return s.length===0?Ae.throwArgumentError("no matching event","name",n):s.length>1&&Ae.throwArgumentError("multiple matching events","name",n),this.events[s[0]]}const r=this.events[cr.fromString(e).format()];return r||Ae.throwArgumentError("no matching event","signature",e),r}getError(e){if(Ie(e)){const n=As(this.constructor,"getSighash");for(const s in this.errors){const i=this.errors[s];if(e===n(i))return this.errors[s]}Ae.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),s=Object.keys(this.errors).filter(i=>i.split("(")[0]===n);return s.length===0?Ae.throwArgumentError("no matching error","name",n):s.length>1&&Ae.throwArgumentError("multiple matching errors","name",n),this.errors[s[0]]}const r=this.errors[Vt.fromString(e).format()];return r||Ae.throwArgumentError("no matching error","signature",e),r}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(r){try{e=this.getError(e)}catch{throw r}}return As(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),As(this.constructor,"getEventTopic")(e)}_decodeParams(e,r){return this._abiCoder.decode(e,r)}_encodeParams(e,r){return this._abiCoder.encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){typeof e=="string"&&(e=this.getError(e));const n=F(r);return W(n.slice(0,4))!==this.getSighash(e)&&Ae.throwArgumentError(`data signature does not match error ${e.name}.`,"data",W(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,r){return typeof e=="string"&&(e=this.getError(e)),W(it([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionData(e,r){typeof e=="string"&&(e=this.getFunction(e));const n=F(r);return W(n.slice(0,4))!==this.getSighash(e)&&Ae.throwArgumentError(`data signature does not match function ${e.name}.`,"data",W(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,r){return typeof e=="string"&&(e=this.getFunction(e)),W(it([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionResult(e,r){typeof e=="string"&&(e=this.getFunction(e));let n=F(r),s=null,i="",a=null,o=null,c=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch{}break;case 4:{const f=W(n.slice(0,4)),u=K4[f];if(u)a=this._abiCoder.decode(u.inputs,n.slice(4)),o=u.name,c=u.signature,u.reason&&(s=a[0]),o==="Error"?i=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(a[0])}`:o==="Panic"&&(i=`; VM Exception while processing transaction: reverted with panic code ${a[0]}`);else try{const d=this.getError(f);a=this._abiCoder.decode(d.inputs,n.slice(4)),o=d.name,c=d.format()}catch{}break}}return Ae.throwError("call revert exception"+i,D.errors.CALL_EXCEPTION,{method:e.format(),data:W(r),errorArgs:a,errorName:o,errorSignature:c,reason:s})}encodeFunctionResult(e,r){return typeof e=="string"&&(e=this.getFunction(e)),W(this._abiCoder.encode(e.outputs,r||[]))}encodeFilterTopics(e,r){typeof e=="string"&&(e=this.getEvent(e)),r.length>e.inputs.length&&Ae.throwError("too many arguments for "+e.format(),D.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:r});let n=[];e.anonymous||n.push(this.getEventTopic(e));const s=(i,a)=>i.type==="string"?Gr(a):i.type==="bytes"?ze(W(a)):(i.type==="bool"&&typeof a=="boolean"&&(a=a?"0x01":"0x00"),i.type.match(/^u?int/)&&(a=J.from(a).toHexString()),i.type==="address"&&this._abiCoder.encode(["address"],[a]),at(W(a),32));for(r.forEach((i,a)=>{let o=e.inputs[a];if(!o.indexed){i!=null&&Ae.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,i);return}i==null?n.push(null):o.baseType==="array"||o.baseType==="tuple"?Ae.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,i):Array.isArray(i)?n.push(i.map(c=>s(o,c))):n.push(s(o,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){typeof e=="string"&&(e=this.getEvent(e));const n=[],s=[],i=[];return e.anonymous||n.push(this.getEventTopic(e)),r.length!==e.inputs.length&&Ae.throwArgumentError("event arguments/values mismatch","values",r),e.inputs.forEach((a,o)=>{const c=r[o];if(a.indexed)if(a.type==="string")n.push(Gr(c));else if(a.type==="bytes")n.push(ze(c));else{if(a.baseType==="tuple"||a.baseType==="array")throw new Error("not implemented");n.push(this._abiCoder.encode([a.type],[c]))}else s.push(a),i.push(c)}),{data:this._abiCoder.encode(s,i),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"&&(e=this.getEvent(e)),n!=null&&!e.anonymous){let l=this.getEventTopic(e);(!Ie(n[0],32)||n[0].toLowerCase()!==l)&&Ae.throwError("fragment/topic mismatch",D.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:l,value:n[0]}),n=n.slice(1)}let s=[],i=[],a=[];e.inputs.forEach((l,x)=>{l.indexed?l.type==="string"||l.type==="bytes"||l.baseType==="tuple"||l.baseType==="array"?(s.push(He.fromObject({type:"bytes32",name:l.name})),a.push(!0)):(s.push(l),a.push(!1)):(i.push(l),a.push(!1))});let o=n!=null?this._abiCoder.decode(s,it(n)):null,c=this._abiCoder.decode(i,r,!0),f=[],u=0,d=0;e.inputs.forEach((l,x)=>{if(l.indexed)if(o==null)f[x]=new ff({_isIndexed:!0,hash:null});else if(a[x])f[x]=new ff({_isIndexed:!0,hash:o[d++]});else try{f[x]=o[d++]}catch(p){f[x]=p}else try{f[x]=c[u++]}catch(p){f[x]=p}if(l.name&&f[l.name]==null){const p=f[x];p instanceof Error?Object.defineProperty(f,l.name,{enumerable:!0,get:()=>{throw bh(`property ${JSON.stringify(l.name)}`,p)}}):f[l.name]=p}});for(let l=0;l<f.length;l++){const x=f[l];x instanceof Error&&Object.defineProperty(f,l,{enumerable:!0,get:()=>{throw bh(`index ${l}`,x)}})}return Object.freeze(f)}parseTransaction(e){let r=this.getFunction(e.data.substring(0,10).toLowerCase());return r?new q4({args:this._abiCoder.decode(r.inputs,"0x"+e.data.substring(10)),functionFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r),value:J.from(e.value||"0")}):null}parseLog(e){let r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new H4({eventFragment:r,name:r.name,signature:r.format(),topic:this.getEventTopic(r),args:this.decodeEventLog(r,e.data,e.topics)})}parseError(e){const r=W(e);let n=this.getError(r.substring(0,10).toLowerCase());return n?new z4({args:this._abiCoder.decode(n.inputs,"0x"+r.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const j4="contracts/5.7.0";var en=globalThis&&globalThis.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{f(n.next(u))}catch(d){a(d)}}function c(u){try{f(n.throw(u))}catch(d){a(d)}}function f(u){u.done?i(u.value):s(u.value).then(o,c)}f((n=n.apply(t,e||[])).next())})};const Ce=new D(j4);function Oa(t,e){return en(this,void 0,void 0,function*(){const r=yield e;typeof r!="string"&&Ce.throwArgumentError("invalid address or ENS name","name",r);try{return Me(r)}catch{}t||Ce.throwError("a provider or signer is needed to resolve ENS names",D.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield t.resolveName(r);return n==null&&Ce.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n})}function ia(t,e,r){return en(this,void 0,void 0,function*(){return Array.isArray(r)?yield Promise.all(r.map((n,s)=>ia(t,Array.isArray(e)?e[s]:e[n.name],n))):r.type==="address"?yield Oa(t,e):r.type==="tuple"?yield ia(t,e,r.components):r.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>ia(t,n,r.arrayChildren))):Promise.reject(Ce.makeError("invalid value for array",D.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function _o(t,e,r){return en(this,void 0,void 0,function*(){let n={};r.length===e.inputs.length+1&&typeof r[r.length-1]=="object"&&(n=Nr(r.pop())),Ce.checkArgumentCount(r.length,e.inputs.length,"passed to contract"),t.signer?n.from?n.from=ur({override:Oa(t.signer,n.from),signer:t.signer.getAddress()}).then(f=>en(this,void 0,void 0,function*(){return Me(f.signer)!==f.override&&Ce.throwError("Contract with a Signer cannot override from",D.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),f.override})):n.from=t.signer.getAddress():n.from&&(n.from=Oa(t.provider,n.from));const s=yield ur({args:ia(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:ur(n)||{}}),i=t.interface.encodeFunctionData(e,s.args),a={data:i,to:s.address},o=s.overrides;if(o.nonce!=null&&(a.nonce=J.from(o.nonce).toNumber()),o.gasLimit!=null&&(a.gasLimit=J.from(o.gasLimit)),o.gasPrice!=null&&(a.gasPrice=J.from(o.gasPrice)),o.maxFeePerGas!=null&&(a.maxFeePerGas=J.from(o.maxFeePerGas)),o.maxPriorityFeePerGas!=null&&(a.maxPriorityFeePerGas=J.from(o.maxPriorityFeePerGas)),o.from!=null&&(a.from=o.from),o.type!=null&&(a.type=o.type),o.accessList!=null&&(a.accessList=Lp(o.accessList)),a.gasLimit==null&&e.gas!=null){let f=21e3;const u=F(i);for(let d=0;d<u.length;d++)f+=4,u[d]&&(f+=64);a.gasLimit=J.from(e.gas).add(f)}if(o.value){const f=J.from(o.value);!f.isZero()&&!e.payable&&Ce.throwError("non-payable method cannot override value",D.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),a.value=f}o.customData&&(a.customData=Nr(o.customData)),o.ccipReadEnabled&&(a.ccipReadEnabled=!!o.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const c=Object.keys(n).filter(f=>n[f]!=null);return c.length&&Ce.throwError(`cannot override ${c.map(f=>JSON.stringify(f)).join(",")}`,D.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:c}),a})}function G4(t,e){return function(...r){return _o(t,e,r)}}function W4(t,e){const r=t.signer||t.provider;return function(...n){return en(this,void 0,void 0,function*(){r||Ce.throwError("estimate require a provider or signer",D.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const s=yield _o(t,e,n);return yield r.estimateGas(s)})}}function V4(t,e){const r=e.wait.bind(e);e.wait=n=>r(n).then(s=>(s.events=s.logs.map(i=>{let a=Mn(i),o=null;try{o=t.interface.parseLog(i)}catch{}return o&&(a.args=o.args,a.decode=(c,f)=>t.interface.decodeEventLog(o.eventFragment,c,f),a.event=o.name,a.eventSignature=o.signature),a.removeListener=()=>t.provider,a.getBlock=()=>t.provider.getBlock(s.blockHash),a.getTransaction=()=>t.provider.getTransaction(s.transactionHash),a.getTransactionReceipt=()=>Promise.resolve(s),a}),s))}function Dy(t,e,r){const n=t.signer||t.provider;return function(...s){return en(this,void 0,void 0,function*(){let i;if(s.length===e.inputs.length+1&&typeof s[s.length-1]=="object"){const c=Nr(s.pop());c.blockTag!=null&&(i=yield c.blockTag),delete c.blockTag,s.push(c)}t.deployTransaction!=null&&(yield t._deployed(i));const a=yield _o(t,e,s),o=yield n.call(a,i);try{let c=t.interface.decodeFunctionResult(e,o);return r&&e.outputs.length===1&&(c=c[0]),c}catch(c){throw c.code===D.errors.CALL_EXCEPTION&&(c.address=t.address,c.args=s,c.transaction=a),c}})}}function J4(t,e){return function(...r){return en(this,void 0,void 0,function*(){t.signer||Ce.throwError("sending a transaction requires a signer",D.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.deployTransaction!=null&&(yield t._deployed());const n=yield _o(t,e,r),s=yield t.signer.sendTransaction(n);return V4(t,s),s})}}function mh(t,e,r){return e.constant?Dy(t,e,r):J4(t,e)}function Ly(t){return t.address&&(t.topics==null||t.topics.length===0)?"*":(t.address||"*")+"@"+(t.topics?t.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class Js{constructor(e,r){N(this,"tag",e),N(this,"filter",r),this._listeners=[]}addListener(e,r){this._listeners.push({listener:e,once:r})}removeListener(e){let r=!1;this._listeners=this._listeners.filter(n=>r||n.listener!==e?!0:(r=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const r=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const s=e.slice();return setTimeout(()=>{n.listener.apply(this,s)},0),!n.once}),r}prepareEvent(e){}getEmit(e){return[e]}}class X4 extends Js{constructor(){super("error",null)}}class wh extends Js{constructor(e,r,n,s){const i={address:e};let a=r.getEventTopic(n);s?(a!==s[0]&&Ce.throwArgumentError("topic mismatch","topics",s),i.topics=s.slice()):i.topics=[a],super(Ly(i),i),N(this,"address",e),N(this,"interface",r),N(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(r,n)=>this.interface.decodeEventLog(this.fragment,r,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(r){e.args=null,e.decodeError=r}}getEmit(e){const r=P4(e.args);if(r.length)throw r[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class vh extends Js{constructor(e,r){super("*",{address:e}),N(this,"address",e),N(this,"interface",r)}prepareEvent(e){super.prepareEvent(e);try{const r=this.interface.parseLog(e);e.event=r.name,e.eventSignature=r.signature,e.decode=(n,s)=>this.interface.decodeEventLog(r.eventFragment,n,s),e.args=r.args}catch{}}}class Y4{constructor(e,r,n){N(this,"interface",As(new.target,"getInterface")(r)),n==null?(N(this,"provider",null),N(this,"signer",null)):ui.isSigner(n)?(N(this,"provider",n.provider||null),N(this,"signer",n)):ao.isProvider(n)?(N(this,"provider",n),N(this,"signer",null)):Ce.throwArgumentError("invalid signer or provider","signerOrProvider",n),N(this,"callStatic",{}),N(this,"estimateGas",{}),N(this,"functions",{}),N(this,"populateTransaction",{}),N(this,"filters",{});{const a={};Object.keys(this.interface.events).forEach(o=>{const c=this.interface.events[o];N(this.filters,o,(...f)=>({address:this.address,topics:this.interface.encodeFilterTopics(c,f)})),a[c.name]||(a[c.name]=[]),a[c.name].push(o)}),Object.keys(a).forEach(o=>{const c=a[o];c.length===1?N(this.filters,o,this.filters[c[0]]):Ce.warn(`Duplicate definition of ${o} (${c.join(", ")})`)})}if(N(this,"_runningEvents",{}),N(this,"_wrappedEmits",{}),e==null&&Ce.throwArgumentError("invalid contract address or ENS name","addressOrName",e),N(this,"address",e),this.provider)N(this,"resolvedAddress",Oa(this.provider,e));else try{N(this,"resolvedAddress",Promise.resolve(Me(e)))}catch{Ce.throwError("provider is required to use ENS name as contract address",D.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(a=>{});const s={},i={};Object.keys(this.interface.functions).forEach(a=>{const o=this.interface.functions[a];if(i[a]){Ce.warn(`Duplicate ABI entry for ${JSON.stringify(a)}`);return}i[a]=!0;{const c=o.name;s[`%${c}`]||(s[`%${c}`]=[]),s[`%${c}`].push(a)}this[a]==null&&N(this,a,mh(this,o,!0)),this.functions[a]==null&&N(this.functions,a,mh(this,o,!1)),this.callStatic[a]==null&&N(this.callStatic,a,Dy(this,o,!0)),this.populateTransaction[a]==null&&N(this.populateTransaction,a,G4(this,o)),this.estimateGas[a]==null&&N(this.estimateGas,a,W4(this,o))}),Object.keys(s).forEach(a=>{const o=s[a];if(o.length>1)return;a=a.substring(1);const c=o[0];try{this[a]==null&&N(this,a,this[c])}catch{}this.functions[a]==null&&N(this.functions,a,this.functions[c]),this.callStatic[a]==null&&N(this.callStatic,a,this.callStatic[c]),this.populateTransaction[a]==null&&N(this.populateTransaction,a,this.populateTransaction[c]),this.estimateGas[a]==null&&N(this.estimateGas,a,this.estimateGas[c])})}static getContractAddress(e){return iv(e)}static getInterface(e){return gh.isInterface(e)?e:new gh(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(r=>(r==="0x"&&Ce.throwError("contract not deployed",D.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||Ce.throwError("sending a transactions require a signer",D.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const r=Nr(e||{});return["from","to"].forEach(function(n){r[n]!=null&&Ce.throwError("cannot override "+n,D.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(r))}connect(e){typeof e=="string"&&(e=new Vf(e,this.provider));const r=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&N(r,"deployTransaction",this.deployTransaction),r}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return ff.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new X4);if(e==="event")return this._normalizeRunningEvent(new Js("event",null));if(e==="*")return this._normalizeRunningEvent(new vh(this.address,this.interface));const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new wh(this.address,this.interface,r))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const s=this.interface.getEvent(n);return this._normalizeRunningEvent(new wh(this.address,this.interface,s,e.topics))}catch{}const r={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Js(Ly(r),r))}return this._normalizeRunningEvent(new vh(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const r=this._wrappedEmits[e.tag];r&&e.filter&&(this.provider.off(e.filter,r),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,r,n){const s=Mn(r);return s.removeListener=()=>{!n||(e.removeListener(n),this._checkRunningEvents(e))},s.getBlock=()=>this.provider.getBlock(r.blockHash),s.getTransaction=()=>this.provider.getTransaction(r.transactionHash),s.getTransactionReceipt=()=>this.provider.getTransactionReceipt(r.transactionHash),e.prepareEvent(s),s}_addEventListener(e,r,n){if(this.provider||Ce.throwError("events require a provider or a signer with a provider",D.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(r,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const s=i=>{let a=this._wrapEvent(e,i,r);if(a.decodeError==null)try{const o=e.getEmit(a);this.emit(e.filter,...o)}catch(o){a.decodeError=o.error}e.filter!=null&&this.emit("event",a),a.decodeError!=null&&this.emit("error",a.decodeError,a)};this._wrappedEmits[e.tag]=s,e.filter!=null&&this.provider.on(e.filter,s)}}queryFilter(e,r,n){const s=this._getRunningEvent(e),i=Nr(s.filter);return typeof r=="string"&&Ie(r,32)?(n!=null&&Ce.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),i.blockHash=r):(i.fromBlock=r??0,i.toBlock=n??"latest"),this.provider.getLogs(i).then(a=>a.map(o=>this._wrapEvent(s,o,null)))}on(e,r){return this._addEventListener(this._getRunningEvent(e),r,!1),this}once(e,r){return this._addEventListener(this._getRunningEvent(e),r,!0),this}emit(e,...r){if(!this.provider)return!1;const n=this._getRunningEvent(e),s=n.run(r)>0;return this._checkRunningEvents(n),s}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((r,n)=>r+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const r=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(s=>{r.push(s)});return r}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const s=this._runningEvents[n];s.removeAllListeners(),this._checkRunningEvents(s)}return this}const r=this._getRunningEvent(e);return r.removeAllListeners(),this._checkRunningEvents(r),this}off(e,r){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(r),this._checkRunningEvents(n),this}removeListener(e,r){return this.off(e,r)}}class Z4 extends Y4{}class Q4 extends uo{contractInstance;contractAddress;constructor(e){super(e),this.contractAddress=e.contractAddress}async getContract(){return this.contractInstance||(this.contractInstance=new Z4(this.contractAddress,e8,this.w3signer),this.base=["wei",Math.pow(10,await this.contractInstance.decimals())]),this.contractInstance}async getTx(e){const r=await this.providerInstance.getTransaction(e);if(!r)throw new Error("Tx doesn't exist");if(r.data.length!==138||r.data.slice(2,10)!=="a9059cbb")throw new Error("Tx isn't a ERC20 transfer");const n=`0x${r.data.slice(34,74)}`,s=new X(r.data.slice(74),16);return{from:r.from,to:n,blockHeight:r.blockNumber?new X(r.blockNumber):void 0,amount:s,pending:!r.blockNumber,confirmed:r.confirmations>=this.minConfirm}}async getFee(e,r){const n="0x"+new X(e).toString(16),s=await this.getContract(),i=await this.providerInstance.getGasPrice(),a=await s.estimateGas.transfer(r,n),o=new X(i.mul(a).toString()),[c]=await this.getGas(),f=c.multipliedBy(o),u=new X(await this.price());return new X(f).dividedToIntegerBy(u)}async createTx(e,r,n){const s=await this.getContract(),i="0x"+new X(e).toString(16),a=await s.populateTransaction.transfer(r,i);if(a.gasPrice=await this.providerInstance.getGasPrice(),a.gasLimit=await s.estimateGas.transfer(r,i),a.chainId=(await this.providerInstance.getNetwork()).chainId,!this.address)throw new Error("Address is undefined - you might be missing a wallet, or have not run Irys.ready()");return a.nonce=await this.providerInstance.getTransactionCount(this.address),{txId:void 0,tx:a}}async getGas(){return[new X(await yy("ETH")),1e18]}}const e8=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}];var lt={},qe={};Object.defineProperty(qe,"__esModule",{value:!0});qe.output=qe.exists=qe.hash=qe.bytes=qe.bool=qe.number=void 0;function Ua(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}qe.number=Ua;function My(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}qe.bool=My;function pd(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}qe.bytes=pd;function Fy(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ua(t.outputLen),Ua(t.blockLen)}qe.hash=Fy;function Hy(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}qe.exists=Hy;function qy(t,e){pd(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}qe.output=qy;const t8={number:Ua,bool:My,bytes:pd,hash:Fy,exists:Hy,output:qy};qe.default=t8;var qn={},zy={},cn={},Ao={};Object.defineProperty(Ao,"__esModule",{value:!0});Ao.crypto=void 0;Ao.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const e=Ao,r=E=>new Uint8Array(E.buffer,E.byteOffset,E.byteLength);t.u8=r;const n=E=>new Uint32Array(E.buffer,E.byteOffset,Math.floor(E.byteLength/4));t.u32=n;const s=E=>new DataView(E.buffer,E.byteOffset,E.byteLength);t.createView=s;const i=(E,A)=>E<<32-A|E>>>A;if(t.rotr=i,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const a=Array.from({length:256},(E,A)=>A.toString(16).padStart(2,"0"));function o(E){if(!(E instanceof Uint8Array))throw new Error("Uint8Array expected");let A="";for(let M=0;M<E.length;M++)A+=a[E[M]];return A}t.bytesToHex=o;function c(E){if(typeof E!="string")throw new TypeError("hexToBytes: expected string, got "+typeof E);if(E.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const A=new Uint8Array(E.length/2);for(let M=0;M<A.length;M++){const q=M*2,L=E.slice(q,q+2),K=Number.parseInt(L,16);if(Number.isNaN(K)||K<0)throw new Error("Invalid byte sequence");A[M]=K}return A}t.hexToBytes=c;const f=async()=>{};t.nextTick=f;async function u(E,A,M){let q=Date.now();for(let L=0;L<E;L++){M(L);const K=Date.now()-q;K>=0&&K<A||(await(0,t.nextTick)(),q+=K)}}t.asyncLoop=u;function d(E){if(typeof E!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof E}`);return new TextEncoder().encode(E)}t.utf8ToBytes=d;function l(E){if(typeof E=="string"&&(E=d(E)),!(E instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof E})`);return E}t.toBytes=l;function x(...E){if(!E.every(q=>q instanceof Uint8Array))throw new Error("Uint8Array list expected");if(E.length===1)return E[0];const A=E.reduce((q,L)=>q+L.length,0),M=new Uint8Array(A);for(let q=0,L=0;q<E.length;q++){const K=E[q];M.set(K,L),L+=K.length}return M}t.concatBytes=x;class p{clone(){return this._cloneInto()}}t.Hash=p;const h=E=>Object.prototype.toString.call(E)==="[object Object]"&&E.constructor===Object;function y(E,A){if(A!==void 0&&(typeof A!="object"||!h(A)))throw new TypeError("Options should be object or undefined");return Object.assign(E,A)}t.checkOpts=y;function b(E){const A=q=>E().update(l(q)).digest(),M=E();return A.outputLen=M.outputLen,A.blockLen=M.blockLen,A.create=()=>E(),A}t.wrapConstructor=b;function R(E){const A=(q,L)=>E(L).update(l(q)).digest(),M=E({});return A.outputLen=M.outputLen,A.blockLen=M.blockLen,A.create=q=>E(q),A}t.wrapConstructorWithOpts=R;function v(E=32){if(e.crypto.web)return e.crypto.web.getRandomValues(new Uint8Array(E));if(e.crypto.node)return new Uint8Array(e.crypto.node.randomBytes(E).buffer);throw new Error("The environment doesn't have randomBytes function")}t.randomBytes=v})(cn);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=void 0;const e=qe,r=cn;class n extends r.Hash{constructor(a,o){super(),this.finished=!1,this.destroyed=!1,e.default.hash(a);const c=(0,r.toBytes)(o);if(this.iHash=a.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const f=this.blockLen,u=new Uint8Array(f);u.set(c.length>f?a.create().update(c).digest():c);for(let d=0;d<u.length;d++)u[d]^=54;this.iHash.update(u),this.oHash=a.create();for(let d=0;d<u.length;d++)u[d]^=106;this.oHash.update(u),u.fill(0)}update(a){return e.default.exists(this),this.iHash.update(a),this}digestInto(a){e.default.exists(this),e.default.bytes(a,this.outputLen),this.finished=!0,this.iHash.digestInto(a),this.oHash.update(a),this.oHash.digestInto(a),this.destroy()}digest(){const a=new Uint8Array(this.oHash.outputLen);return this.digestInto(a),a}_cloneInto(a){a||(a=Object.create(Object.getPrototypeOf(this),{}));const{oHash:o,iHash:c,finished:f,destroyed:u,blockLen:d,outputLen:l}=this;return a=a,a.finished=f,a.destroyed=u,a.blockLen=d,a.outputLen=l,a.oHash=o._cloneInto(a.oHash),a.iHash=c._cloneInto(a.iHash),a}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const s=(i,a,o)=>new n(i,a).update(o).digest();t.hmac=s,t.hmac.create=(i,a)=>new n(i,a)})(zy);Object.defineProperty(qn,"__esModule",{value:!0});qn.pbkdf2Async=qn.pbkdf2=void 0;const Mi=qe,r8=zy,On=cn;function Ky(t,e,r,n){Mi.default.hash(t);const s=(0,On.checkOpts)({dkLen:32,asyncTick:10},n),{c:i,dkLen:a,asyncTick:o}=s;if(Mi.default.number(i),Mi.default.number(a),Mi.default.number(o),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=(0,On.toBytes)(e),f=(0,On.toBytes)(r),u=new Uint8Array(a),d=r8.hmac.create(t,c),l=d._cloneInto().update(f);return{c:i,dkLen:a,asyncTick:o,DK:u,PRF:d,PRFSalt:l}}function jy(t,e,r,n,s){return t.destroy(),e.destroy(),n&&n.destroy(),s.fill(0),r}function n8(t,e,r,n){const{c:s,dkLen:i,DK:a,PRF:o,PRFSalt:c}=Ky(t,e,r,n);let f;const u=new Uint8Array(4),d=(0,On.createView)(u),l=new Uint8Array(o.outputLen);for(let x=1,p=0;p<i;x++,p+=o.outputLen){const h=a.subarray(p,p+o.outputLen);d.setInt32(0,x,!1),(f=c._cloneInto(f)).update(u).digestInto(l),h.set(l.subarray(0,h.length));for(let y=1;y<s;y++){o._cloneInto(f).update(l).digestInto(l);for(let b=0;b<h.length;b++)h[b]^=l[b]}}return jy(o,c,a,f,l)}qn.pbkdf2=n8;async function s8(t,e,r,n){const{c:s,dkLen:i,asyncTick:a,DK:o,PRF:c,PRFSalt:f}=Ky(t,e,r,n);let u;const d=new Uint8Array(4),l=(0,On.createView)(d),x=new Uint8Array(c.outputLen);for(let p=1,h=0;h<i;p++,h+=c.outputLen){const y=o.subarray(h,h+c.outputLen);l.setInt32(0,p,!1),(u=f._cloneInto(u)).update(d).digestInto(x),y.set(x.subarray(0,y.length)),await(0,On.asyncLoop)(s-1,a,b=>{c._cloneInto(u).update(x).digestInto(x);for(let R=0;R<y.length;R++)y[R]^=x[R]})}return jy(c,f,o,u,x)}qn.pbkdf2Async=s8;var zn={},wi={};Object.defineProperty(wi,"__esModule",{value:!0});wi.SHA2=void 0;const Ru=qe,ws=cn;function i8(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),a=Number(r>>s&i),o=Number(r&i),c=n?4:0,f=n?0:4;t.setUint32(e+c,a,n),t.setUint32(e+f,o,n)}class a8 extends ws.Hash{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,ws.createView)(this.buffer)}update(e){Ru.default.exists(this);const{view:r,buffer:n,blockLen:s}=this;e=(0,ws.toBytes)(e);const i=e.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=(0,ws.createView)(e);for(;s<=i-a;a+=s)this.process(c,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ru.default.exists(this),Ru.default.output(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(n,0),a=0);for(let d=a;d<s;d++)r[d]=0;i8(n,s-8,BigInt(this.length*8),i),this.process(n,0);const o=(0,ws.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=c/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<f;d++)o.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:a,pos:o}=this;return e.length=s,e.pos=o,e.finished=i,e.destroyed=a,s%r&&e.buffer.set(n),e}}wi.SHA2=a8;Object.defineProperty(zn,"__esModule",{value:!0});zn.sha224=zn.sha256=void 0;const o8=wi,gt=cn,c8=(t,e,r)=>t&e^~t&r,u8=(t,e,r)=>t&e^t&r^e&r,f8=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Sr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_r=new Uint32Array(64);class Gy extends o8.SHA2{constructor(){super(64,32,8,!1),this.A=Sr[0]|0,this.B=Sr[1]|0,this.C=Sr[2]|0,this.D=Sr[3]|0,this.E=Sr[4]|0,this.F=Sr[5]|0,this.G=Sr[6]|0,this.H=Sr[7]|0}get(){const{A:e,B:r,C:n,D:s,E:i,F:a,G:o,H:c}=this;return[e,r,n,s,i,a,o,c]}set(e,r,n,s,i,a,o,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=c|0}process(e,r){for(let d=0;d<16;d++,r+=4)_r[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){const l=_r[d-15],x=_r[d-2],p=(0,gt.rotr)(l,7)^(0,gt.rotr)(l,18)^l>>>3,h=(0,gt.rotr)(x,17)^(0,gt.rotr)(x,19)^x>>>10;_r[d]=h+_r[d-7]+p+_r[d-16]|0}let{A:n,B:s,C:i,D:a,E:o,F:c,G:f,H:u}=this;for(let d=0;d<64;d++){const l=(0,gt.rotr)(o,6)^(0,gt.rotr)(o,11)^(0,gt.rotr)(o,25),x=u+l+c8(o,c,f)+f8[d]+_r[d]|0,h=((0,gt.rotr)(n,2)^(0,gt.rotr)(n,13)^(0,gt.rotr)(n,22))+u8(n,s,i)|0;u=f,f=c,c=o,o=a+x|0,a=i,i=s,s=n,n=x+h|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(n,s,i,a,o,c,f,u)}roundClean(){_r.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class d8 extends Gy{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}zn.sha256=(0,gt.wrapConstructor)(()=>new Gy);zn.sha224=(0,gt.wrapConstructor)(()=>new d8);var _t={},Wy={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.add=t.toBig=t.split=t.fromBig=void 0;const e=BigInt(2**32-1),r=BigInt(32);function n($,C=!1){return C?{h:Number($&e),l:Number($>>r&e)}:{h:Number($>>r&e)|0,l:Number($&e)|0}}t.fromBig=n;function s($,C=!1){let g=new Uint32Array($.length),w=new Uint32Array($.length);for(let T=0;T<$.length;T++){const{h:z,l:H}=n($[T],C);[g[T],w[T]]=[z,H]}return[g,w]}t.split=s;const i=($,C)=>BigInt($>>>0)<<r|BigInt(C>>>0);t.toBig=i;const a=($,C,g)=>$>>>g,o=($,C,g)=>$<<32-g|C>>>g,c=($,C,g)=>$>>>g|C<<32-g,f=($,C,g)=>$<<32-g|C>>>g,u=($,C,g)=>$<<64-g|C>>>g-32,d=($,C,g)=>$>>>g-32|C<<64-g,l=($,C)=>C,x=($,C)=>$,p=($,C,g)=>$<<g|C>>>32-g,h=($,C,g)=>C<<g|$>>>32-g,y=($,C,g)=>C<<g-32|$>>>64-g,b=($,C,g)=>$<<g-32|C>>>64-g;function R($,C,g,w){const T=(C>>>0)+(w>>>0);return{h:$+g+(T/2**32|0)|0,l:T|0}}t.add=R;const v=($,C,g)=>($>>>0)+(C>>>0)+(g>>>0),E=($,C,g,w)=>C+g+w+($/2**32|0)|0,A=($,C,g,w)=>($>>>0)+(C>>>0)+(g>>>0)+(w>>>0),M=($,C,g,w,T)=>C+g+w+T+($/2**32|0)|0,q=($,C,g,w,T)=>($>>>0)+(C>>>0)+(g>>>0)+(w>>>0)+(T>>>0),L=($,C,g,w,T,z)=>C+g+w+T+z+($/2**32|0)|0,K={fromBig:n,split:s,toBig:t.toBig,shrSH:a,shrSL:o,rotrSH:c,rotrSL:f,rotrBH:u,rotrBL:d,rotr32H:l,rotr32L:x,rotlSH:p,rotlSL:h,rotlBH:y,rotlBL:b,add:R,add3L:v,add3H:E,add4L:A,add4H:M,add5H:L,add5L:q};t.default=K})(Wy);Object.defineProperty(_t,"__esModule",{value:!0});_t.sha384=_t.sha512_256=_t.sha512_224=_t.sha512=_t.SHA512=void 0;const l8=wi,te=Wy,To=cn,[h8,p8]=te.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ar=new Uint32Array(80),Tr=new Uint32Array(80);class vi extends l8.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:a,Dh:o,Dl:c,Eh:f,El:u,Fh:d,Fl:l,Gh:x,Gl:p,Hh:h,Hl:y}=this;return[e,r,n,s,i,a,o,c,f,u,d,l,x,p,h,y]}set(e,r,n,s,i,a,o,c,f,u,d,l,x,p,h,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=f|0,this.El=u|0,this.Fh=d|0,this.Fl=l|0,this.Gh=x|0,this.Gl=p|0,this.Hh=h|0,this.Hl=y|0}process(e,r){for(let v=0;v<16;v++,r+=4)Ar[v]=e.getUint32(r),Tr[v]=e.getUint32(r+=4);for(let v=16;v<80;v++){const E=Ar[v-15]|0,A=Tr[v-15]|0,M=te.default.rotrSH(E,A,1)^te.default.rotrSH(E,A,8)^te.default.shrSH(E,A,7),q=te.default.rotrSL(E,A,1)^te.default.rotrSL(E,A,8)^te.default.shrSL(E,A,7),L=Ar[v-2]|0,K=Tr[v-2]|0,$=te.default.rotrSH(L,K,19)^te.default.rotrBH(L,K,61)^te.default.shrSH(L,K,6),C=te.default.rotrSL(L,K,19)^te.default.rotrBL(L,K,61)^te.default.shrSL(L,K,6),g=te.default.add4L(q,C,Tr[v-7],Tr[v-16]),w=te.default.add4H(g,M,$,Ar[v-7],Ar[v-16]);Ar[v]=w|0,Tr[v]=g|0}let{Ah:n,Al:s,Bh:i,Bl:a,Ch:o,Cl:c,Dh:f,Dl:u,Eh:d,El:l,Fh:x,Fl:p,Gh:h,Gl:y,Hh:b,Hl:R}=this;for(let v=0;v<80;v++){const E=te.default.rotrSH(d,l,14)^te.default.rotrSH(d,l,18)^te.default.rotrBH(d,l,41),A=te.default.rotrSL(d,l,14)^te.default.rotrSL(d,l,18)^te.default.rotrBL(d,l,41),M=d&x^~d&h,q=l&p^~l&y,L=te.default.add5L(R,A,q,p8[v],Tr[v]),K=te.default.add5H(L,b,E,M,h8[v],Ar[v]),$=L|0,C=te.default.rotrSH(n,s,28)^te.default.rotrBH(n,s,34)^te.default.rotrBH(n,s,39),g=te.default.rotrSL(n,s,28)^te.default.rotrBL(n,s,34)^te.default.rotrBL(n,s,39),w=n&i^n&o^i&o,T=s&a^s&c^a&c;b=h|0,R=y|0,h=x|0,y=p|0,x=d|0,p=l|0,{h:d,l}=te.default.add(f|0,u|0,K|0,$|0),f=o|0,u=c|0,o=i|0,c=a|0,i=n|0,a=s|0;const z=te.default.add3L($,g,T);n=te.default.add3H(z,K,C,w),s=z|0}({h:n,l:s}=te.default.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:a}=te.default.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l:c}=te.default.add(this.Ch|0,this.Cl|0,o|0,c|0),{h:f,l:u}=te.default.add(this.Dh|0,this.Dl|0,f|0,u|0),{h:d,l}=te.default.add(this.Eh|0,this.El|0,d|0,l|0),{h:x,l:p}=te.default.add(this.Fh|0,this.Fl|0,x|0,p|0),{h,l:y}=te.default.add(this.Gh|0,this.Gl|0,h|0,y|0),{h:b,l:R}=te.default.add(this.Hh|0,this.Hl|0,b|0,R|0),this.set(n,s,i,a,o,c,f,u,d,l,x,p,h,y,b,R)}roundClean(){Ar.fill(0),Tr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}_t.SHA512=vi;class y8 extends vi{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class x8 extends vi{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class b8 extends vi{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}_t.sha512=(0,To.wrapConstructor)(()=>new vi);_t.sha512_224=(0,To.wrapConstructor)(()=>new y8);_t.sha512_256=(0,To.wrapConstructor)(()=>new x8);_t.sha384=(0,To.wrapConstructor)(()=>new b8);var Vy={};(function(t){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.createBase58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64urlnopad=t.base64url=t.base64=t.base32crockford=t.base32hex=t.base32=t.base16=t.utils=t.assertNumber=void 0;function e(g){if(!Number.isSafeInteger(g))throw new Error(`Wrong integer: ${g}`)}t.assertNumber=e;function r(g){return g instanceof Uint8Array||g!=null&&typeof g=="object"&&g.constructor.name==="Uint8Array"}function n(...g){const w=j=>j,T=(j,V)=>me=>j(V(me)),z=g.map(j=>j.encode).reduceRight(T,w),H=g.map(j=>j.decode).reduce(T,w);return{encode:z,decode:H}}function s(g){return{encode:w=>{if(!Array.isArray(w)||w.length&&typeof w[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return w.map(T=>{if(e(T),T<0||T>=g.length)throw new Error(`Digit index outside alphabet: ${T} (alphabet: ${g.length})`);return g[T]})},decode:w=>{if(!Array.isArray(w)||w.length&&typeof w[0]!="string")throw new Error("alphabet.decode input should be array of strings");return w.map(T=>{if(typeof T!="string")throw new Error(`alphabet.decode: not string element=${T}`);const z=g.indexOf(T);if(z===-1)throw new Error(`Unknown letter: "${T}". Allowed: ${g}`);return z})}}}function i(g=""){if(typeof g!="string")throw new Error("join separator should be string");return{encode:w=>{if(!Array.isArray(w)||w.length&&typeof w[0]!="string")throw new Error("join.encode input should be array of strings");for(let T of w)if(typeof T!="string")throw new Error(`join.encode: non-string input=${T}`);return w.join(g)},decode:w=>{if(typeof w!="string")throw new Error("join.decode input should be string");return w.split(g)}}}function a(g,w="="){if(e(g),typeof w!="string")throw new Error("padding chr should be string");return{encode(T){if(!Array.isArray(T)||T.length&&typeof T[0]!="string")throw new Error("padding.encode input should be array of strings");for(let z of T)if(typeof z!="string")throw new Error(`padding.encode: non-string input=${z}`);for(;T.length*g%8;)T.push(w);return T},decode(T){if(!Array.isArray(T)||T.length&&typeof T[0]!="string")throw new Error("padding.encode input should be array of strings");for(let H of T)if(typeof H!="string")throw new Error(`padding.decode: non-string input=${H}`);let z=T.length;if(z*g%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;z>0&&T[z-1]===w;z--)if(!((z-1)*g%8))throw new Error("Invalid padding: string has too much padding");return T.slice(0,z)}}}function o(g){if(typeof g!="function")throw new Error("normalize fn should be function");return{encode:w=>w,decode:w=>g(w)}}function c(g,w,T){if(w<2)throw new Error(`convertRadix: wrong from=${w}, base cannot be less than 2`);if(T<2)throw new Error(`convertRadix: wrong to=${T}, base cannot be less than 2`);if(!Array.isArray(g))throw new Error("convertRadix: data should be array");if(!g.length)return[];let z=0;const H=[],j=Array.from(g);for(j.forEach(V=>{if(e(V),V<0||V>=w)throw new Error(`Wrong integer: ${V}`)});;){let V=0,me=!0;for(let he=z;he<j.length;he++){const m=j[he],S=w*V+m;if(!Number.isSafeInteger(S)||w*V/w!==V||S-m!==w*V)throw new Error("convertRadix: carry overflow");V=S%T;const U=Math.floor(S/T);if(j[he]=U,!Number.isSafeInteger(U)||U*T+V!==S)throw new Error("convertRadix: carry overflow");if(me)U?me=!1:z=he;else continue}if(H.push(V),me)break}for(let V=0;V<g.length-1&&g[V]===0;V++)H.push(0);return H.reverse()}const f=(g,w)=>w?f(w,g%w):g,u=(g,w)=>g+(w-f(g,w));function d(g,w,T,z){if(!Array.isArray(g))throw new Error("convertRadix2: data should be array");if(w<=0||w>32)throw new Error(`convertRadix2: wrong from=${w}`);if(T<=0||T>32)throw new Error(`convertRadix2: wrong to=${T}`);if(u(w,T)>32)throw new Error(`convertRadix2: carry overflow from=${w} to=${T} carryBits=${u(w,T)}`);let H=0,j=0;const V=2**T-1,me=[];for(const he of g){if(e(he),he>=2**w)throw new Error(`convertRadix2: invalid data word=${he} from=${w}`);if(H=H<<w|he,j+w>32)throw new Error(`convertRadix2: carry overflow pos=${j} from=${w}`);for(j+=w;j>=T;j-=T)me.push((H>>j-T&V)>>>0);H&=2**j-1}if(H=H<<T-j&V,!z&&j>=w)throw new Error("Excess padding");if(!z&&H)throw new Error(`Non-zero padding: ${H}`);return z&&j>0&&me.push(H>>>0),me}function l(g){return e(g),{encode:w=>{if(!r(w))throw new Error("radix.encode input should be Uint8Array");return c(Array.from(w),2**8,g)},decode:w=>{if(!Array.isArray(w)||w.length&&typeof w[0]!="number")throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(c(w,g,2**8))}}}function x(g,w=!1){if(e(g),g<=0||g>32)throw new Error("radix2: bits should be in (0..32]");if(u(8,g)>32||u(g,8)>32)throw new Error("radix2: carry overflow");return{encode:T=>{if(!r(T))throw new Error("radix2.encode input should be Uint8Array");return d(Array.from(T),8,g,!w)},decode:T=>{if(!Array.isArray(T)||T.length&&typeof T[0]!="number")throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(d(T,g,8,w))}}}function p(g){if(typeof g!="function")throw new Error("unsafeWrapper fn should be function");return function(...w){try{return g.apply(null,w)}catch{}}}function h(g,w){if(e(g),typeof w!="function")throw new Error("checksum fn should be function");return{encode(T){if(!r(T))throw new Error("checksum.encode: input should be Uint8Array");const z=w(T).slice(0,g),H=new Uint8Array(T.length+g);return H.set(T),H.set(z,T.length),H},decode(T){if(!r(T))throw new Error("checksum.decode: input should be Uint8Array");const z=T.slice(0,-g),H=w(z).slice(0,g),j=T.slice(-g);for(let V=0;V<g;V++)if(H[V]!==j[V])throw new Error("Invalid checksum");return z}}}t.utils={alphabet:s,chain:n,checksum:h,convertRadix:c,convertRadix2:d,radix:l,radix2:x,join:i,padding:a},t.base16=n(x(4),s("0123456789ABCDEF"),i("")),t.base32=n(x(5),s("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),a(5),i("")),t.base32hex=n(x(5),s("0123456789ABCDEFGHIJKLMNOPQRSTUV"),a(5),i("")),t.base32crockford=n(x(5),s("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),i(""),o(g=>g.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),t.base64=n(x(6),s("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),a(6),i("")),t.base64url=n(x(6),s("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),a(6),i("")),t.base64urlnopad=n(x(6),s("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),i(""));const y=g=>n(l(58),s(g),i(""));t.base58=y("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=y("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=y("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const b=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(g){let w="";for(let T=0;T<g.length;T+=8){const z=g.subarray(T,T+8);w+=t.base58.encode(z).padStart(b[z.length],"1")}return w},decode(g){let w=[];for(let T=0;T<g.length;T+=11){const z=g.slice(T,T+11),H=b.indexOf(z.length),j=t.base58.decode(z);for(let V=0;V<j.length-H;V++)if(j[V]!==0)throw new Error("base58xmr: wrong padding");w=w.concat(Array.from(j.slice(j.length-H)))}return Uint8Array.from(w)}};const R=g=>n(h(4,w=>g(g(w))),t.base58);t.createBase58check=R,t.base58check=t.createBase58check;const v=n(s("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),i("")),E=[996825010,642813549,513874426,1027748829,705979059];function A(g){const w=g>>25;let T=(g&33554431)<<5;for(let z=0;z<E.length;z++)(w>>z&1)===1&&(T^=E[z]);return T}function M(g,w,T=1){const z=g.length;let H=1;for(let j=0;j<z;j++){const V=g.charCodeAt(j);if(V<33||V>126)throw new Error(`Invalid prefix (${g})`);H=A(H)^V>>5}H=A(H);for(let j=0;j<z;j++)H=A(H)^g.charCodeAt(j)&31;for(let j of w)H=A(H)^j;for(let j=0;j<6;j++)H=A(H);return H^=T,v.encode(d([H%2**30],30,5,!1))}function q(g){const w=g==="bech32"?1:734539939,T=x(5),z=T.decode,H=T.encode,j=p(z);function V(S,U,_=90){if(typeof S!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof S}`);if(!Array.isArray(U)||U.length&&typeof U[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof U}`);const P=S.length+7+U.length;if(_!==!1&&P>_)throw new TypeError(`Length ${P} exceeds limit ${_}`);const G=S.toLowerCase(),xe=M(G,U,w);return`${G}1${v.encode(U)}${xe}`}function me(S,U=90){if(typeof S!="string")throw new Error(`bech32.decode input should be string, not ${typeof S}`);if(S.length<8||U!==!1&&S.length>U)throw new TypeError(`Wrong string length: ${S.length} (${S}). Expected (8..${U})`);const _=S.toLowerCase();if(S!==_&&S!==S.toUpperCase())throw new Error("String must be lowercase or uppercase");S=_;const P=S.lastIndexOf("1");if(P===0||P===-1)throw new Error('Letter "1" must be present between prefix and data only');const G=S.slice(0,P),xe=S.slice(P+1);if(xe.length<6)throw new Error("Data must be at least 6 characters long");const ne=v.decode(xe).slice(0,-6),ee=M(G,ne,w);if(!xe.endsWith(ee))throw new Error(`Invalid checksum in ${S}: expected "${ee}"`);return{prefix:G,words:ne}}const he=p(me);function m(S){const{prefix:U,words:_}=me(S,!1);return{prefix:U,words:_,bytes:z(_)}}return{encode:V,decode:me,decodeToBytes:m,decodeUnsafe:he,fromWords:z,fromWordsUnsafe:j,toWords:H}}t.bech32=q("bech32"),t.bech32m=q("bech32m"),t.utf8={encode:g=>new TextDecoder().decode(g),decode:g=>new TextEncoder().encode(g)},t.hex=n(x(4),s("0123456789abcdef"),i(""),o(g=>{if(typeof g!="string"||g.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof g} with length ${g.length}`);return g.toLowerCase()}));const L={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},K="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr",$=(g,w)=>{if(typeof g!="string"||!L.hasOwnProperty(g))throw new TypeError(K);if(!r(w))throw new TypeError("bytesToString() expects Uint8Array");return L[g].encode(w)};t.bytesToString=$,t.str=t.bytesToString;const C=(g,w)=>{if(!L.hasOwnProperty(g))throw new TypeError(K);if(typeof w!="string")throw new TypeError("stringToBytes() expects string");return L[g].decode(w)};t.stringToBytes=C,t.bytes=t.stringToBytes})(Vy);Object.defineProperty(lt,"__esModule",{value:!0});var Jy=lt.mnemonicToSeedSync=lt.mnemonicToSeed=lt.validateMnemonic=lt.entropyToMnemonic=lt.mnemonicToEntropy=lt.generateMnemonic=void 0;/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */const Xy=qe,Yy=qn,g8=zn,Zy=_t,m8=cn,Fi=Vy,w8=t=>t[0]==="\u3042\u3044\u3053\u304F\u3057\u3093";function Qy(t){if(typeof t!="string")throw new TypeError(`Invalid mnemonic type: ${typeof t}`);return t.normalize("NFKD")}function yd(t){const e=Qy(t),r=e.split(" ");if(![12,15,18,21,24].includes(r.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:r}}function ex(t){Xy.default.bytes(t,16,20,24,28,32)}function v8(t,e=128){if(Xy.default.number(e),e%32!==0||e>256)throw new TypeError("Invalid entropy");return nx((0,m8.randomBytes)(e/8),t)}lt.generateMnemonic=v8;const E8=t=>{const e=8-t.length/4;return new Uint8Array([(0,g8.sha256)(t)[0]>>e<<e])};function tx(t){if(!Array.isArray(t)||t.length!==2**11||typeof t[0]!="string")throw new Error("Worlist: expected array of 2048 strings");return t.forEach(e=>{if(typeof e!="string")throw new Error(`Wordlist: non-string element: ${e}`)}),Fi.utils.chain(Fi.utils.checksum(1,E8),Fi.utils.radix2(11,!0),Fi.utils.alphabet(t))}function rx(t,e){const{words:r}=yd(t),n=tx(e).decode(r);return ex(n),n}lt.mnemonicToEntropy=rx;function nx(t,e){return ex(t),tx(e).encode(t).join(w8(e)?"\u3000":" ")}lt.entropyToMnemonic=nx;function S8(t,e){try{rx(t,e)}catch{return!1}return!0}lt.validateMnemonic=S8;const sx=t=>Qy(`mnemonic${t}`);function _8(t,e=""){return(0,Yy.pbkdf2Async)(Zy.sha512,yd(t).nfkd,sx(e),{c:2048,dkLen:64})}lt.mnemonicToSeed=_8;function A8(t,e=""){return(0,Yy.pbkdf2)(Zy.sha512,yd(t).nfkd,sx(e),{c:2048,dkLen:64})}Jy=lt.mnemonicToSeedSync=A8;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const T8=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),ku=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),P8=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!P8)throw new Error("Non little-endian hardware is not supported");const R8=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ix(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=R8[t[r]];return e}function ax(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){const n=r*2,s=t.slice(n,n+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");e[r]=i}return e}function k8(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function Ei(t){if(typeof t=="string"&&(t=k8(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}class xd{clone(){return this._cloneInto()}}function Po(t){const e=n=>t().update(Ei(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function C8(t){const e=(n,s)=>t(s).update(Ei(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function df(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function B8(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function ox(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function I8(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");df(t.outputLen),df(t.blockLen)}function O8(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function U8(t,e){ox(t);const r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}const ht={number:df,bool:B8,bytes:ox,hash:I8,exists:O8,output:U8},Hi=BigInt(2**32-1),lf=BigInt(32);function cx(t,e=!1){return e?{h:Number(t&Hi),l:Number(t>>lf&Hi)}:{h:Number(t>>lf&Hi)|0,l:Number(t&Hi)|0}}function $8(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:a}=cx(t[s],e);[r[s],n[s]]=[i,a]}return[r,n]}const N8=(t,e)=>BigInt(t>>>0)<<lf|BigInt(e>>>0),D8=(t,e,r)=>t>>>r,L8=(t,e,r)=>t<<32-r|e>>>r,M8=(t,e,r)=>t>>>r|e<<32-r,F8=(t,e,r)=>t<<32-r|e>>>r,H8=(t,e,r)=>t<<64-r|e>>>r-32,q8=(t,e,r)=>t>>>r-32|e<<64-r,z8=(t,e)=>e,K8=(t,e)=>t,j8=(t,e,r)=>t<<r|e>>>32-r,G8=(t,e,r)=>e<<r|t>>>32-r,W8=(t,e,r)=>e<<r-32|t>>>64-r,V8=(t,e,r)=>t<<r-32|e>>>64-r;function J8(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const X8=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Y8=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Z8=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Q8=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,eE=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),tE=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,Z={fromBig:cx,split:$8,toBig:N8,shrSH:D8,shrSL:L8,rotrSH:M8,rotrSL:F8,rotrBH:H8,rotrBL:q8,rotr32H:z8,rotr32L:K8,rotlSH:j8,rotlSL:G8,rotlBH:W8,rotlBL:V8,add:J8,add3L:X8,add3H:Y8,add4L:Z8,add4H:Q8,add5H:tE,add5L:eE},[ux,fx,dx]=[[],[],[]],rE=BigInt(0),vs=BigInt(1),nE=BigInt(2),sE=BigInt(7),iE=BigInt(256),aE=BigInt(113);for(let t=0,e=vs,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],ux.push(2*(5*n+r)),fx.push((t+1)*(t+2)/2%64);let s=rE;for(let i=0;i<7;i++)e=(e<<vs^(e>>sE)*aE)%iE,e&nE&&(s^=vs<<(vs<<BigInt(i))-vs);dx.push(s)}const[oE,cE]=Z.split(dx,!0),Eh=(t,e,r)=>r>32?Z.rotlBH(t,e,r):Z.rotlSH(t,e,r),Sh=(t,e,r)=>r>32?Z.rotlBL(t,e,r):Z.rotlSL(t,e,r);function uE(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let a=0;a<10;a++)r[a]=t[a]^t[a+10]^t[a+20]^t[a+30]^t[a+40];for(let a=0;a<10;a+=2){const o=(a+8)%10,c=(a+2)%10,f=r[c],u=r[c+1],d=Eh(f,u,1)^r[o],l=Sh(f,u,1)^r[o+1];for(let x=0;x<50;x+=10)t[a+x]^=d,t[a+x+1]^=l}let s=t[2],i=t[3];for(let a=0;a<24;a++){const o=fx[a],c=Eh(s,i,o),f=Sh(s,i,o),u=ux[a];s=t[u],i=t[u+1],t[u]=c,t[u+1]=f}for(let a=0;a<50;a+=10){for(let o=0;o<10;o++)r[o]=t[a+o];for(let o=0;o<10;o++)t[a+o]^=~r[(o+2)%10]&r[(o+4)%10]}t[0]^=oE[n],t[1]^=cE[n]}r.fill(0)}class Ro extends xd{constructor(e,r,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ht.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=T8(this.state)}keccak(){uE(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){ht.exists(this);const{blockLen:r,state:n}=this;e=Ei(e);const s=e.length;for(let i=0;i<s;){const a=Math.min(r-this.pos,s-i);for(let o=0;o<a;o++)n[this.pos++]^=e[i++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:s}=this;e[n]^=r,(r&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ht.exists(this,!1),ht.bytes(e),this.finish();const r=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const a=Math.min(n-this.posOut,i-s);e.set(r.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ht.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ht.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:s,rounds:i,enableXOF:a}=this;return e||(e=new Ro(r,n,s,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}}const Hr=(t,e,r)=>Po(()=>new Ro(e,t,r));Hr(6,144,224/8);const Kn=Hr(6,136,256/8);Hr(6,104,384/8);Hr(6,72,512/8);Hr(1,144,224/8);Hr(1,136,256/8);Hr(1,104,384/8);Hr(1,72,512/8);const lx=(t,e,r)=>C8((n={})=>new Ro(e,t,n.dkLen===void 0?r:n.dkLen,!0));lx(31,168,128/8);lx(31,136,256/8);class hx extends xd{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,ht.hash(e);const n=Ei(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=e.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(e){return ht.exists(this),this.iHash.update(e),this}digestInto(e){ht.exists(this),ht.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:a,outputLen:o}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=a,e.outputLen=o,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const bd=(t,e,r)=>new hx(t,e).update(r).digest();bd.create=(t,e)=>new hx(t,e);function fE(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const s=BigInt(32),i=BigInt(4294967295),a=Number(r>>s&i),o=Number(r&i),c=n?4:0,f=n?0:4;t.setUint32(e+c,a,n),t.setUint32(e+f,o,n)}class dE extends xd{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ku(this.buffer)}update(e){ht.exists(this);const{view:r,buffer:n,blockLen:s}=this;e=Ei(e);const i=e.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=ku(e);for(;s<=i-a;a+=s)this.process(c,a);continue}n.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ht.exists(this),ht.output(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:s,isLE:i}=this;let{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(n,0),a=0);for(let c=a;c<s;c++)r[c]=0;fE(n,s-8,BigInt(this.length*8),i),this.process(n,0);const o=ku(e);this.get().forEach((c,f)=>o.setUint32(4*f,c,i))}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:s,finished:i,destroyed:a,pos:o}=this;return e.length=s,e.pos=o,e.finished=i,e.destroyed=a,s%r&&e.buffer.set(n),e}}const[lE,hE]=Z.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Pr=new Uint32Array(80),Rr=new Uint32Array(80);class gd extends dE{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:a,Dh:o,Dl:c,Eh:f,El:u,Fh:d,Fl:l,Gh:x,Gl:p,Hh:h,Hl:y}=this;return[e,r,n,s,i,a,o,c,f,u,d,l,x,p,h,y]}set(e,r,n,s,i,a,o,c,f,u,d,l,x,p,h,y){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=f|0,this.El=u|0,this.Fh=d|0,this.Fl=l|0,this.Gh=x|0,this.Gl=p|0,this.Hh=h|0,this.Hl=y|0}process(e,r){for(let v=0;v<16;v++,r+=4)Pr[v]=e.getUint32(r),Rr[v]=e.getUint32(r+=4);for(let v=16;v<80;v++){const E=Pr[v-15]|0,A=Rr[v-15]|0,M=Z.rotrSH(E,A,1)^Z.rotrSH(E,A,8)^Z.shrSH(E,A,7),q=Z.rotrSL(E,A,1)^Z.rotrSL(E,A,8)^Z.shrSL(E,A,7),L=Pr[v-2]|0,K=Rr[v-2]|0,$=Z.rotrSH(L,K,19)^Z.rotrBH(L,K,61)^Z.shrSH(L,K,6),C=Z.rotrSL(L,K,19)^Z.rotrBL(L,K,61)^Z.shrSL(L,K,6),g=Z.add4L(q,C,Rr[v-7],Rr[v-16]),w=Z.add4H(g,M,$,Pr[v-7],Pr[v-16]);Pr[v]=w|0,Rr[v]=g|0}let{Ah:n,Al:s,Bh:i,Bl:a,Ch:o,Cl:c,Dh:f,Dl:u,Eh:d,El:l,Fh:x,Fl:p,Gh:h,Gl:y,Hh:b,Hl:R}=this;for(let v=0;v<80;v++){const E=Z.rotrSH(d,l,14)^Z.rotrSH(d,l,18)^Z.rotrBH(d,l,41),A=Z.rotrSL(d,l,14)^Z.rotrSL(d,l,18)^Z.rotrBL(d,l,41),M=d&x^~d&h,q=l&p^~l&y,L=Z.add5L(R,A,q,hE[v],Rr[v]),K=Z.add5H(L,b,E,M,lE[v],Pr[v]),$=L|0,C=Z.rotrSH(n,s,28)^Z.rotrBH(n,s,34)^Z.rotrBH(n,s,39),g=Z.rotrSL(n,s,28)^Z.rotrBL(n,s,34)^Z.rotrBL(n,s,39),w=n&i^n&o^i&o,T=s&a^s&c^a&c;b=h|0,R=y|0,h=x|0,y=p|0,x=d|0,p=l|0,{h:d,l}=Z.add(f|0,u|0,K|0,$|0),f=o|0,u=c|0,o=i|0,c=a|0,i=n|0,a=s|0;const z=Z.add3L($,g,T);n=Z.add3H(z,K,C,w),s=z|0}({h:n,l:s}=Z.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:a}=Z.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l:c}=Z.add(this.Ch|0,this.Cl|0,o|0,c|0),{h:f,l:u}=Z.add(this.Dh|0,this.Dl|0,f|0,u|0),{h:d,l}=Z.add(this.Eh|0,this.El|0,d|0,l|0),{h:x,l:p}=Z.add(this.Fh|0,this.Fl|0,x|0,p|0),{h,l:y}=Z.add(this.Gh|0,this.Gl|0,h|0,y|0),{h:b,l:R}=Z.add(this.Hh|0,this.Hl|0,b|0,R|0),this.set(n,s,i,a,o,c,f,u,d,l,x,p,h,y,b,R)}roundClean(){Pr.fill(0),Rr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class pE extends gd{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class yE extends gd{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const px=Po(()=>new gd);Po(()=>new pE);Po(()=>new yE);var md={exports:{}},yx=function(e,r){return function(){for(var s=new Array(arguments.length),i=0;i<s.length;i++)s[i]=arguments[i];return e.apply(r,s)}},xE=yx,wd=Object.prototype.toString,vd=function(t){return function(e){var r=wd.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function un(t){return t=t.toLowerCase(),function(r){return vd(r)===t}}function Ed(t){return Array.isArray(t)}function $a(t){return typeof t>"u"}function bE(t){return t!==null&&!$a(t)&&t.constructor!==null&&!$a(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var xx=un("ArrayBuffer");function gE(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&xx(t.buffer),e}function mE(t){return typeof t=="string"}function wE(t){return typeof t=="number"}function bx(t){return t!==null&&typeof t=="object"}function aa(t){if(vd(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var vE=un("Date"),EE=un("File"),SE=un("Blob"),_E=un("FileList");function Sd(t){return wd.call(t)==="[object Function]"}function AE(t){return bx(t)&&Sd(t.pipe)}function TE(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||wd.call(t)===e||Sd(t.toString)&&t.toString()===e)}var PE=un("URLSearchParams");function RE(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function kE(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function _d(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Ed(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.call(null,t[s],s,t)}function hf(){var t={};function e(s,i){aa(t[i])&&aa(s)?t[i]=hf(t[i],s):aa(s)?t[i]=hf({},s):Ed(s)?t[i]=s.slice():t[i]=s}for(var r=0,n=arguments.length;r<n;r++)_d(arguments[r],e);return t}function CE(t,e,r){return _d(e,function(s,i){r&&typeof s=="function"?t[i]=xE(s,r):t[i]=s}),t}function BE(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function IE(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function OE(t,e,r){var n,s,i,a={};e=e||{};do{for(n=Object.getOwnPropertyNames(t),s=n.length;s-- >0;)i=n[s],a[i]||(e[i]=t[i],a[i]=!0);t=Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function UE(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return n!==-1&&n===r}function $E(t){if(!t)return null;var e=t.length;if($a(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var NE=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),Ye={isArray:Ed,isArrayBuffer:xx,isBuffer:bE,isFormData:TE,isArrayBufferView:gE,isString:mE,isNumber:wE,isObject:bx,isPlainObject:aa,isUndefined:$a,isDate:vE,isFile:EE,isBlob:SE,isFunction:Sd,isStream:AE,isURLSearchParams:PE,isStandardBrowserEnv:kE,forEach:_d,merge:hf,extend:CE,trim:RE,stripBOM:BE,inherits:IE,toFlatObject:OE,kindOf:vd,kindOfTest:un,endsWith:UE,toArray:$E,isTypedArray:NE,isFileList:_E},vn=Ye;function _h(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var gx=function(e,r,n){if(!r)return e;var s;if(n)s=n(r);else if(vn.isURLSearchParams(r))s=r.toString();else{var i=[];vn.forEach(r,function(c,f){c===null||typeof c>"u"||(vn.isArray(c)?f=f+"[]":c=[c],vn.forEach(c,function(d){vn.isDate(d)?d=d.toISOString():vn.isObject(d)&&(d=JSON.stringify(d)),i.push(_h(f)+"="+_h(d))}))}),s=i.join("&")}if(s){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e},DE=Ye;function ko(){this.handlers=[]}ko.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};ko.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};ko.prototype.forEach=function(e){DE.forEach(this.handlers,function(n){n!==null&&e(n)})};var LE=ko,ME=Ye,FE=function(e,r){ME.forEach(e,function(s,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(e[r]=s,delete e[i])})},mx=Ye;function jn(t,e,r,n,s){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s)}mx.inherits(jn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var wx=jn.prototype,vx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){vx[t]={value:t}});Object.defineProperties(jn,vx);Object.defineProperty(wx,"isAxiosError",{value:!0});jn.from=function(t,e,r,n,s,i){var a=Object.create(wx);return mx.toFlatObject(t,a,function(c){return c!==Error.prototype}),jn.call(a,t.message,e,r,n,s),a.name=t.name,i&&Object.assign(a,i),a};var os=jn,Ex={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$t=Ye;function HE(t,e){e=e||new FormData;var r=[];function n(i){return i===null?"":$t.isDate(i)?i.toISOString():$t.isArrayBuffer(i)||$t.isTypedArray(i)?typeof Blob=="function"?new Blob([i]):k.Buffer.from(i):i}function s(i,a){if($t.isPlainObject(i)||$t.isArray(i)){if(r.indexOf(i)!==-1)throw Error("Circular reference detected in "+a);r.push(i),$t.forEach(i,function(c,f){if(!$t.isUndefined(c)){var u=a?a+"."+f:f,d;if(c&&!a&&typeof c=="object"){if($t.endsWith(f,"{}"))c=JSON.stringify(c);else if($t.endsWith(f,"[]")&&(d=$t.toArray(c))){d.forEach(function(l){!$t.isUndefined(l)&&e.append(u,n(l))});return}}s(c,u)}}),r.pop()}else e.append(a,n(i))}return s(t),e}var Sx=HE,Cu=os,qE=function(e,r,n){var s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):r(new Cu("Request failed with status code "+n.status,[Cu.ERR_BAD_REQUEST,Cu.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))},qi=Ye,zE=qi.isStandardBrowserEnv()?function(){return{write:function(r,n,s,i,a,o){var c=[];c.push(r+"="+encodeURIComponent(n)),qi.isNumber(s)&&c.push("expires="+new Date(s).toGMTString()),qi.isString(i)&&c.push("path="+i),qi.isString(a)&&c.push("domain="+a),o===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),KE=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},jE=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},GE=KE,WE=jE,_x=function(e,r){return e&&!GE(r)?WE(e,r):r},Bu=Ye,VE=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],JE=function(e){var r={},n,s,i;return e&&Bu.forEach(e.split(`
`),function(o){if(i=o.indexOf(":"),n=Bu.trim(o.substr(0,i)).toLowerCase(),s=Bu.trim(o.substr(i+1)),n){if(r[n]&&VE.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([s]):r[n]=r[n]?r[n]+", "+s:s}}),r},Ah=Ye,XE=Ah.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function s(i){var a=i;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=s(window.location.href),function(a){var o=Ah.isString(a)?s(a):a;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}(),pf=os,YE=Ye;function Ax(t){pf.call(this,t??"canceled",pf.ERR_CANCELED),this.name="CanceledError"}YE.inherits(Ax,pf,{__CANCEL__:!0});var Co=Ax,ZE=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""},Es=Ye,QE=qE,e5=zE,t5=gx,r5=_x,n5=JE,s5=XE,i5=Ex,ar=os,a5=Co,o5=ZE,Th=function(e){return new Promise(function(n,s){var i=e.data,a=e.headers,o=e.responseType,c;function f(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}Es.isFormData(i)&&Es.isStandardBrowserEnv()&&delete a["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.Authorization="Basic "+btoa(d+":"+l)}var x=r5(e.baseURL,e.url);u.open(e.method.toUpperCase(),t5(x,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function p(){if(!!u){var b="getAllResponseHeaders"in u?n5(u.getAllResponseHeaders()):null,R=!o||o==="text"||o==="json"?u.responseText:u.response,v={data:R,status:u.status,statusText:u.statusText,headers:b,config:e,request:u};QE(function(A){n(A),f()},function(A){s(A),f()},v),u=null}}if("onloadend"in u?u.onloadend=p:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(p)},u.onabort=function(){!u||(s(new ar("Request aborted",ar.ECONNABORTED,e,u)),u=null)},u.onerror=function(){s(new ar("Network Error",ar.ERR_NETWORK,e,u,u)),u=null},u.ontimeout=function(){var R=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",v=e.transitional||i5;e.timeoutErrorMessage&&(R=e.timeoutErrorMessage),s(new ar(R,v.clarifyTimeoutError?ar.ETIMEDOUT:ar.ECONNABORTED,e,u)),u=null},Es.isStandardBrowserEnv()){var h=(e.withCredentials||s5(x))&&e.xsrfCookieName?e5.read(e.xsrfCookieName):void 0;h&&(a[e.xsrfHeaderName]=h)}"setRequestHeader"in u&&Es.forEach(a,function(R,v){typeof i>"u"&&v.toLowerCase()==="content-type"?delete a[v]:u.setRequestHeader(v,R)}),Es.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),o&&o!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(c=function(b){!u||(s(!b||b&&b.type?new a5:b),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c))),i||(i=null);var y=o5(x);if(y&&["http","https","file"].indexOf(y)===-1){s(new ar("Unsupported protocol "+y+":",ar.ERR_BAD_REQUEST,e));return}u.send(i)})},c5=null,Fe=Ye,Ph=FE,Rh=os,u5=Ex,f5=Sx,d5={"Content-Type":"application/x-www-form-urlencoded"};function kh(t,e){!Fe.isUndefined(t)&&Fe.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function l5(){var t;return(typeof XMLHttpRequest<"u"||typeof el<"u"&&Object.prototype.toString.call(el)==="[object process]")&&(t=Th),t}function h5(t,e,r){if(Fe.isString(t))try{return(e||JSON.parse)(t),Fe.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Bo={transitional:u5,adapter:l5(),transformRequest:[function(e,r){if(Ph(r,"Accept"),Ph(r,"Content-Type"),Fe.isFormData(e)||Fe.isArrayBuffer(e)||Fe.isBuffer(e)||Fe.isStream(e)||Fe.isFile(e)||Fe.isBlob(e))return e;if(Fe.isArrayBufferView(e))return e.buffer;if(Fe.isURLSearchParams(e))return kh(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=Fe.isObject(e),s=r&&r["Content-Type"],i;if((i=Fe.isFileList(e))||n&&s==="multipart/form-data"){var a=this.env&&this.env.FormData;return f5(i?{"files[]":e}:e,a&&new a)}else if(n||s==="application/json")return kh(r,"application/json"),h5(e);return e}],transformResponse:[function(e){var r=this.transitional||Bo.transitional,n=r&&r.silentJSONParsing,s=r&&r.forcedJSONParsing,i=!n&&this.responseType==="json";if(i||s&&Fe.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?Rh.from(a,Rh.ERR_BAD_RESPONSE,this,null,this.response):a}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:c5},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Fe.forEach(["delete","get","head"],function(e){Bo.headers[e]={}});Fe.forEach(["post","put","patch"],function(e){Bo.headers[e]=Fe.merge(d5)});var Ad=Bo,p5=Ye,y5=Ad,x5=function(e,r,n){var s=this||y5;return p5.forEach(n,function(a){e=a.call(s,e,r)}),e},Tx=function(e){return!!(e&&e.__CANCEL__)},Ch=Ye,Iu=x5,b5=Tx,g5=Ad,m5=Co;function Ou(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new m5}var w5=function(e){Ou(e),e.headers=e.headers||{},e.data=Iu.call(e,e.data,e.headers,e.transformRequest),e.headers=Ch.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Ch.forEach(["delete","get","head","post","put","patch","common"],function(s){delete e.headers[s]});var r=e.adapter||g5.adapter;return r(e).then(function(s){return Ou(e),s.data=Iu.call(e,s.data,s.headers,e.transformResponse),s},function(s){return b5(s)||(Ou(e),s&&s.response&&(s.response.data=Iu.call(e,s.response.data,s.response.headers,e.transformResponse))),Promise.reject(s)})},ct=Ye,Px=function(e,r){r=r||{};var n={};function s(u,d){return ct.isPlainObject(u)&&ct.isPlainObject(d)?ct.merge(u,d):ct.isPlainObject(d)?ct.merge({},d):ct.isArray(d)?d.slice():d}function i(u){if(ct.isUndefined(r[u])){if(!ct.isUndefined(e[u]))return s(void 0,e[u])}else return s(e[u],r[u])}function a(u){if(!ct.isUndefined(r[u]))return s(void 0,r[u])}function o(u){if(ct.isUndefined(r[u])){if(!ct.isUndefined(e[u]))return s(void 0,e[u])}else return s(void 0,r[u])}function c(u){if(u in r)return s(e[u],r[u]);if(u in e)return s(void 0,e[u])}var f={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c};return ct.forEach(Object.keys(e).concat(Object.keys(r)),function(d){var l=f[d]||i,x=l(d);ct.isUndefined(x)&&l!==c||(n[d]=x)}),n},Rx={version:"0.27.2"},v5=Rx.version,Br=os,Td={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Td[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Bh={};Td.transitional=function(e,r,n){function s(i,a){return"[Axios v"+v5+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return function(i,a,o){if(e===!1)throw new Br(s(a," has been removed"+(r?" in "+r:"")),Br.ERR_DEPRECATED);return r&&!Bh[a]&&(Bh[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,a,o):!0}};function E5(t,e,r){if(typeof t!="object")throw new Br("options must be an object",Br.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),s=n.length;s-- >0;){var i=n[s],a=e[i];if(a){var o=t[i],c=o===void 0||a(o,i,t);if(c!==!0)throw new Br("option "+i+" must be "+c,Br.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Br("Unknown option "+i,Br.ERR_BAD_OPTION)}}var S5={assertOptions:E5,validators:Td},kx=Ye,_5=gx,Ih=LE,Oh=w5,Io=Px,A5=_x,Cx=S5,En=Cx.validators;function Gn(t){this.defaults=t,this.interceptors={request:new Ih,response:new Ih}}Gn.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Io(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&Cx.assertOptions(n,{silentJSONParsing:En.transitional(En.boolean),forcedJSONParsing:En.transitional(En.boolean),clarifyTimeoutError:En.transitional(En.boolean)},!1);var s=[],i=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(r)===!1||(i=i&&x.synchronous,s.unshift(x.fulfilled,x.rejected))});var a=[];this.interceptors.response.forEach(function(x){a.push(x.fulfilled,x.rejected)});var o;if(!i){var c=[Oh,void 0];for(Array.prototype.unshift.apply(c,s),c=c.concat(a),o=Promise.resolve(r);c.length;)o=o.then(c.shift(),c.shift());return o}for(var f=r;s.length;){var u=s.shift(),d=s.shift();try{f=u(f)}catch(l){d(l);break}}try{o=Oh(f)}catch(l){return Promise.reject(l)}for(;a.length;)o=o.then(a.shift(),a.shift());return o};Gn.prototype.getUri=function(e){e=Io(this.defaults,e);var r=A5(e.baseURL,e.url);return _5(r,e.params,e.paramsSerializer)};kx.forEach(["delete","get","head","options"],function(e){Gn.prototype[e]=function(r,n){return this.request(Io(n||{},{method:e,url:r,data:(n||{}).data}))}});kx.forEach(["post","put","patch"],function(e){function r(n){return function(i,a,o){return this.request(Io(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Gn.prototype[e]=r(),Gn.prototype[e+"Form"]=r(!0)});var T5=Gn,P5=Co;function Wn(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(s){e=s});var r=this;this.promise.then(function(n){if(!!r._listeners){var s,i=r._listeners.length;for(s=0;s<i;s++)r._listeners[s](n);r._listeners=null}}),this.promise.then=function(n){var s,i=new Promise(function(a){r.subscribe(a),s=a}).then(n);return i.cancel=function(){r.unsubscribe(s)},i},t(function(s){r.reason||(r.reason=new P5(s),e(r.reason))})}Wn.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Wn.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Wn.prototype.unsubscribe=function(e){if(!!this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};Wn.source=function(){var e,r=new Wn(function(s){e=s});return{token:r,cancel:e}};var R5=Wn,k5=function(e){return function(n){return e.apply(null,n)}},C5=Ye,B5=function(e){return C5.isObject(e)&&e.isAxiosError===!0},Uh=Ye,I5=yx,oa=T5,O5=Px,U5=Ad;function Bx(t){var e=new oa(t),r=I5(oa.prototype.request,e);return Uh.extend(r,oa.prototype,e),Uh.extend(r,e),r.create=function(s){return Bx(O5(t,s))},r}var ot=Bx(U5);ot.Axios=oa;ot.CanceledError=Co;ot.CancelToken=R5;ot.isCancel=Tx;ot.VERSION=Rx.version;ot.toFormData=Sx;ot.AxiosError=os;ot.Cancel=ot.CanceledError;ot.all=function(e){return Promise.all(e)};ot.spread=k5;ot.isAxiosError=B5;md.exports=ot;md.exports.default=ot;var Xs=md.exports,Ix=typeof self=="object"?self.FormData:window.FormData,Ox=Object.defineProperty,$5=Object.getOwnPropertyDescriptor,Oo=(t,e)=>{for(var r in e)Ox(t,r,{get:e[r],enumerable:!0})},we=(t,e,r,n)=>{for(var s=n>1?void 0:n?$5(e,r):e,i=t.length-1,a;i>=0;i--)(a=t[i])&&(s=(n?a(e,r,s):a(s))||s);return n&&s&&Ox(e,r,s),s},N5=/^m(\/[0-9]+')+$/,Ux=t=>t.replace("'",""),D5="ed25519 seed",L5=2147483648,M5=t=>{const r=bd.create(px,D5).update(ax(t)).digest(),n=r.slice(0,32),s=r.slice(32);return{key:n,chainCode:s}},F5=({key:t,chainCode:e},r)=>{const n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);const s=new Uint8Array(n),i=new Uint8Array([0]),a=new Uint8Array([...i,...t,...s]),o=bd.create(px,e).update(a).digest(),c=o.slice(0,32),f=o.slice(32);return{key:c,chainCode:f}},H5=t=>N5.test(t)?!t.split("/").slice(1).map(Ux).some(Number.isNaN):!1,q5=(t,e,r=L5)=>{if(!H5(t))throw new Error("Invalid derivation path");const{key:n,chainCode:s}=M5(e);return t.split("/").slice(1).map(Ux).map(a=>parseInt(a,10)).reduce((a,o)=>F5(a,o+r),{key:n,chainCode:s})};async function z5(t){return new Promise(e=>{setTimeout(e,t)})}var $h="/v1";function K5(t){let e=`${t}`;return e.endsWith("/")&&(e=e.substring(0,e.length-1)),e.endsWith($h)||(e=`${e}${$h}`),e}var $x=2e5,Nx=20,j5=20,G5="0x1::aptos_coin::AptosCoin";function Uo(t){let e,r,n;return typeof t=="object"?(e=t.hashFunction,r=t.ttlMs,n=t.tags):e=t,(s,i,a)=>{if(a.value!=null)a.value=Nh(a.value,e,r,n);else if(a.get!=null)a.get=Nh(a.get,e,r,n);else throw new Error("Only put a Memoize() decorator on a method or get accessor.")}}function W5(t,e){return Uo({ttlMs:t,hashFunction:e})}var ca=new Map;function V5(t){const e=new Set;for(const r of t){const n=ca.get(r);if(n)for(const s of n)e.has(s)||(s.clear(),e.add(s))}return e.size}function Nh(t,e,r=0,n){const s=Symbol("__memoized_map__");return function(...i){let a;const o=this;o.hasOwnProperty(s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!1,writable:!1,value:new Map});const c=o[s];if(Array.isArray(n))for(const f of n)ca.has(f)?ca.get(f).push(c):ca.set(f,[c]);if(e||i.length>0||r>0){let f;e===!0?f=i.map(l=>l.toString()).join("!"):e?f=e.apply(o,i):f=i[0];const u=`${f}__timestamp`;let d=!1;if(r>0)if(!c.has(u))d=!0;else{const l=c.get(u);d=Date.now()-l>r}c.has(f)&&!d?a=c.get(f):(a=t.apply(o,i),c.set(f,a),r>0&&c.set(u,Date.now()))}else{const f=o;c.has(f)?a=c.get(f):(a=t.apply(o,i),c.set(f,a))}return a}}var Q=class{static fromBuffer(t){return Q.fromUint8Array(t)}static fromUint8Array(t){return new Q(ix(t))}static ensure(t){return typeof t=="string"?new Q(t):t}constructor(t){t.startsWith("0x")?this.hexString=t:this.hexString=`0x${t}`}hex(){return this.hexString}noPrefix(){return this.hexString.slice(2)}toString(){return this.hex()}toShortString(){return`0x${this.hexString.replace(/^0x0*/,"")}`}toUint8Array(){return Uint8Array.from(ax(this.noPrefix()))}};async function Dh(t,e,r,n){var s;const i=[];let a;for(;;){const o=await t(Q.ensure(e).hex(),(s=n?.ledgerVersion)==null?void 0:s.toString(),a,r);if(a=o.__headers["x-aptos-cursor"],delete o.__headers,i.push(...o),a==null)break}return i}var J5={mainnet:"https://indexer.mainnet.aptoslabs.com/v1/graphql",testnet:"https://indexer-testnet.staging.gcp.aptosdev.com/v1/graphql",devnet:"https://indexer-devnet.staging.gcp.aptosdev.com/v1/graphql"},X5={mainnet:"https://fullnode.mainnet.aptoslabs.com/v1",testnet:"https://fullnode.testnet.aptoslabs.com/v1",devnet:"https://fullnode.devnet.aptoslabs.com/v1"},De={};Oo(De,{AccountAddress:()=>Pe,AccountAuthenticator:()=>Zs,AccountAuthenticatorEd25519:()=>kd,AccountAuthenticatorMultiEd25519:()=>Cd,ArgumentABI:()=>Ri,AuthenticationKey:()=>nn,ChainId:()=>qo,ChangeSet:()=>lS,Ed25519PublicKey:()=>St,Ed25519Signature:()=>Gt,EntryFunction:()=>Jr,EntryFunctionABI:()=>Vn,Identifier:()=>rt,Module:()=>Hx,ModuleId:()=>rn,MultiAgentRawTransaction:()=>Mo,MultiEd25519PublicKey:()=>Si,MultiEd25519Signature:()=>$o,MultiSig:()=>Od,MultiSigTransactionPayload:()=>Id,RawTransaction:()=>hs,RawTransactionWithData:()=>qx,RotationProofChallenge:()=>pS,Script:()=>Lo,ScriptABI:()=>Zo,SignedTransaction:()=>Ai,StructTag:()=>tn,Transaction:()=>zx,TransactionArgument:()=>Ht,TransactionArgumentAddress:()=>Jo,TransactionArgumentBool:()=>Yo,TransactionArgumentU128:()=>Wo,TransactionArgumentU16:()=>Ko,TransactionArgumentU256:()=>Vo,TransactionArgumentU32:()=>jo,TransactionArgumentU64:()=>Go,TransactionArgumentU8:()=>zo,TransactionArgumentU8Vector:()=>Xo,TransactionAuthenticator:()=>_i,TransactionAuthenticatorEd25519:()=>No,TransactionAuthenticatorMultiAgent:()=>Rd,TransactionAuthenticatorMultiEd25519:()=>Do,TransactionPayload:()=>Ti,TransactionPayloadEntryFunction:()=>Ho,TransactionPayloadMultisig:()=>Ud,TransactionPayloadScript:()=>Fo,TransactionScriptABI:()=>Qo,TypeArgumentABI:()=>Pi,TypeTag:()=>Je,TypeTagAddress:()=>Lr,TypeTagBool:()=>dn,TypeTagParser:()=>ls,TypeTagParserError:()=>Fx,TypeTagSigner:()=>Bd,TypeTagStruct:()=>pn,TypeTagU128:()=>hn,TypeTagU16:()=>cs,TypeTagU256:()=>fs,TypeTagU32:()=>us,TypeTagU64:()=>ln,TypeTagU8:()=>xr,TypeTagVector:()=>ds,UserTransaction:()=>$d,WriteSet:()=>hS,stringStructTag:()=>Mx});var Y5={};Oo(Y5,{Deserializer:()=>Pd,Serializer:()=>Be,bcsSerializeBool:()=>aS,bcsSerializeBytes:()=>Pn,bcsSerializeFixedBytes:()=>cS,bcsSerializeStr:()=>oS,bcsSerializeU128:()=>iS,bcsSerializeU16:()=>nS,bcsSerializeU32:()=>sS,bcsSerializeU8:()=>yf,bcsSerializeUint64:()=>rS,bcsToBytes:()=>qr,deserializeVector:()=>Ct,serializeVector:()=>pt,serializeVectorWithFunc:()=>tS});var Z5=2**8-1,Q5=2**16-1,Ys=2**32-1,Dx=BigInt(2**64)-BigInt(1),Lx=BigInt(2**128)-BigInt(1),eS=BigInt(2**256)-BigInt(1),Be=class{constructor(){this.buffer=new ArrayBuffer(64),this.offset=0}ensureBufferWillHandleSize(t){for(;this.buffer.byteLength<this.offset+t;){const e=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(e).set(new Uint8Array(this.buffer)),this.buffer=e}}serialize(t){this.ensureBufferWillHandleSize(t.length),new Uint8Array(this.buffer,this.offset).set(t),this.offset+=t.length}serializeWithFunction(t,e,r){this.ensureBufferWillHandleSize(e);const n=new DataView(this.buffer,this.offset);t.apply(n,[0,r,!0]),this.offset+=e}serializeStr(t){const e=new TextEncoder;this.serializeBytes(e.encode(t))}serializeBytes(t){this.serializeU32AsUleb128(t.length),this.serialize(t)}serializeFixedBytes(t){this.serialize(t)}serializeBool(t){if(typeof t!="boolean")throw new Error("Value needs to be a boolean");const e=t?1:0;this.serialize(new Uint8Array([e]))}serializeU8(t){this.serialize(new Uint8Array([t]))}serializeU16(t){this.serializeWithFunction(DataView.prototype.setUint16,2,t)}serializeU32(t){this.serializeWithFunction(DataView.prototype.setUint32,4,t)}serializeU64(t){const e=BigInt(t.toString())&BigInt(Ys),r=BigInt(t.toString())>>BigInt(32);this.serializeU32(Number(e)),this.serializeU32(Number(r))}serializeU128(t){const e=BigInt(t.toString())&Dx,r=BigInt(t.toString())>>BigInt(64);this.serializeU64(e),this.serializeU64(r)}serializeU256(t){const e=BigInt(t.toString())&Lx,r=BigInt(t.toString())>>BigInt(128);this.serializeU128(e),this.serializeU128(r)}serializeU32AsUleb128(t){let e=t;const r=[];for(;e>>>7!==0;)r.push(e&127|128),e>>>=7;r.push(e),this.serialize(new Uint8Array(r))}getBytes(){return new Uint8Array(this.buffer).slice(0,this.offset)}};we([fn(0,Z5)],Be.prototype,"serializeU8",1);we([fn(0,Q5)],Be.prototype,"serializeU16",1);we([fn(0,Ys)],Be.prototype,"serializeU32",1);we([fn(BigInt(0),Dx)],Be.prototype,"serializeU64",1);we([fn(BigInt(0),Lx)],Be.prototype,"serializeU128",1);we([fn(BigInt(0),eS)],Be.prototype,"serializeU256",1);we([fn(0,Ys)],Be.prototype,"serializeU32AsUleb128",1);function fn(t,e,r){return(n,s,i)=>{const a=i.value;return i.value=function(c){const f=BigInt(c.toString());if(f>BigInt(e.toString())||f<BigInt(t.toString()))throw new Error(r||"Value is out of range");a.apply(this,[c])},i}}var Pd=class{constructor(t){this.buffer=new ArrayBuffer(t.length),new Uint8Array(this.buffer).set(t,0),this.offset=0}read(t){if(this.offset+t>this.buffer.byteLength)throw new Error("Reached to the end of buffer");const e=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,e}deserializeStr(){const t=this.deserializeBytes();return new TextDecoder().decode(t)}deserializeBytes(){const t=this.deserializeUleb128AsU32();return new Uint8Array(this.read(t))}deserializeFixedBytes(t){return new Uint8Array(this.read(t))}deserializeBool(){const t=new Uint8Array(this.read(1))[0];if(t!==1&&t!==0)throw new Error("Invalid boolean value");return t===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){const t=this.deserializeU32(),e=this.deserializeU32();return BigInt(BigInt(e)<<BigInt(32)|BigInt(t))}deserializeU128(){const t=this.deserializeU64(),e=this.deserializeU64();return BigInt(e<<BigInt(64)|t)}deserializeU256(){const t=this.deserializeU128(),e=this.deserializeU128();return BigInt(e<<BigInt(128)|t)}deserializeUleb128AsU32(){let t=BigInt(0),e=0;for(;t<Ys;){const r=this.deserializeU8();if(t|=BigInt(r&127)<<BigInt(e),(r&128)===0)break;e+=7}if(t>Ys)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(t)}};function pt(t,e){e.serializeU32AsUleb128(t.length),t.forEach(r=>{r.serialize(e)})}function tS(t,e){const r=new Be;r.serializeU32AsUleb128(t.length);const n=r[e];return t.forEach(s=>{n.call(r,s)}),r.getBytes()}function Ct(t,e){const r=t.deserializeUleb128AsU32(),n=[];for(let s=0;s<r;s+=1)n.push(e.deserialize(t));return n}function qr(t){const e=new Be;return t.serialize(e),e.getBytes()}function rS(t){const e=new Be;return e.serializeU64(t),e.getBytes()}function yf(t){const e=new Be;return e.serializeU8(t),e.getBytes()}function nS(t){const e=new Be;return e.serializeU16(t),e.getBytes()}function sS(t){const e=new Be;return e.serializeU32(t),e.getBytes()}function iS(t){const e=new Be;return e.serializeU128(t),e.getBytes()}function aS(t){const e=new Be;return e.serializeBool(t),e.getBytes()}function oS(t){const e=new Be;return e.serializeStr(t),e.getBytes()}function Pn(t){const e=new Be;return e.serializeBytes(t),e.getBytes()}function cS(t){const e=new Be;return e.serializeFixedBytes(t),e.getBytes()}var mt=class{constructor(t){if(t.length!==mt.LENGTH)throw new Error("Expected address of length 32");this.address=t}static fromHex(t){let e=Q.ensure(t);e.noPrefix().length%2!==0&&(e=new Q(`0${e.noPrefix()}`));const r=e.toUint8Array();if(r.length>mt.LENGTH)throw new Error("Hex string is too long. Address's length is 32 bytes.");if(r.length===mt.LENGTH)return new mt(r);const n=new Uint8Array(mt.LENGTH);return n.set(r,mt.LENGTH-r.length),new mt(n)}static isValid(t){if(t==="")return!1;let e=Q.ensure(t);return e.noPrefix().length%2!==0&&(e=new Q(`0${e.noPrefix()}`)),e.toUint8Array().length<=mt.LENGTH}toHexString(){return Q.fromUint8Array(this.address).hex()}serialize(t){t.serializeFixedBytes(this.address)}static deserialize(t){return new mt(t.deserializeFixedBytes(mt.LENGTH))}},Pe=mt;Pe.LENGTH=32;Pe.CORE_CODE_ADDRESS=mt.fromHex("0x1");var ua=class{constructor(t){if(t.length!==ua.LENGTH)throw new Error(`Ed25519PublicKey length should be ${ua.LENGTH}`);this.value=t}toBytes(){return this.value}serialize(t){t.serializeBytes(this.value)}static deserialize(t){const e=t.deserializeBytes();return new ua(e)}},St=ua;St.LENGTH=32;var fa=class{constructor(t){if(this.value=t,t.length!==fa.LENGTH)throw new Error(`Ed25519Signature length should be ${fa.LENGTH}`)}serialize(t){t.serializeBytes(this.value)}static deserialize(t){const e=t.deserializeBytes();return new fa(e)}},Gt=fa;Gt.LENGTH=64;var xf=32,Si=class{constructor(t,e){if(this.public_keys=t,this.threshold=e,e>xf)throw new Error(`"threshold" cannot be larger than ${xf}`)}toBytes(){const t=new Uint8Array(this.public_keys.length*St.LENGTH+1);return this.public_keys.forEach((e,r)=>{t.set(e.value,r*St.LENGTH)}),t[this.public_keys.length*St.LENGTH]=this.threshold,t}serialize(t){t.serializeBytes(this.toBytes())}static deserialize(t){const e=t.deserializeBytes(),r=e[e.length-1],n=[];for(let s=0;s<e.length-1;s+=St.LENGTH){const i=s;n.push(new St(e.subarray(i,i+St.LENGTH)))}return new Si(n,r)}},Ps=class{constructor(t,e){if(this.signatures=t,this.bitmap=e,e.length!==Ps.BITMAP_LEN)throw new Error(`"bitmap" length should be ${Ps.BITMAP_LEN}`)}toBytes(){const t=new Uint8Array(this.signatures.length*Gt.LENGTH+Ps.BITMAP_LEN);return this.signatures.forEach((e,r)=>{t.set(e.value,r*Gt.LENGTH)}),t.set(this.bitmap,this.signatures.length*Gt.LENGTH),t}static createBitmap(t){const r=new Uint8Array([0,0,0,0]),n=new Set;return t.forEach(s=>{if(s>=xf)throw new Error(`Invalid bit value ${s}.`);if(n.has(s))throw new Error("Duplicated bits detected.");n.add(s);const i=Math.floor(s/8);let a=r[i];a|=128>>s%8,r[i]=a}),r}serialize(t){t.serializeBytes(this.toBytes())}static deserialize(t){const e=t.deserializeBytes(),r=e.subarray(e.length-4),n=[];for(let s=0;s<e.length-r.length;s+=Gt.LENGTH){const i=s;n.push(new Gt(e.subarray(i,i+Gt.LENGTH)))}return new Ps(n,r)}},$o=Ps;$o.BITMAP_LEN=4;var _i=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return No.load(t);case 1:return Do.load(t);case 2:return Rd.load(t);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${e}`)}}},No=class extends _i{constructor(t,e){super(),this.public_key=t,this.signature=e}serialize(t){t.serializeU32AsUleb128(0),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const e=St.deserialize(t),r=Gt.deserialize(t);return new No(e,r)}},Do=class extends _i{constructor(t,e){super(),this.public_key=t,this.signature=e}serialize(t){t.serializeU32AsUleb128(1),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const e=Si.deserialize(t),r=$o.deserialize(t);return new Do(e,r)}},Rd=class extends _i{constructor(t,e,r){super(),this.sender=t,this.secondary_signer_addresses=e,this.secondary_signers=r}serialize(t){t.serializeU32AsUleb128(2),this.sender.serialize(t),pt(this.secondary_signer_addresses,t),pt(this.secondary_signers,t)}static load(t){const e=Zs.deserialize(t),r=Ct(t,Pe),n=Ct(t,Zs);return new Rd(e,r,n)}},Zs=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return kd.load(t);case 1:return Cd.load(t);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${e}`)}}},kd=class extends Zs{constructor(t,e){super(),this.public_key=t,this.signature=e}serialize(t){t.serializeU32AsUleb128(0),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const e=St.deserialize(t),r=Gt.deserialize(t);return new kd(e,r)}},Cd=class extends Zs{constructor(t,e){super(),this.public_key=t,this.signature=e}serialize(t){t.serializeU32AsUleb128(1),this.public_key.serialize(t),this.signature.serialize(t)}static load(t){const e=Si.deserialize(t),r=$o.deserialize(t);return new Cd(e,r)}},rt=class{constructor(t){this.value=t}serialize(t){t.serializeStr(this.value)}static deserialize(t){const e=t.deserializeStr();return new rt(e)}},Je=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return dn.load(t);case 1:return xr.load(t);case 2:return ln.load(t);case 3:return hn.load(t);case 4:return Lr.load(t);case 5:return Bd.load(t);case 6:return ds.load(t);case 7:return pn.load(t);case 8:return cs.load(t);case 9:return us.load(t);case 10:return fs.load(t);default:throw new Error(`Unknown variant index for TypeTag: ${e}`)}}},dn=class extends Je{serialize(t){t.serializeU32AsUleb128(0)}static load(t){return new dn}},xr=class extends Je{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new xr}},cs=class extends Je{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new cs}},us=class extends Je{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new us}},ln=class extends Je{serialize(t){t.serializeU32AsUleb128(2)}static load(t){return new ln}},hn=class extends Je{serialize(t){t.serializeU32AsUleb128(3)}static load(t){return new hn}},fs=class extends Je{serialize(t){t.serializeU32AsUleb128(1)}static load(t){return new fs}},Lr=class extends Je{serialize(t){t.serializeU32AsUleb128(4)}static load(t){return new Lr}},Bd=class extends Je{serialize(t){t.serializeU32AsUleb128(5)}static load(t){return new Bd}},ds=class extends Je{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(6),this.value.serialize(t)}static load(t){const e=Je.deserialize(t);return new ds(e)}},pn=class extends Je{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(7),this.value.serialize(t)}static load(t){const e=tn.deserialize(t);return new pn(e)}isStringTypeTag(){return this.value.module_name.value==="string"&&this.value.name.value==="String"&&this.value.address.toHexString()===Pe.fromHex("0x1").toHexString()}},tn=class{constructor(t,e,r,n){this.address=t,this.module_name=e,this.name=r,this.type_args=n}static fromString(t){const e=new ls(t).parseTypeTag();return new tn(e.value.address,e.value.module_name,e.value.name,e.value.type_args)}serialize(t){this.address.serialize(t),this.module_name.serialize(t),this.name.serialize(t),pt(this.type_args,t)}static deserialize(t){const e=Pe.deserialize(t),r=rt.deserialize(t),n=rt.deserialize(t),s=Ct(t,Je);return new tn(e,r,n,s)}},Mx=new tn(Pe.fromHex("0x1"),new rt("string"),new rt("String"),[]);function Cr(t){throw new Fx(t)}function Lh(t){return!!t.match(/\s/)}function Mh(t){return!!t.match(/[_A-Za-z0-9]/g)}function uS(t){return!!t.match(/T\d+/g)}function fS(t,e){const r=t[e];if(r===":"){if(t.slice(e,e+2)==="::")return[["COLON","::"],2];Cr("Unrecognized token.")}else{if(r==="<")return[["LT","<"],1];if(r===">")return[["GT",">"],1];if(r===",")return[["COMMA",","],1];if(Lh(r)){let n="";for(let s=e;s<t.length;s+=1){const i=t[s];if(Lh(i))n=`${n}${i}`;else break}return[["SPACE",n],n.length]}else if(Mh(r)){let n="";for(let s=e;s<t.length;s+=1){const i=t[s];if(Mh(i))n=`${n}${i}`;else break}return uS(n)?[["GENERIC",n],n.length]:[["IDENT",n],n.length]}}throw new Error("Unrecognized token.")}function dS(t){let e=0;const r=[];for(;e<t.length;){const[n,s]=fS(t,e);n[0]!=="SPACE"&&r.push(n),e+=s}return r}var ls=class{constructor(t,e){this.typeTags=[],this.tokens=dS(t),this.typeTags=e||[]}consume(t){const e=this.tokens.shift();(!e||e[1]!==t)&&Cr("Invalid type tag.")}parseCommaList(t,e){const r=[];for(this.tokens.length<=0&&Cr("Invalid type tag.");this.tokens[0][1]!==t&&(r.push(this.parseTypeTag()),!(this.tokens.length>0&&this.tokens[0][1]===t||(this.consume(","),this.tokens.length>0&&this.tokens[0][1]===t&&e)));)this.tokens.length<=0&&Cr("Invalid type tag.");return r}parseTypeTag(){this.tokens.length===0&&Cr("Invalid type tag.");const[t,e]=this.tokens.shift();if(e==="u8")return new xr;if(e==="u16")return new cs;if(e==="u32")return new us;if(e==="u64")return new ln;if(e==="u128")return new hn;if(e==="u256")return new fs;if(e==="bool")return new dn;if(e==="address")return new Lr;if(e==="vector"){this.consume("<");const r=this.parseTypeTag();return this.consume(">"),new ds(r)}if(e==="string")return new tn(Pe.fromHex("0x1"),new rt("string"),new rt("String"),[]);if(t==="IDENT"&&(e.startsWith("0x")||e.startsWith("0X"))){const r=e;this.consume("::");const[n,s]=this.tokens.shift();n!=="IDENT"&&Cr("Invalid type tag."),this.consume("::");const[i,a]=this.tokens.shift();if(i!=="IDENT"&&Cr("Invalid type tag."),s==="object"&&a==="Object")return this.tokens.splice(0,3),new Lr;let o=[];this.tokens.length>0&&this.tokens[0][1]==="<"&&(this.consume("<"),o=this.parseCommaList(">",!0),this.consume(">"));const c=new tn(Pe.fromHex(r),new rt(s),new rt(a),o);return new pn(c)}if(t==="GENERIC"){this.typeTags.length===0&&Cr("Can't convert generic type since no typeTags were specified.");const r=parseInt(e.substring(1),10);return new ls(this.typeTags[r]).parseTypeTag()}throw new Error("Invalid type tag.")}},Fx=class extends Error{constructor(t){super(t),this.name="TypeTagParserError"}},hs=class{constructor(t,e,r,n,s,i,a){this.sender=t,this.sequence_number=e,this.payload=r,this.max_gas_amount=n,this.gas_unit_price=s,this.expiration_timestamp_secs=i,this.chain_id=a}serialize(t){this.sender.serialize(t),t.serializeU64(this.sequence_number),this.payload.serialize(t),t.serializeU64(this.max_gas_amount),t.serializeU64(this.gas_unit_price),t.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(t)}static deserialize(t){const e=Pe.deserialize(t),r=t.deserializeU64(),n=Ti.deserialize(t),s=t.deserializeU64(),i=t.deserializeU64(),a=t.deserializeU64(),o=qo.deserialize(t);return new hs(e,r,n,s,i,a,o)}},Lo=class{constructor(t,e,r){this.code=t,this.ty_args=e,this.args=r}serialize(t){t.serializeBytes(this.code),pt(this.ty_args,t),pt(this.args,t)}static deserialize(t){const e=t.deserializeBytes(),r=Ct(t,Je),n=Ct(t,Ht);return new Lo(e,r,n)}},Jr=class{constructor(t,e,r,n){this.module_name=t,this.function_name=e,this.ty_args=r,this.args=n}static natural(t,e,r,n){return new Jr(rn.fromStr(t),new rt(e),r,n)}static natual(t,e,r,n){return Jr.natural(t,e,r,n)}serialize(t){this.module_name.serialize(t),this.function_name.serialize(t),pt(this.ty_args,t),t.serializeU32AsUleb128(this.args.length),this.args.forEach(e=>{t.serializeBytes(e)})}static deserialize(t){const e=rn.deserialize(t),r=rt.deserialize(t),n=Ct(t,Je),s=t.deserializeUleb128AsU32(),i=[];for(let o=0;o<s;o+=1)i.push(t.deserializeBytes());const a=i;return new Jr(e,r,n,a)}},Id=class{constructor(t){this.transaction_payload=t}serialize(t){t.serializeU32AsUleb128(0),this.transaction_payload.serialize(t)}static deserialize(t){return t.deserializeUleb128AsU32(),new Id(Jr.deserialize(t))}},Od=class{constructor(t,e){this.multisig_address=t,this.transaction_payload=e}serialize(t){this.multisig_address.serialize(t),this.transaction_payload===void 0?t.serializeBool(!1):(t.serializeBool(!0),this.transaction_payload.serialize(t))}static deserialize(t){const e=Pe.deserialize(t),r=t.deserializeBool();let n;return r&&(n=Id.deserialize(t)),new Od(e,n)}},Hx=class{constructor(t){this.code=t}serialize(t){t.serializeBytes(this.code)}static deserialize(t){const e=t.deserializeBytes();return new Hx(e)}},rn=class{constructor(t,e){this.address=t,this.name=e}static fromStr(t){const e=t.split("::");if(e.length!==2)throw new Error("Invalid module id.");return new rn(Pe.fromHex(new Q(e[0])),new rt(e[1]))}serialize(t){this.address.serialize(t),this.name.serialize(t)}static deserialize(t){const e=Pe.deserialize(t),r=rt.deserialize(t);return new rn(e,r)}},lS=class{serialize(t){throw new Error("Not implemented.")}static deserialize(t){throw new Error("Not implemented.")}},hS=class{serialize(t){throw new Error("Not implmented.")}static deserialize(t){throw new Error("Not implmented.")}},Ai=class{constructor(t,e){this.raw_txn=t,this.authenticator=e}serialize(t){this.raw_txn.serialize(t),this.authenticator.serialize(t)}static deserialize(t){const e=hs.deserialize(t),r=_i.deserialize(t);return new Ai(e,r)}},qx=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return Mo.load(t);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${e}`)}}},Mo=class extends qx{constructor(t,e){super(),this.raw_txn=t,this.secondary_signer_addresses=e}serialize(t){t.serializeU32AsUleb128(0),this.raw_txn.serialize(t),pt(this.secondary_signer_addresses,t)}static load(t){const e=hs.deserialize(t),r=Ct(t,Pe);return new Mo(e,r)}},Ti=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return Fo.load(t);case 2:return Ho.load(t);case 3:return Ud.load(t);default:throw new Error(`Unknown variant index for TransactionPayload: ${e}`)}}},Fo=class extends Ti{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(0),this.value.serialize(t)}static load(t){const e=Lo.deserialize(t);return new Fo(e)}},Ho=class extends Ti{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(2),this.value.serialize(t)}static load(t){const e=Jr.deserialize(t);return new Ho(e)}},Ud=class extends Ti{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(3),this.value.serialize(t)}static load(t){const e=Od.deserialize(t);return new Ud(e)}},qo=class{constructor(t){this.value=t}serialize(t){t.serializeU8(this.value)}static deserialize(t){const e=t.deserializeU8();return new qo(e)}},Ht=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return zo.load(t);case 1:return Go.load(t);case 2:return Wo.load(t);case 3:return Jo.load(t);case 4:return Xo.load(t);case 5:return Yo.load(t);case 6:return Ko.load(t);case 7:return jo.load(t);case 8:return Vo.load(t);default:throw new Error(`Unknown variant index for TransactionArgument: ${e}`)}}},zo=class extends Ht{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(0),t.serializeU8(this.value)}static load(t){const e=t.deserializeU8();return new zo(e)}},Ko=class extends Ht{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(6),t.serializeU16(this.value)}static load(t){const e=t.deserializeU16();return new Ko(e)}},jo=class extends Ht{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(7),t.serializeU32(this.value)}static load(t){const e=t.deserializeU32();return new jo(e)}},Go=class extends Ht{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(1),t.serializeU64(this.value)}static load(t){const e=t.deserializeU64();return new Go(e)}},Wo=class extends Ht{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(2),t.serializeU128(this.value)}static load(t){const e=t.deserializeU128();return new Wo(e)}},Vo=class extends Ht{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(8),t.serializeU256(this.value)}static load(t){const e=t.deserializeU256();return new Vo(e)}},Jo=class extends Ht{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(3),this.value.serialize(t)}static load(t){const e=Pe.deserialize(t);return new Jo(e)}},Xo=class extends Ht{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(4),t.serializeBytes(this.value)}static load(t){const e=t.deserializeBytes();return new Xo(e)}},Yo=class extends Ht{constructor(t){super(),this.value=t}serialize(t){t.serializeU32AsUleb128(5),t.serializeBool(this.value)}static load(t){const e=t.deserializeBool();return new Yo(e)}},zx=class{getHashSalt(){const t=Kn.create();return t.update("APTOS::Transaction"),t.digest()}static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return $d.load(t);default:throw new Error(`Unknown variant index for Transaction: ${e}`)}}},$d=class extends zx{constructor(t){super(),this.value=t}hash(){const t=Kn.create();return t.update(this.getHashSalt()),t.update(qr(this)),t.digest()}serialize(t){t.serializeU32AsUleb128(0),this.value.serialize(t)}static load(t){return new $d(Ai.deserialize(t))}},Pi=class{constructor(t){this.name=t}serialize(t){t.serializeStr(this.name)}static deserialize(t){const e=t.deserializeStr();return new Pi(e)}},Ri=class{constructor(t,e){this.name=t,this.type_tag=e}serialize(t){t.serializeStr(this.name),this.type_tag.serialize(t)}static deserialize(t){const e=t.deserializeStr(),r=Je.deserialize(t);return new Ri(e,r)}},Zo=class{static deserialize(t){const e=t.deserializeUleb128AsU32();switch(e){case 0:return Qo.load(t);case 1:return Vn.load(t);default:throw new Error(`Unknown variant index for TransactionPayload: ${e}`)}}},Qo=class extends Zo{constructor(t,e,r,n,s){super(),this.name=t,this.doc=e,this.code=r,this.ty_args=n,this.args=s}serialize(t){t.serializeU32AsUleb128(0),t.serializeStr(this.name),t.serializeStr(this.doc),t.serializeBytes(this.code),pt(this.ty_args,t),pt(this.args,t)}static load(t){const e=t.deserializeStr(),r=t.deserializeStr(),n=t.deserializeBytes(),s=Ct(t,Pi),i=Ct(t,Ri);return new Qo(e,r,n,s,i)}},Vn=class extends Zo{constructor(t,e,r,n,s){super(),this.name=t,this.module_name=e,this.doc=r,this.ty_args=n,this.args=s}serialize(t){t.serializeU32AsUleb128(1),t.serializeStr(this.name),this.module_name.serialize(t),t.serializeStr(this.doc),pt(this.ty_args,t),pt(this.args,t)}static load(t){const e=t.deserializeStr(),r=rn.deserialize(t),n=t.deserializeStr(),s=Ct(t,Pi),i=Ct(t,Ri);return new Vn(e,r,n,s,i)}},Rn=class{constructor(t){if(t.length!==Rn.LENGTH)throw new Error("Expected a byte array of length 32");this.bytes=t}static fromMultiEd25519PublicKey(t){const e=t.toBytes(),r=new Uint8Array(e.length+1);r.set(e),r.set([Rn.MULTI_ED25519_SCHEME],e.length);const n=Kn.create();return n.update(r),new Rn(n.digest())}static fromEd25519PublicKey(t){const e=t.value,r=new Uint8Array(e.length+1);r.set(e),r.set([Rn.ED25519_SCHEME],e.length);const n=Kn.create();return n.update(r),new Rn(n.digest())}derivedAddress(){return Q.fromUint8Array(this.bytes)}},nn=Rn;nn.LENGTH=32;nn.MULTI_ED25519_SCHEME=1;nn.ED25519_SCHEME=0;nn.DERIVE_RESOURCE_ACCOUNT_SCHEME=255;var pS=class{constructor(t,e,r,n,s,i,a){this.accountAddress=t,this.moduleName=e,this.structName=r,this.sequenceNumber=n,this.originator=s,this.currentAuthKey=i,this.newPublicKey=a}serialize(t){this.accountAddress.serialize(t),t.serializeStr(this.moduleName),t.serializeStr(this.structName),t.serializeU64(this.sequenceNumber),this.originator.serialize(t),this.currentAuthKey.serialize(t),t.serializeBytes(this.newPublicKey)}},da=class{static fromAptosAccountObject(t){return new da(Q.ensure(t.privateKeyHex).toUint8Array(),t.address)}static isValidPath(t){return/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'+$/.test(t)}static fromDerivePath(t,e){if(!da.isValidPath(t))throw new Error("Invalid derivation path");const r=e.trim().split(/\s+/).map(s=>s.toLowerCase()).join(" "),{key:n}=q5(t,ix(Jy(r)));return new da(n)}constructor(t,e){t?this.signingKey=Oi.sign.keyPair.fromSeed(t.slice(0,32)):this.signingKey=Oi.sign.keyPair(),this.accountAddress=Q.ensure(e||this.authKey().hex())}address(){return this.accountAddress}authKey(){const t=new St(this.signingKey.publicKey);return nn.fromEd25519PublicKey(t).derivedAddress()}static getResourceAccountAddress(t,e){const r=qr(Pe.fromHex(t)),n=new Uint8Array([...r,...e,nn.DERIVE_RESOURCE_ACCOUNT_SCHEME]),s=Kn.create();return s.update(n),Q.fromUint8Array(s.digest())}pubKey(){return Q.fromUint8Array(this.signingKey.publicKey)}signBuffer(t){const e=Oi.sign.detached(t,this.signingKey.secretKey);return Q.fromUint8Array(e)}signHexString(t){const e=Q.ensure(t).toUint8Array();return this.signBuffer(e)}verifySignature(t,e){const r=Q.ensure(t).toUint8Array(),n=Q.ensure(e).toUint8Array();return Oi.sign.detached.verify(r,n,this.signingKey.publicKey)}toPrivateKeyObject(){return{address:this.address().hex(),publicKeyHex:this.pubKey().hex(),privateKeyHex:Q.fromUint8Array(this.signingKey.secretKey.slice(0,32)).hex()}}},bf=da;we([Uo()],bf.prototype,"authKey",1);var yS=`
    fragment TokenDataFields on current_token_datas {
  creator_address
  collection_name
  description
  metadata_uri
  name
  token_data_id_hash
  collection_data_id_hash
}
    `,xS=`
    fragment CollectionDataFields on current_collection_datas {
  metadata_uri
  supply
  description
  collection_name
  collection_data_id_hash
  table_handle
  creator_address
}
    `,bS=`
    query getAccountCoinsData($owner_address: String, $offset: Int, $limit: Int) {
  current_coin_balances(
    where: {owner_address: {_eq: $owner_address}}
    offset: $offset
    limit: $limit
  ) {
    amount
    coin_type
    coin_info {
      name
      decimals
      symbol
    }
  }
}
    `,gS=`
    query getAccountCurrentTokens($address: String!, $offset: Int, $limit: Int) {
  current_token_ownerships(
    where: {owner_address: {_eq: $address}, amount: {_gt: 0}}
    order_by: [{last_transaction_version: desc}, {creator_address: asc}, {collection_name: asc}, {name: asc}]
    offset: $offset
    limit: $limit
  ) {
    amount
    current_token_data {
      ...TokenDataFields
    }
    current_collection_data {
      ...CollectionDataFields
    }
    last_transaction_version
    property_version
  }
}
    ${yS}
${xS}`,mS=`
    query getAccountTokensCount($owner_address: String) {
  current_token_ownerships_aggregate(
    where: {owner_address: {_eq: $owner_address}, amount: {_gt: "0"}}
  ) {
    aggregate {
      count
    }
  }
}
    `,wS=`
    query getAccountTransactionsCount($address: String) {
  move_resources_aggregate(
    where: {address: {_eq: $address}}
    distinct_on: transaction_version
  ) {
    aggregate {
      count
    }
  }
}
    `,vS=`
    query getAccountTransactionsData($address: String, $limit: Int, $offset: Int) {
  move_resources(
    where: {address: {_eq: $address}}
    order_by: {transaction_version: desc}
    distinct_on: transaction_version
    limit: $limit
    offset: $offset
  ) {
    transaction_version
  }
}
    `,ES=`
    query getCurrentDelegatorBalancesCount($poolAddress: String) {
  current_delegator_balances_aggregate(
    where: {pool_type: {_eq: "active_shares"}, pool_address: {_eq: $poolAddress}, amount: {_gt: "0"}}
    distinct_on: delegator_address
  ) {
    aggregate {
      count
    }
  }
}
    `,SS=`
    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {
  delegated_staking_activities(
    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}
  ) {
    amount
    delegator_address
    event_index
    event_type
    pool_address
    transaction_version
  }
}
    `,_S=`
    query getIndexerLedgerInfo {
  ledger_infos {
    chain_id
  }
}
    `,AS=`
    query getTokenActivities($idHash: String!, $offset: Int, $limit: Int) {
  token_activities(
    where: {token_data_id_hash: {_eq: $idHash}}
    order_by: {transaction_version: desc}
    offset: $offset
    limit: $limit
  ) {
    creator_address
    collection_name
    name
    token_data_id_hash
    collection_data_id_hash
    from_address
    to_address
    transaction_version
    transaction_timestamp
    property_version
    transfer_type
    event_sequence_number
    token_amount
  }
}
    `,TS=`
    query getTokenActivitiesCount($token_id: String) {
  token_activities_aggregate(where: {token_data_id_hash: {_eq: $token_id}}) {
    aggregate {
      count
    }
  }
}
    `,PS=`
    query getTokenData($token_id: String) {
  current_token_datas(where: {token_data_id_hash: {_eq: $token_id}}) {
    token_data_id_hash
    name
    collection_name
    creator_address
    default_properties
    largest_property_version
    maximum
    metadata_uri
    payee_address
    royalty_points_denominator
    royalty_points_numerator
    supply
  }
}
    `,RS=`
    query getTokenOwnersData($token_id: String, $property_version: numeric) {
  current_token_ownerships(
    where: {token_data_id_hash: {_eq: $token_id}, property_version: {_eq: $property_version}}
  ) {
    owner_address
  }
}
    `,kS=`
    query getTopUserTransactions($limit: Int) {
  user_transactions(limit: $limit, order_by: {version: desc}) {
    version
  }
}
    `,CS=`
    query getUserTransactions($limit: Int, $start_version: bigint, $offset: Int) {
  user_transactions(
    limit: $limit
    order_by: {version: desc}
    where: {version: {_lte: $start_version}}
    offset: $offset
  ) {
    version
  }
}
    `,zt=class{constructor(t){this.endpoint=t}static validateAddress(t){if(t.length<66)throw new Error("Address needs to be 66 chars long.")}async queryIndexer(t){const{data:e}=await Xs.post(this.endpoint,t);if(e.errors)throw new Error(`Indexer data error ${JSON.stringify(e.errors,null," ")}`);return e.data}async getIndexerLedgerInfo(){const t={query:_S};return this.queryIndexer(t)}async getAccountNFTs(t,e){const r=Q.ensure(t).hex();zt.validateAddress(r);const n={query:gS,variables:{address:r,offset:e?.offset,limit:e?.limit}};return this.queryIndexer(n)}async getTokenActivities(t,e){const r={query:AS,variables:{idHash:t,offset:e?.offset,limit:e?.limit}};return this.queryIndexer(r)}async getAccountCoinsData(t,e){const r=Q.ensure(t).hex();zt.validateAddress(r);const n={query:bS,variables:{owner_address:r,offset:e?.offset,limit:e?.limit}};return this.queryIndexer(n)}async getAccountTokensCount(t){const e=Q.ensure(t).hex();zt.validateAddress(e);const r={query:mS,variables:{owner_address:e}};return this.queryIndexer(r)}async getAccountTransactionsCount(t){const e=Q.ensure(t).hex();zt.validateAddress(e);const r={query:wS,variables:{address:e}};return this.queryIndexer(r)}async getAccountTransactionsData(t,e){const r=Q.ensure(t).hex();zt.validateAddress(r);const n={query:vS,variables:{address:r,offset:e?.offset,limit:e?.limit}};return this.queryIndexer(n)}async getDelegatedStakingActivities(t,e){const r=Q.ensure(t).hex(),n=Q.ensure(e).hex();zt.validateAddress(r),zt.validateAddress(n);const s={query:SS,variables:{delegatorAddress:r,poolAddress:n}};return this.queryIndexer(s)}async getTokenActivitiesCount(t){const e={query:TS,variables:{token_id:t}};return this.queryIndexer(e)}async getTokenData(t){const e={query:PS,variables:{token_id:t}};return this.queryIndexer(e)}async getTokenOwnersData(t,e){const r={query:RS,variables:{token_id:t,property_version:e}};return this.queryIndexer(r)}async getTopUserTransactions(t){const e={query:kS,variables:{limit:t}};return this.queryIndexer(e)}async getUserTransactions(t,e){const r={query:CS,variables:{start_version:t,offset:e?.offset,limit:e?.limit}};return this.queryIndexer(r)}async getCurrentDelegatorBalancesCount(t){const e=Q.ensure(t).hex();zt.validateAddress(e);const r={query:ES,variables:{poolAddress:e}};return this.queryIndexer(r)}},BS={};Oo(BS,{$AccountData:()=>WS,$AccountSignature:()=>VS,$AccountSignature_Ed25519Signature:()=>JS,$AccountSignature_MultiEd25519Signature:()=>XS,$Address:()=>YS,$AptosError:()=>ZS,$AptosErrorCode:()=>QS,$Block:()=>e_,$BlockMetadataTransaction:()=>t_,$DecodedTableData:()=>r_,$DeleteModule:()=>s_,$DeleteResource:()=>i_,$DeleteTableItem:()=>a_,$DeletedTableData:()=>n_,$DirectWriteSet:()=>o_,$Ed25519Signature:()=>c_,$EncodeSubmissionRequest:()=>u_,$EntryFunctionId:()=>f_,$EntryFunctionPayload:()=>d_,$Event:()=>l_,$EventGuid:()=>h_,$GasEstimation:()=>p_,$GenesisPayload:()=>y_,$GenesisPayload_WriteSetPayload:()=>x_,$GenesisTransaction:()=>b_,$HashValue:()=>g_,$HealthCheckSuccess:()=>m_,$HexEncodedBytes:()=>w_,$IdentifierWrapper:()=>v_,$IndexResponse:()=>E_,$ModuleBundlePayload:()=>S_,$MoveAbility:()=>__,$MoveFunction:()=>A_,$MoveFunctionGenericTypeParam:()=>T_,$MoveFunctionVisibility:()=>P_,$MoveModule:()=>R_,$MoveModuleBytecode:()=>k_,$MoveModuleId:()=>C_,$MoveResource:()=>B_,$MoveScriptBytecode:()=>I_,$MoveStruct:()=>O_,$MoveStructField:()=>U_,$MoveStructGenericTypeParam:()=>$_,$MoveStructTag:()=>N_,$MoveStructValue:()=>D_,$MoveType:()=>L_,$MoveValue:()=>M_,$MultiAgentSignature:()=>F_,$MultiEd25519Signature:()=>H_,$MultisigPayload:()=>q_,$MultisigTransactionPayload:()=>z_,$PendingTransaction:()=>K_,$RawTableItemRequest:()=>j_,$RoleType:()=>G_,$ScriptPayload:()=>W_,$ScriptWriteSet:()=>V_,$StateCheckpointTransaction:()=>J_,$StateKeyWrapper:()=>X_,$SubmitTransactionRequest:()=>Y_,$TableItemRequest:()=>Z_,$Transaction:()=>Q_,$TransactionPayload:()=>iA,$TransactionPayload_EntryFunctionPayload:()=>aA,$TransactionPayload_ModuleBundlePayload:()=>oA,$TransactionPayload_MultisigPayload:()=>cA,$TransactionPayload_ScriptPayload:()=>uA,$TransactionSignature:()=>lA,$TransactionSignature_Ed25519Signature:()=>hA,$TransactionSignature_MultiAgentSignature:()=>pA,$TransactionSignature_MultiEd25519Signature:()=>yA,$Transaction_BlockMetadataTransaction:()=>eA,$Transaction_GenesisTransaction:()=>tA,$Transaction_PendingTransaction:()=>rA,$Transaction_StateCheckpointTransaction:()=>nA,$Transaction_UserTransaction:()=>sA,$TransactionsBatchSingleSubmissionFailure:()=>fA,$TransactionsBatchSubmissionResult:()=>dA,$U128:()=>xA,$U256:()=>bA,$U64:()=>gA,$UserTransaction:()=>mA,$VersionedEvent:()=>wA,$ViewRequest:()=>vA,$WriteModule:()=>EA,$WriteResource:()=>SA,$WriteSet:()=>_A,$WriteSetChange:()=>PA,$WriteSetChange_DeleteModule:()=>RA,$WriteSetChange_DeleteResource:()=>kA,$WriteSetChange_DeleteTableItem:()=>CA,$WriteSetChange_WriteModule:()=>BA,$WriteSetChange_WriteResource:()=>IA,$WriteSetChange_WriteTableItem:()=>OA,$WriteSetPayload:()=>UA,$WriteSet_DirectWriteSet:()=>AA,$WriteSet_ScriptWriteSet:()=>TA,$WriteTableItem:()=>$A,AccountsService:()=>Xx,ApiError:()=>Qs,AptosErrorCode:()=>sb,AptosGeneratedClient:()=>nb,BaseHttpRequest:()=>Kx,BlocksService:()=>Yx,CancelError:()=>jx,CancelablePromise:()=>Gx,EventsService:()=>Zx,GeneralService:()=>Qx,MoveFunctionVisibility:()=>ib,OpenAPI:()=>GS,RoleType:()=>ab,TablesService:()=>eb,TransactionsService:()=>tb,ViewService:()=>rb});var Kx=class{constructor(t){this.config=t}},Qs=class extends Error{constructor(t,e,r){super(r),this.name="ApiError",this.url=e.url,this.status=e.status,this.statusText=e.statusText,this.body=e.body,this.request=t}},jx=class extends Error{constructor(t){super(t),this.name="CancelError"}get isCancelled(){return!0}},Gx=class{constructor(t){this._isResolved=!1,this._isRejected=!1,this._isCancelled=!1,this._cancelHandlers=[],this._promise=new Promise((e,r)=>{this._resolve=e,this._reject=r;const n=a=>{var o;this._isResolved||this._isRejected||this._isCancelled||(this._isResolved=!0,(o=this._resolve)==null||o.call(this,a))},s=a=>{var o;this._isResolved||this._isRejected||this._isCancelled||(this._isRejected=!0,(o=this._reject)==null||o.call(this,a))},i=a=>{this._isResolved||this._isRejected||this._isCancelled||this._cancelHandlers.push(a)};return Object.defineProperty(i,"isResolved",{get:()=>this._isResolved}),Object.defineProperty(i,"isRejected",{get:()=>this._isRejected}),Object.defineProperty(i,"isCancelled",{get:()=>this._isCancelled}),t(n,s,i)})}then(t,e){return this._promise.then(t,e)}catch(t){return this._promise.catch(t)}finally(t){return this._promise.finally(t)}cancel(){var t;if(!(this._isResolved||this._isRejected||this._isCancelled)){if(this._isCancelled=!0,this._cancelHandlers.length)try{for(const e of this._cancelHandlers)e()}catch(e){console.warn("Cancellation threw an error",e);return}this._cancelHandlers.length=0,(t=this._reject)==null||t.call(this,new jx("Request aborted"))}}get isCancelled(){return this._isCancelled}},Wx=class{constructor(t=new Map){this.jar=t}setCookie(t,e){var r;const n=t.origin.toLowerCase();this.jar.has(n)||this.jar.set(n,[]);const s=Wx.parse(e);this.jar.set(n,[...((r=this.jar.get(n))==null?void 0:r.filter(i=>i.name!==s.name))||[],s])}getCookies(t){var e;const r=t.origin.toLowerCase();return this.jar.get(r)?((e=this.jar.get(r))==null?void 0:e.filter(n=>!n.expires||n.expires>new Date))||[]:[]}static parse(t){if(typeof t!="string")throw new Error("argument str must be a string");const e=t.split(";").map(n=>n.trim());let r;if(e.length>0){const[n,s]=e[0].split("=");if(!n||!s)throw new Error("Invalid cookie");r={name:n,value:s}}else throw new Error("Invalid cookie");return e.slice(1).forEach(n=>{const[s,i]=n.split("=");if(!s.trim())throw new Error("Invalid cookie");const a=s.toLowerCase(),o=i?.charAt(0)==="'"||i?.charAt(0)==='"'?i?.slice(1,-1):i;if(a==="expires"&&(r.expires=new Date(o)),a==="path"&&(r.path=o),a==="samesite"){if(o!=="Lax"&&o!=="None"&&o!=="Strict")throw new Error("Invalid cookie SameSite value");r.sameSite=o}a==="secure"&&(r.secure=!0)}),r}},Vx=new Wx;Xs.interceptors.response.use(t=>(Array.isArray(t.headers["set-cookie"])&&t.headers["set-cookie"].forEach(e=>{Vx.setCookie(new URL(t.config.url),e)}),t));Xs.interceptors.request.use(function(t){const e=Vx.getCookies(new URL(t.url));return e?.length>0&&t.headers&&(t.headers.cookie=e.map(r=>`${r.name}=${r.value}`).join("; ")),t});var Nd=t=>t!=null,ec=t=>typeof t=="string",Uu=t=>ec(t)&&t!=="",Jx=t=>typeof t=="object"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.arrayBuffer=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),IS=t=>t instanceof Ix,OS=t=>t>=200&&t<300,US=t=>btoa(t),$S=t=>{const e=[],r=(s,i)=>{e.push(`${encodeURIComponent(s)}=${encodeURIComponent(String(i))}`)},n=(s,i)=>{Nd(i)&&(Array.isArray(i)?i.forEach(a=>{n(s,a)}):typeof i=="object"?Object.entries(i).forEach(([a,o])=>{n(`${s}[${a}]`,o)}):r(s,i))};return Object.entries(t).forEach(([s,i])=>{n(s,i)}),e.length>0?`?${e.join("&")}`:""},NS=(t,e)=>{const r=t.ENCODE_PATH||encodeURI,n=e.url.replace("{api-version}",t.VERSION).replace(/{(.*?)}/g,(i,a)=>{var o;return(o=e.path)!=null&&o.hasOwnProperty(a)?r(String(e.path[a])):i}),s=`${t.BASE}${n}`;return e.query?`${s}${$S(e.query)}`:s},DS=t=>{if(t.formData){const e=new Ix,r=(n,s)=>{ec(s)||Jx(s)?e.append(n,s):e.append(n,JSON.stringify(s))};return Object.entries(t.formData).filter(([n,s])=>Nd(s)).forEach(([n,s])=>{Array.isArray(s)?s.forEach(i=>r(n,i)):r(n,s)}),e}},zi=async(t,e)=>typeof e=="function"?e(t):e,LS=async(t,e,r)=>{const n=await zi(e,t.TOKEN),s=await zi(e,t.USERNAME),i=await zi(e,t.PASSWORD),a=await zi(e,t.HEADERS),o=typeof r?.getHeaders=="function"&&r?.getHeaders()||{},c=Object.entries({Accept:"application/json",...a,...e.headers,...o}).filter(([f,u])=>Nd(u)).reduce((f,[u,d])=>({...f,[u]:String(d)}),{});if(Uu(n)&&(c.Authorization=`Bearer ${n}`),Uu(s)&&Uu(i)){const f=US(`${s}:${i}`);c.Authorization=`Basic ${f}`}return e.body&&(e.mediaType?c["Content-Type"]=e.mediaType:Jx(e.body)?c["Content-Type"]=e.body.type||"application/octet-stream":ec(e.body)?c["Content-Type"]="text/plain":IS(e.body)||(c["Content-Type"]="application/json")),c},MS=t=>{if(t.body)return t.body},FS=async(t,e,r,n,s,i,a)=>{const o=Xs.CancelToken.source(),c={url:r,headers:i,data:n??s,method:e.method,withCredentials:t.WITH_CREDENTIALS,cancelToken:o.token};Object.keys(t.HEADERS||{}).filter(u=>u.toLowerCase()==="accept").map(u=>t.HEADERS[u]).includes("application/x-bcs")&&(c.responseType="arraybuffer"),a(()=>o.cancel("The user aborted a request."));try{return await Xs.request(c)}catch(u){const d=u;if(d.response)return d.response;throw u}},HS=(t,e)=>{if(e){const r=t.headers[e];if(ec(r))return r}},qS=t=>{if(t.status!==204)return t.data},zS=(t,e)=>{const n={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...t.errors}[e.status];if(n)throw new Qs(t,e,n);if(!e.ok)throw new Qs(t,e,"Generic Error")},KS=(t,e)=>new Gx(async(r,n,s)=>{try{const i=NS(t,e),a=DS(e),o=MS(e),c=await LS(t,e,a);if(!s.isCancelled){const f=await FS(t,e,i,o,a,c,s),u=qS(f),d=HS(f,e.responseHeader),l={url:i,ok:OS(f.status),status:f.status,statusText:f.statusText,body:d??u};zS(e,l);const x=l.body;try{x.__headers=f.headers}catch{}r(x)}}catch(i){n(i)}}),jS=class extends Kx{constructor(t){super(t)}request(t){return KS(this.config,t)}},Xx=class{constructor(t){this.httpRequest=t}getAccount(t,e){return this.httpRequest.request({method:"GET",url:"/accounts/{address}",path:{address:t},query:{ledger_version:e}})}getAccountResources(t,e,r,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/resources",path:{address:t},query:{ledger_version:e,start:r,limit:n}})}getAccountModules(t,e,r,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/modules",path:{address:t},query:{ledger_version:e,start:r,limit:n}})}getAccountResource(t,e,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/resource/{resource_type}",path:{address:t,resource_type:e},query:{ledger_version:r}})}getAccountModule(t,e,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/module/{module_name}",path:{address:t,module_name:e},query:{ledger_version:r}})}},Yx=class{constructor(t){this.httpRequest=t}getBlockByHeight(t,e){return this.httpRequest.request({method:"GET",url:"/blocks/by_height/{block_height}",path:{block_height:t},query:{with_transactions:e}})}getBlockByVersion(t,e){return this.httpRequest.request({method:"GET",url:"/blocks/by_version/{version}",path:{version:t},query:{with_transactions:e}})}},Zx=class{constructor(t){this.httpRequest=t}getEventsByCreationNumber(t,e,r,n){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/events/{creation_number}",path:{address:t,creation_number:e},query:{start:r,limit:n}})}getEventsByEventHandle(t,e,r,n,s){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/events/{event_handle}/{field_name}",path:{address:t,event_handle:e,field_name:r},query:{start:n,limit:s}})}},Qx=class{constructor(t){this.httpRequest=t}spec(){return this.httpRequest.request({method:"GET",url:"/spec"})}healthy(t){return this.httpRequest.request({method:"GET",url:"/-/healthy",query:{duration_secs:t}})}getLedgerInfo(){return this.httpRequest.request({method:"GET",url:"/"})}},eb=class{constructor(t){this.httpRequest=t}getTableItem(t,e,r){return this.httpRequest.request({method:"POST",url:"/tables/{table_handle}/item",path:{table_handle:t},query:{ledger_version:r},body:e,mediaType:"application/json"})}getRawTableItem(t,e,r){return this.httpRequest.request({method:"POST",url:"/tables/{table_handle}/raw_item",path:{table_handle:t},query:{ledger_version:r},body:e,mediaType:"application/json"})}},tb=class{constructor(t){this.httpRequest=t}getTransactions(t,e){return this.httpRequest.request({method:"GET",url:"/transactions",query:{start:t,limit:e}})}submitTransaction(t){return this.httpRequest.request({method:"POST",url:"/transactions",body:t,mediaType:"application/json"})}getTransactionByHash(t){return this.httpRequest.request({method:"GET",url:"/transactions/by_hash/{txn_hash}",path:{txn_hash:t}})}getTransactionByVersion(t){return this.httpRequest.request({method:"GET",url:"/transactions/by_version/{txn_version}",path:{txn_version:t}})}getAccountTransactions(t,e,r){return this.httpRequest.request({method:"GET",url:"/accounts/{address}/transactions",path:{address:t},query:{start:e,limit:r}})}submitBatchTransactions(t){return this.httpRequest.request({method:"POST",url:"/transactions/batch",body:t,mediaType:"application/json"})}simulateTransaction(t,e,r,n){return this.httpRequest.request({method:"POST",url:"/transactions/simulate",query:{estimate_max_gas_amount:e,estimate_gas_unit_price:r,estimate_prioritized_gas_unit_price:n},body:t,mediaType:"application/json"})}encodeSubmission(t){return this.httpRequest.request({method:"POST",url:"/transactions/encode_submission",body:t,mediaType:"application/json"})}estimateGasPrice(){return this.httpRequest.request({method:"GET",url:"/estimate_gas_price"})}},rb=class{constructor(t){this.httpRequest=t}view(t,e){return this.httpRequest.request({method:"POST",url:"/view",query:{ledger_version:e},body:t,mediaType:"application/json"})}},nb=class{constructor(t,e=jS){var r,n,s,i;this.request=new e({BASE:(r=t?.BASE)!=null?r:"/v1",VERSION:(n=t?.VERSION)!=null?n:"1.2.0",WITH_CREDENTIALS:(s=t?.WITH_CREDENTIALS)!=null?s:!1,CREDENTIALS:(i=t?.CREDENTIALS)!=null?i:"include",TOKEN:t?.TOKEN,USERNAME:t?.USERNAME,PASSWORD:t?.PASSWORD,HEADERS:t?.HEADERS,ENCODE_PATH:t?.ENCODE_PATH}),this.accounts=new Xx(this.request),this.blocks=new Yx(this.request),this.events=new Zx(this.request),this.general=new Qx(this.request),this.tables=new eb(this.request),this.transactions=new tb(this.request),this.view=new rb(this.request)}},GS={BASE:"/v1",VERSION:"1.2.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},sb=(t=>(t.ACCOUNT_NOT_FOUND="account_not_found",t.RESOURCE_NOT_FOUND="resource_not_found",t.MODULE_NOT_FOUND="module_not_found",t.STRUCT_FIELD_NOT_FOUND="struct_field_not_found",t.VERSION_NOT_FOUND="version_not_found",t.TRANSACTION_NOT_FOUND="transaction_not_found",t.TABLE_ITEM_NOT_FOUND="table_item_not_found",t.BLOCK_NOT_FOUND="block_not_found",t.VERSION_PRUNED="version_pruned",t.BLOCK_PRUNED="block_pruned",t.INVALID_INPUT="invalid_input",t.INVALID_TRANSACTION_UPDATE="invalid_transaction_update",t.SEQUENCE_NUMBER_TOO_OLD="sequence_number_too_old",t.VM_ERROR="vm_error",t.HEALTH_CHECK_FAILED="health_check_failed",t.MEMPOOL_IS_FULL="mempool_is_full",t.INTERNAL_ERROR="internal_error",t.WEB_FRAMEWORK_ERROR="web_framework_error",t.BCS_NOT_SUPPORTED="bcs_not_supported",t.API_DISABLED="api_disabled",t))(sb||{}),ib=(t=>(t.PRIVATE="private",t.PUBLIC="public",t.FRIEND="friend",t))(ib||{}),ab=(t=>(t.VALIDATOR="validator",t.FULL_NODE="full_node",t))(ab||{}),WS={description:`Account data

    A simplified version of the onchain Account resource`,properties:{sequence_number:{type:"U64",isRequired:!0},authentication_key:{type:"HexEncodedBytes",isRequired:!0}}},VS={type:"one-of",description:`Account signature scheme

    The account signature scheme allows you to have two types of accounts:

    1. A single Ed25519 key account, one private key
    2. A k-of-n multi-Ed25519 key account, multiple private keys, such that k-of-n must sign a transaction.`,contains:[{type:"AccountSignature_Ed25519Signature"},{type:"AccountSignature_MultiEd25519Signature"}]},JS={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"Ed25519Signature"}]},XS={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiEd25519Signature"}]},YS={type:"string",description:`A hex encoded 32 byte Aptos account address.

    This is represented in a string as a 64 character hex string, sometimes
    shortened by stripping leading 0s, and adding a 0x.

    For example, address 0x0000000000000000000000000000000000000000000000000000000000000001 is represented as 0x1.
    `,format:"hex"},ZS={description:`This is the generic struct we use for all API errors, it contains a string
    message and an Aptos API specific error code.`,properties:{message:{type:"string",description:"A message describing the error",isRequired:!0},error_code:{type:"AptosErrorCode",isRequired:!0},vm_error_code:{type:"number",description:"A code providing VM error details when submitting transactions to the VM",format:"uint64"}}},QS={type:"Enum"},e_={description:`A Block with or without transactions

    This contains the information about a transactions along with
    associated transactions if requested`,properties:{block_height:{type:"U64",isRequired:!0},block_hash:{type:"HashValue",isRequired:!0},block_timestamp:{type:"U64",isRequired:!0},first_version:{type:"U64",isRequired:!0},last_version:{type:"U64",isRequired:!0},transactions:{type:"array",contains:{type:"Transaction"}}}},t_={description:`A block metadata transaction

    This signifies the beginning of a block, and contains information
    about the specific block`,properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},id:{type:"HashValue",isRequired:!0},epoch:{type:"U64",isRequired:!0},round:{type:"U64",isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0},previous_block_votes_bitvec:{type:"array",contains:{type:"number",format:"uint8"},isRequired:!0},proposer:{type:"Address",isRequired:!0},failed_proposer_indices:{type:"array",contains:{type:"number",format:"uint32"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},r_={description:"Decoded table data",properties:{key:{description:"Key of table in JSON",properties:{},isRequired:!0},key_type:{type:"string",description:"Type of key",isRequired:!0},value:{description:"Value of table in JSON",properties:{},isRequired:!0},value_type:{type:"string",description:"Type of value",isRequired:!0}}},n_={description:"Deleted table data",properties:{key:{description:"Deleted key",properties:{},isRequired:!0},key_type:{type:"string",description:"Deleted key type",isRequired:!0}}},s_={description:"Delete a module",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},module:{type:"MoveModuleId",isRequired:!0}}},i_={description:"Delete a resource",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},resource:{type:"MoveStructTag",isRequired:!0}}},a_={description:"Delete a table item",properties:{state_key_hash:{type:"string",isRequired:!0},handle:{type:"HexEncodedBytes",isRequired:!0},key:{type:"HexEncodedBytes",isRequired:!0},data:{type:"DeletedTableData"}}},o_={properties:{changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0}}},c_={description:"A single Ed25519 signature",properties:{public_key:{type:"HexEncodedBytes",isRequired:!0},signature:{type:"HexEncodedBytes",isRequired:!0}}},u_={description:"Request to encode a submission",properties:{sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},secondary_signers:{type:"array",contains:{type:"Address"}}}},f_={type:"string",description:"Entry function id is string representation of a entry function defined on-chain.\n\n    Format: `{address}::{module name}::{function name}`\n\n    Both `module name` and `function name` are case-sensitive.\n    "},d_={description:"Payload which runs a single entry function",properties:{function:{type:"EntryFunctionId",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},l_={description:"An event from a transaction",properties:{guid:{type:"EventGuid",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},type:{type:"MoveType",isRequired:!0},data:{description:"The JSON representation of the event",properties:{},isRequired:!0}}},h_={properties:{creation_number:{type:"U64",isRequired:!0},account_address:{type:"Address",isRequired:!0}}},p_={description:"Struct holding the outputs of the estimate gas API",properties:{deprioritized_gas_estimate:{type:"number",description:"The deprioritized estimate for the gas unit price",format:"uint64"},gas_estimate:{type:"number",description:"The current estimate for the gas unit price",isRequired:!0,format:"uint64"},prioritized_gas_estimate:{type:"number",description:"The prioritized estimate for the gas unit price",format:"uint64"}}},y_={type:"one-of",description:"The writeset payload of the Genesis transaction",contains:[{type:"GenesisPayload_WriteSetPayload"}]},x_={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteSetPayload"}]},b_={description:`The genesis transaction

    This only occurs at the genesis transaction (version 0)`,properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},payload:{type:"GenesisPayload",isRequired:!0},events:{type:"array",contains:{type:"Event"},isRequired:!0}}},g_={type:"string"},m_={description:"Representation of a successful healthcheck",properties:{message:{type:"string",isRequired:!0}}},w_={type:"string",description:"All bytes (Vec<u8>) data is represented as hex-encoded string prefixed with `0x` and fulfilled with\n    two hex digits per byte.\n\n    Unlike the `Address` type, HexEncodedBytes will not trim any zeros.\n    ",format:"hex"},v_={type:"string"},E_={description:`The struct holding all data returned to the client by the
    index endpoint (i.e., GET "/").  Only for responding in JSON`,properties:{chain_id:{type:"number",description:"Chain ID of the current chain",isRequired:!0,format:"uint8"},epoch:{type:"U64",isRequired:!0},ledger_version:{type:"U64",isRequired:!0},oldest_ledger_version:{type:"U64",isRequired:!0},ledger_timestamp:{type:"U64",isRequired:!0},node_role:{type:"RoleType",isRequired:!0},oldest_block_height:{type:"U64",isRequired:!0},block_height:{type:"U64",isRequired:!0},git_hash:{type:"string",description:`Git hash of the build of the API endpoint.  Can be used to determine the exact
            software version used by the API endpoint.`}}},S_={properties:{modules:{type:"array",contains:{type:"MoveModuleBytecode"},isRequired:!0}}},__={type:"string"},A_={description:"Move function",properties:{name:{type:"IdentifierWrapper",isRequired:!0},visibility:{type:"MoveFunctionVisibility",isRequired:!0},is_entry:{type:"boolean",description:"Whether the function can be called as an entry function directly in a transaction",isRequired:!0},is_view:{type:"boolean",description:"Whether the function is a view function or not",isRequired:!0},generic_type_params:{type:"array",contains:{type:"MoveFunctionGenericTypeParam"},isRequired:!0},params:{type:"array",contains:{type:"MoveType"},isRequired:!0},return:{type:"array",contains:{type:"MoveType"},isRequired:!0}}},T_={description:"Move function generic type param",properties:{constraints:{type:"array",contains:{type:"MoveAbility"},isRequired:!0}}},P_={type:"Enum"},R_={description:"A Move module",properties:{address:{type:"Address",isRequired:!0},name:{type:"IdentifierWrapper",isRequired:!0},friends:{type:"array",contains:{type:"MoveModuleId"},isRequired:!0},exposed_functions:{type:"array",contains:{type:"MoveFunction"},isRequired:!0},structs:{type:"array",contains:{type:"MoveStruct"},isRequired:!0}}},k_={description:"Move module bytecode along with it's ABI",properties:{bytecode:{type:"HexEncodedBytes",isRequired:!0},abi:{type:"MoveModule"}}},C_={type:"string",description:`Move module id is a string representation of Move module.

    Format: \`{address}::{module name}\`

    \`address\` should be hex-encoded 32 byte account address that is prefixed with \`0x\`.

    Module name is case-sensitive.
    `},B_={description:"A parsed Move resource",properties:{type:{type:"MoveStructTag",isRequired:!0},data:{type:"MoveStructValue",isRequired:!0}}},I_={description:"Move script bytecode",properties:{bytecode:{type:"HexEncodedBytes",isRequired:!0},abi:{type:"MoveFunction"}}},O_={description:"A move struct",properties:{name:{type:"IdentifierWrapper",isRequired:!0},is_native:{type:"boolean",description:"Whether the struct is a native struct of Move",isRequired:!0},abilities:{type:"array",contains:{type:"MoveAbility"},isRequired:!0},generic_type_params:{type:"array",contains:{type:"MoveStructGenericTypeParam"},isRequired:!0},fields:{type:"array",contains:{type:"MoveStructField"},isRequired:!0}}},U_={description:"Move struct field",properties:{name:{type:"IdentifierWrapper",isRequired:!0},type:{type:"MoveType",isRequired:!0}}},$_={description:"Move generic type param",properties:{constraints:{type:"array",contains:{type:"MoveAbility"},isRequired:!0}}},N_={type:"string",description:"String representation of a MoveStructTag (on-chain Move struct type). This exists so you\n    can specify MoveStructTags as path / query parameters, e.g. for get_events_by_event_handle.\n\n    It is a combination of:\n    1. `move_module_address`, `module_name` and `struct_name`, all joined by `::`\n    2. `struct generic type parameters` joined by `, `\n\n    Examples:\n     * `0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>`\n     * `0x1::account::Account`\n\n    Note:\n    1. Empty chars should be ignored when comparing 2 struct tag ids.\n    2. When used in an URL path, should be encoded by url-encoding (AKA percent-encoding).\n\n    See [doc](https://aptos.dev/concepts/accounts) for more details.\n    ",pattern:"^0x[0-9a-zA-Z:_<>]+$"},D_={description:'This is a JSON representation of some data within an account resource. More specifically,\n    it is a map of strings to arbitrary JSON values / objects, where the keys are top level\n    fields within the given resource.\n\n    To clarify, you might query for 0x1::account::Account and see the example data.\n\n    Move `bool` type value is serialized into `boolean`.\n\n    Move `u8`, `u16` and `u32` type value is serialized into `integer`.\n\n    Move `u64`, `u128` and `u256` type value is serialized into `string`.\n\n    Move `address` type value (32 byte Aptos account address) is serialized into a HexEncodedBytes string.\n    For example:\n    - `0x1`\n    - `0x1668f6be25668c1a17cd8caf6b8d2f25`\n\n    Move `vector` type value is serialized into `array`, except `vector<u8>` which is serialized into a\n    HexEncodedBytes string with `0x` prefix.\n    For example:\n    - `vector<u64>{255, 255}` => `["255", "255"]`\n    - `vector<u8>{255, 255}` => `0xffff`\n\n    Move `struct` type value is serialized into `object` that looks like this (except some Move stdlib types, see the following section):\n    ```json\n    {\n        field1_name: field1_value,\n        field2_name: field2_value,\n        ......\n    }\n    ```\n\n    For example:\n    `{ "created": "0xa550c18", "role_id": "0" }`\n\n     **Special serialization for Move stdlib types**:\n    - [0x1::string::String](https://github.com/aptos-labs/aptos-core/blob/main/language/move-stdlib/docs/ascii.md)\n    is serialized into `string`. For example, struct value `0x1::string::String{bytes: b"Hello World!"}`\n    is serialized as `"Hello World!"` in JSON.\n    ',properties:{}},L_={type:"string",description:`String representation of an on-chain Move type tag that is exposed in transaction payload.
    Values:
    - bool
    - u8
    - u16
    - u32
    - u64
    - u128
    - u256
    - address
    - signer
    - vector: \`vector<{non-reference MoveTypeId}>\`
    - struct: \`{address}::{module_name}::{struct_name}::<{generic types}>\`

    Vector type value examples:
    - \`vector<u8>\`
    - \`vector<vector<u64>>\`
    - \`vector<0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>>\`

    Struct type value examples:
    - \`0x1::coin::CoinStore<0x1::aptos_coin::AptosCoin>
    - \`0x1::account::Account\`

    Note:
    1. Empty chars should be ignored when comparing 2 struct tag ids.
    2. When used in an URL path, should be encoded by url-encoding (AKA percent-encoding).
    `,pattern:"^(bool|u8|u64|u128|address|signer|vector<.+>|0x[0-9a-zA-Z:_<, >]+)$"},M_={type:"any-of",description:"An enum of the possible Move value types",contains:[{type:"number",format:"uint8"},{type:"number",format:"uint16"},{type:"number",format:"uint32"},{type:"U64"},{type:"U128"},{type:"U256"},{type:"boolean"},{type:"Address"},{type:"array",contains:{type:"MoveValue"}},{type:"HexEncodedBytes"},{type:"MoveStructValue"},{type:"string"}]},F_={description:`Multi agent signature for multi agent transactions

    This allows you to have transactions across multiple accounts`,properties:{sender:{type:"AccountSignature",isRequired:!0},secondary_signer_addresses:{type:"array",contains:{type:"Address"},isRequired:!0},secondary_signers:{type:"array",contains:{type:"AccountSignature"},isRequired:!0}}},H_={description:`A Ed25519 multi-sig signature

    This allows k-of-n signing for a transaction`,properties:{public_keys:{type:"array",contains:{type:"HexEncodedBytes"},isRequired:!0},signatures:{type:"array",contains:{type:"HexEncodedBytes"},isRequired:!0},threshold:{type:"number",description:"The number of signatures required for a successful transaction",isRequired:!0,format:"uint8"},bitmap:{type:"HexEncodedBytes",isRequired:!0}}},q_={description:`A multisig transaction that allows an owner of a multisig account to execute a pre-approved
    transaction as the multisig account.`,properties:{multisig_address:{type:"Address",isRequired:!0},transaction_payload:{type:"MultisigTransactionPayload"}}},z_={type:"any-of",contains:[{type:"EntryFunctionPayload"}]},K_={description:"A transaction waiting in mempool",properties:{hash:{type:"HashValue",isRequired:!0},sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature"}}},j_={description:"Table Item request for the GetTableItemRaw API",properties:{key:{type:"HexEncodedBytes",isRequired:!0}}},G_={type:"Enum"},W_={description:"Payload which runs a script that can run multiple functions",properties:{code:{type:"MoveScriptBytecode",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},V_={properties:{execute_as:{type:"Address",isRequired:!0},script:{type:"ScriptPayload",isRequired:!0}}},J_={description:"A state checkpoint transaction",properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},X_={type:"string",description:`Representation of a StateKey as a hex string. This is used for cursor based pagination.
    `},Y_={description:`A request to submit a transaction

    This requires a transaction and a signature of it`,properties:{sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature",isRequired:!0}}},Z_={description:"Table Item request for the GetTableItem API",properties:{key_type:{type:"MoveType",isRequired:!0},value_type:{type:"MoveType",isRequired:!0},key:{description:"The value of the table item's key",properties:{},isRequired:!0}}},Q_={type:"one-of",description:"Enum of the different types of transactions in Aptos",contains:[{type:"Transaction_PendingTransaction"},{type:"Transaction_UserTransaction"},{type:"Transaction_GenesisTransaction"},{type:"Transaction_BlockMetadataTransaction"},{type:"Transaction_StateCheckpointTransaction"}]},eA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"BlockMetadataTransaction"}]},tA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"GenesisTransaction"}]},rA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"PendingTransaction"}]},nA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"StateCheckpointTransaction"}]},sA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"UserTransaction"}]},iA={type:"one-of",description:"An enum of the possible transaction payloads",contains:[{type:"TransactionPayload_EntryFunctionPayload"},{type:"TransactionPayload_ScriptPayload"},{type:"TransactionPayload_ModuleBundlePayload"},{type:"TransactionPayload_MultisigPayload"}]},aA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"EntryFunctionPayload"}]},oA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ModuleBundlePayload"}]},cA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultisigPayload"}]},uA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ScriptPayload"}]},fA={description:"Information telling which batch submission transactions failed",properties:{error:{type:"AptosError",isRequired:!0},transaction_index:{type:"number",description:"The index of which transaction failed, same as submission order",isRequired:!0,format:"uint64"}}},dA={description:`Batch transaction submission result

    Tells which transactions failed`,properties:{transaction_failures:{type:"array",contains:{type:"TransactionsBatchSingleSubmissionFailure"},isRequired:!0}}},lA={type:"one-of",description:"An enum representing the different transaction signatures available",contains:[{type:"TransactionSignature_Ed25519Signature"},{type:"TransactionSignature_MultiEd25519Signature"},{type:"TransactionSignature_MultiAgentSignature"}]},hA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"Ed25519Signature"}]},pA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiAgentSignature"}]},yA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"MultiEd25519Signature"}]},xA={type:"string",description:`A string containing a 128-bit unsigned integer.

    We represent u128 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u128s in JSON natively.
    `,format:"uint128"},bA={type:"string",description:`A string containing a 256-bit unsigned integer.

    We represent u256 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u256s in JSON natively.
    `,format:"uint256"},gA={type:"string",description:`A string containing a 64-bit unsigned integer.

    We represent u64 values as a string to ensure compatibility with languages such
    as JavaScript that do not parse u64s in JSON natively.
    `,format:"uint64"},mA={description:"A transaction submitted by a user to change the state of the blockchain",properties:{version:{type:"U64",isRequired:!0},hash:{type:"HashValue",isRequired:!0},state_change_hash:{type:"HashValue",isRequired:!0},event_root_hash:{type:"HashValue",isRequired:!0},state_checkpoint_hash:{type:"HashValue"},gas_used:{type:"U64",isRequired:!0},success:{type:"boolean",description:"Whether the transaction was successful",isRequired:!0},vm_status:{type:"string",description:"The VM status of the transaction, can tell useful information in a failure",isRequired:!0},accumulator_root_hash:{type:"HashValue",isRequired:!0},changes:{type:"array",contains:{type:"WriteSetChange"},isRequired:!0},sender:{type:"Address",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},max_gas_amount:{type:"U64",isRequired:!0},gas_unit_price:{type:"U64",isRequired:!0},expiration_timestamp_secs:{type:"U64",isRequired:!0},payload:{type:"TransactionPayload",isRequired:!0},signature:{type:"TransactionSignature"},events:{type:"array",contains:{type:"Event"},isRequired:!0},timestamp:{type:"U64",isRequired:!0}}},wA={description:"An event from a transaction with a version",properties:{version:{type:"U64",isRequired:!0},guid:{type:"EventGuid",isRequired:!0},sequence_number:{type:"U64",isRequired:!0},type:{type:"MoveType",isRequired:!0},data:{description:"The JSON representation of the event",properties:{},isRequired:!0}}},vA={description:"View request for the Move View Function API",properties:{function:{type:"EntryFunctionId",isRequired:!0},type_arguments:{type:"array",contains:{type:"MoveType"},isRequired:!0},arguments:{type:"array",contains:{properties:{}},isRequired:!0}}},EA={description:"Write a new module or update an existing one",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},data:{type:"MoveModuleBytecode",isRequired:!0}}},SA={description:"Write a resource or update an existing one",properties:{address:{type:"Address",isRequired:!0},state_key_hash:{type:"string",description:"State key hash",isRequired:!0},data:{type:"MoveResource",isRequired:!0}}},_A={type:"one-of",description:"The associated writeset with a payload",contains:[{type:"WriteSet_ScriptWriteSet"},{type:"WriteSet_DirectWriteSet"}]},AA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DirectWriteSet"}]},TA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"ScriptWriteSet"}]},PA={type:"one-of",description:"A final state change of a transaction on a resource or module",contains:[{type:"WriteSetChange_DeleteModule"},{type:"WriteSetChange_DeleteResource"},{type:"WriteSetChange_DeleteTableItem"},{type:"WriteSetChange_WriteModule"},{type:"WriteSetChange_WriteResource"},{type:"WriteSetChange_WriteTableItem"}]},RA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteModule"}]},kA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteResource"}]},CA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"DeleteTableItem"}]},BA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteModule"}]},IA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteResource"}]},OA={type:"all-of",contains:[{properties:{type:{type:"string",isRequired:!0}}},{type:"WriteTableItem"}]},UA={description:"A writeset payload, used only for genesis",properties:{write_set:{type:"WriteSet",isRequired:!0}}},$A={description:"Change set to write a table item",properties:{state_key_hash:{type:"string",isRequired:!0},handle:{type:"HexEncodedBytes",isRequired:!0},key:{type:"HexEncodedBytes",isRequired:!0},value:{type:"HexEncodedBytes",isRequired:!0},data:{type:"DecodedTableData"}}};function tc(t,e,r){if(!e?.includes(typeof t))throw new Error(r||`Invalid arg: ${t} type should be ${e instanceof Array?e.join(" or "):e}`)}function ob(t){if(tc(t,["boolean","string"]),typeof t=="boolean")return t;if(t==="true")return!0;if(t==="false")return!1;throw new Error("Invalid boolean string.")}function Un(t){if(tc(t,["number","string"]),typeof t=="number")return t;const e=Number.parseInt(t,10);if(Number.isNaN(e))throw new Error("Invalid number string.");return e}function $n(t){return tc(t,["number","bigint","string"]),BigInt(t)}function cb(t,e,r){if(e instanceof dn){r.serializeBool(ob(t));return}if(e instanceof xr){r.serializeU8(Un(t));return}if(e instanceof cs){r.serializeU16(Un(t));return}if(e instanceof us){r.serializeU32(Un(t));return}if(e instanceof ln){r.serializeU64($n(t));return}if(e instanceof hn){r.serializeU128($n(t));return}if(e instanceof fs){r.serializeU256($n(t));return}if(e instanceof Lr){let n;if(typeof t=="string"||t instanceof Q)n=Pe.fromHex(t);else if(t instanceof Pe)n=t;else throw new Error("Invalid account address.");n.serialize(r);return}if(e instanceof ds){if(e.value instanceof xr){if(t instanceof Uint8Array){r.serializeBytes(t);return}if(typeof t=="string"){r.serializeStr(t);return}}if(!Array.isArray(t))throw new Error("Invalid vector args.");r.serializeU32AsUleb128(t.length),t.forEach(n=>cb(n,e.value,r));return}if(e instanceof pn){const{address:n,module_name:s,name:i}=e.value;if(`${Q.fromUint8Array(n.address).toShortString()}::${s.value}::${i.value}`!="0x1::string::String")throw new Error("The only supported struct arg is of type 0x1::string::String");tc(t,["string"]),r.serializeStr(t);return}throw new Error("Unsupported arg type.")}function NA(t,e){if(e instanceof dn)return new Yo(ob(t));if(e instanceof xr)return new zo(Un(t));if(e instanceof cs)return new Ko(Un(t));if(e instanceof us)return new jo(Un(t));if(e instanceof ln)return new Go($n(t));if(e instanceof hn)return new Wo($n(t));if(e instanceof fs)return new Vo($n(t));if(e instanceof Lr){let r;if(typeof t=="string"||t instanceof Q)r=Pe.fromHex(t);else if(t instanceof Pe)r=t;else throw new Error("Invalid account address.");return new Jo(r)}if(e instanceof ds&&e.value instanceof xr){if(!(t instanceof Uint8Array))throw new Error(`${t} should be an instance of Uint8Array`);return new Xo(t)}throw new Error("Unknown type for TransactionArgument.")}var DA="APTOS::RawTransaction",LA="APTOS::RawTransactionWithData",Na=class{constructor(t,e){this.rawTxnBuilder=e,this.signingFunction=t}build(t,e,r){if(!this.rawTxnBuilder)throw new Error("this.rawTxnBuilder doesn't exist.");return this.rawTxnBuilder.build(t,e,r)}static getSigningMessage(t){const e=Kn.create();if(t instanceof hs)e.update(DA);else if(t instanceof Mo)e.update(LA);else throw new Error("Unknown transaction type.");const r=e.digest(),n=qr(t),s=new Uint8Array(r.length+n.length);return s.set(r),s.set(n,r.length),s}},la=class extends Na{constructor(t,e,r){super(t,r),this.publicKey=e}rawToSigned(t){const e=Na.getSigningMessage(t),r=this.signingFunction(e),n=new No(new St(this.publicKey),r);return new Ai(t,n)}sign(t){return qr(this.rawToSigned(t))}},MA=class extends Na{constructor(t,e){super(t),this.publicKey=e}rawToSigned(t){const e=Na.getSigningMessage(t),r=this.signingFunction(e),n=new Do(this.publicKey,r);return new Ai(t,n)}sign(t){return qr(this.rawToSigned(t))}},gf=class{constructor(t,e){this.abiMap=new Map,t.forEach(r=>{const n=new Pd(r),s=Zo.deserialize(n);let i;if(s instanceof Vn){const a=s,{address:o,name:c}=a.module_name;i=`${Q.fromUint8Array(o.address).toShortString()}::${c.value}::${a.name}`}else i=s.name;if(this.abiMap.has(i))throw new Error("Found conflicting ABI interfaces");this.abiMap.set(i,s)}),this.builderConfig={maxGasAmount:BigInt($x),expSecFromNow:Nx,...e}}static toBCSArgs(t,e){if(t.length!==e.length)throw new Error("Wrong number of args provided.");return e.map((r,n)=>{const s=new Be;return cb(r,t[n].type_tag,s),s.getBytes()})}static toTransactionArguments(t,e){if(t.length!==e.length)throw new Error("Wrong number of args provided.");return e.map((r,n)=>NA(r,t[n].type_tag))}setSequenceNumber(t){this.builderConfig.sequenceNumber=BigInt(t)}buildTransactionPayload(t,e,r){const n=e.map(a=>new ls(a).parseTypeTag());let s;if(!this.abiMap.has(t))throw new Error(`Cannot find function: ${t}`);const i=this.abiMap.get(t);if(i instanceof Vn){const a=i,o=gf.toBCSArgs(a.args,r);s=new Ho(new Jr(a.module_name,new rt(a.name),n,o))}else if(i instanceof Qo){const a=i,o=gf.toTransactionArguments(a.args,r);s=new Fo(new Lo(a.code,n,o))}else throw new Error("Unknown ABI format.");return s}build(t,e,r){const{sender:n,sequenceNumber:s,gasUnitPrice:i,maxGasAmount:a,expSecFromNow:o,chainId:c}=this.builderConfig;if(!i)throw new Error("No gasUnitPrice provided.");const f=n instanceof Pe?n:Pe.fromHex(n),u=BigInt(Math.floor(Date.now()/1e3)+Number(o)),d=this.buildTransactionPayload(t,e,r);if(d)return new hs(f,BigInt(s),d,BigInt(a),BigInt(i),u,new qo(Number(c)));throw new Error("Invalid ABI.")}},Dd=class{constructor(t,e){this.aptosClient=t,this.builderConfig=e}async fetchABI(t){const r=(await this.aptosClient.getAccountModules(t)).map(s=>s.abi).flatMap(s=>s.exposed_functions.filter(i=>i.is_entry).map(i=>({fullName:`${s.address}::${s.name}::${i.name}`,...i}))),n=new Map;return r.forEach(s=>{n.set(s.fullName,s)}),n}async build(t,e,r){if(t=(v=>v.replace(/^0[xX]0*/g,"0x"))(t),t.split("::").length!==3)throw new Error("'func' needs to be a fully qualified function name in format <address>::<module>::<function>, e.g. 0x1::coins::transfer");const[i,a]=t.split("::"),o=await this.fetchABI(i);if(!o.has(t))throw new Error(`${t} doesn't exist.`);const c=o.get(t),u=c.params.filter(v=>v!=="signer"&&v!=="&signer").map((v,E)=>new Ri(`var${E}`,new ls(v,e).parseTypeTag())),d=new Vn(c.name,rn.fromStr(`${i}::${a}`),"",c.generic_type_params.map((v,E)=>new Pi(`${E}`)),u),{sender:l,...x}=this.builderConfig,p=l instanceof Pe?Q.fromUint8Array(l.address):l,[{sequence_number:h},y,{gas_estimate:b}]=await Promise.all([x?.sequenceNumber?Promise.resolve({sequence_number:x?.sequenceNumber}):this.aptosClient.getAccount(p),x?.chainId?Promise.resolve(x?.chainId):this.aptosClient.getChainId(),x?.gasUnitPrice?Promise.resolve({gas_estimate:x?.gasUnitPrice}):this.aptosClient.estimateGasPrice()]);return new gf([qr(d)],{sender:l,sequenceNumber:h,chainId:y,gasUnitPrice:BigInt(b),...x}).build(t,e,r)}};we([W5(10*60*1e3)],Dd.prototype,"fetchABI",1);var Rs=class{constructor(t,e,r=!1){if(!t)throw new Error("Node URL cannot be empty.");const n=e==null?{}:{...e};r?this.nodeUrl=t:this.nodeUrl=K5(t),n.BASE=this.nodeUrl,e?.WITH_CREDENTIALS===!1?n.WITH_CREDENTIALS=!1:n.WITH_CREDENTIALS=!0,this.client=new nb(n)}async getAccount(t){return this.client.accounts.getAccount(Q.ensure(t).hex())}async getAccountTransactions(t,e){var r;return this.client.transactions.getAccountTransactions(Q.ensure(t).hex(),(r=e?.start)==null?void 0:r.toString(),e?.limit)}async getAccountModules(t,e){const r=this.client.accounts.getAccountModules.bind({httpRequest:this.client.request});return await Dh(r,t,1e3,e)}async getAccountModule(t,e,r){var n;return this.client.accounts.getAccountModule(Q.ensure(t).hex(),e,(n=r?.ledgerVersion)==null?void 0:n.toString())}async getAccountResources(t,e){const r=this.client.accounts.getAccountResources.bind({httpRequest:this.client.request});return await Dh(r,t,9999,e)}async getAccountResource(t,e,r){var n;return this.client.accounts.getAccountResource(Q.ensure(t).hex(),e,(n=r?.ledgerVersion)==null?void 0:n.toString())}static generateBCSTransaction(t,e){return new la(n=>{const s=t.signBuffer(n);return new De.Ed25519Signature(s.toUint8Array())},t.pubKey().toUint8Array()).sign(e)}static generateBCSSimulation(t,e){return new la(n=>{const s=new Uint8Array(64);return new De.Ed25519Signature(s)},t.pubKey().toUint8Array()).sign(e)}async generateTransaction(t,e,r){const n={sender:t};if(r?.sequence_number&&(n.sequenceNumber=r.sequence_number),r?.gas_unit_price&&(n.gasUnitPrice=r.gas_unit_price),r?.max_gas_amount&&(n.maxGasAmount=r.max_gas_amount),r?.expiration_timestamp_secs){const i=Number.parseInt(r.expiration_timestamp_secs,10);n.expSecFromNow=i-Math.floor(Date.now()/1e3)}return new Dd(this,n).build(e.function,e.type_arguments,e.arguments)}async signTransaction(t,e){return Promise.resolve(Rs.generateBCSTransaction(t,e))}async getEventsByCreationNumber(t,e,r){var n;return this.client.events.getEventsByCreationNumber(Q.ensure(t).hex(),e.toString(),(n=r?.start)==null?void 0:n.toString(),r?.limit)}async getEventsByEventHandle(t,e,r,n){var s;return this.client.events.getEventsByEventHandle(Q.ensure(t).hex(),e,r,(s=n?.start)==null?void 0:s.toString(),n?.limit)}async submitTransaction(t){return this.submitSignedBCSTransaction(t)}async simulateTransaction(t,e,r){let n;return t instanceof bf?n=Rs.generateBCSSimulation(t,e):t instanceof Si?n=new MA(()=>{const{threshold:i}=t,a=[],o=[];for(let f=0;f<i;f+=1)a.push(f),o.push(new De.Ed25519Signature(new Uint8Array(64)));const c=De.MultiEd25519Signature.createBitmap(a);return new De.MultiEd25519Signature(o,c)},t).sign(e):n=new la(()=>{const i=new Uint8Array(64);return new De.Ed25519Signature(i)},t.toBytes()).sign(e),this.submitBCSSimulation(n,r)}async submitSignedBCSTransaction(t){return this.client.request.request({url:"/transactions",method:"POST",body:t,mediaType:"application/x.aptos.signed_transaction+bcs"})}async submitBCSSimulation(t,e){var r,n,s;const i={estimate_gas_unit_price:(r=e?.estimateGasUnitPrice)!=null?r:!1,estimate_max_gas_amount:(n=e?.estimateMaxGasAmount)!=null?n:!1,estimate_prioritized_gas_unit_price:(s=e?.estimatePrioritizedGasUnitPrice)!=null?s:!1};return this.client.request.request({url:"/transactions/simulate",query:i,method:"POST",body:t,mediaType:"application/x.aptos.signed_transaction+bcs"})}async getTransactions(t){var e;return this.client.transactions.getTransactions((e=t?.start)==null?void 0:e.toString(),t?.limit)}async getTransactionByHash(t){return this.client.transactions.getTransactionByHash(t)}async getTransactionByVersion(t){return this.client.transactions.getTransactionByVersion(t.toString())}async transactionPending(t){try{return(await this.client.transactions.getTransactionByHash(t)).type==="pending_transaction"}catch(e){if(e?.status===404)return!0;throw e}}async waitForTransactionWithResult(t,e){var r,n;const s=(r=e?.timeoutSecs)!=null?r:j5,i=(n=e?.checkSuccess)!=null?n:!1;let a=!0,o=0,c;for(;a&&!(o>=s);){try{if(c=await this.client.transactions.getTransactionByHash(t),a=c.type==="pending_transaction",!a)break}catch(f){const u=f instanceof Qs,d=u&&f.status!==404&&f.status>=400&&f.status<500;if(!u||d)throw f}await z5(1e3),o+=1}if(c===void 0)throw new Error(`Waiting for transaction ${t} failed`);if(a)throw new HA(`Waiting for transaction ${t} timed out after ${s} seconds`,c);if(!i)return c;if(!c?.success)throw new qA(`Transaction ${t} committed to the blockchain but execution failed`,c);return c}async waitForTransaction(t,e){await this.waitForTransactionWithResult(t,e)}async getLedgerInfo(){return this.client.general.getLedgerInfo()}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getTableItem(t,e,r){var n;return await this.client.tables.getTableItem(t,e,(n=r?.ledgerVersion)==null?void 0:n.toString())}async generateRawTransaction(t,e,r){const[{sequence_number:n},s,{gas_estimate:i}]=await Promise.all([this.getAccount(t),this.getChainId(),r?.gasUnitPrice?Promise.resolve({gas_estimate:r.gasUnitPrice}):this.estimateGasPrice()]),{maxGasAmount:a,gasUnitPrice:o,expireTimestamp:c}={maxGasAmount:BigInt($x),gasUnitPrice:BigInt(i),expireTimestamp:BigInt(Math.floor(Date.now()/1e3)+Nx),...r};return new De.RawTransaction(De.AccountAddress.fromHex(t),BigInt(n),e,a,o,c,new De.ChainId(s))}async generateSignSubmitTransaction(t,e,r){const n=await this.generateRawTransaction(t.address(),e,r),s=Rs.generateBCSTransaction(t,n);return(await this.submitSignedBCSTransaction(s)).hash}async publishPackage(t,e,r,n){const s=new Be;pt(r,s);const i=new De.TransactionPayloadEntryFunction(De.EntryFunction.natural("0x1::code","publish_package_txn",[],[Pn(e),s.getBytes()]));return this.generateSignSubmitTransaction(t,i,n)}async generateSignSubmitWaitForTransaction(t,e,r){const n=await this.generateSignSubmitTransaction(t,e,r);return this.waitForTransactionWithResult(n,r)}async estimateGasPrice(){return this.client.transactions.estimateGasPrice()}async estimateMaxGasAmount(t){const e=`0x1::coin::CoinStore<${G5}>`,[{gas_estimate:r},n]=await Promise.all([this.estimateGasPrice(),this.getAccountResources(t)]),s=n.find(a=>a.type===e);return BigInt(s.data.coin.value)/BigInt(r)}async rotateAuthKeyEd25519(t,e,r){const{sequence_number:n,authentication_key:s}=await this.getAccount(t.address()),i=new bf(e),a=new De.RotationProofChallenge(De.AccountAddress.CORE_CODE_ADDRESS,"account","RotationProofChallenge",BigInt(n),De.AccountAddress.fromHex(t.address()),new De.AccountAddress(new Q(s).toUint8Array()),i.pubKey().toUint8Array()),o=Q.fromUint8Array(qr(a)),c=t.signHexString(o),f=i.signHexString(o),u=new De.TransactionPayloadEntryFunction(De.EntryFunction.natural("0x1::account","rotate_authentication_key",[],[yf(0),Pn(t.pubKey().toUint8Array()),yf(0),Pn(i.pubKey().toUint8Array()),Pn(c.toUint8Array()),Pn(f.toUint8Array())])),d=await this.generateRawTransaction(t.address(),u,r),l=Rs.generateBCSTransaction(t,d);return this.submitSignedBCSTransaction(l)}async lookupOriginalAddress(t){const e=await this.getAccountResource("0x1","0x1::account::OriginatingAddress"),{address_map:{handle:r}}=e.data,n=await this.getTableItem(r,{key_type:"address",value_type:"address",key:Q.ensure(t).hex()});return new Q(n)}async getBlockByHeight(t,e){return this.client.blocks.getBlockByHeight(t,e)}async getBlockByVersion(t,e){return this.client.blocks.getBlockByVersion(t,e)}async view(t,e){return this.client.view.view(t,e)}clearCache(t){V5(t)}},_e=Rs;we([Ne],_e.prototype,"getAccount",1);we([Ne],_e.prototype,"getAccountTransactions",1);we([Ne],_e.prototype,"getAccountModules",1);we([Ne],_e.prototype,"getAccountModule",1);we([Ne],_e.prototype,"getAccountResources",1);we([Ne],_e.prototype,"getAccountResource",1);we([Ne],_e.prototype,"getEventsByCreationNumber",1);we([Ne],_e.prototype,"getEventsByEventHandle",1);we([Ne],_e.prototype,"submitSignedBCSTransaction",1);we([Ne],_e.prototype,"submitBCSSimulation",1);we([Ne],_e.prototype,"getTransactions",1);we([Ne],_e.prototype,"getTransactionByHash",1);we([Ne],_e.prototype,"getTransactionByVersion",1);we([Ne],_e.prototype,"getLedgerInfo",1);we([Uo()],_e.prototype,"getChainId",1);we([Ne],_e.prototype,"getTableItem",1);we([Ne,Uo({ttlMs:5*60*1e3,tags:["gas_estimates"]})],_e.prototype,"estimateGasPrice",1);we([Ne],_e.prototype,"estimateMaxGasAmount",1);we([Ne],_e.prototype,"getBlockByHeight",1);we([Ne],_e.prototype,"getBlockByVersion",1);we([Ne],_e.prototype,"view",1);var FA=class extends Error{constructor(t,e,r,n){super(e),this.status=t,this.message=e,this.errorCode=r,this.vmErrorCode=n}},HA=class extends Error{constructor(t,e){super(t),this.lastSubmittedTransaction=e}},qA=class extends Error{constructor(t,e){super(t),this.transaction=e}};function Ne(t,e,r){const n=r.value;return r.value=async function(...i){var a,o;try{return await n.apply(this,[...i])}catch(c){throw c instanceof Qs?new FA(c.status,JSON.stringify({message:c.message,...c.body}),(a=c.body)==null?void 0:a.error_code,(o=c.body)==null?void 0:o.vm_error_code):c}},r}var ub=class{constructor(t,e,r=!1){let n=null,s=null;if(typeof t=="object"&&zA(t)?(n=t.fullnodeUrl,s=t.indexerUrl,this.network="CUSTOM"):(n=X5[t],s=J5[t],this.network=t),!n||!s)throw new Error("network is not provided");this.aptosClient=new _e(n,e,r),this.indexerClient=new zt(s)}};function fb(t,e,r){Object.getOwnPropertyNames(e.prototype).forEach(n=>{const s=Object.getOwnPropertyDescriptor(e.prototype,n);!s||(s.value=function(...i){return this[r][n](...i)},Object.defineProperty(t.prototype,n,s))})}fb(ub,_e,"aptosClient");fb(ub,zt,"indexerClient");function zA(t){return t.fullnodeUrl!==void 0&&typeof t.fullnodeUrl=="string"&&t.indexerUrl!==void 0&&typeof t.indexerUrl=="string"}var db=class{constructor(t,e){this.type=t,this.value=e}},lb=class{constructor(){this.data={}}setProperty(t,e){this.data[t]=e}};function KA(t){let e;return t==="string"||t==="String"?e=new pn(Mx):e=new ls(t).parseTypeTag(),e}function hb(t){const e=t.map.data,r=new lb;return e.forEach(n=>{const{key:s}=n,i=n.value.value,a=n.value.type,o=KA(a),c=jA(o,i),f=new db(a,c);r.setProperty(s,f)}),r}function jA(t,e){const r=new Pd(new Q(e).toUint8Array());let n="";return t instanceof xr?n=r.deserializeU8().toString():t instanceof ln?n=r.deserializeU64().toString():t instanceof hn?n=r.deserializeU128().toString():t instanceof dn?n=r.deserializeBool()?"true":"false":t instanceof Lr?n=Q.fromUint8Array(r.deserializeFixedBytes(32)).hex():t instanceof pn&&t.isStringTypeTag()?n=r.deserializeStr():n=e,n}var GA={};Oo(GA,{PropertyMap:()=>lb,PropertyValue:()=>db,Token:()=>VA,TokenData:()=>WA});var WA=class{constructor(t,e,r,n,s,i,a,o){this.collection=t,this.description=e,this.name=r,this.maximum=n,this.supply=s,this.uri=i,this.default_properties=hb(a),this.mutability_config=o}},VA=class{constructor(t,e,r){this.id=t,this.amount=e,this.token_properties=hb(r)}};class JA extends co{signerInstance;_publicKey;constructor(e){super(e),this.base=["aptom",1e8]}async getProvider(){return this.providerInstance??=new _e(this.providerUrl)}async getTx(e){const n=await(await this.getProvider()).waitForTransactionWithResult(e,{timeoutSecs:1,checkSuccess:!0}),s=n?.payload;if(!n.success)throw new Error(n?.vm_status??"Unknown Aptos error");if(!(s?.function==="0x1::coin::transfer"&&s?.type_arguments[0]==="0x1::aptos_coin::AptosCoin"&&n?.vm_status==="Executed successfully"))throw new Error(`Aptos tx ${e} failed validation`);const i=n.type==="pending_transaction";return{to:s.arguments[0],from:n.sender,amount:new X(s.arguments[1]),pending:i,confirmed:!i}}ownerToAddress(e){const r=Wh.sha3_256.create();return r.update(k.Buffer.from(e)),r.update("\0"),`0x${r.hex()}`}async sign(e){return await this.getSigner().sign(e)}getSigner(){return this.signerInstance??=new Aa(this.wallet,this._publicKey)}async verify(e,r,n){return await Aa.verify(e,r,n)}async getCurrentHeight(){return new X((await(await this.getProvider()).client.blocks.httpRequest.request({method:"GET",url:"/"})).block_height)}async getFee(e,r){const n=await this.getProvider();if(!this.address)throw new Error("Address is undefined - you might be missing a wallet, or have not run Irys.ready()");const i=await new Dd(n,{sender:this.address}).build("0x1::coin::transfer",["0x1::aptos_coin::AptosCoin"],[r??"0x149f7dc9c8e43c14ab46d3a6b62cfe84d67668f764277411f98732bf6718acf9",new X(e).toNumber()]),o=new la(u=>{const d=new Uint8Array(64);return new De.Ed25519Signature(d)},await this.getPublicKey()).sign(i),c={estimate_gas_unit_price:!0,estimate_max_gas_amount:!0},f=await n.client.request.request({url:"/transactions/simulate",query:c,method:"POST",body:o,mediaType:"application/x.aptos.signed_transaction+bcs"});return{gasUnitPrice:+f[0].gas_unit_price,maxGasAmount:+f[0].max_gas_amount}}async sendTx(e){return(await this.wallet.signAndSubmitTransaction(e)).hash}async createTx(e,r,n){const s={arguments:[r,new X(e).toNumber()],function:"0x1::coin::transfer",type:"entry_function_payload",type_arguments:["0x1::aptos_coin::AptosCoin"]};return{txId:void 0,tx:s}}async getPublicKey(){return this._publicKey??=k.Buffer.from((await this.wallet.account()).publicKey.toString().slice(2),"hex")}async ready(){this._publicKey=await this.getPublicKey(),this._address=this.ownerToAddress(this._publicKey);const e=await this.getProvider();this._address=await e.lookupOriginalAddress(this.address??"").then(r=>r.toString()).catch(r=>this._address),this._address?.length==66&&this._address.charAt(2)==="0"&&(this._address=this._address.slice(0,2)+this._address.slice(3))}}class XA extends uo{}class YA extends uo{async createTx(e,r,n){const s=this.w3signer,i={to:r,from:this.address,value:e.toString(),gasLimit:BigInt(0)},a=await this.provider.estimateGas(i);return i.gasLimit=a,{tx:await s.populateTransaction(i),txId:void 0}}async getTx(e){const n=await this.provider.getTransaction(e);if(!n)throw new Error("Tx doesn't exist");if(!n.to)throw new Error(`Unable to resolve transactions ${e} receiver`);return{from:n.from,to:n.to,blockHeight:n.blockNumber?new X(n.blockNumber):void 0,amount:new X(n.value.toString()),pending:!n.blockNumber,confirmed:await n.confirmations()>=this.minConfirm}}async ready(){const e=this.wallet;this.provider=e;const r=await e.getSigner();r._signTypedData=async(n,s,i)=>r.signTypedData(n,s,i),e.getSigner=()=>r,this.wallet=e,await super.ready()}}function ZA(t){switch(t.token){case"ethereum":return Sn("ethereum",t.providerName,{irys:t.irys,name:"ethereum",ticker:"ETH",providerUrl:t.providerUrl??"https://cloudflare-eth.com/",wallet:t.wallet});case"matic":return Sn("ethereum",t.providerName,{irys:t.irys,name:"matic",ticker:"MATIC",providerUrl:t.providerUrl??"https://polygon-rpc.com",wallet:t.wallet,minConfirm:1});case"arbitrum":return Sn("ethereum",t.providerName,{irys:t.irys,name:"arbitrum",ticker:"ETH",providerUrl:t.providerUrl??"https://arb1.arbitrum.io/rpc",wallet:t.wallet});case"bnb":return Sn("ethereum",t.providerName,{irys:t.irys,name:"bnb",ticker:"BNB",providerUrl:t.providerUrl??"https://bsc-dataseed.binance.org",wallet:t.wallet});case"avalanche":return Sn("ethereum",t.providerName,{irys:t.irys,name:"avalanche",ticker:"AVAX",providerUrl:t.providerUrl??"https://api.avax.network/ext/bc/C/rpc",wallet:t.wallet});case"boba-eth":return Sn("ethereum",t.providerName,{irys:t.irys,name:"boba-eth",ticker:"ETH",providerUrl:t.providerUrl??"https://mainnet.boba.network/",minConfirm:1,wallet:t.wallet});case"boba":{const e=new Q4({irys:t.irys,name:"boba",ticker:"BOBA",providerUrl:t.providerUrl??"https://mainnet.boba.network/",contractAddress:t.contractAddress??"0xa18bF3994C0Cc6E3b63ac420308E5383f53120D7",minConfirm:1,wallet:t.wallet});return e.price=async()=>{const r=await Rf.post("https://api.livecoinwatch.com/coins/single",JSON.stringify({currency:"USD",code:`${e.ticker}`}),{headers:{"x-api-key":"75a7a824-6577-45e6-ad86-511d590c7cc8","content-type":"application/json"}});if(await Ve.checkAndThrow(r,"Getting price data"),!r?.data?.rate)throw new Error(`unable to get price for ${e.name}`);return+r.data.rate},e}case"solana":return new v4({irys:t.irys,name:"solana",ticker:"SOL",providerUrl:t.providerUrl??"https://api.mainnet-beta.solana.com/",wallet:t.wallet});case"near":return new w4({irys:t.irys,name:"near",ticker:"NEAR",providerUrl:t.providerUrl??"https://rpc.mainnet.near.org",wallet:t.wallet});case"aptos":return new JA({irys:t.irys,name:"aptos",ticker:"APTOS",providerUrl:t.providerUrl??"https://fullnode.mainnet.aptoslabs.com/v1",wallet:t.wallet});default:throw new Error(`Unknown/Unsupported token ${t.token}`)}}function Sn(t,e,r){switch(t){case"ethereum":switch(e){case"ethersv5":return new XA(r);case"ethersv6":return new YA(r);default:return new uo(r)}}}class QA{irys;constructor(e){this.irys=e}async upload(e,r){return this.irys.uploadWithReceipt(e,r)}async uploadProof(e){return await this.irys.uploadWithReceipt("",{tags:Object.entries({dataProtocol:"Provenance-Confirmation",...e}).map(([r,n])=>({name:Fh[r],value:n}))})}async getAllProofs(e,r){const n=Object.entries(e).map(([o,c])=>({name:Fh[o],values:[c]}));if(n.length===0)throw new Error("Getting a provenance proof requires at least one query element");const s=`
    query ($tags: [TagFilter!]) {
      transactions(tags: $tags) {
        edges {
          node {
            id
            receipt {
              deadlineHeight
              signature
              timestamp
              version
            }
            tags {
              name
              value
            }
          }
        }
      }
    }
    `,i=[];let a=null;do{const o=await this.irys.api.post("/graphql",{query:s,variables:{tags:n,limit:r?.limit??null,after:a}},void 0);a=o.data.data.transactions?.pageInfo?.hasNextPage?o.data.data.transactions.pageInfo.endCursor:null,i.push(...o.data.data.transactions.edges.map(c=>c.node))}while(a);return i}async getProof(e){const r=(await this.getAllProofs(e,{limit:1})).at(0);if(!r)throw new Error(`Unable to locate proof with fields ${JSON.stringify(e)}`);return r}}const Fh={dataProtocol:"Data-Protocol",hashingAlgo:"Hashing-Algo",dataHash:"Data-Hash",uploadedFor:"Uploaded-For",prompt:"Prompt",promptHash:"Prompt-Hash",model:"Model"};class eT{irys;constructor(e){this.irys=e}async getById(e){const r=(await this.query({ids:[e],limit:1})).at(0);if(!r)throw new Error(`Unable to locate tx with id ${e}`);return r}async getByOwner(e){const r=(await this.query({owners:[e],limit:1})).at(0);if(!r)throw new Error(`Unable to locate tx with owner ${e}`);return r}async getByTag(e,r){const n=(await this.query({tags:[{name:e,values:[r]}],limit:1})).at(0);if(!n)throw new Error(`Unable to locate tx with tag ${e}:${r}`);return n}async query(e){const r=`
    query ($ids: [String!], $after: String, $currency: String, $owners: [String!], $limit: Int, $order: SortOrder, $hasTags: Boolean, $tags: [TagFilter!]) {
      transactions(ids: $ids, after: $after, currency: $currency, owners: $owners, limit: $limit, order: $order, hasTags: $hasTags, tags: $tags) {
        edges {
          cursor
          node {
            address
            currency
            id
            receipt {
              deadlineHeight
              signature
              timestamp
              version
            }
            signature
            tags {
              name
              value
            }
            timestamp
          }
        }
        pageInfo {
          endCursor
          hasNextPage
        }
      }
    }
    `,n=[];let s=null;do{const i=await this.irys.api.post("/graphql",{query:r,variables:{...e,after:s??e.after}},void 0);s=i.data.data.transactions?.pageInfo?.hasNextPage?i.data.data.transactions.pageInfo.endCursor:null,n.push(...i.data.data.transactions.edges.map(a=>a.node))}while(s);return n}}var pb={},Jn={},rc={},ki={};Object.defineProperty(ki,"__esModule",{value:!0});ki.PromisePoolError=void 0;class tT extends Error{constructor(e,r){super(),this.raw=e,this.item=r,this.name=this.constructor.name,this.message=this.messageFrom(e),Error.captureStackTrace&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}static createFrom(e,r){return new this(e,r)}messageFrom(e){return e instanceof Error||typeof e=="object"?e.message:typeof e=="string"||typeof e=="number"?e.toString():""}}ki.PromisePoolError=tT;var Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.StopThePromisePoolError=void 0;class rT extends Error{}Ci.StopThePromisePoolError=rT;var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0});Bi.ValidationError=void 0;class nT extends Error{constructor(e){super(e),Error.captureStackTrace&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}static createFrom(e){return new this(e)}}Bi.ValidationError=nT;Object.defineProperty(rc,"__esModule",{value:!0});rc.PromisePoolExecutor=void 0;const $u=Jn,Hh=ki,qh=Ci,kr=Bi;class sT{constructor(){this.meta={tasks:[],items:[],errors:[],results:[],stopped:!1,concurrency:10,shouldResultsCorrespond:!1,processedItems:[],taskTimeout:0},this.handler=()=>{},this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[]}useConcurrency(e){if(!this.isValidConcurrency(e))throw kr.ValidationError.createFrom(`"concurrency" must be a number, 1 or up. Received "${e}" (${typeof e})`);return this.meta.concurrency=e,this}isValidConcurrency(e){return typeof e=="number"&&e>=1}withTaskTimeout(e){return this.meta.taskTimeout=e,this}concurrency(){return this.meta.concurrency}useCorrespondingResults(e){return this.meta.shouldResultsCorrespond=e,this}shouldUseCorrespondingResults(){return this.meta.shouldResultsCorrespond}taskTimeout(){return this.meta.taskTimeout}for(e){return this.meta.items=e,this}items(){return this.meta.items}itemsCount(){const e=this.items();return Array.isArray(e)?e.length:NaN}tasks(){return this.meta.tasks}activeTaskCount(){return this.activeTasksCount()}activeTasksCount(){return this.tasks().length}processedItems(){return this.meta.processedItems}processedCount(){return this.processedItems().length}processedPercentage(){return this.processedCount()/this.itemsCount()*100}results(){return this.meta.results}errors(){return this.meta.errors}withHandler(e){return this.handler=e,this}hasErrorHandler(){return!!this.errorHandler}handleError(e){return this.errorHandler=e,this}onTaskStarted(e){return this.onTaskStartedHandlers=e,this}onTaskFinished(e){return this.onTaskFinishedHandlers=e,this}hasReachedConcurrencyLimit(){return this.activeTasksCount()>=this.concurrency()}stop(){throw this.markAsStopped(),new qh.StopThePromisePoolError}markAsStopped(){return this.meta.stopped=!0,this}isStopped(){return this.meta.stopped}async start(){return await this.validateInputs().prepareResultsArray().process()}validateInputs(){if(typeof this.handler!="function")throw kr.ValidationError.createFrom("The first parameter for the .process(fn) method must be a function");const e=this.taskTimeout();if(!(e==null||typeof e=="number"&&e>=0))throw kr.ValidationError.createFrom(`"timeout" must be undefined or a number. A number must be 0 or up. Received "${String(e)}" (${typeof e})`);if(!this.areItemsValid())throw kr.ValidationError.createFrom(`"items" must be an array, an iterable or an async iterable. Received "${typeof this.items()}"`);if(this.errorHandler&&typeof this.errorHandler!="function")throw kr.ValidationError.createFrom(`The error handler must be a function. Received "${typeof this.errorHandler}"`);return this.onTaskStartedHandlers.forEach(r=>{if(r&&typeof r!="function")throw kr.ValidationError.createFrom(`The onTaskStarted handler must be a function. Received "${typeof r}"`)}),this.onTaskFinishedHandlers.forEach(r=>{if(r&&typeof r!="function")throw kr.ValidationError.createFrom(`The error handler must be a function. Received "${typeof r}"`)}),this}areItemsValid(){const e=this.items();return!!(Array.isArray(e)||typeof e[Symbol.iterator]=="function"||typeof e[Symbol.asyncIterator]=="function")}prepareResultsArray(){const e=this.items();return Array.isArray(e)?this.shouldUseCorrespondingResults()?(this.meta.results=Array(e.length).fill($u.PromisePool.notRun),this):this:this}async process(){let e=0;for await(const r of this.items()){if(this.isStopped())break;this.shouldUseCorrespondingResults()&&(this.results()[e]=$u.PromisePool.notRun),this.startProcessing(r,e),e+=1,await this.waitForProcessingSlot()}return await this.drained()}async waitForProcessingSlot(){for(;this.hasReachedConcurrencyLimit();)await this.waitForActiveTaskToFinish()}async waitForActiveTaskToFinish(){await Promise.race(this.tasks())}startProcessing(e,r){const n=this.createTaskFor(e,r).then(s=>{this.save(s,r).removeActive(n)}).catch(async s=>{await this.handleErrorFor(s,e,r),this.removeActive(n)}).finally(()=>{this.processedItems().push(e),this.runOnTaskFinishedHandlers(e)});this.tasks().push(n),this.runOnTaskStartedHandlers(e)}async createTaskFor(e,r){if(this.taskTimeout()===void 0)return this.handler(e,r,this);const[n,s]=this.createTaskTimeout(e);return Promise.race([this.handler(e,r,this),n()]).finally(s)}createTaskTimeout(e){let r;return[async()=>new Promise((i,a)=>{r=setTimeout(()=>{a(new Hh.PromisePoolError(`Task in promise pool timed out after ${this.taskTimeout()}ms`,e))},this.taskTimeout())}),()=>clearTimeout(r)]}save(e,r){return this.shouldUseCorrespondingResults()?this.results()[r]=e:this.results().push(e),this}removeActive(e){return this.tasks().splice(this.tasks().indexOf(e),1),this}async handleErrorFor(e,r,n){if(this.shouldUseCorrespondingResults()&&(this.results()[n]=$u.PromisePool.failed),!this.isStoppingThePoolError(e)){if(this.isValidationError(e))throw this.markAsStopped(),e;this.hasErrorHandler()?await this.runErrorHandlerFor(e,r):this.saveErrorFor(e,r)}}isStoppingThePoolError(e){return e instanceof qh.StopThePromisePoolError}isValidationError(e){return e instanceof kr.ValidationError}async runErrorHandlerFor(e,r){try{await this.errorHandler?.(e,r,this)}catch(n){this.rethrowIfNotStoppingThePool(n)}}runOnTaskStartedHandlers(e){this.onTaskStartedHandlers.forEach(r=>{r(e,this)})}runOnTaskFinishedHandlers(e){this.onTaskFinishedHandlers.forEach(r=>{r(e,this)})}rethrowIfNotStoppingThePool(e){if(!this.isStoppingThePoolError(e))throw e}saveErrorFor(e,r){this.errors().push(Hh.PromisePoolError.createFrom(e,r))}async drained(){return await this.drainActiveTasks(),{errors:this.errors(),results:this.results()}}async drainActiveTasks(){await Promise.all(this.tasks())}}rc.PromisePoolExecutor=sT;Object.defineProperty(Jn,"__esModule",{value:!0});Jn.PromisePool=void 0;const iT=rc;class Ii{constructor(e){this.timeout=void 0,this.concurrency=10,this.items=e??[],this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[],this.shouldResultsCorrespond=!1}withConcurrency(e){return this.concurrency=e,this}static withConcurrency(e){return new this().withConcurrency(e)}withTaskTimeout(e){return this.timeout=e,this}static withTaskTimeout(e){return new this().withTaskTimeout(e)}for(e){const r=new Ii(e).withConcurrency(this.concurrency);return typeof this.errorHandler=="function"&&r.handleError(this.errorHandler),typeof this.timeout=="number"?r.withTaskTimeout(this.timeout):r}static for(e){return new this().for(e)}handleError(e){return this.errorHandler=e,this}onTaskStarted(e){return this.onTaskStartedHandlers.push(e),this}onTaskFinished(e){return this.onTaskFinishedHandlers.push(e),this}useCorrespondingResults(){return this.shouldResultsCorrespond=!0,this}async process(e){return new iT.PromisePoolExecutor().useConcurrency(this.concurrency).useCorrespondingResults(this.shouldResultsCorrespond).withTaskTimeout(this.timeout).withHandler(e).handleError(this.errorHandler).onTaskStarted(this.onTaskStartedHandlers).onTaskFinished(this.onTaskFinishedHandlers).for(this.items).start()}}Jn.PromisePool=Ii;Ii.notRun=Symbol("notRun");Ii.failed=Symbol("failed");var yb={};Object.defineProperty(yb,"__esModule",{value:!0});var xb={};Object.defineProperty(xb,"__esModule",{value:!0});(function(t){var e=le&&le.__createBinding||(Object.create?function(s,i,a,o){o===void 0&&(o=a);var c=Object.getOwnPropertyDescriptor(i,a);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(s,o,c)}:function(s,i,a,o){o===void 0&&(o=a),s[o]=i[a]}),r=le&&le.__exportStar||function(s,i){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,s,a)};Object.defineProperty(t,"__esModule",{value:!0});const n=Jn;t.default=n.PromisePool,r(yb,t),r(Jn,t),r(ki,t),r(xb,t),r(Ci,t),r(Bi,t)})(pb);const aT=Symbol("not readable"),oT=Symbol("readable"),cT=Symbol("ended"),uT=Symbol("errored"),Ze={notReadable:aT,readable:oT,ended:cT,errored:uT};class fT{_stream;_error;_state=Ze.notReadable;_size;_rejections=new Set;get closed(){return this._state===Ze.ended}constructor(e,{size:r}={}){this._stream=e,this._size=r;const n=["_handleStreamEnd","_handleStreamError"];for(const s of n)Object.defineProperty(this,s,{configurable:!0,writable:!0,value:this[s].bind(this)});e.once("error",this._handleStreamError),e.once("end",this._handleStreamEnd),e.on("readable",()=>{this._state=Ze.readable})}[Symbol.asyncIterator](){return this}async next(){switch(this._state){case Ze.notReadable:{let e,r;try{e=this._untilReadable(),r=this._untilEnd(),await Promise.race([e.promise,r.promise])}finally{e?.close(),r?.close()}return this.next()}case Ze.ended:return this.close(),{done:!0,value:void 0};case Ze.errored:throw this.close(),this._error;case Ze.readable:{const e=this._size?this._stream.read(this._size):this._stream.read();return e!==null?{done:!1,value:e}:(this._state=Ze.notReadable,await new Promise(r=>setTimeout(n=>n(!0),0,r)),this.next())}}}_untilReadable(){let e;const r=new Promise((s,i)=>{e=()=>{this._state=Ze.readable,this._rejections.delete(i),s()},this._state,Ze.readable,this._stream.once("readable",e),this._rejections.add(i)});return{close:()=>{e!=null&&this._stream.removeListener("readable",e)},promise:r}}_untilEnd(){let e;const r=new Promise((s,i)=>{e=()=>{this._state=Ze.ended,this._rejections.delete(i),s()},this._stream.once("end",e),this._rejections.add(i)});return{close:()=>{e!=null&&this._stream.removeListener("end",e)},promise:r}}return(){return this._state=Ze.ended,this.next()}throw(e){return this._error=e,this._state=Ze.errored,this.next()}close(e){this._stream.removeListener("end",this._handleStreamEnd),this._stream.removeListener("error",this._handleStreamError),this._state=Ze.ended,this._stream.destroy(e)}_handleStreamError(e){this._error=e,this._state=Ze.errored;for(const r of this._rejections)r(e)}_handleStreamEnd(){this._state=Ze.ended}get state(){return this._state}}class dT extends kb.exports.EventEmitter{tokenConfig;api;uploadID;token;chunkSize;batchSize;paused=!1;isResume=!1;uploadOptions;arbundles;constructor(e,r){super({captureRejections:!0}),this.tokenConfig=e,this.arbundles=this.tokenConfig.irys.arbundles,this.api=r,this.token=this.tokenConfig.name,this.chunkSize=25e6,this.batchSize=5,this.uploadID=""}setResumeData(e){return e&&(this.uploadID=e,this.isResume=!0),this}getResumeData(){return this.uploadID}setChunkSize(e){if(e<1)throw new Error("Invalid chunk size (must be >=1)");return this.chunkSize=e,this}setBatchSize(e){if(e<1)throw new Error("Invalid batch size (must be >=1)");return this.batchSize=e,this}pause(){this.emit("pause"),this.paused=!0}resume(){this.paused=!1,this.emit("resume")}async uploadTransaction(e,r){return this.uploadOptions=r,this.arbundles.DataItem.isDataItem(e)?this.runUpload(e.getRaw()):this.runUpload(e)}async uploadData(e,r){return this.uploadOptions=r?.upload,this.runUpload(e,{...r})}async runUpload(e,r){let n=this.uploadID;const s=r===void 0,i={"x-chunking-version":"2"};let a;if(!n)a=await this.api.get(`/chunks/${this.token}/-1/-1`,{headers:i}),Ve.checkAndThrow(a,"Getting upload token"),this.uploadID=n=a.data.id;else{if(a=await this.api.get(`/chunks/${this.token}/${n}/-1`,{headers:i}),a.status===404)throw new Error("Upload ID not found - your upload has probably expired.");if(Ve.checkAndThrow(a,"Getting upload info"),this.chunkSize!=+a.data.size)throw new Error(`Chunk size not equal to that of a previous upload (${+a.data.size}).`)}const{max:o,min:c}=a.data;if(this.chunkSize<+c||this.chunkSize>+o)throw new Error(`Chunk size out of allowed range: ${c} - ${o}`);let f=0;const u=(C,g,w)=>new Promise(T=>{Mr(async z=>{await this.api.post(`/chunks/${this.token}/${n}/${g}`,C,{headers:{"Content-Type":"application/octet-stream",...i},maxBodyLength:1/0,maxContentLength:1/0}).then(H=>{if(H?.status>=300){const j={res:H,id:w,offset:g,size:C.length};throw this.emit("chunkError",j),H?.status===402&&z(new Error("Not enough funds to send data")),j}this.emit("chunkUpload",{id:w,offset:g,size:C.length,totalUploaded:f+=C.length}),T({o:g,d:H})})})}),d=a.data.chunks??[],l=new Ns.PassThrough;let x=k.Buffer.alloc(0),p=!1,h=!0;l.on("end",()=>p=!0),l.on("error",C=>{throw new Error(`Error processing readable: ${C}`)});const y=async C=>{for(;!p;){if(x.length>=C)return g=k.Buffer.from(x.slice(0,C)),x=x.slice(C),g;var g=l.read(C);if(g===null){await new Promise(w=>setTimeout(T=>T(!0),0,w));continue}if(g.length===C)return g;x=k.Buffer.concat([x,g])}for(;x.length>=C;)return g=k.Buffer.from(x.slice(0,C)),x=x.slice(C),g;return h=!1,x};let b,R;if(!s){b=this.arbundles.createData("",this.tokenConfig.getSigner(),{...r,anchor:r?.anchor??Gh.randomBytes(32).toString("base64").slice(0,32)});const C=b.getRaw();R=C.length,l.write(C),f-=C.length}if(k.Buffer.isBuffer(e))l.write(e),l.end();else if("pipe"in e)e.pipe(l);else throw new Error("Input data is not a buffer or a compatible stream (no .pipe method)");let v=0;const E=new Set;let A=0,M,q,L;if(!s){q=new Ns.PassThrough;const C=b.getRaw().length;if(this.chunkSize<R)throw new Error(`Configured chunk size is too small for transaction header! (${this.chunkSize} < ${R})`);M=await y(this.chunkSize),A++,v+=M.length,q.write(M.slice(C));const g=[this.arbundles.stringToBuffer("dataitem"),this.arbundles.stringToBuffer("1"),this.arbundles.stringToBuffer(b.signatureType.toString()),b.rawOwner,b.rawTarget,b.rawAnchor,b.rawTags,new fT(q)];L=this.arbundles.deepHash(g)}let K=d.pop();for(;h;){if(this.paused&&await new Promise(w=>this.on("resume",()=>w(void 0))),K&&+K[0]-v<=this.chunkSize){const T=K[1],z=await y(T);s||q.write(z),v+=T,K=d.pop(),A++,f+=T;continue}const C=await y(this.chunkSize);for(s||q.write(C);E.size>=this.batchSize;){const[w]=await Promise.race(E);E.delete(w)}const g=(async()=>await u(C,v,++A))().then(w=>[g,w]);E.add(g),v+=C.length}if(q&&q.end(),await Promise.all(E),!s){const C=await L,g=k.Buffer.from(await this.tokenConfig.getSigner().sign(C));M.set(g,2),await u(M,0,0)}const $=await this.api.post(`/chunks/${this.token}/${n}/-1`,null,{headers:{"Content-Type":"application/octet-stream",...i},timeout:this.api.config?.timeout??4e4*10});if($.status===402)throw new Error("Not enough funds to send data");if(Ve.checkAndThrow($,"Finalising upload",[201]),$.status===201)throw new Error($.data);return $.data.verify=Ve.verifyReceipt.bind({},this.arbundles,$.data.data),this.emit("done",$),$}get completionPromise(){return new Promise(e=>this.on("done",e))}}const zh=5e7;class lT{api;token;tokenConfig;utils;contentTypeOverride;forceUseChunking;arbundles;irysTransaction;constructor(e,r,n,s,i){this.api=e,this.token=n,this.tokenConfig=s,this.arbundles=this.tokenConfig.irys.arbundles,this.utils=r,this.irysTransaction=i}async uploadTransaction(e,r){let n;const s=this.arbundles.DataItem.isDataItem(e);if(this.forceUseChunking||s&&e.getRaw().length>=zh||!s)n=await this.chunkedUploader.uploadTransaction(s?e.getRaw():e,r);else{const{url:i,timeout:a,headers:o}=this.api.getConfig(),c={"Content-Type":"application/octet-stream",...o};if(n=await this.api.post(new URL(`/tx/${this.token}`,i).toString(),e.getRaw(),{headers:c,timeout:a,maxBodyLength:1/0}),n.status===201)throw new Error(n.data)}switch(n.status){case 402:throw new Error("Not enough funds to send data");default:if(n.status>=400)throw new Error(`whilst uploading Irys transaction: ${n.status} ${n.statusText}`)}return n.data.verify=async()=>this.utils.verifyReceipt(n.data),n}async uploadData(e,r){if(typeof e=="string"&&(e=k.Buffer.from(e)),k.Buffer.isBuffer(e)&&e.length<=zh){const n=this.arbundles.createData(e,this.tokenConfig.getSigner(),{...r,anchor:r?.anchor??Cb(32).toString("base64").slice(0,32)});return await n.sign(this.tokenConfig.getSigner()),(await this.uploadTransaction(n,{...r?.upload})).data}return(await this.chunkedUploader.uploadData(e,r)).data}async concurrentUploader(e,r){const n=[],s=r?.logFunction?r?.logFunction:async o=>{},i=r?.concurrency??5,a=await pb.PromisePool.for(e).withConcurrency(i>=1?i:5).handleError(async(o,c)=>{if(n.push(o),o.message==="Not enough funds to send data")throw o}).process(async(o,c,f)=>{await Mr(async u=>{try{const d=await this.processItem(o,r?.itemOptions);return c%i==0&&await s(`Processed ${c} Items`),r?.resultProcessor?await r.resultProcessor({item:o,res:d,i:c}):{item:o,res:d,i:c}}catch(d){throw d?.message==="Not enough funds to send data"&&u(d),d}},{retries:3,minTimeout:1e3,maxTimeout:1e4})});return{errors:n,results:a.results}}async processItem(e,r){return this.arbundles.DataItem.isDataItem(e)?this.uploadTransaction(e,{...r?.upload}):this.uploadData(e,r)}async generateManifest(e){const{items:r,indexFile:n}=e,s={manifest:"arweave/paths",version:"0.1.0",paths:{}};if(n){if(!r.has(n))throw new Error(`Unable to access item: ${n}`);s.index={path:n}}for(const[i,a]of r.entries())s.paths[i]={id:a};return s}get chunkedUploader(){return new dT(this.tokenConfig,this.api)}set useChunking(e){typeof e=="boolean"&&(this.forceUseChunking=e)}set contentType(e){this.contentTypeOverride=e}async uploadBundle(e,r){const n=r?.throwawayKey??await this.arbundles.getCryptoDriver().generateJWK(),s=new ro(n),i=e.map(u=>this.arbundles.DataItem.isDataItem(u)?u:this.arbundles.createData(u,s)),a=await this.arbundles.bundleAndSignData(i,s),o=this.arbundles.createData(a.getRaw(),this.tokenConfig.getSigner(),{tags:[{name:"Bundle-Format",value:"binary"},{name:"Bundle-Version",value:"2.0.0"}]});await o.sign(this.tokenConfig.getSigner());const c=await this.uploadTransaction(o,r),f=re(k.Buffer.from(await this.arbundles.getCryptoDriver().hash(re.toBuffer(re(s.publicKey)))));return{...c,txs:i,throwawayKey:n,throwawayKeyAddress:f}}}class Kh extends lT{irys;constructor(e){super(e.api,e.utils,e.token,e.tokenConfig,e.IrysTransaction),this.irys=e}async uploadFile(e,r){const s=(r?.tags?r.tags.some(({name:i})=>i.toLowerCase()==="content-type"):!1)?r?.tags:[...r?.tags??[],{name:"Content-Type",value:e.type}];return this.uploadData(k.Buffer.from(await e.arrayBuffer()),{tags:s,...r})}async uploadFolder(e,r){const n=[],s=new Map,i=r?.throwawayKey??await this.irys.arbundles.getCryptoDriver().generateJWK(),a=new ro(i);for(const u of e){const d=u.webkitRelativePath?u.webkitRelativePath:u.name,x=(u.tags?u.tags.some(({name:h})=>h.toLowerCase()==="content-type"):!1)?u.tags:[...u.tags??[],{name:"Content-Type",value:u.type}],p=this.irys.arbundles.createData(k.Buffer.from(await u.arrayBuffer()),a,{tags:x});await p.sign(a),n.push(p),s.set(d,p.id)}const o=await this.generateManifest({items:s,indexFile:r?.indexFileRelPath}),c=this.irys.arbundles.createData(JSON.stringify(o),r?.seperateManifestTx?this.irys.tokenConfig.getSigner():a,{tags:[{name:"Type",value:"manifest"},{name:"Content-Type",value:"application/x.arweave-manifest+json"},...r?.manifestTags??[]]});r?.seperateManifestTx===!0?(await c.sign(this.irys.tokenConfig.getSigner()),await this.uploadTransaction(c,{...r})):(await c.sign(a),n.push(c));const f=await this.uploadBundle(n,{...r});return{...f.data,manifestId:c.id,manifest:o,throwawayKey:f.throwawayKey,throwawayKeyAddress:f.throwawayKeyAddress,txs:f.txs}}}class hT extends z0{tokenConfig;uploader;uploadFolder;uploadFile;constructor({url:e,token:r,wallet:n,config:s}){switch(e){case void 0:case"node1":e="https://node1.irys.xyz";break;case"node2":e="https://node2.irys.xyz";break;case"devnet":e="https://devnet.irys.xyz";break}const i=new URL(e);if(super({url:i,arbundles:F3}),this.api=new z1({url:i,timeout:s?.timeout??1e5,headers:s?.headers}),this.tokenConfig=ZA({irys:this,token:r.toLowerCase(),wallet:n?.provider,providerUrl:s?.providerUrl??n?.rpcUrl,contractAddress:s?.contractAddress,providerName:n?.name}),this.token=this.tokenConfig.name,i.host==="devnet.irys.network"&&!(s?.providerUrl??(n?.rpcUrl||this.tokenConfig.inheritsRPC)))throw new Error(`Using ${i.host} requires a dev/testnet RPC to be configured! see https://docs.irys.network/sdk/using-devnet`);this.utils=new Ve(this.api,this.token,this.tokenConfig),this.uploader=new Kh(this),this.funder=new K1(this.utils),this.uploader=new Kh(this),this.provenance=new QA(this),this.transactions=new eT(this),this.address="Please run `await Irys.ready()`",this.uploadFolder=this.uploader.uploadFolder.bind(this.uploader),this.uploadFile=this.uploader.uploadFile.bind(this.uploader)}}var gT=hT;export{gT as WebIrys,gT as default};
