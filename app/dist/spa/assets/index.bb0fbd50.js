import{aT as Rf,aR as z,p as ft,ah as F,c4 as Y0,aW as Q0,b3 as ae,bm as Kd,a_ as Of,aV as Ym}from"./index.3ba0a9f2.js";import{L as Qm,O as X0,z as Wi,Q as zs,R as Z0,V as vc,W as Xm,X as Zm,Y as eb,Z as rr,_ as tb,y as rb,$ as nb,a0 as ib,a1 as Df,x as sb}from"./collectionSubmission.ce967779.js";import{b as ob}from"./index.6bbe8a48.js";import{l as Gs}from"./index.c901022e.js";function ab(t,e){return e.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(n){if(n!=="default"&&!(n in t)){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}})}),Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var hi=Rf(Qm),nn={exports:{}},Ff={},Lf={};Object.defineProperty(Lf,"__esModule",{value:!0});function cb(t){var e=4,r=t.length,n=r%e;if(!n)return t;var i=r,s=e-n,o=r+s,a=z.Buffer.alloc(o);for(a.write(t);s--;)a.write("=",i++);return a.toString()}Lf.default=cb;Object.defineProperty(Ff,"__esModule",{value:!0});var ub=Lf;function ep(t,e){return e===void 0&&(e="utf8"),z.Buffer.isBuffer(t)?of(t.toString("base64")):of(z.Buffer.from(t,e).toString("base64"))}function fb(t,e){return e===void 0&&(e="utf8"),z.Buffer.from(Uf(t),"base64").toString(e)}function Uf(t){return t=t.toString(),ub.default(t).replace(/\-/g,"+").replace(/_/g,"/")}function of(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function lb(t){return z.Buffer.from(Uf(t),"base64")}var Vs=ep;Vs.encode=ep;Vs.decode=fb;Vs.toBase64=Uf;Vs.fromBase64=of;Vs.toBuffer=lb;Ff.default=Vs;(function(t){t.exports=Ff.default,t.exports.default=t.exports})(nn);const{Transform:db}=X0.exports;var hb=t=>class tp extends db{constructor(r,n,i,s,o){super(o),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=s,this._options=o,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(o){s=o}i(s)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!z.Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return z.Buffer.isBuffer(r)||(r=z.Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new tp(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const{Transform:pb}=X0.exports;var gb=t=>class rp extends pb{constructor(r,n,i,s){super(s),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=s,this._state=new t,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let s=null;try{this.update(r,n)}catch(o){s=o}i(s)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!z.Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return z.Buffer.isBuffer(r)||(r=z.Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const r=new rp(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}};const yb=hb,mb=gb;var bb=function(t){const e=yb(t),r=mb(t);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new e(1152,448,null,224,i);case"keccak256":return new e(1088,512,null,256,i);case"keccak384":return new e(832,768,null,384,i);case"keccak512":return new e(576,1024,null,512,i);case"sha3-224":return new e(1152,448,6,224,i);case"sha3-256":return new e(1088,512,6,256,i);case"sha3-384":return new e(832,768,6,384,i);case"sha3-512":return new e(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}},np={};const jd=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];np.p1600=function(t){for(let e=0;e<24;++e){const r=t[0]^t[10]^t[20]^t[30]^t[40],n=t[1]^t[11]^t[21]^t[31]^t[41],i=t[2]^t[12]^t[22]^t[32]^t[42],s=t[3]^t[13]^t[23]^t[33]^t[43],o=t[4]^t[14]^t[24]^t[34]^t[44],a=t[5]^t[15]^t[25]^t[35]^t[45],c=t[6]^t[16]^t[26]^t[36]^t[46],f=t[7]^t[17]^t[27]^t[37]^t[47],l=t[8]^t[18]^t[28]^t[38]^t[48],h=t[9]^t[19]^t[29]^t[39]^t[49];let m=l^(i<<1|s>>>31),v=h^(s<<1|i>>>31);const T=t[0]^m,x=t[1]^v,b=t[10]^m,_=t[11]^v,k=t[20]^m,N=t[21]^v,D=t[30]^m,C=t[31]^v,L=t[40]^m,$=t[41]^v;m=r^(o<<1|a>>>31),v=n^(a<<1|o>>>31);const q=t[2]^m,J=t[3]^v,re=t[12]^m,te=t[13]^v,V=t[22]^m,E=t[23]^v,u=t[32]^m,g=t[33]^v,w=t[42]^m,S=t[43]^v;m=i^(c<<1|f>>>31),v=s^(f<<1|c>>>31);const P=t[4]^m,I=t[5]^v,B=t[14]^m,y=t[15]^v,d=t[24]^m,A=t[25]^v,O=t[34]^m,p=t[35]^v,R=t[44]^m,U=t[45]^v;m=o^(l<<1|h>>>31),v=a^(h<<1|l>>>31);const K=t[6]^m,H=t[7]^v,Z=t[16]^m,Q=t[17]^v,ee=t[26]^m,ye=t[27]^v,ne=t[36]^m,se=t[37]^v,Tt=t[46]^m,Je=t[47]^v;m=c^(r<<1|n>>>31),v=f^(n<<1|r>>>31);const We=t[8]^m,an=t[9]^v,Ye=t[18]^m,Qe=t[19]^v,cn=t[28]^m,Xe=t[29]^v,Ze=t[38]^m,un=t[39]^v,et=t[48]^m,tt=t[49]^v,Or=T,_e=x,Ee=_<<4|b>>>28,Dr=b<<4|_>>>28,Ae=k<<3|N>>>29,Se=N<<3|k>>>29,Fr=C<<9|D>>>23,Te=D<<9|C>>>23,ke=L<<18|$>>>14,Lr=$<<18|L>>>14,Pe=q<<1|J>>>31,Ie=J<<1|q>>>31,Ur=te<<12|re>>>20,Ce=re<<12|te>>>20,Ne=V<<10|E>>>22,Kr=E<<10|V>>>22,Me=g<<13|u>>>19,Be=u<<13|g>>>19,jr=w<<2|S>>>30,Re=S<<2|w>>>30,Oe=I<<30|P>>>2,$r=P<<30|I>>>2,De=B<<6|y>>>26,Fe=y<<6|B>>>26,Hr=A<<11|d>>>21,Le=d<<11|A>>>21,Ue=O<<15|p>>>17,qr=p<<15|O>>>17,Ke=U<<29|R>>>3,je=R<<29|U>>>3,zr=K<<28|H>>>4,$e=H<<28|K>>>4,He=Q<<23|Z>>>9,Gr=Z<<23|Q>>>9,qe=ee<<25|ye>>>7,ze=ye<<25|ee>>>7,xr=ne<<21|se>>>11,vr=se<<21|ne>>>11,wr=Je<<24|Tt>>>8,_r=Tt<<24|Je>>>8,Er=We<<27|an>>>5,Si=an<<27|We>>>5,Ti=Ye<<20|Qe>>>12,ki=Qe<<20|Ye>>>12,Pi=Xe<<7|cn>>>25,Ii=cn<<7|Xe>>>25,Ci=Ze<<8|un>>>24,Ni=un<<8|Ze>>>24,Mi=et<<14|tt>>>18,Bi=tt<<14|et>>>18;t[0]=Or^~Ur&Hr,t[1]=_e^~Ce&Le,t[10]=zr^~Ti&Ae,t[11]=$e^~ki&Se,t[20]=Pe^~De&qe,t[21]=Ie^~Fe&ze,t[30]=Er^~Ee&Ne,t[31]=Si^~Dr&Kr,t[40]=Oe^~He&Pi,t[41]=$r^~Gr&Ii,t[2]=Ur^~Hr&xr,t[3]=Ce^~Le&vr,t[12]=Ti^~Ae&Me,t[13]=ki^~Se&Be,t[22]=De^~qe&Ci,t[23]=Fe^~ze&Ni,t[32]=Ee^~Ne&Ue,t[33]=Dr^~Kr&qr,t[42]=He^~Pi&Fr,t[43]=Gr^~Ii&Te,t[4]=Hr^~xr&Mi,t[5]=Le^~vr&Bi,t[14]=Ae^~Me&Ke,t[15]=Se^~Be&je,t[24]=qe^~Ci&ke,t[25]=ze^~Ni&Lr,t[34]=Ne^~Ue&wr,t[35]=Kr^~qr&_r,t[44]=Pi^~Fr&jr,t[45]=Ii^~Te&Re,t[6]=xr^~Mi&Or,t[7]=vr^~Bi&_e,t[16]=Me^~Ke&zr,t[17]=Be^~je&$e,t[26]=Ci^~ke&Pe,t[27]=Ni^~Lr&Ie,t[36]=Ue^~wr&Er,t[37]=qr^~_r&Si,t[46]=Fr^~jr&Oe,t[47]=Te^~Re&$r,t[8]=Mi^~Or&Ur,t[9]=Bi^~_e&Ce,t[18]=Ke^~zr&Ti,t[19]=je^~$e&ki,t[28]=ke^~Pe&De,t[29]=Lr^~Ie&Fe,t[38]=wr^~Er&Ee,t[39]=_r^~Si&Dr,t[48]=jr^~Oe&He,t[49]=Re^~$r&Gr,t[0]^=jd[e*2],t[1]^=jd[e*2+1]}};const rc=np;function Js(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}Js.prototype.initialize=function(t,e){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=t/8,this.count=0,this.squeezing=!1};Js.prototype.absorb=function(t){for(let e=0;e<t.length;++e)this.state[~~(this.count/4)]^=t[e]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(rc.p1600(this.state),this.count=0)};Js.prototype.absorbLastFewBits=function(t){this.state[~~(this.count/4)]^=t<<8*(this.count%4),(t&128)!==0&&this.count===this.blockSize-1&&rc.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),rc.p1600(this.state),this.count=0,this.squeezing=!0};Js.prototype.squeeze=function(t){this.squeezing||this.absorbLastFewBits(1);const e=z.Buffer.alloc(t);for(let r=0;r<t;++r)e[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(rc.p1600(this.state),this.count=0);return e};Js.prototype.copy=function(t){for(let e=0;e<50;++e)t.state[e]=this.state[e];t.blockSize=this.blockSize,t.count=this.count,t.squeezing=this.squeezing};var xb=Js,vb=bb(xb),Kf={},nc={},jf={},$f={exports:{}},ip=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},wb=ip,pi=Object.prototype.toString;function Hf(t){return Array.isArray(t)}function af(t){return typeof t>"u"}function _b(t){return t!==null&&!af(t)&&t.constructor!==null&&!af(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function sp(t){return pi.call(t)==="[object ArrayBuffer]"}function Eb(t){return pi.call(t)==="[object FormData]"}function Ab(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&sp(t.buffer),e}function Sb(t){return typeof t=="string"}function Tb(t){return typeof t=="number"}function op(t){return t!==null&&typeof t=="object"}function $a(t){if(pi.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function kb(t){return pi.call(t)==="[object Date]"}function Pb(t){return pi.call(t)==="[object File]"}function Ib(t){return pi.call(t)==="[object Blob]"}function ap(t){return pi.call(t)==="[object Function]"}function Cb(t){return op(t)&&ap(t.pipe)}function Nb(t){return pi.call(t)==="[object URLSearchParams]"}function Mb(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Bb(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function qf(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),Hf(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function cf(){var t={};function e(i,s){$a(t[s])&&$a(i)?t[s]=cf(t[s],i):$a(i)?t[s]=cf({},i):Hf(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)qf(arguments[r],e);return t}function Rb(t,e,r){return qf(e,function(i,s){r&&typeof i=="function"?t[s]=wb(i,r):t[s]=i}),t}function Ob(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var or={isArray:Hf,isArrayBuffer:sp,isBuffer:_b,isFormData:Eb,isArrayBufferView:Ab,isString:Sb,isNumber:Tb,isObject:op,isPlainObject:$a,isUndefined:af,isDate:kb,isFile:Pb,isBlob:Ib,isFunction:ap,isStream:Cb,isURLSearchParams:Nb,isStandardBrowserEnv:Bb,forEach:qf,merge:cf,extend:Rb,trim:Mb,stripBOM:Ob},ls=or;function $d(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var cp=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(ls.isURLSearchParams(r))i=r.toString();else{var s=[];ls.forEach(r,function(c,f){c===null||typeof c>"u"||(ls.isArray(c)?f=f+"[]":c=[c],ls.forEach(c,function(h){ls.isDate(h)?h=h.toISOString():ls.isObject(h)&&(h=JSON.stringify(h)),s.push($d(f)+"="+$d(h))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},Db=or;function wc(){this.handlers=[]}wc.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};wc.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};wc.prototype.forEach=function(e){Db.forEach(this.handlers,function(n){n!==null&&e(n)})};var Fb=wc,Lb=or,Ub=function(e,r){Lb.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},up=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Kb=up,fp=function(e,r,n,i,s){var o=new Error(e);return Kb(o,r,n,i,s)},jb=fp,$b=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(jb("Request failed with status code "+n.status,n.config,null,n.request,n))},Sa=or,Hb=Sa.isStandardBrowserEnv()?function(){return{write:function(r,n,i,s,o,a){var c=[];c.push(r+"="+encodeURIComponent(n)),Sa.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),Sa.isString(s)&&c.push("path="+s),Sa.isString(o)&&c.push("domain="+o),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),qb=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},zb=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},Gb=qb,Vb=zb,Jb=function(e,r){return e&&!Gb(r)?Vb(e,r):r},xu=or,Wb=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Yb=function(e){var r={},n,i,s;return e&&xu.forEach(e.split(`
`),function(a){if(s=a.indexOf(":"),n=xu.trim(a.substr(0,s)).toLowerCase(),i=xu.trim(a.substr(s+1)),n){if(r[n]&&Wb.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r},Hd=or,Qb=Hd.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(s){var o=s;return e&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(o){var a=Hd.isString(o)?i(o):o;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function zf(t){this.message=t}zf.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};zf.prototype.__CANCEL__=!0;var _c=zf,Ta=or,Xb=$b,Zb=Hb,ex=cp,tx=Jb,rx=Yb,nx=Qb,vu=fp,ix=Ac,sx=_c,qd=function(e){return new Promise(function(n,i){var s=e.data,o=e.headers,a=e.responseType,c;function f(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}Ta.isFormData(s)&&delete o["Content-Type"];var l=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(h+":"+m)}var v=tx(e.baseURL,e.url);l.open(e.method.toUpperCase(),ex(v,e.params,e.paramsSerializer),!0),l.timeout=e.timeout;function T(){if(!!l){var b="getAllResponseHeaders"in l?rx(l.getAllResponseHeaders()):null,_=!a||a==="text"||a==="json"?l.responseText:l.response,k={data:_,status:l.status,statusText:l.statusText,headers:b,config:e,request:l};Xb(function(D){n(D),f()},function(D){i(D),f()},k),l=null}}if("onloadend"in l?l.onloadend=T:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(T)},l.onabort=function(){!l||(i(vu("Request aborted",e,"ECONNABORTED",l)),l=null)},l.onerror=function(){i(vu("Network Error",e,null,l)),l=null},l.ontimeout=function(){var _=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",k=e.transitional||ix.transitional;e.timeoutErrorMessage&&(_=e.timeoutErrorMessage),i(vu(_,e,k.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",l)),l=null},Ta.isStandardBrowserEnv()){var x=(e.withCredentials||nx(v))&&e.xsrfCookieName?Zb.read(e.xsrfCookieName):void 0;x&&(o[e.xsrfHeaderName]=x)}"setRequestHeader"in l&&Ta.forEach(o,function(_,k){typeof s>"u"&&k.toLowerCase()==="content-type"?delete o[k]:l.setRequestHeader(k,_)}),Ta.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),a&&a!=="json"&&(l.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&l.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(c=function(b){!l||(i(!b||b&&b.type?new sx("canceled"):b),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c))),s||(s=null),l.send(s)})},Ft=or,zd=Ub,ox=up,ax={"Content-Type":"application/x-www-form-urlencoded"};function Gd(t,e){!Ft.isUndefined(t)&&Ft.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function cx(){var t;return(typeof XMLHttpRequest<"u"||typeof ft<"u"&&Object.prototype.toString.call(ft)==="[object process]")&&(t=qd),t}function ux(t,e,r){if(Ft.isString(t))try{return(e||JSON.parse)(t),Ft.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Ec={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:cx(),transformRequest:[function(e,r){return zd(r,"Accept"),zd(r,"Content-Type"),Ft.isFormData(e)||Ft.isArrayBuffer(e)||Ft.isBuffer(e)||Ft.isStream(e)||Ft.isFile(e)||Ft.isBlob(e)?e:Ft.isArrayBufferView(e)?e.buffer:Ft.isURLSearchParams(e)?(Gd(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Ft.isObject(e)||r&&r["Content-Type"]==="application/json"?(Gd(r,"application/json"),ux(e)):e}],transformResponse:[function(e){var r=this.transitional||Ec.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&Ft.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?ox(o,this,"E_JSON_PARSE"):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ft.forEach(["delete","get","head"],function(e){Ec.headers[e]={}});Ft.forEach(["post","put","patch"],function(e){Ec.headers[e]=Ft.merge(ax)});var Ac=Ec,fx=or,lx=Ac,dx=function(e,r,n){var i=this||lx;return fx.forEach(n,function(o){e=o.call(i,e,r)}),e},lp=function(e){return!!(e&&e.__CANCEL__)},Vd=or,wu=dx,hx=lp,px=Ac,gx=_c;function _u(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new gx("canceled")}var yx=function(e){_u(e),e.headers=e.headers||{},e.data=wu.call(e,e.data,e.headers,e.transformRequest),e.headers=Vd.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Vd.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||px.adapter;return r(e).then(function(i){return _u(e),i.data=wu.call(e,i.data,i.headers,e.transformResponse),i},function(i){return hx(i)||(_u(e),i&&i.response&&(i.response.data=wu.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},fr=or,dp=function(e,r){r=r||{};var n={};function i(l,h){return fr.isPlainObject(l)&&fr.isPlainObject(h)?fr.merge(l,h):fr.isPlainObject(h)?fr.merge({},h):fr.isArray(h)?h.slice():h}function s(l){if(fr.isUndefined(r[l])){if(!fr.isUndefined(e[l]))return i(void 0,e[l])}else return i(e[l],r[l])}function o(l){if(!fr.isUndefined(r[l]))return i(void 0,r[l])}function a(l){if(fr.isUndefined(r[l])){if(!fr.isUndefined(e[l]))return i(void 0,e[l])}else return i(void 0,r[l])}function c(l){if(l in r)return i(e[l],r[l]);if(l in e)return i(void 0,e[l])}var f={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return fr.forEach(Object.keys(e).concat(Object.keys(r)),function(h){var m=f[h]||s,v=m(h);fr.isUndefined(v)&&m!==c||(n[h]=v)}),n},hp={version:"0.25.0"},mx=hp.version,Gf={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Gf[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Jd={};Gf.transitional=function(e,r,n){function i(s,o){return"[Axios v"+mx+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!Jd[o]&&(Jd[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function bx(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new TypeError("option "+s+" must be "+c);continue}if(r!==!0)throw Error("Unknown option "+s)}}var xx={assertOptions:bx,validators:Gf},pp=or,vx=cp,Wd=Fb,Yd=yx,Sc=dp,gp=xx,ds=gp.validators;function Wo(t){this.defaults=t,this.interceptors={request:new Wd,response:new Wd}}Wo.prototype.request=function(e,r){if(typeof e=="string"?(r=r||{},r.url=e):r=e||{},!r.url)throw new Error("Provided config url is not valid");r=Sc(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&gp.assertOptions(n,{silentJSONParsing:ds.transitional(ds.boolean),forcedJSONParsing:ds.transitional(ds.boolean),clarifyTimeoutError:ds.transitional(ds.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(r)===!1||(s=s&&v.synchronous,i.unshift(v.fulfilled,v.rejected))});var o=[];this.interceptors.response.forEach(function(v){o.push(v.fulfilled,v.rejected)});var a;if(!s){var c=[Yd,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(o),a=Promise.resolve(r);c.length;)a=a.then(c.shift(),c.shift());return a}for(var f=r;i.length;){var l=i.shift(),h=i.shift();try{f=l(f)}catch(m){h(m);break}}try{a=Yd(f)}catch(m){return Promise.reject(m)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};Wo.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=Sc(this.defaults,e),vx(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};pp.forEach(["delete","get","head","options"],function(e){Wo.prototype[e]=function(r,n){return this.request(Sc(n||{},{method:e,url:r,data:(n||{}).data}))}});pp.forEach(["post","put","patch"],function(e){Wo.prototype[e]=function(r,n,i){return this.request(Sc(i||{},{method:e,url:r,data:n}))}});var wx=Wo,_x=_c;function Os(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;this.promise.then(function(n){if(!!r._listeners){var i,s=r._listeners.length;for(i=0;i<s;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,s=new Promise(function(o){r.subscribe(o),i=o}).then(n);return s.cancel=function(){r.unsubscribe(i)},s},t(function(i){r.reason||(r.reason=new _x(i),e(r.reason))})}Os.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Os.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]};Os.prototype.unsubscribe=function(e){if(!!this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}};Os.source=function(){var e,r=new Os(function(i){e=i});return{token:r,cancel:e}};var Ex=Os,Ax=function(e){return function(n){return e.apply(null,n)}},Sx=or,Tx=function(e){return Sx.isObject(e)&&e.isAxiosError===!0},Qd=or,kx=ip,Ha=wx,Px=dp,Ix=Ac;function yp(t){var e=new Ha(t),r=kx(Ha.prototype.request,e);return Qd.extend(r,Ha.prototype,e),Qd.extend(r,e),r.create=function(i){return yp(Px(t,i))},r}var Pn=yp(Ix);Pn.Axios=Ha;Pn.Cancel=_c;Pn.CancelToken=Ex;Pn.isCancel=lp;Pn.VERSION=hp.version;Pn.all=function(e){return Promise.all(e)};Pn.spread=Ax;Pn.isAxiosError=Tx;$f.exports=Pn;$f.exports.default=Pn;var Vf=$f.exports,Cx=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jf,"__esModule",{value:!0});const Nx=Cx(Vf);class Mx{constructor(e){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){const r=e.protocol||"http",n=e.port||(r==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:r,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log}}async get(e,r){try{return await this.request().get(e,r)}catch(n){if(n.response&&n.response.status)return n.response;throw n}}async post(e,r,n){try{return await this.request().post(e,r,n)}catch(i){if(i.response&&i.response.status)return i.response;throw i}}request(){const e=Nx.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout,maxContentLength:536870912});return this.config.logging&&(e.interceptors.request.use(r=>(this.config.logger(`Requesting: ${r.baseURL}/${r.url}`),r)),e.interceptors.response.use(r=>(this.config.logger(`Response:   ${r.config.url} - ${r.status}`),r))),e}}jf.default=Mx;var Jf={},Tc={},Yo={},Zr={},Qo={},ht={},Bx=F&&F.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Rx=F&&F.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ox=F&&F.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Bx(e,t,r);return Rx(e,t),e};Object.defineProperty(ht,"__esModule",{value:!0});ht.b64UrlDecode=ht.b64UrlEncode=ht.bufferTob64Url=ht.bufferTob64=ht.b64UrlToBuffer=ht.stringToB64Url=ht.stringToBuffer=ht.bufferToString=ht.b64UrlToString=ht.concatBuffers=void 0;const mp=Ox(Y0);function Dx(t){let e=0;for(let i=0;i<t.length;i++)e+=t[i].byteLength;let r=new Uint8Array(e),n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let i=1;i<t.length;i++)r.set(new Uint8Array(t[i]),n),n+=t[i].byteLength;return r}ht.concatBuffers=Dx;function Fx(t){let e=vp(t);return bp(e)}ht.b64UrlToString=Fx;function bp(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}ht.bufferToString=bp;function xp(t){return new TextEncoder().encode(t)}ht.stringToBuffer=xp;function Lx(t){return _p(xp(t))}ht.stringToB64Url=Lx;function vp(t){return new Uint8Array(mp.toByteArray(Ap(t)))}ht.b64UrlToBuffer=vp;function wp(t){return mp.fromByteArray(new Uint8Array(t))}ht.bufferTob64=wp;function _p(t){return Ep(wp(t))}ht.bufferTob64Url=_p;function Ep(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}ht.b64UrlEncode=Ep;function Ap(t){t=t.replace(/\-/g,"+").replace(/\_/g,"/");let e;return t.length%4==0?e=0:e=4-t.length%4,t.concat("=".repeat(e))}ht.b64UrlDecode=Ap;var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.isBrowser=Pt.arraybufferEqual=Pt.byteArrayToLong=Pt.longTo32ByteArray=Pt.longTo16ByteArray=Pt.shortTo2ByteArray=Pt.longTo8ByteArray=void 0;function Ux(t){const e=[0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return Uint8Array.from(e)}Pt.longTo8ByteArray=Ux;function Kx(t){if(t>(2^32-1))throw new Error("Short too long");const e=[0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return Uint8Array.from(e)}Pt.shortTo2ByteArray=Kx;function jx(t){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return e}Pt.longTo16ByteArray=jx;function $x(t){const e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++){const n=t&255;e[r]=n,t=(t-n)/256}return Uint8Array.from(e)}Pt.longTo32ByteArray=$x;function Hx(t){let e=0;for(let r=t.length-1;r>=0;r--)e=e*256+t[r];return e}Pt.byteArrayToLong=Hx;function qx(t,e){const r=t.buffer,n=e.buffer;if(r===n)return!0;if(r.byteLength!==n.byteLength)return!1;const i=new DataView(r),s=new DataView(n);let o=r.byteLength;for(;o--;)if(i.getUint8(o)!==s.getUint8(o))return!1;return!0}Pt.arraybufferEqual=qx;Pt.isBrowser=typeof window<"u"&&typeof window.document<"u";var Ln={},Yi={},Ds={},Wf={};Object.defineProperty(Wf,"__esModule",{value:!0});const zx=hi;class Gx{BigNum;constructor(){this.BigNum=(e,r)=>{let n=zx.BigNumber.clone({DECIMAL_PLACES:r});return new n(e)}}winstonToAr(e,{formatted:r=!1,decimals:n=12,trim:i=!0}={}){let s=this.stringToBigNum(e,n).shiftedBy(-12);return r?s.toFormat(n):s.toFixed(n)}arToWinston(e,{formatted:r=!1}={}){let n=this.stringToBigNum(e).shiftedBy(12);return r?n.toFormat():n.toFixed(0)}compare(e,r){let n=this.stringToBigNum(e),i=this.stringToBigNum(r);return n.comparedTo(i)}isEqual(e,r){return this.compare(e,r)===0}isLessThan(e,r){let n=this.stringToBigNum(e),i=this.stringToBigNum(r);return n.isLessThan(i)}isGreaterThan(e,r){let n=this.stringToBigNum(e),i=this.stringToBigNum(r);return n.isGreaterThan(i)}add(e,r){let n=this.stringToBigNum(e);return this.stringToBigNum(r),n.plus(r).toFixed(0)}sub(e,r){let n=this.stringToBigNum(e);return this.stringToBigNum(r),n.minus(r).toFixed(0)}stringToBigNum(e,r=12){return this.BigNum(e,r)}}Wf.default=Gx;var Yf={};Object.defineProperty(Yf,"__esModule",{value:!0});class Vx{METHOD_GET="GET";METHOD_POST="POST";config;constructor(e){this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){const r=e.protocol||"http",n=e.port||(r==="https"?443:80);return{host:e.host||"127.0.0.1",protocol:r,port:n,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log,network:e.network}}async get(e,r){return await this.request(e,{...r,method:this.METHOD_GET})}async post(e,r,n){const i=new Headers(n?.headers||{});return i.get("content-type")?.includes("application/json")||i.append("content-type","application/json"),i.append("accept","application/json, text/plain, */*"),await this.request(e,{...n,method:this.METHOD_POST,body:typeof r!="string"?JSON.stringify(r):r,headers:i})}async request(e,r){const n=new Headers(r?.headers||{}),i=`${this.config.protocol}://${this.config.host}:${this.config.port}`,s=r?.responseType;delete r?.responseType,e.startsWith("/")&&(e=e.slice(1)),this.config.network&&n.append("x-network",this.config.network),this.config.logging&&this.config.logger(`Requesting: ${i}/${e}`);let o=await fetch(`${i}/${e}`,{...r||{},headers:n});this.config.logging&&this.config.logger(`Response:   ${o.url} - ${o.status}`);const c=o.headers.get("content-type")?.match(/charset=([^()<>@,;:\"/[\]?.=\s]*)/i)?.[1],f=o,l=async()=>{if(c)try{f.data=new TextDecoder(c).decode(await o.arrayBuffer())}catch{f.data=await o.text()}else f.data=await o.text()};if(s==="arraybuffer")f.data=await o.arrayBuffer();else if(s==="text")await l();else if(s==="webstream")f.data=Jx(o.body);else try{let h=await o.clone().json();typeof h!="object"?await l():f.data=await o.json(),h=null}catch{await l()}return f}}Yf.default=Vx;const Jx=t=>{const e=t;return typeof e[Symbol.asyncIterator]>"u"?(e[Symbol.asyncIterator]=Wx(t),e):t},Wx=function(t){return async function*(){const r=t.getReader();try{for(;;){const{done:n,value:i}=await r.read();if(n)return;yield i}}finally{r.releaseLock()}}};var Qf={},ve={};Object.defineProperty(ve,"__esModule",{value:!0});ve.b64UrlDecode=ve.b64UrlEncode=ve.bufferTob64Url=ve.bufferTob64=ve.b64UrlToBuffer=ve.stringToB64Url=ve.stringToBuffer=ve.bufferToString=ve.b64UrlToString=ve.concatBuffers=void 0;const Sp=Y0;function Yx(t){let e=0;for(let i=0;i<t.length;i++)e+=t[i].byteLength;let r=new Uint8Array(e),n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let i=1;i<t.length;i++)r.set(new Uint8Array(t[i]),n),n+=t[i].byteLength;return r}ve.concatBuffers=Yx;function Qx(t){let e=Pp(t);return Tp(e)}ve.b64UrlToString=Qx;function Tp(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}ve.bufferToString=Tp;function kp(t){return new TextEncoder().encode(t)}ve.stringToBuffer=kp;function Xx(t){return Cp(kp(t))}ve.stringToB64Url=Xx;function Pp(t){return new Uint8Array(Sp.toByteArray(Mp(t)))}ve.b64UrlToBuffer=Pp;function Ip(t){return Sp.fromByteArray(new Uint8Array(t))}ve.bufferTob64=Ip;function Cp(t){return Np(Ip(t))}ve.bufferTob64Url=Cp;function Np(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}ve.b64UrlEncode=Np;function Mp(t){t=t.replace(/\-/g,"+").replace(/\_/g,"/");let e;return t.length%4==0?e=0:e=4-t.length%4,t.concat("=".repeat(e))}ve.b64UrlDecode=Mp;Object.defineProperty(Qf,"__esModule",{value:!0});const Wn=ve;class Zx{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){if(!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let e=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),r=await this.driver.exportKey("jwk",e.privateKey);return{kty:r.kty,e:r.e,n:r.n,d:r.d,p:r.p,q:r.q,dp:r.dp,dq:r.dq,qi:r.qi}}async sign(e,r,{saltLength:n}={}){let i=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(e),r);return new Uint8Array(i)}async hash(e,r="SHA-256"){let n=await this.driver.digest(r,e);return new Uint8Array(n)}async verify(e,r,n){const i={kty:"RSA",e:"AQAB",n:e},s=await this.jwkToPublicCryptoKey(i),o=await this.driver.digest("SHA-256",r),a=await this.driver.verify({name:"RSA-PSS",saltLength:0},s,n,r),c=await this.driver.verify({name:"RSA-PSS",saltLength:32},s,n,r),f=await this.driver.verify({name:"RSA-PSS",saltLength:Math.ceil((s.algorithm.modulusLength-1)/8)-o.byteLength-2},s,n,r);return a||c||f}async jwkToCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(typeof crypto>"u")return!1;const e=crypto?.subtle;return e===void 0?!1:["generateKey","importKey","exportKey","digest","sign"].every(n=>typeof e[n]=="function")}async encrypt(e,r,n){const i=await this.driver.importKey("raw",typeof r=="string"?Wn.stringToBuffer(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:n?Wn.stringToBuffer(n):Wn.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),o=new Uint8Array(16);crypto.getRandomValues(o);const a=await this.driver.encrypt({name:"AES-CBC",iv:o},s,e);return Wn.concatBuffers([o,a])}async decrypt(e,r,n){const i=await this.driver.importKey("raw",typeof r=="string"?Wn.stringToBuffer(r):r,{name:"PBKDF2",length:32},!1,["deriveKey"]),s=await this.driver.deriveKey({name:"PBKDF2",salt:n?Wn.stringToBuffer(n):Wn.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},i,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),o=e.slice(0,16),a=await this.driver.decrypt({name:"AES-CBC",iv:o},s,e.slice(16));return Wn.concatBuffers([a])}}Qf.default=Zx;var Xf={};Object.defineProperty(Xf,"__esModule",{value:!0});class e1{api;constructor(e){this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}}Xf.default=e1;var Zf={},gi={};Object.defineProperty(gi,"__esModule",{value:!0});gi.getError=void 0;class t1 extends Error{type;response;constructor(e,r={}){r.message?super(r.message):super(),this.type=e,this.response=r.response}getType(){return this.type}}gi.default=t1;function r1(t){let e=t.data;if(typeof t.data=="string")try{e=JSON.parse(t.data)}catch{}if(t.data instanceof ArrayBuffer||t.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch{}return e?e.error||e:t.statusText||"unknown"}gi.getError=r1;var Qi={},kc={};Object.defineProperty(kc,"__esModule",{value:!0});const lr=Ds;async function Bp(t){if(Array.isArray(t)){const n=lr.default.utils.concatBuffers([lr.default.utils.stringToBuffer("list"),lr.default.utils.stringToBuffer(t.length.toString())]);return await Rp(t,await lr.default.crypto.hash(n,"SHA-384"))}const e=lr.default.utils.concatBuffers([lr.default.utils.stringToBuffer("blob"),lr.default.utils.stringToBuffer(t.byteLength.toString())]),r=lr.default.utils.concatBuffers([await lr.default.crypto.hash(e,"SHA-384"),await lr.default.crypto.hash(t,"SHA-384")]);return await lr.default.crypto.hash(r,"SHA-384")}kc.default=Bp;async function Rp(t,e){if(t.length<1)return e;const r=lr.default.utils.concatBuffers([e,await Bp(t[0])]),n=await lr.default.crypto.hash(r,"SHA-384");return await Rp(t.slice(1),n)}var el={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.debug=t.validatePath=t.arrayCompare=t.bufferToInt=t.intToBuffer=t.arrayFlatten=t.generateProofs=t.buildLayers=t.generateTransactionChunks=t.generateTree=t.computeRootHash=t.generateLeaves=t.chunkData=t.MIN_CHUNK_SIZE=t.MAX_CHUNK_SIZE=void 0;const e=Ds,r=ve;t.MAX_CHUNK_SIZE=256*1024,t.MIN_CHUNK_SIZE=32*1024;const n=32,i=32;async function s(C){let L=[],$=C,q=0;for(;$.byteLength>=t.MAX_CHUNK_SIZE;){let J=t.MAX_CHUNK_SIZE,re=$.byteLength-t.MAX_CHUNK_SIZE;re>0&&re<t.MIN_CHUNK_SIZE&&(J=Math.ceil($.byteLength/2));const te=$.slice(0,J),V=await e.default.crypto.hash(te);q+=te.byteLength,L.push({dataHash:V,minByteRange:q-te.byteLength,maxByteRange:q}),$=$.slice(J)}return L.push({dataHash:await e.default.crypto.hash($),minByteRange:q,maxByteRange:q+$.byteLength}),L}t.chunkData=s;async function o(C){return Promise.all(C.map(async({dataHash:L,minByteRange:$,maxByteRange:q})=>({type:"leaf",id:await x(await Promise.all([x(L),x(b(q))])),dataHash:L,minByteRange:$,maxByteRange:q})))}t.generateLeaves=o;async function a(C){return(await c(C)).id}t.computeRootHash=a;async function c(C){return await l(await o(await s(C)))}t.generateTree=c;async function f(C){const L=await s(C),$=await o(L),q=await l($),J=await h(q),re=L.slice(-1)[0];return re.maxByteRange-re.minByteRange===0&&(L.splice(L.length-1,1),J.splice(J.length-1,1)),{data_root:q.id,chunks:L,proofs:J}}t.generateTransactionChunks=f;async function l(C,L=0){if(C.length<2)return C[0];const $=[];for(let q=0;q<C.length;q+=2)$.push(await T(C[q],C[q+1]));return l($,L+1)}t.buildLayers=l;function h(C){const L=m(C);return Array.isArray(L)?v(L):[L]}t.generateProofs=h;function m(C,L=new Uint8Array,$=0){if(C.type=="leaf")return{offset:C.maxByteRange-1,proof:(0,r.concatBuffers)([L,C.dataHash,b(C.maxByteRange)])};if(C.type=="branch"){const q=(0,r.concatBuffers)([L,C.leftChild.id,C.rightChild.id,b(C.byteRange)]);return[m(C.leftChild,q,$+1),m(C.rightChild,q,$+1)]}throw new Error("Unexpected node type")}function v(C){const L=[];return C.forEach($=>{Array.isArray($)?L.push(...v($)):L.push($)}),L}t.arrayFlatten=v;async function T(C,L){return L?{type:"branch",id:await x([await x(C.id),await x(L.id),await x(b(C.maxByteRange))]),byteRange:C.maxByteRange,maxByteRange:L.maxByteRange,leftChild:C,rightChild:L}:C}async function x(C){return Array.isArray(C)&&(C=e.default.utils.concatBuffers(C)),new Uint8Array(await e.default.crypto.hash(C))}function b(C){const L=new Uint8Array(n);for(var $=L.length-1;$>=0;$--){var q=C%256;L[$]=q,C=(C-q)/256}return L}t.intToBuffer=b;function _(C){let L=0;for(var $=0;$<C.length;$++)L*=256,L+=C[$];return L}t.bufferToInt=_;const k=(C,L)=>C.every(($,q)=>L[q]===$);t.arrayCompare=k;async function N(C,L,$,q,J){if(q<=0)return!1;if(L>=q)return N(C,0,q-1,q,J);if(L<0)return N(C,0,0,q,J);if(J.length==i+n){const w=J.slice(0,i),S=J.slice(w.length,w.length+n),P=await x([await x(w),await x(S)]);return(0,t.arrayCompare)(C,P)?{offset:q-1,leftBound:$,rightBound:q,chunkSize:q-$}:!1}const re=J.slice(0,i),te=J.slice(re.length,re.length+i),V=J.slice(re.length+te.length,re.length+te.length+n),E=_(V),u=J.slice(re.length+te.length+V.length),g=await x([await x(re),await x(te),await x(V)]);return(0,t.arrayCompare)(C,g)?L<E?await N(re,L,$,Math.min(q,E),u):await N(te,L,Math.max($,E),q,u):!1}t.validatePath=N;async function D(C,L=""){if(C.byteLength<1)return L;const $=C.slice(0,i),q=C.slice($.length,$.length+i),J=C.slice($.length+q.length,$.length+q.length+n),re=_(J),te=C.slice($.length+q.length+J.length),V=await x([await x($),await x(q),await x(J)]),E=`${L}
${JSON.stringify(z.Buffer.from($))},${JSON.stringify(z.Buffer.from(q))},${re} => ${JSON.stringify(V)}`;return D(te,E)}t.debug=D})(el);Object.defineProperty(Qi,"__esModule",{value:!0});Qi.Tag=void 0;const Ct=ve,n1=kc,i1=el;class Op{get(e,r){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);if(this[e]instanceof Uint8Array)return r&&r.decode&&r.string?Ct.bufferToString(this[e]):r&&r.decode&&!r.string?this[e]:Ct.bufferTob64Url(this[e]);if(this[e]instanceof Array){if(r?.decode!==void 0||r?.string!==void 0)throw e==="tags"&&console.warn(`Did you mean to use 'transaction["tags"]' ?`),new Error("Cannot decode or stringify an array.");return this[e]}return r&&r.decode==!0?r&&r.string?Ct.b64UrlToString(this[e]):Ct.b64UrlToBuffer(this[e]):this[e]}}class uf extends Op{name;value;constructor(e,r,n=!1){super(),this.name=e,this.value=r}}Qi.Tag=uf;class s1 extends Op{format=2;id="";last_tx="";owner="";tags=[];target="";quantity="0";data_size="0";data=new Uint8Array;data_root="";reward="0";signature="";chunks;constructor(e={}){super(),Object.assign(this,e),typeof this.data=="string"&&(this.data=Ct.b64UrlToBuffer(this.data)),e.tags&&(this.tags=e.tags.map(r=>new uf(r.name,r.value)))}addTag(e,r){this.tags.push(new uf(Ct.stringToB64Url(e),Ct.stringToB64Url(r)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:Ct.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(e){this.owner=e}setSignature({id:e,owner:r,reward:n,tags:i,signature:s}){this.id=e,this.owner=r,n&&(this.reward=n),i&&(this.tags=i),this.signature=s}async prepareChunks(e){!this.chunks&&e.byteLength>0&&(this.chunks=await(0,i1.generateTransactionChunks)(e),this.data_root=Ct.bufferTob64Url(this.chunks.data_root)),!this.chunks&&e.byteLength===0&&(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(e,r){if(!this.chunks)throw new Error("Chunks have not been prepared");const n=this.chunks.proofs[e],i=this.chunks.chunks[e];return{data_root:this.data_root,data_size:this.data_size,data_path:Ct.bufferTob64Url(n.proof),offset:n.offset.toString(),chunk:Ct.bufferTob64Url(r.slice(i.minByteRange,i.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let e=this.tags.reduce((n,i)=>Ct.concatBuffers([n,i.get("name",{decode:!0,string:!1}),i.get("value",{decode:!0,string:!1})]),new Uint8Array);return Ct.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),Ct.stringToBuffer(this.quantity),Ct.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),e]);case 2:this.data_root||await this.prepareChunks(this.data);const r=this.tags.map(n=>[n.get("name",{decode:!0,string:!1}),n.get("value",{decode:!0,string:!1})]);return await(0,n1.default)([Ct.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),Ct.stringToBuffer(this.quantity),Ct.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),r,Ct.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}}Qi.default=s1;var Pc={};Object.defineProperty(Pc,"__esModule",{value:!0});Pc.TransactionUploader=void 0;const Xd=Qi,o1=ve,Eu=gi,a1=el,Zd=1,c1=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"],eh=1e3*40;class tl{api;chunkIndex=0;txPosted=!1;transaction;lastRequestTimeEnd=0;totalErrors=0;data;lastResponseStatus=0;lastResponseError="";get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}constructor(e,r){if(this.api=e,!r.id)throw new Error("Transaction is not signed");if(!r.chunks)throw new Error("Transaction chunks not prepared");this.data=r.data,this.transaction=new Xd.default(Object.assign({},r,{data:new Uint8Array(0)}))}async uploadChunk(e){if(this.isComplete)throw new Error("Upload is already complete");if(this.lastResponseError!==""?this.totalErrors++:this.totalErrors=0,this.totalErrors===100)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let r=this.lastResponseError===""?0:Math.max(this.lastRequestTimeEnd+eh-Date.now(),eh);if(r>0&&(r=r-r*Math.random()*.3,await new Promise(o=>setTimeout(o,r))),this.lastResponseError="",!this.txPosted){await this.postTransaction();return}e&&(this.chunkIndex=e);const n=this.transaction.getChunk(e||this.chunkIndex,this.data);if(!await(0,a1.validatePath)(this.transaction.chunks.data_root,parseInt(n.offset),0,parseInt(n.data_size),o1.b64UrlToBuffer(n.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);const s=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch(o=>(console.error(o.message),{status:-1,data:{error:o.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=s.status,this.lastResponseStatus==200)this.chunkIndex++;else if(this.lastResponseError=(0,Eu.getError)(s),c1.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(e,r,n){if(!r||typeof r.chunkIndex!="number"||typeof r.transaction!="object")throw new Error("Serialized object does not match expected format.");var i=new Xd.default(r.transaction);i.chunks||await i.prepareChunks(n);const s=new tl(e,i);if(s.chunkIndex=r.chunkIndex,s.lastRequestTimeEnd=r.lastRequestTimeEnd,s.lastResponseError=r.lastResponseError,s.lastResponseStatus=r.lastResponseStatus,s.txPosted=r.txPosted,s.data=n,s.transaction.data_root!==r.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return s}static async fromTransactionId(e,r){const n=await e.get(`tx/${r}`);if(n.status!==200)throw new Error(`Tx ${r} not found: ${n.status}`);const i=n.data;return i.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:i}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=Zd){this.transaction.data=this.data;const n=await this.api.post("tx",this.transaction).catch(i=>(console.error(i),{status:-1,data:{error:i.message}}));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=n.status,this.transaction.data=new Uint8Array(0),n.status>=200&&n.status<300){this.txPosted=!0,this.chunkIndex=Zd;return}throw this.lastResponseError=(0,Eu.getError)(n),new Error(`Unable to upload transaction: ${n.status}, ${this.lastResponseError}`)}const r=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=r.status,!(r.status>=200&&r.status<300))throw this.lastResponseError=(0,Eu.getError)(r),new Error(`Unable to upload transaction: ${r.status}, ${this.lastResponseError}`);this.txPosted=!0}}Pc.TransactionUploader=tl;Object.defineProperty(Zf,"__esModule",{value:!0});const Au=gi,Mn=Qi,ao=ve,Su=Pc;class u1{api;crypto;chunks;constructor(e,r,n){this.api=e,this.crypto=r,this.chunks=n}async getTransactionAnchor(){const e=await this.api.get("tx_anchor");if(!e.data.match(/^[a-z0-9_-]{43,}/i)||!e.ok)throw new Error(`Could not getTransactionAnchor. Received: ${e.data}. Status: ${e.status}, ${e.statusText}`);return e.data}async getPrice(e,r){let n=r?`price/${e}/${r}`:`price/${e}`;const i=await this.api.get(n);if(!/^\d+$/.test(i.data)||!i.ok)throw new Error(`Could not getPrice. Received: ${i.data}. Status: ${i.status}, ${i.statusText}`);return i.data}async get(e){const r=await this.api.get(`tx/${e}`);if(r.status==200){const n=parseInt(r.data.data_size);if(r.data.format>=2&&n>0&&n<=1024*1024*12){const i=await this.getData(e);return new Mn.default({...r.data,data:i})}return new Mn.default({...r.data,format:r.data.format||1})}throw r.status==404?new Au.default("TX_NOT_FOUND"):r.status==410?new Au.default("TX_FAILED"):new Au.default("TX_INVALID")}fromRaw(e){return new Mn.default(e)}async search(e,r){return this.api.post("arql",{op:"equals",expr1:e,expr2:r}).then(n=>n.data?n.data:[])}getStatus(e){return this.api.get(`tx/${e}/status`).then(r=>r.status==200?{status:200,confirmed:r.data}:{status:r.status,confirmed:null})}async getData(e,r){let n;try{n=await this.chunks.downloadChunkedData(e)}catch(i){console.error(`Error while trying to download chunked data for ${e}`),console.error(i)}if(!n){console.warn(`Falling back to gateway cache for ${e}`);try{const{data:i,ok:s,status:o,statusText:a}=await this.api.get(`/${e}`,{responseType:"arraybuffer"});if(!s)throw new Error("Bad http status code",{cause:{status:o,statusText:a}});n=i}catch(i){console.error(`Error while trying to download contiguous data from gateway cache for ${e}`),console.error(i)}}if(!n)throw new Error(`${e} data was not found!`);return r&&r.decode&&!r.string?n:r&&r.decode&&r.string?ao.bufferToString(n):ao.bufferTob64Url(n)}async sign(e,r,n){const s=typeof r=="object"&&(a=>{let c=!0;return["n","e","d","p","q","dp","dq","qi"].map(f=>!(f in a)&&(c=!1)),c})(r),o=typeof arweaveWallet=="object";if(!s&&!o)throw new Error("No valid JWK or external wallet found to sign transaction.");if(s){e.setOwner(r.n);let a=await e.getSignatureData(),c=await this.crypto.sign(r,a,n),f=await this.crypto.hash(c);e.setSignature({id:ao.bufferTob64Url(f),owner:r.n,signature:ao.bufferTob64Url(c)})}else if(o){try{(await arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}const a=await arweaveWallet.sign(e,n);e.setSignature({id:a.id,owner:a.owner,reward:a.reward,tags:a.tags,signature:a.signature})}else throw new Error("An error occurred while signing. Check wallet is valid")}async verify(e){const r=await e.getSignatureData(),n=e.get("signature",{decode:!0,string:!1}),i=ao.bufferTob64Url(await this.crypto.hash(n));if(e.id!==i)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(e.owner,r,n)}async post(e){if(typeof e=="string"?e=new Mn.default(JSON.parse(e)):typeof e.readInt32BE=="function"?e=new Mn.default(JSON.parse(e.toString())):typeof e=="object"&&!(e instanceof Mn.default)&&(e=new Mn.default(e)),!(e instanceof Mn.default))throw new Error("Must be Transaction object");e.chunks||await e.prepareChunks(e.data);const r=await this.getUploader(e,e.data);try{for(;!r.isComplete;)await r.uploadChunk()}catch(n){if(r.lastResponseStatus>0)return{status:r.lastResponseStatus,statusText:r.lastResponseError,data:{error:r.lastResponseError}};throw n}return{status:200,statusText:"OK",data:{}}}async getUploader(e,r){let n;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),e instanceof Mn.default){if(r||(r=e.data),!(r instanceof Uint8Array))throw new Error("Data format is invalid");e.chunks||await e.prepareChunks(r),n=new Su.TransactionUploader(this.api,e),(!n.data||n.data.length===0)&&(n.data=r)}else{if(typeof e=="string"&&(e=await Su.TransactionUploader.fromTransactionId(this.api,e)),!r||!(r instanceof Uint8Array))throw new Error("Must provide data when resuming upload");n=await Su.TransactionUploader.fromSerialized(this.api,e,r)}return n}async*upload(e,r){const n=await this.getUploader(e,r);for(;!n.isComplete;)await n.uploadChunk(),yield n;return n}}Zf.default=u1;var rl={};Object.defineProperty(rl,"__esModule",{value:!0});const th=ve;class f1{api;crypto;constructor(e,r){this.api=e,this.crypto=r}getBalance(e){return this.api.get(`wallet/${e}/balance`).then(r=>r.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(r=>r.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return!e||e==="use_wallet"?this.getAddress():this.getAddress(e)}async getAddress(e){if(!e||e==="use_wallet"){try{await arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return arweaveWallet.getActiveAddress()}else return this.ownerToAddress(e.n)}async ownerToAddress(e){return th.bufferTob64Url(await this.crypto.hash(th.b64UrlToBuffer(e)))}}rl.default=f1;var Xo={};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.SiloResource=void 0;const rh=ve;class l1{api;crypto;transactions;constructor(e,r,n){this.api=e,this.crypto=r,this.transactions=n}async get(e){if(!e)throw new Error("No Silo URI specified");const r=await this.parseUri(e),n=await this.transactions.search("Silo-Name",r.getAccessKey());if(n.length==0)throw new Error(`No data could be found for the Silo URI: ${e}`);const i=await this.transactions.get(n[0]);if(!i)throw new Error(`No data could be found for the Silo URI: ${e}`);const s=i.get("data",{decode:!0,string:!1});return this.crypto.decrypt(s,r.getEncryptionKey())}async readTransactionData(e,r){if(!r)throw new Error("No Silo URI specified");const n=await this.parseUri(r),i=e.get("data",{decode:!0,string:!1});return this.crypto.decrypt(i,n.getEncryptionKey())}async parseUri(e){const r=e.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!r)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");const n=r[1],i=Math.pow(2,parseInt(r[2])),s=await this.hash(rh.stringToBuffer(n),i),o=rh.bufferTob64(s.slice(0,15)),a=await this.hash(s.slice(16,31),1);return new Dp(e,o,a)}async hash(e,r){let n=await this.crypto.hash(e);for(let i=0;i<r-1;i++)n=await this.crypto.hash(n);return n}}Xo.default=l1;class Dp{uri;accessKey;encryptionKey;constructor(e,r,n){this.uri=e,this.accessKey=r,this.encryptionKey=n}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}}Xo.SiloResource=Dp;var nl={};Object.defineProperty(nl,"__esModule",{value:!0});const nh=gi,d1=ve;class h1{api;constructor(e){this.api=e}async getTransactionOffset(e){const r=await this.api.get(`tx/${e}/offset`);if(r.status===200)return r.data;throw new Error(`Unable to get transaction offset: ${(0,nh.getError)(r)}`)}async getChunk(e){const r=await this.api.get(`chunk/${e}`);if(r.status===200)return r.data;throw new Error(`Unable to get chunk: ${(0,nh.getError)(r)}`)}async getChunkData(e){const r=await this.getChunk(e);return d1.b64UrlToBuffer(r.chunk)}firstChunkOffset(e){return parseInt(e.offset)-parseInt(e.size)+1}async downloadChunkedData(e){const r=await this.getTransactionOffset(e),n=parseInt(r.size),s=parseInt(r.offset)-n+1,o=new Uint8Array(n);let a=0;for(;a<n;){this.api.config.logging&&console.log(`[chunk] ${a}/${n}`);let c;try{c=await this.getChunkData(s+a)}catch{console.error(`[chunk] Failed to fetch chunk at offset ${s+a}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(c)o.set(c,a),a+=c.length;else throw new Error(`Couldn't complete data download at ${a}/${n}`)}return o}}nl.default=h1;var il={};Object.defineProperty(il,"__esModule",{value:!0});const ih=gi;class ic{api;network;static HASH_ENDPOINT="block/hash/";static HEIGHT_ENDPOINT="block/height/";constructor(e,r){this.api=e,this.network=r}async get(e){const r=await this.api.get(`${ic.HASH_ENDPOINT}${e}`);if(r.status===200)return r.data;throw r.status===404?new ih.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getByHeight(e){const r=await this.api.get(`${ic.HEIGHT_ENDPOINT}${e}`);if(r.status===200)return r.data;throw r.status===404?new ih.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${r}`)}async getCurrent(){const{current:e}=await this.network.getInfo();return await this.get(e)}}il.default=ic;Object.defineProperty(Ds,"__esModule",{value:!0});const p1=Wf,g1=Yf,y1=Qf,m1=Xf,b1=Zf,x1=rl,sh=Qi,co=ve,v1=Xo,w1=nl,_1=il;class Ts{api;wallets;transactions;network;blocks;ar;silo;chunks;static init;static crypto=new y1.default;static utils=co;constructor(e){this.api=new g1.default(e),this.wallets=new x1.default(this.api,Ts.crypto),this.chunks=new w1.default(this.api),this.transactions=new b1.default(this.api,Ts.crypto,this.chunks),this.silo=new v1.default(this.api,this.crypto,this.transactions),this.network=new m1.default(this.api),this.blocks=new _1.default(this.api,this.network),this.ar=new p1.default}get crypto(){return Ts.crypto}get utils(){return Ts.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(e,r){const n={};if(Object.assign(n,e),!e.data&&!(e.target&&e.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(e.owner==null&&r&&r!=="use_wallet"&&(n.owner=r.n),e.last_tx==null&&(n.last_tx=await this.transactions.getTransactionAnchor()),typeof e.data=="string"&&(e.data=co.stringToBuffer(e.data)),e.data instanceof ArrayBuffer&&(e.data=new Uint8Array(e.data)),e.data&&!(e.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(e.reward==null){const s=e.data?e.data.byteLength:0;n.reward=await this.transactions.getPrice(s,n.target)}n.data_root="",n.data_size=e.data?e.data.byteLength.toString():"0",n.data=e.data||new Uint8Array(0);const i=new sh.default(n);return await i.getSignatureData(),i}async createSiloTransaction(e,r,n){const i={};if(Object.assign(i,e),!e.data)throw new Error("Silo transactions must have a 'data' value");if(!n)throw new Error("No Silo URI specified.");if(e.target||e.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(e.owner==null){if(!r||!r.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");i.owner=r.n}e.last_tx==null&&(i.last_tx=await this.transactions.getTransactionAnchor());const s=await this.silo.parseUri(n);if(typeof e.data=="string"){const a=await this.crypto.encrypt(co.stringToBuffer(e.data),s.getEncryptionKey());i.reward=await this.transactions.getPrice(a.byteLength),i.data=co.bufferTob64Url(a)}if(e.data instanceof Uint8Array){const a=await this.crypto.encrypt(e.data,s.getEncryptionKey());i.reward=await this.transactions.getPrice(a.byteLength),i.data=co.bufferTob64Url(a)}const o=new sh.default(i);return o.addTag("Silo-Name",s.getAccessKey()),o.addTag("Silo-Version","0.1.0"),o}arql(e){return this.api.post("/arql",e).then(r=>r.data||[])}}Ds.default=Ts;var Ic={};Object.defineProperty(Ic,"__esModule",{value:!0});Ic.getDefaultConfig=void 0;const E1=(t,e)=>{const r=/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,n=e.split("."),i=n[n.length-1],s=["localhost","[::1]"];return s.includes(e)||t=="file"||s.includes(i)||!!e.match(r)||!!i.match(r)},A1=t=>{const e=t.charAt(0)==="[",r=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/;return!!t.match(r)||e},S1=(t,e)=>{if(E1(t,e))return{protocol:"https",host:"arweave.net",port:443};if(!A1(e)){let r=e.split(".");if(r.length>=3){r.shift();const n=r.join(".");return{protocol:t,host:n}}}return{protocol:t,host:e}};Ic.getDefaultConfig=S1;(function(t){var e=F&&F.__createBinding||(Object.create?function(s,o,a,c){c===void 0&&(c=a);var f=Object.getOwnPropertyDescriptor(o,a);(!f||("get"in f?!o.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(s,c,f)}:function(s,o,a,c){c===void 0&&(c=a),s[c]=o[a]}),r=F&&F.__exportStar||function(s,o){for(var a in s)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&e(o,s,a)};Object.defineProperty(t,"__esModule",{value:!0});const n=Ds,i=Ic;n.default.init=function(s={}){const o={host:"arweave.net",port:443,protocol:"https"};if(typeof location!="object"||!location.protocol||!location.hostname)return new n.default({...s,...o});const a=location.protocol.replace(":",""),c=location.hostname,f=location.port?parseInt(location.port):a=="https"?443:80,l=(0,i.getDefaultConfig)(a,c),h=s.protocol||l.protocol,m=s.host||l.host,v=s.port||l.port||f;return new n.default({...s,host:m,protocol:h,port:v})},typeof globalThis=="object"?globalThis.Arweave=n.default:typeof self=="object"&&(self.Arweave=n.default),r(Ds,t),t.default=n.default})(Yi);var T1=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.hashStream=Ln.deepHashChunks=Ln.deepHash=void 0;const It=T1(Yi),Fp=Wi;async function Lp(t){if(typeof t[Symbol.asyncIterator]=="function"){const i=t,s=Fp.createHash("sha384");let o=0;for await(const f of i)o+=f.byteLength,s.update(f);const a=It.default.utils.concatBuffers([It.default.utils.stringToBuffer("blob"),It.default.utils.stringToBuffer(o.toString())]),c=It.default.utils.concatBuffers([await It.default.crypto.hash(a,"SHA-384"),s.digest()]);return await It.default.crypto.hash(c,"SHA-384")}else if(Array.isArray(t)){const i=It.default.utils.concatBuffers([It.default.utils.stringToBuffer("list"),It.default.utils.stringToBuffer(t.length.toString())]);return await sl(t,await It.default.crypto.hash(i,"SHA-384"))}const e=t,r=It.default.utils.concatBuffers([It.default.utils.stringToBuffer("blob"),It.default.utils.stringToBuffer(e.byteLength.toString())]),n=It.default.utils.concatBuffers([await It.default.crypto.hash(r,"SHA-384"),await It.default.crypto.hash(e,"SHA-384")]);return await It.default.crypto.hash(n,"SHA-384")}Ln.deepHash=Lp;async function sl(t,e){if(t.length<1)return e;const r=It.default.utils.concatBuffers([e,await Lp(t[0])]),n=await It.default.crypto.hash(r,"SHA-384");return await sl(t.slice(1),n)}Ln.deepHashChunks=sl;async function k1(t){const e=Fp.createHash("sha384");for await(const r of t)e.update(r);return e.digest()}Ln.hashStream=k1;var P1=F&&F.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),I1=F&&F.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),C1=F&&F.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&P1(e,t,r);return I1(e,t),e};Object.defineProperty(Qo,"__esModule",{value:!0});Qo.getSignatureData=void 0;const hs=ht,N1=Pt,M1=Ln;async function B1(t){return N1.isBrowser?(await Promise.resolve().then(()=>C1(kc))).default([hs.stringToBuffer("dataitem"),hs.stringToBuffer("1"),hs.stringToBuffer(t.signatureType.toString()),t.rawOwner,t.rawTarget,t.rawAnchor,t.rawTags,t.rawData]):M1.deepHash([hs.stringToBuffer("dataitem"),hs.stringToBuffer("1"),hs.stringToBuffer(t.signatureType.toString()),t.rawOwner,t.rawTarget,t.rawAnchor,t.rawTags,t.rawData])}Qo.getSignatureData=B1;var Cc={},Nc={},ol={},Up={exports:{}},Kp={exports:{}},R1=Wi,O1=zs,D1=new Hp(4096);function Fo(t){return typeof z.Buffer.alloc=="function"?z.Buffer.alloc(t):new z.Buffer(t)}function jp(t,e){return typeof z.Buffer.from=="function"?z.Buffer.from(t,e):new z.Buffer(t,e)}function $p(t){return t.charAt(0).toUpperCase()+t.slice(1)}function F1(t,e){return t===e?0:t<e?-1:1}function L1(t,e,r){var n=t[e];return n===void 0?r:n}function U1(t,e){e=e||"md5";var r=R1.createHash(e);return r.end(t),r.read()}function K1(t,e){var r=-1,n,i;if(!t)return-1;for(n=0,i=t.length;n<i;n++)if(t[n]===e){if(r>=0)return-2;r=n}return r}function j1(t,e){var r={},n,i;for(n=0;n<t.length;n++)i=t[n],r[e(i)]=i;return r}function $1(t){return Object.keys(t).map(function(e){return t[e]})}function H1(t,e){var r={},n,i,s;for(n=0,i=t.length;n<i;n++){if(s=t[n],e&&(s=e(s)),r[s])return!0;r[s]=!0}return!1}function q1(t,e,r){var n=Object.getOwnPropertyNames(t),i,s,o;for(i=0,s=n.length;i<s;i++)if(o=n[i],!e.hasOwnProperty(o)||r){var a=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(e,o,a)}return e}function z1(t,e){e=e|0;var r=t.charAt(e++);if(/[\d-]/.test(r)){for(;/[eE\d.+-]/.test(t.charAt(e));)e++;return e}else{if(/true|null/.test(t.slice(e-1,e+3)))return e+3;if(/false/.test(t.slice(e-1,e+4)))return e+4}var n=0,i=!1;do switch(r){case"{":case"[":i||n++;break;case"}":case"]":if(!i&&!--n)return e;break;case'"':if(i=!i,!n&&!i)return e;break;case"\\":e++}while(r=t.charAt(e++));return-1}function G1(){throw new Error("abstract")}function V1(t,e){var r=t.prototype,n,i,s,o;for(n=0,i=e.length;n<i;n++)s=e[n],o="get"+$p(s),r[o]=O1.deprecate(a(s),"use `."+s+"` instead of `."+o+"()`");function a(c){return function(){var f=this[c];return typeof f=="function"?f.apply(this,arguments):f}}}function Hp(t){this._len=t|0,this._pos=0,this._slab=Fo(this._len)}Hp.prototype.alloc=function(t){var e=this._len;return t>e?Fo(t):(this._pos+t>e&&(this._slab=Fo(e),this._pos=0),this._slab.slice(this._pos,this._pos+=t))};function Xi(t){var e=1103515245,r=12345,n=Math.pow(2,31),i=Math.floor(t||Math.random()*(n-1));this._max=n,this._nextInt=function(){return i=(e*i+r)%n}}Xi.prototype.nextBoolean=function(){return!!(this._nextInt()%2)};Xi.prototype.nextInt=function(t,e){return e===void 0&&(e=t,t=0),e=e===void 0?this._max:e,t+Math.floor(this.nextFloat()*(e-t))};Xi.prototype.nextFloat=function(t,e){return e===void 0&&(e=t,t=0),e=e===void 0?1:e,t+(e-t)*this._nextInt()/this._max};Xi.prototype.nextString=function(t,e){t|=0,e=e||"aA";var r="";e.indexOf("a")>-1&&(r+="abcdefghijklmnopqrstuvwxyz"),e.indexOf("A")>-1&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),e.indexOf("#")>-1&&(r+="0123456789"),e.indexOf("!")>-1&&(r+="~`!@#$%^&*()_+-={}[]:\";'<>?,./|\\");for(var n=[],i=0;i<t;i++)n.push(this.choice(r));return n.join("")};Xi.prototype.nextBuffer=function(t){var e=[],r;for(r=0;r<t;r++)e.push(this.nextInt(256));return jp(e)};Xi.prototype.choice=function(t){var e=t.length;if(!e)throw new Error("choosing from empty array");return t[this.nextInt(e)]};function al(){this._index=0,this._items=[]}al.prototype.push=function(t){var e=this._items,r=e.length|0,n;for(e.push(t);r>0&&e[r].index<e[n=r-1>>1].index;)t=e[r],e[r]=e[n],e[n]=t,r=n};al.prototype.pop=function(){var t=this._items,e=t.length-1|0,r=t[0];if(!r||r.index>this._index)return null;if(this._index++,!e)return t.pop(),r;t[0]=t.pop();for(var n=e>>1,i=0,s,o,a,c,f,l,h;i<n&&(c=t[i],s=(i<<1)+1,o=i+1<<1,l=t[s],h=t[o],!h||l.index<=h.index?(f=l,a=s):(f=h,a=o),!(f.index>=c.index));)t[a]=c,t[i]=f,i=a;return r};function ue(t,e){if(this.buf=t,this.pos=e|0,this.pos<0)throw new Error("negative offset")}ue.prototype.isValid=function(){return this.pos<=this.buf.length};ue.prototype.readBoolean=function(){return!!this.buf[this.pos++]};ue.prototype.skipBoolean=function(){this.pos++};ue.prototype.writeBoolean=function(t){this.buf[this.pos++]=!!t};ue.prototype.readInt=ue.prototype.readLong=function(){var t=0,e=0,r=this.buf,n,i,s,o;do n=r[this.pos++],i=n&128,t|=(n&127)<<e,e+=7;while(i&&e<28);if(i){s=t,o=268435456;do n=r[this.pos++],s+=(n&127)*o,o*=128;while(n&128);return(s%2?-(s+1):s)/2}return t>>1^-(t&1)};ue.prototype.skipInt=ue.prototype.skipLong=function(){for(var t=this.buf;t[this.pos++]&128;);};ue.prototype.writeInt=ue.prototype.writeLong=function(t){var e=this.buf,r,n;if(t>=-1073741824&&t<1073741824){n=t>=0?t<<1:~t<<1|1;do e[this.pos]=n&127,n>>=7;while(n&&(e[this.pos++]|=128))}else{r=t>=0?t*2:-t*2-1;do e[this.pos]=r&127,r/=128;while(r>=1&&(e[this.pos++]|=128))}this.pos++};ue.prototype.readFloat=function(){var t=this.buf,e=this.pos;if(this.pos+=4,!(this.pos>t.length))return this.buf.readFloatLE(e)};ue.prototype.skipFloat=function(){this.pos+=4};ue.prototype.writeFloat=function(t){var e=this.buf,r=this.pos;if(this.pos+=4,!(this.pos>e.length))return this.buf.writeFloatLE(t,r)};ue.prototype.readDouble=function(){var t=this.buf,e=this.pos;if(this.pos+=8,!(this.pos>t.length))return this.buf.readDoubleLE(e)};ue.prototype.skipDouble=function(){this.pos+=8};ue.prototype.writeDouble=function(t){var e=this.buf,r=this.pos;if(this.pos+=8,!(this.pos>e.length))return this.buf.writeDoubleLE(t,r)};ue.prototype.readFixed=function(t){var e=this.pos;if(this.pos+=t,!(this.pos>this.buf.length)){var r=D1.alloc(t);return this.buf.copy(r,0,e,e+t),r}};ue.prototype.skipFixed=function(t){this.pos+=t};ue.prototype.writeFixed=function(t,e){e=e||t.length;var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&t.copy(this.buf,r,0,e)};ue.prototype.readBytes=function(){return this.readFixed(this.readLong())};ue.prototype.skipBytes=function(){var t=this.readLong();this.pos+=t};ue.prototype.writeBytes=function(t){var e=t.length;this.writeLong(e),this.writeFixed(t,e)};typeof z.Buffer.prototype.utf8Slice=="function"?ue.prototype.readString=function(){var t=this.readLong(),e=this.pos,r=this.buf;if(this.pos+=t,!(this.pos>r.length))return this.buf.utf8Slice(e,e+t)}:ue.prototype.readString=function(){var t=this.readLong(),e=this.pos,r=this.buf;if(this.pos+=t,!(this.pos>r.length))return this.buf.slice(e,e+t).toString()};ue.prototype.skipString=function(){var t=this.readLong();this.pos+=t};ue.prototype.writeString=function(t){var e=z.Buffer.byteLength(t),r=this.buf;this.writeLong(e);var n=this.pos;if(this.pos+=e,!(this.pos>r.length))if(e>64)this._writeUtf8(t,e);else{var i,s,o,a;for(i=0,s=e;i<s;i++)o=t.charCodeAt(i),o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=o&63|128):(o&64512)===55296&&((a=t.charCodeAt(i+1))&64512)===56320?(o=65536+((o&1023)<<10)+(a&1023),i++,r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=o&63|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=o&63|128)}};typeof z.Buffer.prototype.utf8Write=="function"?ue.prototype._writeUtf8=function(t,e){this.buf.utf8Write(t,this.pos-e,e)}:ue.prototype._writeUtf8=function(t,e){this.buf.write(t,this.pos-e,e,"utf8")};typeof z.Buffer.prototype.latin1Write=="function"?ue.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.latin1Write(t,r,e)}:typeof z.Buffer.prototype.binaryWrite=="function"?ue.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.binaryWrite(t,r,e)}:ue.prototype.writeBinary=function(t,e){var r=this.pos;this.pos+=e,!(this.pos>this.buf.length)&&this.buf.write(t,r,e,"binary")};ue.prototype.matchBoolean=function(t){return this.buf[this.pos++]-t.buf[t.pos++]};ue.prototype.matchInt=ue.prototype.matchLong=function(t){var e=this.readLong(),r=t.readLong();return e===r?0:e<r?-1:1};ue.prototype.matchFloat=function(t){var e=this.readFloat(),r=t.readFloat();return e===r?0:e<r?-1:1};ue.prototype.matchDouble=function(t){var e=this.readDouble(),r=t.readDouble();return e===r?0:e<r?-1:1};ue.prototype.matchFixed=function(t,e){return this.readFixed(e).compare(t.readFixed(e))};ue.prototype.matchBytes=ue.prototype.matchString=function(t){var e=this.readLong(),r=this.pos;this.pos+=e;var n=t.readLong(),i=t.pos;t.pos+=n;var s=this.buf.slice(r,this.pos),o=t.buf.slice(i,t.pos);return s.compare(o)};ue.prototype.unpackLongBytes=function(){var t=Fo(8),e=0,r=0,n=6,i=this.buf,s,o;for(s=i[this.pos++],o=s&1,t.fill(0),e|=(s&127)>>1;s&128;)s=i[this.pos++],e|=(s&127)<<n,n+=7,n>=8&&(n-=8,t[r++]=e,e>>=8);return t[r]=e,o&&ff(t,8),t};ue.prototype.packLongBytes=function(t){var e=(t[7]&128)>>7,r=this.buf,n=1,i=0,s=3,o;e?(ff(t,8),o=1):o=0;for(var a=[t.readUIntLE(0,3),t.readUIntLE(3,3),t.readUIntLE(6,2)];s&&!a[--s];);for(;i<s;)for(o|=a[i++]<<n,n+=24;n>7;)r[this.pos++]=o&127|128,o>>=7,n-=7;o|=a[s]<<n;do r[this.pos]=o&127,o>>=7;while(o&&(r[this.pos++]|=128));this.pos++,e&&ff(t,8)};function ff(t,e){for(;e--;)t[e]=~t[e]}var Ws={abstractFunction:G1,addDeprecatedGetters:V1,bufferFrom:jp,capitalize:$p,copyOwnProperties:q1,getHash:U1,compare:F1,getOption:L1,jsonEnd:z1,newBuffer:Fo,objectValues:$1,toMap:j1,singleIndexOf:K1,hasDuplicates:H1,Lcg:Xi,OrderedQueue:al,Tap:ue},de=Ws,qp=z,xt=zs,qi=de.Tap,lf=xt.debuglog("avsc:types"),le=xt.format,sc={array:ur,boolean:Hn,bytes:yr,double:Cn,enum:ar,error:mt,fixed:cr,float:In,int:qn,long:gr,map:Zt,null:Pr,record:mt,string:sn},J1=/^[A-Za-z_][A-Za-z0-9_]*$/,jt=new de.Lcg,Ui=new qi(new qp.SlowBuffer(1024)),ii=null,Cs=[];function G(t,e){var r;if(ii?(r=ii,Cs.push([ii,this]),ii=null):r=this,this._hash=new W1,this.name=void 0,this.aliases=void 0,this.doc=t&&t.doc?""+t.doc:void 0,t){var n=t.name,i=t.namespace===void 0?e&&e.namespace:t.namespace;if(n!==void 0){if(n=oc(n,i),Ys(n))throw new Error(le("cannot rename primitive type: %j",n));var s=e&&e.registry;if(s){if(s[n]!==void 0)throw new Error(le("duplicate type name: %s",n));s[n]=r}}else if(e&&e.noAnonymousTypes)throw new Error(le("missing name property in schema: %j",t));this.name=n,this.aliases=t.aliases?t.aliases.map(function(o){return oc(o,i)}):[]}}G.forSchema=function(t,e){e=e||{},e.registry=e.registry||{};var r=function(c){switch(c===!0?c="always":c===!1?c="never":c===void 0?c="auto":typeof c=="string"&&(c=c.toLowerCase()),c){case"always":return Ir;case"never":return sr;case"auto":return;default:throw new Error(le("invalid wrap unions option: %j",c))}}(e.wrapUnions);if(t===null)throw new Error('invalid type: null (did you mean "null"?)');if(G.isType(t))return t;var n;if(e.typeHook&&(n=e.typeHook(t,e))){if(!G.isType(n))throw new Error(le("invalid typehook return value: %j",n));return n}if(typeof t=="string"){if(t=oc(t,e.namespace),n=e.registry[t],n)return n;if(Ys(t))return e.registry[t]=G.forSchema({type:t},e);throw new Error(le("undefined type name: %s",t))}if(t.logicalType&&e.logicalTypes&&!ii){var i=e.logicalTypes[t.logicalType];if(i){var s=e.namespace,o={};Object.keys(e.registry).forEach(function(c){o[c]=e.registry[c]});try{return lf("instantiating logical type for %s",t.logicalType),new i(t,e)}catch(c){if(lf("failed to instantiate logical type for %s",t.logicalType),e.assertLogicalTypes)throw c;ii=null,e.namespace=s,e.registry=o}}}if(Array.isArray(t)){var a=t.map(function(c){return G.forSchema(c,e)});r||(r=Y1(a)?Ir:sr),n=new r(a,e)}else n=function(c){var f=sc[c];if(f===void 0)throw new Error(le("unknown type: %j",c));return new f(t,e)}(t.type);return n};G.forValue=function(t,e){if(e=e||{},e.emptyArrayType=e.emptyArrayType||G.forSchema({type:"array",items:"null"}),e.valueHook){var r=e.valueHook(t,e);if(r!==void 0){if(!G.isType(r))throw new Error(le("invalid value hook return value: %j",r));return r}}switch(typeof t){case"string":return G.forSchema("string",e);case"boolean":return G.forSchema("boolean",e);case"number":return(t|0)===t?G.forSchema("int",e):Math.abs(t)<9007199254740991?G.forSchema("float",e):G.forSchema("double",e);case"object":if(t===null)return G.forSchema("null",e);if(Array.isArray(t))return t.length?G.forSchema({type:"array",items:G.forTypes(t.map(function(i){return G.forValue(i,e)}))},e):e.emptyArrayType;if(z.Buffer.isBuffer(t))return G.forSchema("bytes",e);var n=Object.keys(t);return n.some(function(i){return!Zo(i)})?G.forSchema({type:"map",values:G.forTypes(n.map(function(i){return G.forValue(t[i],e)}),e)},e):G.forSchema({type:"record",fields:n.map(function(i){return{name:i,type:G.forValue(t[i],e)}})},e);default:throw new Error(le("cannot infer type from: %j",t))}};G.forTypes=function(t,e){if(!t.length)throw new Error("no types to combine");if(t.length===1)return t[0];e=e||{};var r=[],n=0,i=!0;if(t.forEach(function(h){switch(h.typeName){case"union:unwrapped":i=!1,r=r.concat(h.types);break;case"union:wrapped":n++,r=r.concat(h.types);break;case"null":r.push(h);break;default:i=!1,r.push(h)}}),n){if(!i)throw new Error("cannot combine wrapped union");var s={};r.forEach(function(h){var m=h.branchName,v=s[m];if(!v)s[m]=h;else if(!h.equals(v))throw new Error("inconsistent branch type")});var o=e.wrapUnions,a;e.wrapUnions=!0;try{a=G.forSchema(Object.keys(s).map(function(h){return s[h]}),e)}catch(h){throw e.wrapUnions=o,h}return e.wrapUnions=o,a}var c={};r.forEach(function(h){var m=Mc(h),v=c[m];v||(c[m]=v=[]),v.push(h)});var f=Object.keys(c),l=f.map(function(h){var m=c[h];if(m.length===1)return m[0];switch(h){case"null":case"boolean":return m[0];case"number":return Q1(m);case"string":return X1(m,e);case"buffer":return Z1(m,e);case"array":return m=m.filter(function(v){return v!==e.emptyArrayType}),m.length?G.forSchema({type:"array",items:G.forTypes(m.map(function(v){return v.itemsType}))},e):e.emptyArrayType;default:return ev(m,e)}});return l.length===1?l[0]:G.forSchema(l,e)};G.isType=function(){var t=arguments.length;if(!t)return!1;var e=arguments[0];if(!e||typeof e._update!="function"||typeof e.fingerprint!="function")return!1;if(t===1)return!0;var r=e.typeName,n;for(n=1;n<t;n++)if(r.indexOf(arguments[n])===0)return!0;return!1};G.__reset=function(t){lf("resetting type buffer to %d",t),Ui.buf=new qp.SlowBuffer(t)};Object.defineProperty(G.prototype,"branchName",{enumerable:!0,get:function(){if(this.name)return this.name;var t=G.isType(this,"logical")?this.underlyingType:this;return G.isType(t,"abstract")?t._concreteTypeName:G.isType(t,"union")?void 0:t.typeName}});G.prototype.clone=function(t,e){return e?(e={coerce:!!e.coerceBuffers|0,fieldHook:e.fieldHook,qualifyNames:!!e.qualifyNames,skip:!!e.skipMissingFields,wrap:!!e.wrapUnions|0},this._copy(t,e)):this.fromBuffer(this.toBuffer(t))};G.prototype.compare=de.abstractFunction;G.prototype.compareBuffers=function(t,e){return this._match(new qi(t),new qi(e))};G.prototype.createResolver=function(t,e){if(!G.isType(t))throw new Error(le("not a type: %j",t));if(!G.isType(this,"union","logical")&&G.isType(t,"logical"))return this.createResolver(t.underlyingType,e);e=e||{},e.registry=e.registry||{};var r,n;if(G.isType(this,"record","error")&&G.isType(t,"record","error")&&(n=this.name+":"+t.name,r=e.registry[n],r))return r;if(r=new cl(this),n&&(e.registry[n]=r),G.isType(t,"union")){var i=t.types.map(function(s){return this.createResolver(s,e)},this);r._read=function(s){var o=s.readLong(),a=i[o];if(a===void 0)throw new Error(le("invalid union index: %s",o));return i[o]._read(s)}}else this._update(r,t,e);if(!r._read)throw new Error(le("cannot read %s as %s",t,this));return Object.freeze(r)};G.prototype.decode=function(t,e,r){var n=new qi(t,e),i=zp(this,n,r);return n.isValid()?{value:i,offset:n.pos}:{value:void 0,offset:-1}};G.prototype.encode=function(t,e,r){var n=new qi(e,r);return this._write(n,t),n.isValid()?n.pos:e.length-n.pos};G.prototype.equals=function(t){return G.isType(t)&&this.fingerprint().equals(t.fingerprint())};G.prototype.fingerprint=function(t){if(t)return de.getHash(JSON.stringify(this.schema()),t);if(!this._hash.str){var e=JSON.stringify(this.schema());this._hash.str=de.getHash(e).toString("binary")}return de.bufferFrom(this._hash.str,"binary")};G.prototype.fromBuffer=function(t,e,r){var n=new qi(t),i=zp(this,n,e,r);if(!n.isValid())throw new Error("truncated buffer");if(!r&&n.pos<t.length)throw new Error("trailing data");return i};G.prototype.fromString=function(t){return this._copy(JSON.parse(t),{coerce:2})};G.prototype.inspect=function(){var t=this.typeName,e=Gp(t);if(Ys(t))return le("<%s>",e);var r=this.schema({exportAttrs:!0,noDeref:!0});return typeof r=="object"&&!G.isType(this,"logical")&&(r.type=void 0),le("<%s %j>",e,r)};G.prototype.isValid=function(t,e){var r=(e&&e.noUndeclaredFields)|0,n=e&&e.errorHook,i,s;return n&&(s=[],i=function(o,a){n.call(this,s.slice(),o,a,t)}),this._check(t,r,i,s)};G.prototype.random=de.abstractFunction;G.prototype.schema=function(t){return this._attrs({exportAttrs:!!(t&&t.exportAttrs),noDeref:!!(t&&t.noDeref)})};G.prototype.toBuffer=function(t){Ui.pos=0,this._write(Ui,t);var e=de.newBuffer(Ui.pos);return Ui.isValid()?Ui.buf.copy(e,0,0,Ui.pos):this._write(new qi(e),t),e};G.prototype.toJSON=function(){return this.schema({exportAttrs:!0})};G.prototype.toString=function(t){return t===void 0?JSON.stringify(this.schema({noDeref:!0})):JSON.stringify(this._copy(t,{coerce:3}))};G.prototype.wrap=function(t){var e=this._branchConstructor;return e===null?null:new e(t)};G.prototype._attrs=function(t){t.derefed=t.derefed||{};var e=this.name;if(e!==void 0){if(t.noDeref||t.derefed[e])return e;t.derefed[e]=!0}var r={};this.name!==void 0&&(r.name=e),r.type=this.typeName;var n=this._deref(r,t);return n!==void 0&&(r=n),t.exportAttrs&&(this.aliases&&this.aliases.length&&(r.aliases=this.aliases),this.doc!==void 0&&(r.doc=this.doc)),r};G.prototype._createBranchConstructor=function(){var t=this.branchName;if(t==="null")return null;function e(){return function(i){~t.indexOf(".")?this[`${t}`]=i:this[t]=i}}var r=e();return r.type=this,r.prototype.unwrap=function(){return this[`${t}`]},r.prototype.unwrapped=r.prototype.unwrap,r};G.prototype._peek=function(t){var e=t.pos,r=this._read(t);return t.pos=e,r};G.prototype._check=de.abstractFunction;G.prototype._copy=de.abstractFunction;G.prototype._deref=de.abstractFunction;G.prototype._match=de.abstractFunction;G.prototype._read=de.abstractFunction;G.prototype._skip=de.abstractFunction;G.prototype._update=de.abstractFunction;G.prototype._write=de.abstractFunction;G.prototype.getAliases=function(){return this.aliases};G.prototype.getFingerprint=G.prototype.fingerprint;G.prototype.getName=function(t){return this.name||!t?this.name:this.branchName};G.prototype.getSchema=G.prototype.schema;G.prototype.getTypeName=function(){return this.typeName};function pt(t){G.call(this),this._branchConstructor=this._createBranchConstructor(),t||Object.freeze(this)}xt.inherits(pt,G);pt.prototype._update=function(t,e){e.typeName===this.typeName&&(t._read=this._read)};pt.prototype._copy=function(t){return this._check(t,void 0,it),t};pt.prototype._deref=function(){return this.typeName};pt.prototype.compare=de.compare;function Pr(){pt.call(this)}xt.inherits(Pr,pt);Pr.prototype._check=function(t,e,r){var n=t===null;return!n&&r&&r(t,this),n};Pr.prototype._read=function(){return null};Pr.prototype._skip=function(){};Pr.prototype._write=function(t,e){e!==null&&it(e,this)};Pr.prototype._match=function(){return 0};Pr.prototype.compare=Pr.prototype._match;Pr.prototype.typeName="null";Pr.prototype.random=Pr.prototype._read;function Hn(){pt.call(this)}xt.inherits(Hn,pt);Hn.prototype._check=function(t,e,r){var n=typeof t=="boolean";return!n&&r&&r(t,this),n};Hn.prototype._read=function(t){return t.readBoolean()};Hn.prototype._skip=function(t){t.skipBoolean()};Hn.prototype._write=function(t,e){typeof e!="boolean"&&it(e,this),t.writeBoolean(e)};Hn.prototype._match=function(t,e){return t.matchBoolean(e)};Hn.prototype.typeName="boolean";Hn.prototype.random=function(){return jt.nextBoolean()};function qn(){pt.call(this)}xt.inherits(qn,pt);qn.prototype._check=function(t,e,r){var n=t===(t|0);return!n&&r&&r(t,this),n};qn.prototype._read=function(t){return t.readInt()};qn.prototype._skip=function(t){t.skipInt()};qn.prototype._write=function(t,e){e!==(e|0)&&it(e,this),t.writeInt(e)};qn.prototype._match=function(t,e){return t.matchInt(e)};qn.prototype.typeName="int";qn.prototype.random=function(){return jt.nextInt(1e3)|0};function gr(){pt.call(this)}xt.inherits(gr,pt);gr.prototype._check=function(t,e,r){var n=typeof t=="number"&&t%1===0&&fl(t);return!n&&r&&r(t,this),n};gr.prototype._read=function(t){var e=t.readLong();if(!fl(e))throw new Error("potential precision loss");return e};gr.prototype._skip=function(t){t.skipLong()};gr.prototype._write=function(t,e){(typeof e!="number"||e%1||!fl(e))&&it(e,this),t.writeLong(e)};gr.prototype._match=function(t,e){return t.matchLong(e)};gr.prototype._update=function(t,e){switch(e.typeName){case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=this._read}};gr.prototype.typeName="long";gr.prototype.random=function(){return jt.nextInt()};gr.__with=function(t,e){t=t||{};var r={toBuffer:"_toBuffer",fromBuffer:"_fromBuffer",fromJSON:"_fromJSON",toJSON:"_toJSON",isValid:"_isValid",compare:"compare"},n=new Jt(e);return Object.keys(r).forEach(function(i){if(t[i]===void 0)throw new Error(le("missing method implementation: %s",i));n[r[i]]=t[i]}),Object.freeze(n)};function In(){pt.call(this)}xt.inherits(In,pt);In.prototype._check=function(t,e,r){var n=typeof t=="number";return!n&&r&&r(t,this),n};In.prototype._read=function(t){return t.readFloat()};In.prototype._skip=function(t){t.skipFloat()};In.prototype._write=function(t,e){typeof e!="number"&&it(e,this),t.writeFloat(e)};In.prototype._match=function(t,e){return t.matchFloat(e)};In.prototype._update=function(t,e){switch(e.typeName){case"float":case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=function(r){return r.readLong()}}};In.prototype.typeName="float";In.prototype.random=function(){return jt.nextFloat(1e3)};function Cn(){pt.call(this)}xt.inherits(Cn,pt);Cn.prototype._check=function(t,e,r){var n=typeof t=="number";return!n&&r&&r(t,this),n};Cn.prototype._read=function(t){return t.readDouble()};Cn.prototype._skip=function(t){t.skipDouble()};Cn.prototype._write=function(t,e){typeof e!="number"&&it(e,this),t.writeDouble(e)};Cn.prototype._match=function(t,e){return t.matchDouble(e)};Cn.prototype._update=function(t,e){switch(e.typeName){case"double":case"float":case"int":t._read=e._read;break;case"abstract:long":case"long":t._read=function(r){return r.readLong()}}};Cn.prototype.typeName="double";Cn.prototype.random=function(){return jt.nextFloat()};function sn(){pt.call(this)}xt.inherits(sn,pt);sn.prototype._check=function(t,e,r){var n=typeof t=="string";return!n&&r&&r(t,this),n};sn.prototype._read=function(t){return t.readString()};sn.prototype._skip=function(t){t.skipString()};sn.prototype._write=function(t,e){typeof e!="string"&&it(e,this),t.writeString(e)};sn.prototype._match=function(t,e){return t.matchString(e)};sn.prototype._update=function(t,e){switch(e.typeName){case"bytes":case"string":t._read=this._read}};sn.prototype.typeName="string";sn.prototype.random=function(){return jt.nextString(jt.nextInt(32))};function yr(){pt.call(this)}xt.inherits(yr,pt);yr.prototype._check=function(t,e,r){var n=z.Buffer.isBuffer(t);return!n&&r&&r(t,this),n};yr.prototype._read=function(t){return t.readBytes()};yr.prototype._skip=function(t){t.skipBytes()};yr.prototype._write=function(t,e){z.Buffer.isBuffer(e)||it(e,this),t.writeBytes(e)};yr.prototype._match=function(t,e){return t.matchBytes(e)};yr.prototype._update=sn.prototype._update;yr.prototype._copy=function(t,e){var r;switch((e&&e.coerce)|0){case 3:return this._check(t,void 0,it),t.toString("binary");case 2:if(typeof t!="string")throw new Error(le("cannot coerce to buffer: %j",t));return r=de.bufferFrom(t,"binary"),this._check(r,void 0,it),r;case 1:if(!Vp(t))throw new Error(le("cannot coerce to buffer: %j",t));return r=de.bufferFrom(t.data),this._check(r,void 0,it),r;default:return this._check(t,void 0,it),de.bufferFrom(t)}};yr.prototype.compare=z.Buffer.compare;yr.prototype.typeName="bytes";yr.prototype.random=function(){return jt.nextBuffer(jt.nextInt(32))};function Nn(t,e){if(G.call(this),!Array.isArray(t))throw new Error(le("non-array union schema: %j",t));if(!t.length)throw new Error("empty union");this.types=Object.freeze(t.map(function(r){return G.forSchema(r,e)})),this._branchIndices={},this.types.forEach(function(r,n){if(G.isType(r,"union"))throw new Error("unions cannot be directly nested");var i=r.branchName;if(this._branchIndices[i]!==void 0)throw new Error(le("duplicate union branch name: %j",i));this._branchIndices[i]=n},this)}xt.inherits(Nn,G);Nn.prototype._branchConstructor=function(){throw new Error("unions cannot be directly wrapped")};Nn.prototype._skip=function(t){this.types[t.readLong()]._skip(t)};Nn.prototype._match=function(t,e){var r=t.readLong(),n=e.readLong();return r===n?this.types[r]._match(t,e):r<n?-1:1};Nn.prototype._deref=function(t,e){return this.types.map(function(r){return r._attrs(e)})};Nn.prototype.getTypes=function(){return this.types};function sr(t,e){Nn.call(this,t,e),this._dynamicBranches=null,this._bucketIndices={},this.types.forEach(function(r,n){if(G.isType(r,"abstract","logical"))this._dynamicBranches||(this._dynamicBranches=[]),this._dynamicBranches.push({index:n,type:r});else{var i=Mc(r);if(this._bucketIndices[i]!==void 0)throw new Error(le("ambiguous unwrapped union: %j",this));this._bucketIndices[i]=n}},this),Object.freeze(this)}xt.inherits(sr,Nn);sr.prototype._getIndex=function(t){var e=this._bucketIndices[Jp(t)];return this._dynamicBranches&&(e=this._getBranchIndex(t,e)),e};sr.prototype._getBranchIndex=function(t,e){var r=this._dynamicBranches,n,i,s;for(n=0,i=r.length;n<i;n++)if(s=r[n],s.type._check(t))if(e===void 0)e=s.index;else throw new Error("ambiguous conversion");return e};sr.prototype._check=function(t,e,r,n){var i=this._getIndex(t),s=i!==void 0;return s?this.types[i]._check(t,e,r,n):(r&&r(t,this),s)};sr.prototype._read=function(t){var e=t.readLong(),r=this.types[e];if(r)return r._read(t);throw new Error(le("invalid union index: %s",e))};sr.prototype._write=function(t,e){var r=this._getIndex(e);r===void 0&&it(e,this),t.writeLong(r),e!==null&&this.types[r]._write(t,e)};sr.prototype._update=function(t,e,r){var n,i,s;for(n=0,i=this.types.length;n<i;n++){try{s=this.types[n].createResolver(e,r)}catch{continue}t._read=function(o){return s._read(o)};return}};sr.prototype._copy=function(t,e){var r=e&&e.coerce|0,n=e&&e.wrap|0,i;if(n===2)i=0;else{switch(r){case 1:Vp(t)&&this._bucketIndices.buffer!==void 0?i=this._bucketIndices.buffer:i=this._getIndex(t);break;case 2:if(t===null)i=this._bucketIndices.null;else if(typeof t=="object"){var s=Object.keys(t);s.length===1&&(i=this._branchIndices[s[0]],t=t[s[0]])}break;default:i=this._getIndex(t)}i===void 0&&it(t,this)}var o=this.types[i];if(t===null||n===3)return o._copy(t,e);switch(r){case 3:var a={};return a[o.branchName]=o._copy(t,e),a;default:return o._copy(t,e)}};sr.prototype.compare=function(t,e){var r=this._getIndex(t),n=this._getIndex(e);if(r===void 0)it(t,this);else if(n===void 0)it(e,this);else return r===n?this.types[r].compare(t,e):de.compare(r,n)};sr.prototype.typeName="union:unwrapped";sr.prototype.random=function(){var t=jt.nextInt(this.types.length);return this.types[t].random()};function Ir(t,e){Nn.call(this,t,e),Object.freeze(this)}xt.inherits(Ir,Nn);Ir.prototype._check=function(t,e,r,n){var i=!1;if(t===null)i=this._branchIndices.null!==void 0;else if(typeof t=="object"){var s=Object.keys(t);if(s.length===1){var o=s[0],a=this._branchIndices[o];if(a!==void 0)return r?(n.push(o),i=this.types[a]._check(t[o],e,r,n),n.pop(),i):this.types[a]._check(t[o],e)}}return!i&&r&&r(t,this),i};Ir.prototype._read=function(t){var e=this.types[t.readLong()];if(!e)throw new Error(le("invalid union index"));var r=e._branchConstructor;return r===null?null:new r(e._read(t))};Ir.prototype._write=function(t,e){var r,n,i;e===null?(r=this._branchIndices.null,r===void 0&&it(e,this),t.writeLong(r)):(n=Object.keys(e),n.length===1&&(i=n[0],r=this._branchIndices[i]),r===void 0&&it(e,this),t.writeLong(r),this.types[r]._write(t,e[i]))};Ir.prototype._update=function(t,e,r){var n,i,s,o;for(n=0,i=this.types.length;n<i;n++){try{s=this.types[n].createResolver(e,r)}catch{continue}o=this.types[n]._branchConstructor,o?t._read=function(a){return new o(s._read(a))}:t._read=function(){return null};return}};Ir.prototype._copy=function(t,e){var r=e&&e.wrap|0;if(r===2){var n=this.types[0];return t===null&&n.typeName==="null"?null:new n._branchConstructor(n._copy(t,e))}if(t===null&&this._branchIndices.null!==void 0)return null;var i,s,o;if(typeof t=="object"){var a=Object.keys(t);if(a.length===1){var c=a[0];if(i=this._branchIndices[c],i===void 0&&e.qualifyNames){var f,l;for(f=0,s=this.types.length;f<s;f++)if(l=this.types[f],l.name&&c===ul(l.name)){i=f;break}}i!==void 0&&(o=this.types[i]._copy(t[c],e))}}if(r===1&&o===void 0)for(i=0,s=this.types.length;i<s&&o===void 0;)try{o=this.types[i]._copy(t,e)}catch{i++}if(o!==void 0)return r===3?o:new this.types[i]._branchConstructor(o);it(t,this)};Ir.prototype.compare=function(t,e){var r=t===null?"null":Object.keys(t)[0],n=e===null?"null":Object.keys(e)[0],i=this._branchIndices[r];return r===n?r==="null"?0:this.types[i].compare(t[r],e[r]):de.compare(i,this._branchIndices[n])};Ir.prototype.typeName="union:wrapped";Ir.prototype.random=function(){var t=jt.nextInt(this.types.length),e=this.types[t],r=e._branchConstructor;return r?new r(e.random()):null};function ar(t,e){if(G.call(this,t,e),!Array.isArray(t.symbols)||!t.symbols.length)throw new Error(le("invalid enum symbols: %j",t.symbols));this.symbols=Object.freeze(t.symbols.slice()),this._indices={},this.symbols.forEach(function(r,n){if(!Zo(r))throw new Error(le("invalid %s symbol: %j",this,r));if(this._indices[r]!==void 0)throw new Error(le("duplicate %s symbol: %j",this,r));this._indices[r]=n},this),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}xt.inherits(ar,G);ar.prototype._check=function(t,e,r){var n=this._indices[t]!==void 0;return!n&&r&&r(t,this),n};ar.prototype._read=function(t){var e=t.readLong(),r=this.symbols[e];if(r===void 0)throw new Error(le("invalid %s enum index: %s",this.name,e));return r};ar.prototype._skip=function(t){t.skipLong()};ar.prototype._write=function(t,e){var r=this._indices[e];r===void 0&&it(e,this),t.writeLong(r)};ar.prototype._match=function(t,e){return t.matchLong(e)};ar.prototype.compare=function(t,e){return de.compare(this._indices[t],this._indices[e])};ar.prototype._update=function(t,e){var r=this.symbols;e.typeName==="enum"&&(!e.name||~To(this).indexOf(e.name))&&e.symbols.every(function(n){return~r.indexOf(n)})&&(t.symbols=e.symbols,t._read=e._read)};ar.prototype._copy=function(t){return this._check(t,void 0,it),t};ar.prototype._deref=function(t){t.symbols=this.symbols};ar.prototype.getSymbols=function(){return this.symbols};ar.prototype.typeName="enum";ar.prototype.random=function(){return jt.choice(this.symbols)};function cr(t,e){if(G.call(this,t,e),t.size!==(t.size|0)||t.size<1)throw new Error(le("invalid %s size",this.branchName));this.size=t.size|0,this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}xt.inherits(cr,G);cr.prototype._check=function(t,e,r){var n=z.Buffer.isBuffer(t)&&t.length===this.size;return!n&&r&&r(t,this),n};cr.prototype._read=function(t){return t.readFixed(this.size)};cr.prototype._skip=function(t){t.skipFixed(this.size)};cr.prototype._write=function(t,e){(!z.Buffer.isBuffer(e)||e.length!==this.size)&&it(e,this),t.writeFixed(e,this.size)};cr.prototype._match=function(t,e){return t.matchFixed(e,this.size)};cr.prototype.compare=z.Buffer.compare;cr.prototype._update=function(t,e){e.typeName==="fixed"&&this.size===e.size&&(!e.name||~To(this).indexOf(e.name))&&(t.size=this.size,t._read=this._read)};cr.prototype._copy=yr.prototype._copy;cr.prototype._deref=function(t){t.size=this.size};cr.prototype.getSize=function(){return this.size};cr.prototype.typeName="fixed";cr.prototype.random=function(){return jt.nextBuffer(this.size)};function Zt(t,e){if(G.call(this),!t.values)throw new Error(le("missing map values: %j",t));this.valuesType=G.forSchema(t.values,e),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}xt.inherits(Zt,G);Zt.prototype._check=function(t,e,r,n){if(!t||typeof t!="object"||Array.isArray(t))return r&&r(t,this),!1;var i=Object.keys(t),s=!0,o,a,c,f;if(r){for(c=n.length,n.push(""),o=0,a=i.length;o<a;o++)f=n[c]=i[o],this.valuesType._check(t[f],e,r,n)||(s=!1);n.pop()}else for(o=0,a=i.length;o<a;o++)if(!this.valuesType._check(t[i[o]],e))return!1;return s};Zt.prototype._read=function(t){for(var e=this.valuesType,r={},n;n=df(t);)for(;n--;){var i=t.readString();r[i]=e._read(t)}return r};Zt.prototype._skip=function(t){for(var e=this.valuesType,r,n;n=t.readLong();)if(n<0)r=t.readLong(),t.pos+=r;else for(;n--;)t.skipString(),e._skip(t)};Zt.prototype._write=function(t,e){(!e||typeof e!="object"||Array.isArray(e))&&it(e,this);var r=this.valuesType,n=Object.keys(e),i=n.length,s,o;if(i)for(t.writeLong(i),s=0;s<i;s++)o=n[s],t.writeString(o),r._write(t,e[o]);t.writeLong(0)};Zt.prototype._match=function(){throw new Error("maps cannot be compared")};Zt.prototype._update=function(t,e,r){e.typeName==="map"&&(t.valuesType=this.valuesType.createResolver(e.valuesType,r),t._read=this._read)};Zt.prototype._copy=function(t,e){if(t&&typeof t=="object"&&!Array.isArray(t)){var r=this.valuesType,n=Object.keys(t),i,s,o,a={};for(i=0,s=n.length;i<s;i++)o=n[i],a[o]=r._copy(t[o],e);return a}it(t,this)};Zt.prototype.compare=Zt.prototype._match;Zt.prototype.typeName="map";Zt.prototype.getValuesType=function(){return this.valuesType};Zt.prototype.random=function(){var t={},e,r;for(e=0,r=jt.nextInt(10);e<r;e++)t[jt.nextString(jt.nextInt(20))]=this.valuesType.random();return t};Zt.prototype._deref=function(t,e){t.values=this.valuesType._attrs(e)};function ur(t,e){if(G.call(this),!t.items)throw new Error(le("missing array items: %j",t));this.itemsType=G.forSchema(t.items,e),this._branchConstructor=this._createBranchConstructor(),Object.freeze(this)}xt.inherits(ur,G);ur.prototype._check=function(t,e,r,n){if(!Array.isArray(t))return r&&r(t,this),!1;var i=!0,s,o,a;if(r){for(a=n.length,n.push(""),s=0,o=t.length;s<o;s++)n[a]=""+s,this.itemsType._check(t[s],e,r,n)||(i=!1);n.pop()}else for(s=0,o=t.length;s<o;s++)if(!this.itemsType._check(t[s],e))return!1;return i};ur.prototype._read=function(t){for(var e=this.itemsType,r=[],n;n=t.readLong();)for(n<0&&(n=-n,t.skipLong());n--;)r.push(e._read(t));return r};ur.prototype._skip=function(t){for(var e,r;r=t.readLong();)if(r<0)e=t.readLong(),t.pos+=e;else for(;r--;)this.itemsType._skip(t)};ur.prototype._write=function(t,e){Array.isArray(e)||it(e,this);var r=e.length,n;if(r)for(t.writeLong(r),n=0;n<r;n++)this.itemsType._write(t,e[n]);t.writeLong(0)};ur.prototype._match=function(t,e){for(var r=t.readLong(),n=e.readLong(),i;r&&n;){if(i=this.itemsType._match(t,e),i)return i;--r||(r=df(t)),--n||(n=df(e))}return de.compare(r,n)};ur.prototype._update=function(t,e,r){e.typeName==="array"&&(t.itemsType=this.itemsType.createResolver(e.itemsType,r),t._read=this._read)};ur.prototype._copy=function(t,e){Array.isArray(t)||it(t,this);var r=new Array(t.length),n,i;for(n=0,i=t.length;n<i;n++)r[n]=this.itemsType._copy(t[n],e);return r};ur.prototype._deref=function(t,e){t.items=this.itemsType._attrs(e)};ur.prototype.compare=function(t,e){var r=t.length,n=e.length,i,s,o;for(i=0,s=Math.min(r,n);i<s;i++)if(o=this.itemsType.compare(t[i],e[i]))return o;return de.compare(r,n)};ur.prototype.getItemsType=function(){return this.itemsType};ur.prototype.typeName="array";ur.prototype.random=function(){var t=[],e,r;for(e=0,r=jt.nextInt(10);e<r;e++)t.push(this.itemsType.random());return t};function mt(t,e){e=e||{};var r=e.namespace;if(t.namespace!==void 0)e.namespace=t.namespace;else if(t.name){var n=/^(.*)\.[^.]+$/.exec(t.name);n&&(e.namespace=n[1])}if(G.call(this,t,e),!Array.isArray(t.fields))throw new Error(le("non-array record fields: %j",t.fields));if(de.hasDuplicates(t.fields,function(i){return i.name}))throw new Error(le("duplicate field name: %j",t.fields));this._fieldsByName={},this.fields=Object.freeze(t.fields.map(function(i){var s=new Kn(i,e);return this._fieldsByName[s.name]=s,s},this)),this._branchConstructor=this._createBranchConstructor(),this._isError=t.type==="error",this.recordConstructor=this._createConstructor(e.errorStackTraces),this._read=this._createReader(),this._skip=this._createSkipper(),this._write=this._createWriter(),this._check=this._createChecker(),e.namespace=r,Object.freeze(this)}xt.inherits(mt,G);mt.prototype._getConstructorName=function(){return this.name?ul(this.name):this._isError?"Error$":"Record$"};mt.prototype._createConstructor=function(t){var e={},r,n,i,s,o,a,c;for(r=0,n=this.fields.length;r<n;r++)i=this.fields[r],o=i.defaultValue,a=o()!==void 0,s=i.name,t&&this._isError&&s==="stack"&&G.isType(i.type,"string")&&!a&&(c=i),a&&(e[r]=o);var f=this;function l(m){const v=f._getConstructorName();var T={[v]:function(...x){for(var b=0,_=f.fields.length;b<_;b++){let k=f.fields[b];k.defaultValue()===void 0?this[k.name]=x[b]:x[b]===void 0?this[k.name]=m[b]():this[k.name]=x[b]}c&&this.stack===void 0&&(typeof Error.captureStackTrace=="function"?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack)}}[v];return T}var h=l(e);return h.getType=function(){return f},h.type=f,this._isError&&(xt.inherits(h,Error),h.prototype.name=this._getConstructorName()),h.prototype.clone=function(m){return f.clone(this,m)},h.prototype.compare=function(m){return f.compare(this,m)},h.prototype.isValid=function(m){return f.isValid(this,m)},h.prototype.toBuffer=function(){return f.toBuffer(this)},h.prototype.toString=function(){return f.toString(this)},h.prototype.wrap=function(){return f.wrap(this)},h.prototype.wrapped=h.prototype.wrap,h};mt.prototype._createChecker=function(){const t=[];this.fields.forEach(n=>{t.push(n.type)});var e=this;function r(n){var i=e._getConstructorName(),s={[i]:function(o,a,c,f){if(o===null||typeof o!="object"||a&&!this._checkFields(o))return c&&c(o,this),!1;const l=[];if(e.fields.length)for(var h=0,m=e.fields.length;h<m;h++){let x=e.fields[h];x.defaultValue()!==void 0&&l.push(o[x.name])}else return!0;if(c){var v=1,T=f.length;f.push("");for(var h=0,m=e.fields.length;h<m;h++){let _=e.fields[h];f[T]=_.name,v&=_.defaultValue()===void 0?n[h]._check(o[_.name],_,c,f):l[h]===void 0||n[h]._check(l[h],_,c,f)}return f.pop(),!!v}else return e.fields.reduce((x,b,_)=>x&&(b.defaultValue()===void 0?n[_]._check(o[b.name]):l[_]===void 0||n[_]._check(l[_],a)),!0)}}[i];return s}return r(t)};mt.prototype._createReader=function(){var t=[this.recordConstructor],e,r;for(e=0,r=this.fields.length;e<r;e++)t.push(this.fields[e].type);var n=this;function i(s){var o=n._getConstructorName(),a={[o]:function(c){return new s[0](...s.slice(1).map(f=>f._read(c)))}}[o];return a}return i(t)};mt.prototype._createSkipper=function(){var t=[];this.fields.forEach(n=>{t.push(n.type)});var e=this;function r(n){var i=e._getConstructorName(),s={[i]:function(o){n.forEach(a=>a._skip(o))}}[i];return s}return r(t)};mt.prototype._createWriter=function(){var t=[],e={};this.fields.forEach((i,s)=>{t.push(i.type),i.defaultValue()!==void 0&&(e[s]=i.type.toBuffer(i.defaultValue()).toString("binary"))});var r=this;function n(i,s){var o=r._getConstructorName(),a={[o]:function(c,f){for(var l=0,h=r.fields.length;l<h;l++){let m=r.fields[l];m.defaultValue()===void 0?i[l]._write(c,f[m.name]):f[m.name]===void 0?c.writeBinary(s[l],s[l].length):i[l]._write(c,f[m.name])}}}[o];return a}return n(t,e)};mt.prototype._update=function(t,e,r){if(e.name&&!~To(this).indexOf(e.name))throw new Error(le("no alias found for %s",e.name));var n=this.fields,i=e.fields,s=de.toMap(i,function(b){return b.name}),o={},a,c,f,l,h,m,v;for(a=0;a<n.length;a++){for(f=n[a],h=To(f),m=[],c=0;c<h.length;c++)l=h[c],s[l]&&m.push(l);if(m.length>1)throw new Error(le("ambiguous aliasing for %s.%s (%s)",e.name,f.name,m));if(m.length)l=m[0],v={resolver:f.type.createResolver(s[l].type,r),name:"_"+f.name},o[l]?o[l].push(v):o[l]=[v];else if(f.defaultValue()===void 0)throw new Error(le("no matching field for default-less %s.%s",e.name,f.name))}var T=this;function x(){var b=T._getConstructorName(),_={[b]:function(k,N){if(!N){var D=[];for(C=0;C<n.length;C++){for(f=n[C],h=To(f),m=[],L=0;L<h.length;L++)l=h[L],s[l]&&m.push(l);m.length||D.push(void 0)}for(var C=0;C<i.length;C++){let $=e.fields[C];if(l=$.name,o[l]===void 0)$.type._skip(k);else for(var L=o[l].length;L--;)D.unshift(L?o[l][L].resolver._peek(k):o[l][L].resolver._read(k))}return new T.recordConstructor(...D)}}}[b];return _}t._read=x()};mt.prototype._match=function(t,e){var r=this.fields,n,i,s,o,a;for(n=0,i=r.length;n<i;n++)if(s=r[n],o=s._order,a=s.type,o){if(o*=a._match(t,e),o)return o}else a._skip(t),a._skip(e);return 0};mt.prototype._checkFields=function(t){var e=Object.keys(t),r,n;for(r=0,n=e.length;r<n;r++)if(!this._fieldsByName[e[r]])return!1;return!0};mt.prototype._copy=function(t,e){var r=e&&e.fieldHook,n=[void 0],i,s,o,a;for(i=0,s=this.fields.length;i<s;i++)o=this.fields[i],a=t[o.name],a===void 0&&o.hasOwnProperty("defaultValue")&&(a=o.defaultValue()),(e&&!e.skip||a!==void 0)&&(a=o.type._copy(a,e)),r&&(a=r(o,a,this)),n.push(a);var c=this.recordConstructor;return new(c.bind.apply(c,n))};mt.prototype._deref=function(t,e){t.fields=this.fields.map(function(r){var n=r.type,i={name:r.name,type:n._attrs(e)};if(e.exportAttrs){var s=r.defaultValue();s!==void 0&&(i.default=n._copy(s,{coerce:3,wrap:3}));var o=r.order;o!=="ascending"&&(i.order=o);var a=r.aliases;a.length&&(i.aliases=a);var c=r.doc;c!==void 0&&(i.doc=c)}return i})};mt.prototype.compare=function(t,e){var r=this.fields,n,i,s,o,a,c;for(n=0,i=r.length;n<i;n++)if(s=r[n],o=s.name,a=s._order,c=s.type,a&&(a*=c.compare(t[o],e[o]),a))return a;return 0};mt.prototype.random=function(){var t=this.fields.map(function(r){return r.type.random()});t.unshift(void 0);var e=this.recordConstructor;return new(e.bind.apply(e,t))};mt.prototype.field=function(t){return this._fieldsByName[t]};mt.prototype.getField=mt.prototype.field;mt.prototype.getFields=function(){return this.fields};mt.prototype.getRecordConstructor=function(){return this.recordConstructor};Object.defineProperty(mt.prototype,"typeName",{enumerable:!0,get:function(){return this._isError?"error":"record"}});function Ot(t,e){this._logicalTypeName=t.logicalType,G.call(this),ii=this;try{this._underlyingType=G.forSchema(t,e)}finally{ii=null;var r=Cs.length;r&&Cs[r-1][0]===this&&Cs.pop()}G.isType(this.underlyingType,"union")?this._branchConstructor=this.underlyingType._branchConstructor:this._branchConstructor=this.underlyingType._createBranchConstructor()}xt.inherits(Ot,G);Object.defineProperty(Ot.prototype,"typeName",{enumerable:!0,get:function(){return"logical:"+this._logicalTypeName}});Object.defineProperty(Ot.prototype,"underlyingType",{enumerable:!0,get:function(){if(this._underlyingType)return this._underlyingType;var t,e,r;for(t=0,e=Cs.length;t<e;t++)if(r=Cs[t],r[0]===this)return r[1]}});Ot.prototype.getUnderlyingType=function(){return this.underlyingType};Ot.prototype._read=function(t){return this._fromValue(this.underlyingType._read(t))};Ot.prototype._write=function(t,e){this.underlyingType._write(t,this._toValue(e))};Ot.prototype._check=function(t,e,r,n){try{var i=this._toValue(t)}catch{}return i===void 0?(r&&r(t,this),!1):this.underlyingType._check(i,e,r,n)};Ot.prototype._copy=function(t,e){var r=this.underlyingType;switch(e&&e.coerce){case 3:return r._copy(this._toValue(t),e);case 2:return this._fromValue(r._copy(t,e));default:return this._fromValue(r._copy(this._toValue(t),e))}};Ot.prototype._update=function(t,e,r){var n=this._resolve(e,r);n&&(t._read=function(i){return n(e._read(i))})};Ot.prototype.compare=function(t,e){var r=this._toValue(t),n=this._toValue(e);return this.underlyingType.compare(r,n)};Ot.prototype.random=function(){return this._fromValue(this.underlyingType.random())};Ot.prototype._deref=function(t,e){var r=this.underlyingType,n=r.name!==void 0&&e.derefed[r.name];return t=r._attrs(e),!n&&e.exportAttrs&&(typeof t=="string"&&(t={type:t}),t.logicalType=this._logicalTypeName,this._export(t)),t};Ot.prototype._skip=function(t){this.underlyingType._skip(t)};Ot.prototype._export=function(){};Ot.prototype._fromValue=de.abstractFunction;Ot.prototype._toValue=de.abstractFunction;Ot.prototype._resolve=de.abstractFunction;function Jt(t){this._concreteTypeName="long",pt.call(this,!0),this._noUnpack=!!t}xt.inherits(Jt,gr);Jt.prototype.typeName="abstract:long";Jt.prototype._check=function(t,e,r){var n=this._isValid(t);return!n&&r&&r(t,this),n};Jt.prototype._read=function(t){var e,r;if(this._noUnpack?(r=t.pos,t.skipLong(),e=t.buf.slice(r,t.pos)):e=t.unpackLongBytes(t),t.isValid())return this._fromBuffer(e)};Jt.prototype._write=function(t,e){this._isValid(e)||it(e,this);var r=this._toBuffer(e);this._noUnpack?t.writeFixed(r):t.packLongBytes(r)};Jt.prototype._copy=function(t,e){switch(e&&e.coerce){case 3:return this._toJSON(t);case 2:return this._fromJSON(t);default:return this._fromJSON(this._toJSON(t))}};Jt.prototype._deref=function(){return"long"};Jt.prototype._update=function(t,e){var r=this;switch(e.typeName){case"int":t._read=function(n){return r._fromJSON(e._read(n))};break;case"long":t._read=function(n){return r._read(n)}}};Jt.prototype.random=function(){return this._fromJSON(gr.prototype.random())};Jt.prototype._fromBuffer=de.abstractFunction;Jt.prototype._toBuffer=de.abstractFunction;Jt.prototype._fromJSON=de.abstractFunction;Jt.prototype._toJSON=de.abstractFunction;Jt.prototype._isValid=de.abstractFunction;Jt.prototype.compare=de.abstractFunction;function Kn(t,e){var r=t.name;if(typeof r!="string"||!Zo(r))throw new Error(le("invalid field name: %s",r));this.name=r,this.type=G.forSchema(t.type,e),this.aliases=t.aliases||[],this.doc=t.doc!==void 0?""+t.doc:void 0,this._order=function(o){switch(o){case"ascending":return 1;case"descending":return-1;case"ignore":return 0;default:throw new Error(le("invalid order: %j",o))}}(t.order===void 0?"ascending":t.order);var n=t.default;if(n!==void 0){var i=this.type,s=i._copy(n,{coerce:2,wrap:2});Ys(i.typeName)&&i.typeName!=="bytes"?this.defaultValue=function(){return s}:this.defaultValue=function(){return i._copy(s)}}Object.freeze(this)}Kn.prototype.defaultValue=function(){};Object.defineProperty(Kn.prototype,"order",{enumerable:!0,get:function(){return["descending","ignore","ascending"][this._order+1]}});Kn.prototype.getAliases=function(){return this.aliases};Kn.prototype.getDefault=Kn.prototype.defaultValue;Kn.prototype.getName=function(){return this.name};Kn.prototype.getOrder=function(){return this.order};Kn.prototype.getType=function(){return this.type};function cl(t){this._readerType=t,this._read=null,this.itemsType=null,this.size=0,this.symbols=null,this.valuesType=null}cl.prototype._peek=G.prototype._peek;cl.prototype.inspect=function(){return"<Resolver>"};function W1(){this.str=void 0}function zp(t,e,r,n){if(r){if(r._readerType!==t)throw new Error("invalid resolver");return r._read(e,n)}else return t._read(e)}function ul(t){var e=t.split(".");return e[e.length-1]}function oc(t,e){~t.indexOf(".")?t=t.replace(/^\./,""):e&&(t=e+"."+t),t.split(".").forEach(function(n){if(!Zo(n))throw new Error(le("invalid name: %j",t))});var r=ul(t);return Ys(r)?r:t}function To(t){var e={};t.name&&(e[t.name]=!0);var r=t.aliases,n,i;for(n=0,i=r.length;n<i;n++)e[r[n]]=!0;return Object.keys(e)}function Ys(t){var e=sc[t];return e&&e.prototype instanceof pt}function Gp(t){if(t==="error")t="record";else{var e=/^([^:]+):(.*)$/.exec(t);e&&(e[1]==="union"?t=e[2]+"Union":t=e[1])}return de.capitalize(t)+"Type"}function df(t){var e=t.readLong();return e<0&&(e=-e,t.skipLong()),e}function fl(t){return t>=-9007199254740990&&t<=9007199254740990}function Vp(t){return t&&t.type==="Buffer"&&Array.isArray(t.data)}function Zo(t){return J1.test(t)}function it(t,e){throw new Error(le("invalid %s: %j",e,t))}function Mc(t){var e=t.typeName;switch(e){case"double":case"float":case"int":case"long":return"number";case"bytes":case"fixed":return"buffer";case"enum":return"string";case"map":case"error":case"record":return"object";default:return e}}function Jp(t){if(t===null)return"null";var e=typeof t;if(e==="object"){if(Array.isArray(t))return"array";if(z.Buffer.isBuffer(t))return"buffer"}return e}function Y1(t){var e={},r,n,i,s;for(r=0,n=t.length;r<n;r++)if(s=t[r],!G.isType(s,"logical")){if(i=Mc(s),e[i])return!0;e[i]=!0}return!1}function Q1(t){var e=["int","long","float","double"],r=-1,n=null,i,s,o,a;for(i=0,s=t.length;i<s;i++)o=t[i],a=e.indexOf(o.typeName),a>r&&(r=a,n=o);return n}function X1(t,e){var r={},n,i,s,o;for(n=0,i=t.length;n<i;n++){if(s=t[n],s.typeName==="string")return s;o=s.symbols;var a,c;for(a=0,c=o.length;a<c;a++)r[o[a]]=!0}return G.forSchema({type:"enum",symbols:Object.keys(r)},e)}function Z1(t,e){var r=-1,n,i,s;for(n=0,i=t.length;n<i;n++){if(s=t[n],s.typeName==="bytes")return s;r===-1?r=s.size:s.size!==r&&(r=-2)}return r<0?G.forSchema("bytes",e):t[0]}function ev(t,e){var r=[],n={},i={},s=!0,o,a,c,f;for(o=0,a=t.length;o<a;o++)if(c=t[o],c.typeName==="map")s=!1,r.push(c.valuesType);else{f=c.fields;var l,h,m,v,T,x;for(l=0,h=f.length;l<h;l++)m=f[l],T=m.name,x=m.type,r.push(x),s&&(n[T]||(n[T]=[]),n[T].push(x),v=m.defaultValue(),v!==void 0&&(i[T]=v))}if(s){var b=Object.keys(n);for(o=0,a=b.length;o<a;o++)T=b[o],n[T].length<t.length&&i[T]===void 0&&(e&&e.strictDefaults?s=!1:(n[T].unshift(G.forSchema("null",e)),i[T]=null))}var _;return s?_={type:"record",fields:b.map(function(k){var N=G.forTypes(n[k],e),D=i[k];if(D!==void 0&&~N.typeName.indexOf("union")){var C=N.types.slice(),L,$;for(L=0,$=C.length;L<$&&!C[L].isValid(D);L++);if(L>0){var q=C[0];C[0]=C[L],C[L]=q,N=G.forSchema(C,e)}}return{name:k,type:N,default:i[k]}})}:_={type:"map",values:G.forTypes(r,e)},G.forSchema(_,e)}var ll={Type:G,getTypeBucket:Mc,getValueBucket:Jp,isPrimitive:Ys,isValidName:Zo,qualify:oc,builtins:function(){var t={LogicalType:Ot,UnwrappedUnionType:sr,WrappedUnionType:Ir},e=Object.keys(sc),r,n,i;for(r=0,n=e.length;r<n;r++)i=e[r],t[Gp(i)]=sc[i];return t}()},Eo=ll;function tv(t,e){var r;if(typeof t=="string")try{r=JSON.parse(t)}catch{r=t}else r=t;return Eo.Type.forSchema(r,e)}var rv={Type:Eo.Type,parse:tv,types:Eo.builtins,combine:Eo.Type.forTypes,infer:Eo.Type.forValue},dl=ll,st=Ws,yi=Z0.exports,_n=vc,Ve=zs,hl=st.Tap,Bt=dl.Type,Et=Ve.debuglog("avsc:services"),Rt=Ve.format,xn={namespace:"org.apache.avro.ipc"},Wp=Bt.forSchema("boolean",xn),En=Bt.forSchema({type:"map",values:"bytes"},xn),pl=Bt.forSchema("string",xn),ea=Bt.forSchema({name:"HandshakeRequest",type:"record",fields:[{name:"clientHash",type:{name:"MD5",type:"fixed",size:16}},{name:"clientProtocol",type:["null","string"],default:null},{name:"serverHash",type:"MD5"},{name:"meta",type:["null",En],default:null}]},xn),ta=Bt.forSchema({name:"HandshakeResponse",type:"record",fields:[{name:"match",type:{name:"HandshakeMatch",type:"enum",symbols:["BOTH","CLIENT","NONE"]}},{name:"serverProtocol",type:["null","string"],default:null},{name:"serverHash",type:["null","MD5"],default:null},{name:"meta",type:["null",En],default:null}]},xn),gl=16,yl=new jn("",Bt.forSchema({name:"PingRequest",type:"record",fields:[]},xn),Bt.forSchema(["string"],xn),Bt.forSchema("null",xn));function jn(t,e,r,n,i,s){if(this.name=t,!Bt.isType(e,"record"))throw new Error("invalid request type");if(this.requestType=e,!Bt.isType(r,"union")||!Bt.isType(r.getTypes()[0],"string"))throw new Error("invalid error type");if(this.errorType=r,i&&(!Bt.isType(n,"null")||r.getTypes().length>1))throw new Error("inapplicable one-way parameter");this.responseType=n,this.oneWay=!!i,this.doc=s!==void 0?""+s:void 0,Object.freeze(this)}jn.forSchema=function(t,e,r){if(r=r||{},!dl.isValidName(t))throw new Error(Rt("invalid message name: %s",t));if(!Array.isArray(e.request))throw new Error(Rt("invalid message request: %s",t));var n=Rt("%s.%sRequest",xn.namespace,st.capitalize(t)),i=Bt.forSchema({name:n,type:"record",namespace:r.namespace||"",fields:e.request},r);if(delete r.registry[n],!e.response)throw new Error(Rt("invalid message response: %s",t));var s=Bt.forSchema(e.response,r);if(e.errors!==void 0&&!Array.isArray(e.errors))throw new Error(Rt("invalid message errors: %s",t));var o=Bt.forSchema(["string"].concat(e.errors||[]),r),a=!!e["one-way"];return new jn(t,i,o,s,a,e.doc)};jn.prototype.schema=Bt.prototype.getSchema;jn.prototype._attrs=function(t){var e=this.requestType._attrs(t),r={request:e.fields,response:this.responseType._attrs(t)},n=this.doc;n!==void 0&&(r.doc=n);var i=this.errorType._attrs(t);return i.length>1&&(r.errors=i.slice(1)),this.oneWay&&(r["one-way"]=!0),r};st.addDeprecatedGetters(jn,["name","errorType","requestType","responseType"]);jn.prototype.isOneWay=Ve.deprecate(function(){return this.oneWay},"use `.oneWay` directly instead of `.isOneWay()`");function we(t,e,r,n,i){if(typeof t!="string")return we.forProtocol(t,e);this.name=t,this._messagesByName=e||{},this.messages=Object.freeze(st.objectValues(this._messagesByName)),this._typesByName=r||{},this.types=Object.freeze(st.objectValues(this._typesByName)),this.protocol=n,this._hashStr=st.getHash(JSON.stringify(n)).toString("binary"),this.doc=n.doc?""+n.doc:void 0,this._server=i||this.createServer({silent:!0}),Object.freeze(this)}we.Client=mr;we.Server=on;we.compatible=function(t,e){try{Xp(t,e)}catch{return!1}return!0};we.forProtocol=function(t,e){e=e||{};var r=t.protocol;if(!r)throw new Error("missing protocol name");if(t.namespace!==void 0)e.namespace=t.namespace;else{var n=/^(.*)\.[^.]+$/.exec(r);n&&(e.namespace=n[1])}r=dl.qualify(r,e.namespace),t.types&&t.types.forEach(function(s){Bt.forSchema(s,e)});var i;return t.messages&&(i={},Object.keys(t.messages).forEach(function(s){i[s]=jn.forSchema(s,t.messages[s],e)})),new we(r,i,e.registry,t)};we.isService=function(t){return!!t&&t.hasOwnProperty("_hashStr")};we.prototype.createClient=function(t){var e=new mr(this,t);return ft.nextTick(function(){if(t&&t.server){var r={objectMode:!0},n=[new _n.PassThrough(r),new _n.PassThrough(r)];t.server.createChannel({readable:n[0],writable:n[1]},r),e.createChannel({readable:n[1],writable:n[0]},r)}else t&&t.transport&&e.createChannel(t.transport)}),e};we.prototype.createServer=function(t){return new on(this,t)};Object.defineProperty(we.prototype,"hash",{enumerable:!0,get:function(){return st.bufferFrom(this._hashStr,"binary")}});we.prototype.message=function(t){return this._messagesByName[t]};we.prototype.type=function(t){return this._typesByName[t]};we.prototype.inspect=function(){return Rt("<Service %j>",this.name)};st.addDeprecatedGetters(we,["message","messages","name","type","types"]);we.prototype.createEmitter=Ve.deprecate(function(t,e){e=e||{};var r=this.createClient({cache:e.cache,buffering:!1,strictTypes:e.strictErrors,timeout:e.timeout}),n=r.createChannel(t,e);return iv(r,n),n},"use `.createClient()` instead of `.createEmitter()`");we.prototype.createListener=Ve.deprecate(function(t,e){if(e&&e.strictErrors)throw new Error("use `.createServer()` to support strict errors");return this._server.createChannel(t,e)},"use `.createServer().createChannel()` instead of `.createListener()`");we.prototype.emit=Ve.deprecate(function(t,e,r,n){if(!r||!this.equals(r.client._svc$))throw new Error("invalid emitter");var i=r.client;return mr.prototype.emitMessage.call(i,t,e,n&&n.bind(this)),r.getPending()},"create a client via `.createClient()` to emit messages instead of `.emit()`");we.prototype.equals=Ve.deprecate(function(t){return we.isService(t)&&this.getFingerprint().equals(t.getFingerprint())},"equality testing is deprecated, compare the `.protocol`s instead");we.prototype.getFingerprint=Ve.deprecate(function(t){return st.getHash(JSON.stringify(this.protocol),t)},"use `.hash` instead of `.getFingerprint()`");we.prototype.getSchema=Ve.deprecate(Bt.prototype.getSchema,"use `.protocol` instead of `.getSchema()`");we.prototype.on=Ve.deprecate(function(t,e){var r=this;return this._server.onMessage(t,function(n,i){return e.call(r,n,this.channel,i)}),this},"use `.createServer().onMessage()` instead of `.on()`");we.prototype.subprotocol=Ve.deprecate(function(){var t=this._server,e={strictTypes:t._strict,cache:t._cache},r=new on(t.service,e);return r._handlers=Object.create(t._handlers),new we(this.name,this._messagesByName,this._typesByName,this.protocol,r)},"`.subprotocol()` will be removed in 5.1");we.prototype._attrs=function(t){var e={protocol:this.name},r=[];this.types.forEach(function(i){if(i.getName()!==void 0){var s=i._attrs(t);typeof s!="string"&&r.push(s)}}),r.length&&(e.types=r);var n=Object.keys(this._messagesByName);return n.length&&(e.messages={},n.forEach(function(i){e.messages[i]=this._messagesByName[i]._attrs(t)},this)),t&&t.exportAttrs&&this.doc!==void 0&&(e.doc=this.doc),e};function nv(t,e,r){r===void 0&&typeof e=="function"&&(r=e,e=void 0);var n=new we({protocol:"Empty"},xn),i;n.createClient({timeout:e&&e.timeout}).createChannel(t,{scope:e&&e.scope,endWritable:typeof t=="function"}).once("handshake",function(s,o){i=o.serverProtocol,this.destroy(!0)}).once("eot",function(s,o){o&&!/interrupted/.test(o)?r(o):r(null,JSON.parse(i))})}function mr(t,e){e=e||{},yi.EventEmitter.call(this),this._svc$=t,this._channels$=[],this._fns$=[],this._buffering$=!!e.buffering,this._cache$=e.cache||{},this._policy$=e.channelPolicy,this._strict$=!!e.strictTypes,this._timeout$=st.getOption(e,"timeout",1e4),e.remoteProtocols&&Zp(this._cache$,e.remoteProtocols,t,!0),this._svc$.messages.forEach(function(r){this[r.name]=this._createMessageHandler$(r)},this)}Ve.inherits(mr,yi.EventEmitter);mr.prototype.activeChannels=function(){return this._channels$.slice()};mr.prototype.createChannel=function(t,e){var r=e&&e.objectMode,n;if(typeof t=="function"){var i;r?i=t:i=function(l){var h=new na,m=t(function(v,T){if(v){l(v);return}var x=new Zi().once("error",function(b){n.destroy(b)});l(null,T.pipe(x))});if(m)return h.pipe(m),h},n=new ml(this,i,e)}else{var s,o;if(ng(t)?s=o=t:(s=t.readable,o=t.writable),!r){var a=new Qs;s=s.pipe(a);var c=new ia;c.pipe(o),o=c}n=new Bc(this,s,o,e),r||(n.once("eot",function(){s.unpipe(a),c.unpipe(o)}),a.once("error",function(l){n.destroy(l)}))}var f=this._channels$;return f.push(n),n.once("_drain",function(){f.splice(f.indexOf(this),1)}),this._buffering$=!1,this.emit("channel",n),n};mr.prototype.destroyChannels=function(t){this._channels$.forEach(function(e){e.destroy(t&&t.noWait)})};mr.prototype.emitMessage=function(t,e,r,n){var i=ig(this._svc$,t),s=new Rc(i,{},e);this._emitMessage$(s,r,n)};mr.prototype.remoteProtocols=function(){return eg(this._cache$,!0)};Object.defineProperty(mr.prototype,"service",{enumerable:!0,get:function(){return this._svc$}});mr.prototype.use=function(){var t,e,r;for(t=0,e=arguments.length;t<e;t++)r=arguments[t],this._fns$.push(r.length<3?r(this):r);return this};mr.prototype._emitMessage$=function(t,e,r){!r&&typeof e=="function"&&(r=e,e=void 0);var n=this,i=this._channels$,s=i.length;if(!s){if(this._buffering$)Et("no active client channels, buffering call"),this.once("channel",function(){this._emitMessage$(t,e,r)});else{var o=new Error("no active channels");ft.nextTick(function(){r?r.call(new xl(t._msg),o):n.emit("error",o)})}return}e=e||{},e.timeout===void 0&&(e.timeout=this._timeout$);var a;if(s===1)a=i[0];else if(this._policy$){if(a=this._policy$(this._channels$.slice()),!a){Et("policy returned no channel, skipping call");return}}else a=i[Math.floor(Math.random()*s)];a._emit(t,e,function(c,f){var l=this,h=l.message.errorType;if(c){n._strict$&&(c=h.clone(c.message,{wrapUnions:!0})),m(c);return}if(!f){m();return}c=f.error,n._strict$||(c===void 0?c=null:Bt.isType(h,"union:unwrapped")?typeof c=="string"&&(c=new Error(c)):c&&c.string&&typeof c.string=="string"&&(c=new Error(c.string))),m(c,f.response);function m(v,T){r?r.call(l,v,T):v&&n.emit("error",v)}})};mr.prototype._createMessageHandler$=function(t){var e=t.requestType.getFields(),r=e.map(function(i){return i.getName()}),n="return function "+t.name+"(";return r.length&&(n+=r.join(", ")+", "),n+=`opts, cb) {
`,n+="  var req = {",n+=r.map(function(i){return i+": "+i}).join(", "),n+=`};
`,n+="  return this.emitMessage('"+t.name+`', req, opts, cb);
`,n+="};",new Function(n)()};function on(t,e){e=e||{},yi.EventEmitter.call(this),this.service=t,this._handlers={},this._fns=[],this._channels={},this._nextChannelId=1,this._cache=e.cache||{},this._defaultHandler=e.defaultHandler,this._sysErrFormatter=e.systemErrorFormatter,this._silent=!!e.silent,this._strict=!!e.strictTypes,e.remoteProtocols&&Zp(this._cache,e.remoteProtocols,t,!1),t.messages.forEach(function(r){var n=r.name;e.noCapitalize||(n=st.capitalize(n)),this["on"+n]=this._createMessageHandler(r)},this)}Ve.inherits(on,yi.EventEmitter);on.prototype.activeChannels=function(){return st.objectValues(this._channels)};on.prototype.createChannel=function(t,e){var r=e&&e.objectMode,n;if(typeof t=="function"){var i;r?i=t:i=function(h){var m=new Zi().once("error",function(v){n.destroy(v)});return t(function(v,T){if(v){h(v);return}var x=new na;x.pipe(T),h(null,x)}).pipe(m)},n=new Yp(this,i,e)}else{var s,o;if(ng(t)?s=o=t:(s=t.readable,o=t.writable),!r){var a=new Qs;s=s.pipe(a);var c=new ia;c.pipe(o),o=c}n=new Qp(this,s,o,e),r||(n.once("eot",function(){s.unpipe(a),c.unpipe(o)}),a.once("error",function(h){n.destroy(h)}))}this.listeners("error").length||this.on("error",this._onError);var f=this._nextChannelId++,l=this._channels;return l[f]=n.once("eot",function(){delete l[f]}),this.emit("channel",n),n};on.prototype.onMessage=function(t,e){return ig(this.service,t),this._handlers[t]=e,this};on.prototype.remoteProtocols=function(){return eg(this._cache,!1)};on.prototype.use=function(){var t,e,r;for(t=0,e=arguments.length;t<e;t++)r=arguments[t],this._fns.push(r.length<3?r(this):r);return this};on.prototype._createMessageHandler=function(t){var e=t.name,r=t.requestType.fields,n=r.length,i=r.length?", "+r.map(function(o){return"req."+o.name}).join(", "):"",s=`return function (handler) {
`;return s+="  if (handler.length > "+n+`) {
`,s+="    return this.onMessage('"+e+`', function (req, cb) {
`,s+="      return handler.call(this"+i+`, cb);
`,s+=`    });
`,s+=`  } else {
`,s+="    return this.onMessage('"+e+`', function (req) {
`,s+="      return handler.call(this"+i+`);
`,s+=`    });
`,s+=`  }
`,s+=`};
`,new Function(s)()};on.prototype._onError=function(t){!this._silent&&t.rpcCode!=="UNKNOWN_PROTOCOL"&&(console.error(),t.rpcCode?(console.error(t.rpcCode),console.error(t.cause)):(console.error("INTERNAL_SERVER_ERROR"),console.error(t)))};function Ht(t,e){e=e||{},yi.EventEmitter.call(this),this.client=t,this.timeout=st.getOption(e,"timeout",t._timeout$),this._endWritable=!!st.getOption(e,"endWritable",!0),this._prefix=tg(e.scope);var r=t._cache$,n=t._svc$,i=e.serverHash;i||(i=n.hash);var s=r[i];s||(i=n.hash,s=r[i]=new mi(n,n,i)),this._adapter=s,this._registry=new ra(this,gl),this.pending=0,this.destroyed=!1,this.draining=!1,this.once("_eot",function(o,a){Et("client channel EOT"),this.destroyed=!0,this.emit("eot",o,a)})}Ve.inherits(Ht,yi.EventEmitter);Ht.prototype.destroy=function(t){Et("destroying client channel"),this.draining||(this.draining=!0,this.emit("_drain"));var e=this._registry,r=this.pending;t&&e.clear(),t||!r?vl(t)?(Et("fatal client channel error: %s",t),this.emit("_eot",r,t)):this.emit("_eot",r):Et("client channel entering drain mode (%s pending)",r)};Ht.prototype.ping=function(t,e){!e&&typeof t=="function"&&(e=t,t=void 0);var r=this,n=new Rc(yl);this._emit(n,{timeout:t},function(i){e?e.call(r,i):i&&r.destroy(i)})};Ht.prototype._createHandshakeRequest=function(t,e){var r=this.client._svc$;return{clientHash:r.hash,clientProtocol:e?null:JSON.stringify(r.protocol),serverHash:t._hash}};Ht.prototype._emit=function(t,e,r){var n=t._msg,i=n.oneWay?void 0:new bl(n,{}),s=new xl(n,this),o=this;this.pending++,ft.nextTick(function(){if(!n.name)a(t,i,c);else{o.emit("outgoingCall",s,e);var l=o.client._fns$;Et("starting client middleware chain (%s middleware)",l.length),sg({fns:l,ctx:s,wreq:t,wres:i,onTransition:a,onCompletion:c,onError:f})}});function a(l,h,m){var v,T;if(o.destroyed)v=new Error("channel destroyed");else try{T=l.toBuffer()}catch{v=pf(Rt("invalid %j request",n.name),l,[{name:"headers",type:En},{name:"request",type:n.requestType}])}if(v){m(v);return}var x=e&&e.timeout!==void 0?e.timeout:o.timeout,b=o._registry.add(x,function(_,k,N){if(!_&&!n.oneWay)try{N._decodeResponse(k,h,n)}catch(D){_=D}m(_)});b|=o._prefix,Et("sending message %s",b),o._send(b,T,!!n&&n.oneWay)}function c(l){o.pending--,r.call(s,l,i),o.draining&&!o.destroyed&&!o.pending&&o.destroy()}function f(l){o.client.emit("error",l,o)}};Ht.prototype._getAdapter=function(t){var e=t.serverHash,r=this.client._cache$,n=r[e];if(n)return n;var i=JSON.parse(t.serverProtocol),s=we.forProtocol(i);return n=new mi(this.client._svc$,s,e,!0),r[e]=n};Ht.prototype._matchesPrefix=function(t){return rg(t,this._prefix)};Ht.prototype._send=st.abstractFunction;st.addDeprecatedGetters(Ht,["pending","timeout"]);Ht.prototype.getCache=Ve.deprecate(function(){return this.client._cache$},"use `.remoteProtocols()` instead of `.getCache()`");Ht.prototype.getProtocol=Ve.deprecate(function(){return this.client._svc$},"use `.service` instead or `.getProtocol()`");Ht.prototype.isDestroyed=Ve.deprecate(function(){return this.destroyed},"use `.destroyed` instead of `.isDestroyed`");function ml(t,e,r){Ht.call(this,t,r),this._writableFactory=e,(!r||!r.noPing)&&(Et("emitting ping request"),this.ping())}Ve.inherits(ml,Ht);ml.prototype._send=function(t,e){var r=this._registry.get(t),n=this._adapter,i=this;return ft.nextTick(s),!0;function s(o){if(!i.destroyed){var a=i._createHandshakeRequest(n,!o),c=i._writableFactory.call(i,function(f,l){if(f){r(f);return}l.on("data",function(h){Et("received response %s",h.id);var m=z.Buffer.concat(h.payload);try{var v=Oc(ta,m),T=v.head;T.serverHash&&(n=i._getAdapter(T))}catch(b){r(b);return}var x=T.match;Et("handshake match: %s",x),i.emit("handshake",a,T),x==="NONE"?ft.nextTick(function(){s(!0)}):(i._adapter=n,r(null,v.tail,n))})});if(!c){r(new Error("invalid writable stream"));return}c.write({id:t,payload:[ea.toBuffer(a),e]}),i._endWritable&&c.end()}}};function Bc(t,e,r,n){Ht.call(this,t,n),this._readable=e,this._writable=r,this._connected=!!(n&&n.noPing),this._readable.on("end",l),this._writable.on("finish",h);var i=this,s=null;this.once("eot",function(){s&&(clearTimeout(s),s=null),i._connected||i.emit("_ready"),this._writable.removeListener("finish",h),this._endWritable&&(Et("ending transport"),this._writable.end()),this._readable.removeListener("data",c).removeListener("data",f).removeListener("end",l)});var o;this._connected?this._readable.on("data",f):(this._readable.on("data",c),ft.nextTick(a),i.timeout&&(s=setTimeout(function(){i.destroy(new Error("timeout"))},i.timeout)));function a(m){if(!i.destroyed){o=i._createHandshakeRequest(i._adapter,!m);var v=[ea.toBuffer(o),st.bufferFrom([0,0])];i._writable.write({id:i._prefix,payload:v})}}function c(m){if(!i._matchesPrefix(m.id)){Et("discarding unscoped response %s (still connecting)",m.id);return}var v=z.Buffer.concat(m.payload);try{var T=Oc(ta,v).head;T.serverHash&&(i._adapter=i._getAdapter(T))}catch(b){i.destroy(b);return}var x=T.match;Et("handshake match: %s",x),i.emit("handshake",o,T),x==="NONE"?ft.nextTick(function(){a(!0)}):(Et("successfully connected"),s&&(clearTimeout(s),s=null),i._readable.removeListener("data",c).on("data",f),i._connected=!0,i.emit("_ready"),o=null)}function f(m){var v=m.id;if(!i._matchesPrefix(v)){Et("discarding unscoped message %s",v);return}var T=i._registry.get(v);T&&ft.nextTick(function(){Et("received message %s",v),T(null,z.Buffer.concat(m.payload),i._adapter)})}function l(){i.destroy(!0)}function h(){i.destroy()}}Ve.inherits(Bc,Ht);Bc.prototype._emit=function(){if(this._connected||this.draining)Ht.prototype._emit.apply(this,arguments);else{Et("queuing request");var t=[],e,r;for(e=0,r=arguments.length;e<r;e++)t.push(arguments[e]);this.once("_ready",function(){this._emit.apply(this,t)})}};Bc.prototype._send=function(t,e,r){if(r){var n=this;ft.nextTick(function(){n._registry.get(t)(null,st.bufferFrom([0,0,0]),n._adapter)})}return this._writable.write({id:t,payload:[e]})};function er(t,e){e=e||{},yi.EventEmitter.call(this),this.server=t,this._endWritable=!!st.getOption(e,"endWritable",!0),this._prefix=tg(e.scope);var r=t._cache,n=t.service,i=n.hash;r[i]||(r[i]=new mi(n,n,i)),this._adapter=null,this.destroyed=!1,this.draining=!1,this.pending=0,this.once("_eot",function(s,o){Et("server channel EOT"),this.emit("eot",s,o)})}Ve.inherits(er,yi.EventEmitter);er.prototype.destroy=function(t){this.draining||(this.draining=!0,this.emit("_drain")),(t||!this.pending)&&(this.destroyed=!0,vl(t)?(Et("fatal server channel error: %s",t),this.emit("_eot",this.pending,t)):this.emit("_eot",this.pending))};er.prototype._createHandshakeResponse=function(t,e){var r=this.server.service,n=r.hash,i=e&&e.serverHash.equals(n);return{match:t?"NONE":i?"BOTH":"CLIENT",serverProtocol:i?null:JSON.stringify(r.protocol),serverHash:i?null:n}};er.prototype._getAdapter=function(t){var e=t.clientHash,r=this.server._cache[e];if(r)return r;if(!t.clientProtocol)throw ai("UNKNOWN_PROTOCOL");var n=JSON.parse(t.clientProtocol),i=we.forProtocol(n);return r=new mi(i,this.server.service,e,!0),this.server._cache[e]=r};er.prototype._matchesPrefix=function(t){return rg(t,this._prefix)};er.prototype._receive=function(t,e,r){var n=this,i;try{i=e._decodeRequest(t)}catch(m){r(n._encodeSystemError(ai("INVALID_REQUEST",m)));return}var s=i._msg,o=new bl(s,{});if(!s.name){o.response=null,r(o.toBuffer(),!1);return}var a=new xl(s,this);n.emit("incomingCall",a);var c=this.server._fns;Et("starting server middleware chain (%s middleware)",c.length),n.pending++,sg({fns:c,ctx:a,wreq:i,wres:o,onTransition:f,onCompletion:l,onError:h});function f(m,v,T){var x=n.server._handlers[s.name];if(x){var k=!s.oneWay;try{k?x.call(a,m.request,function(N,D){k=!1,v.error=N,v.response=D,T()}):(x.call(a,m.request),T())}catch(N){k?(k=!1,T(N)):h(N)}}else{var b=n.server._defaultHandler;if(b)b.call(a,m,v,T);else{var _=new Error(Rt("no handler for %s",s.name));T(ai("NOT_IMPLEMENTED",_))}}}function l(m){n.pending--;var v=n.server,T;if(!m){var x=o.error,b=v._strict;b||(vl(x)?o.error=s.errorType.clone(x.message,{wrapUnions:!0}):x===null&&(x=o.error=void 0),x===void 0&&o.response===void 0&&s.responseType.isValid(null)&&(o.response=null));try{T=o.toBuffer()}catch{o.error!==void 0?m=pf(Rt("invalid %j error",s.name),o,[{name:"headers",type:En},{name:"error",type:s.errorType}]):m=pf(Rt("invalid %j response",s.name),o,[{name:"headers",type:En},{name:"response",type:s.responseType}])}}T?x!==void 0&&v.emit("error",ai("APPLICATION_ERROR",x)):T=n._encodeSystemError(m,o.headers),r(T,s.oneWay),n.draining&&!n.pending&&n.destroy()}function h(m){n.server.emit("error",m,n)}};st.addDeprecatedGetters(er,["pending"]);er.prototype.getCache=Ve.deprecate(function(){return this.server._cache},"use `.remoteProtocols()` instead of `.getCache()`");er.prototype.getProtocol=Ve.deprecate(function(){return this.server.service},"use `.service` instead of `.getProtocol()`");er.prototype.isDestroyed=Ve.deprecate(function(){return this.destroyed},"use `.destroyed` instead of `.isDestroyed`");er.prototype._encodeSystemError=function(t,e){var r=this.server;r.emit("error",t,this);var n;r._sysErrFormatter?n=r._sysErrFormatter.call(this,t):t.rpcCode&&(n=t.message);var i;if(e)try{i=En.toBuffer(e)}catch(s){r.emit("error",s,this)}return z.Buffer.concat([i||st.bufferFrom([0]),st.bufferFrom([1,0]),pl.toBuffer(n||"internal server error")])};function Yp(t,e,r){er.call(this,t,r),this._writable=void 0;var n=this,i;ft.nextTick(function(){i=e.call(n,function(c,f){ft.nextTick(function(){if(c){a(c);return}n._writable=f.on("finish",a),n.emit("_writable")})}).on("data",s).on("end",o)});function s(c){var f=c.id,l=z.Buffer.concat(c.payload),h;try{var m=Oc(ea,l),v=m.head,T=n._getAdapter(v)}catch(_){h=ai("INVALID_HANDSHAKE_REQUEST",_)}var x=n._createHandshakeResponse(h,v);n.emit("handshake",v,x),h?b(n._encodeSystemError(h)):n._receive(m.tail,T,b);function b(_){if(!n.destroyed){if(!n._writable){n.once("_writable",function(){b(_)});return}n._writable.write({id:f,payload:[ta.toBuffer(x),_]})}n._writable&&n._endWritable&&n._writable.end()}}function o(){n.destroy()}function a(c){i.removeListener("data",s).removeListener("end",o),n.destroy(c||!0)}}Ve.inherits(Yp,er);function Qp(t,e,r,n){er.call(this,t,n),this._adapter=void 0,this._writable=r.on("finish",c),this._readable=e.on("data",s).on("end",a),this.once("_drain",function(){this._readable.removeListener("data",s).removeListener("data",o).removeListener("end",a)}).once("eot",function(){this._writable.removeListener("finish",c),this._endWritable&&this._writable.end()});var i=this;function s(f){var l=f.id;if(!i._matchesPrefix(l))return;var h=z.Buffer.concat(f.payload),m;try{var v=Oc(ea,h),T=v.head;i._adapter=i._getAdapter(T)}catch(_){m=ai("INVALID_HANDSHAKE_REQUEST",_)}var x=i._createHandshakeResponse(m,T);i.emit("handshake",T,x),m?b(i._encodeSystemError(m)):(i._readable.removeListener("data",s).on("data",o),i._receive(v.tail,i._adapter,b));function b(_){i.destroyed||i._writable.write({id:l,payload:[ta.toBuffer(x),_]})}}function o(f){var l=f.id;if(!!i._matchesPrefix(l)){var h=z.Buffer.concat(f.payload);i._receive(h,i._adapter,function(m,v){i.destroyed||v||i._writable.write({id:l,payload:[m]})})}}function a(){i.destroy()}function c(){i.destroy(!0)}}Ve.inherits(Qp,er);function Rc(t,e,r){this._msg=t,this.headers=e||{},this.request=r||{}}Rc.prototype.toBuffer=function(){var t=this._msg;return z.Buffer.concat([En.toBuffer(this.headers),pl.toBuffer(t.name),t.requestType.toBuffer(this.request)])};function bl(t,e,r,n){this._msg=t,this.headers=e,this.error=r,this.response=n}bl.prototype.toBuffer=function(){var t=En.toBuffer(this.headers),e=this.error!==void 0;return z.Buffer.concat([t,Wp.toBuffer(e),e?this._msg.errorType.toBuffer(this.error):this._msg.responseType.toBuffer(this.response)])};function xl(t,e){this.channel=e,this.locals={},this.message=t,Object.freeze(this)}function ra(t,e){this._ctx=t,this._mask=-1>>>(e|0),this._id=0,this._n=0,this._cbs={}}ra.prototype.get=function(t){return this._cbs[t&this._mask]};ra.prototype.add=function(t,e){this._id=this._id+1&this._mask;var r=this,n=this._id,i;return t>0&&(i=setTimeout(function(){s(new Error("timeout"))},t)),this._cbs[n]=s,this._n++,n;function s(){!r._cbs[n]||(delete r._cbs[n],r._n--,i&&clearTimeout(i),e.apply(r._ctx,arguments))}};ra.prototype.clear=function(){Object.keys(this._cbs).forEach(function(t){this._cbs[t](new Error("interrupted"))},this)};function mi(t,e,r,n){this._clientSvc=t,this._serverSvc=e,this._hash=r,this._isRemote=!!n,this._readers=Xp(t,e)}mi.prototype._decodeRequest=function(t){var e=new hl(t),r=En._read(e),n=pl._read(e),i,s;if(n?(i=this._serverSvc.message(n),s=this._readers[n+"?"]._read(e)):i=yl,!e.isValid())throw new Error(Rt("truncated %s request",n||"ping$"));return new Rc(i,r,s)};mi.prototype._decodeResponse=function(t,e,r){var n=new hl(t);st.copyOwnProperties(En._read(n),e.headers,!0);var i=Wp._read(n),s=r.name;if(s){var o=this._readers[s+(i?"*":"!")];if(r=this._clientSvc.message(s),i?e.error=o._read(n):e.response=o._read(n),!n.isValid())throw new Error(Rt("truncated %s response",s))}else r=yl};function Zi(){_n.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._buf=st.newBuffer(0),this._bufs=[],this.on("finish",function(){this.push(null)})}Ve.inherits(Zi,_n.Transform);Zi.prototype._transform=function(t,e,r){t=z.Buffer.concat([this._buf,t]);for(var n;t.length>=4&&t.length>=(n=t.readInt32BE(0))+4;){if(n)this._bufs.push(t.slice(4,n+4));else{var i=this._bufs;this._bufs=[],this.push({id:null,payload:i})}t=t.slice(n+4)}this._buf=t,r()};Zi.prototype._flush=function(){if(this._buf.length||this._bufs.length){var t=this._bufs.slice();t.unshift(this._buf);var e=ai("TRAILING_DATA");e.trailingData=z.Buffer.concat(t).toString(),this.emit("error",e)}};function na(){_n.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}Ve.inherits(na,_n.Transform);na.prototype._transform=function(t,e,r){var n=t.payload,i,s,o;for(i=0,s=n.length;i<s;i++)o=n[i],this.push(hf(o.length)),this.push(o);this.push(hf(0)),r()};function Qs(){_n.Transform.call(this,{readableObjectMode:!0}),this._id=void 0,this._frameCount=0,this._buf=st.newBuffer(0),this._bufs=[],this.on("finish",function(){this.push(null)})}Ve.inherits(Qs,_n.Transform);Qs.prototype._transform=function(t,e,r){for(t=z.Buffer.concat([this._buf,t]);;){if(this._id===void 0){if(t.length<8){this._buf=t,r();return}this._id=t.readInt32BE(0),this._frameCount=t.readInt32BE(4),t=t.slice(8)}for(var n;this._frameCount&&t.length>=4&&t.length>=(n=t.readInt32BE(0))+4;)this._frameCount--,this._bufs.push(t.slice(4,n+4)),t=t.slice(n+4);if(this._frameCount){this._buf=t,r();return}else{var i={id:this._id,payload:this._bufs};this._bufs=[],this._id=void 0,this.push(i)}}};Qs.prototype._flush=Zi.prototype._flush;function ia(){_n.Transform.call(this,{writableObjectMode:!0}),this.on("finish",function(){this.push(null)})}Ve.inherits(ia,_n.Transform);ia.prototype._transform=function(t,e,r){var n=t.payload,i=n.length,s;s=st.newBuffer(8),s.writeInt32BE(t.id,0),s.writeInt32BE(i,4),this.push(s);var o;for(o=0;o<i;o++)s=n[o],this.push(hf(s.length)),this.push(s);r()};function hf(t){var e=st.newBuffer(4);return e.writeInt32BE(t),e}function Oc(t,e){var r=new hl(e),n=t._read(r);if(!r.isValid())throw new Error(Rt("truncated %s",t));return{head:n,tail:r.buf.slice(r.pos)}}function Tu(t,e){return t.equals(e)?t:t.createResolver(e)}function Xp(t,e){var r={};return t.messages.forEach(function(n){var i=n.name,s=e.message(i);try{if(!s)throw new Error(Rt("missing server message: %s",i));if(s.oneWay!==n.oneWay)throw new Error(Rt("inconsistent one-way message: %s",i));r[i+"?"]=Tu(s.requestType,n.requestType),r[i+"*"]=Tu(n.errorType,s.errorType),r[i+"!"]=Tu(n.responseType,s.responseType)}catch(o){throw ai("INCOMPATIBLE_PROTOCOL",o)}}),r}function Zp(t,e,r,n){Object.keys(e).forEach(function(i){var s=e[i],o,a;n?(o=r,a=we.forProtocol(s)):(o=we.forProtocol(s),a=r),t[i]=new mi(o,a,i,!0)})}function eg(t,e){var r={};return Object.keys(t).forEach(function(n){var i=t[n];if(i._isRemote){var s=e?i._serverSvc:i._clientSvc;r[n]=s.protocol}}),r}function vl(t){return!!t&&Object.prototype.toString.call(t)==="[object Error]"}function iv(t,e){return t.on("error",function(r){e.emit("error",r,t)})}function qa(t,e){var r=new Error(t);return r.cause=e,r}function ai(t,e){var r=qa(t.toLowerCase().replace(/_/g," "),e);return r.rpcCode=e&&e.rpcCode?e.rpcCode:t,r}function pf(t,e,r){var n=[],i,s,o;for(i=0,s=r.length;i<s;i++)o=r[i],o.type.isValid(e[o.name],{errorHook:f});var a=n.map(function(l){return Rt("%s = %j but expected %s",l.path,l.value,l.type)}).join(", "),c=new Error(Rt("%s (%s)",t,a));return c.details=n,c;function f(l,h,m){var v=[],T,x,b;for(T=0,x=l.length;T<x;T++)b=l[T],isNaN(b)?v.push("."+b):v.push("["+b+"]");n.push({path:o.name+v.join(""),value:h,type:m})}}function tg(t){return t?st.getHash(t).readInt16BE(0)<<32-gl:0}function rg(t,e){return(t^e)>>32-gl===0}function ng(t){return!!(t&&t.pipe)}function ig(t,e){var r=t.message(e);if(!r)throw new Error(Rt("unknown message: %s",e));return r}function sg(t){var e=[t.wreq,t.wres],r=[],n;i(0);function i(o){var a=!1;o<t.fns.length?t.fns[o].apply(t.ctx,e.concat(function(c,f){if(a){t.onError(qa("duplicate forward middleware call",c));return}if(a=!0,c||t.wres&&(t.wres.error!==void 0||t.wres.response!==void 0)){n=c,s();return}f&&r.push(f),i(++o)})):t.onTransition.apply(t.ctx,e.concat(function(c){if(a){t.onError(qa("duplicate handler call",c));return}a=!0,n=c,ft.nextTick(s)}))}function s(){var o=r.pop();if(o){var a=!1;o.call(t.ctx,n,function(c){if(a){t.onError(qa("duplicate backward middleware call",c));return}n=c,a=!0,s()})}else t.onCompletion.call(t.ctx,n)}}var sv={Adapter:mi,HANDSHAKE_REQUEST_TYPE:ea,HANDSHAKE_RESPONSE_TYPE:ta,Message:jn,Registry:ra,Service:we,discoverProtocol:nv,streams:{FrameDecoder:Zi,FrameEncoder:na,NettyDecoder:Qs,NettyEncoder:ia}};function wl(){return new Error("unsupported in the browser")}function ov(){return function(t,e,r){r(wl())}}function av(){return function(){throw wl()}}var cv={createImportHook:ov,createSyncImportHook:av,existsSync:function(){return!1},readFileSync:function(){throw wl()}};function fn(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function oh(t,e){for(var r="",n=0,i=-1,s=0,o,a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){c===-1?(r="",n=0):(r=r.slice(0,c),n=r.length-1-r.lastIndexOf("/")),i=a,s=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=a,s=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+t.slice(i+1,a):r=t.slice(i+1,a),n=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return r}function uv(t,e){var r=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return r?r===e.root?r+n:r+t+n:n}var Ns={resolve:function(){for(var e="",r=!1,n,i=arguments.length-1;i>=-1&&!r;i--){var s;i>=0?s=arguments[i]:(n===void 0&&(n=ft.cwd()),s=n),fn(s),s.length!==0&&(e=s+"/"+e,r=s.charCodeAt(0)===47)}return e=oh(e,!r),r?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(fn(e),e.length===0)return".";var r=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=oh(e,!r),e.length===0&&!r&&(e="."),e.length>0&&n&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return fn(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];fn(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":Ns.normalize(e)},relative:function(e,r){if(fn(e),fn(r),e===r||(e=Ns.resolve(e),r=Ns.resolve(r),e===r))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var i=e.length,s=i-n,o=1;o<r.length&&r.charCodeAt(o)===47;++o);for(var a=r.length,c=a-o,f=s<c?s:c,l=-1,h=0;h<=f;++h){if(h===f){if(c>f){if(r.charCodeAt(o+h)===47)return r.slice(o+h+1);if(h===0)return r.slice(o+h)}else s>f&&(e.charCodeAt(n+h)===47?l=h:h===0&&(l=0));break}var m=e.charCodeAt(n+h),v=r.charCodeAt(o+h);if(m!==v)break;m===47&&(l=h)}var T="";for(h=n+l+1;h<=i;++h)(h===i||e.charCodeAt(h)===47)&&(T.length===0?T+="..":T+="/..");return T.length>0?T+r.slice(o+l):(o+=l,r.charCodeAt(o)===47&&++o,r.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(fn(e),e.length===0)return".";for(var r=e.charCodeAt(0),n=r===47,i=-1,s=!0,o=e.length-1;o>=1;--o)if(r=e.charCodeAt(o),r===47){if(!s){i=o;break}}else s=!1;return i===-1?n?"/":".":n&&i===1?"//":e.slice(0,i)},basename:function(e,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');fn(e);var n=0,i=-1,s=!0,o;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var a=r.length-1,c=-1;for(o=e.length-1;o>=0;--o){var f=e.charCodeAt(o);if(f===47){if(!s){n=o+1;break}}else c===-1&&(s=!1,c=o+1),a>=0&&(f===r.charCodeAt(a)?--a===-1&&(i=o):(a=-1,i=c))}return n===i?i=c:i===-1&&(i=e.length),e.slice(n,i)}else{for(o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===47){if(!s){n=o+1;break}}else i===-1&&(s=!1,i=o+1);return i===-1?"":e.slice(n,i)}},extname:function(e){fn(e);for(var r=-1,n=0,i=-1,s=!0,o=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(c===47){if(!s){n=a+1;break}continue}i===-1&&(s=!1,i=a+1),c===46?r===-1?r=a:o!==1&&(o=1):r!==-1&&(o=-1)}return r===-1||i===-1||o===0||o===1&&r===i-1&&r===n+1?"":e.slice(r,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return uv("/",e)},parse:function(e){fn(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;var n=e.charCodeAt(0),i=n===47,s;i?(r.root="/",s=1):s=0;for(var o=-1,a=0,c=-1,f=!0,l=e.length-1,h=0;l>=s;--l){if(n=e.charCodeAt(l),n===47){if(!f){a=l+1;break}continue}c===-1&&(f=!1,c=l+1),n===46?o===-1?o=l:h!==1&&(h=1):o!==-1&&(h=-1)}return o===-1||c===-1||h===0||h===1&&o===c-1&&o===a+1?c!==-1&&(a===0&&i?r.base=r.name=e.slice(1,c):r.base=r.name=e.slice(a,c)):(a===0&&i?(r.name=e.slice(1,o),r.base=e.slice(1,c)):(r.name=e.slice(a,o),r.base=e.slice(a,c)),r.ext=e.slice(o,c)),a>0?r.dir=e.slice(0,a-1):i&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};Ns.posix=Ns;var fv=Ns,za=cv,og=Ws,gf=fv,lv=zs,Fs=lv.format,dv={date:{type:"int",logicalType:"date"},decimal:{type:"bytes",logicalType:"decimal"},time_ms:{type:"long",logicalType:"time-millis"},timestamp_ms:{type:"long",logicalType:"timestamp-millis"}};function _l(t,e,r){!r&&typeof e=="function"&&(r=e,e=void 0),e=e||{},e.importHook||(e.importHook=za.createImportHook());var n=[],i,s;e.importHook(t,"idl",function(c,f){if(c){r(c);return}if(f===void 0){r(null,{});return}try{var l=new bt(f,e),h=l._readProtocol(f,e)}catch(m){m.path=t,r(m);return}i=h.protocol,s=h.imports,o()});function o(){var c=s.shift();if(!c)n.length&&(i.types=i.types?n.concat(i.types):n),r(null,i);else{var f=gf.join(gf.dirname(t),c.name);c.kind==="idl"?_l(f,e,a):e.importHook(f,c.kind,function(l,h){if(l){r(l);return}switch(c.kind){case"protocol":case"schema":if(h===void 0){a(null,{});return}try{var m=JSON.parse(h)}catch(T){T.path=f,r(T);return}var v=c.kind==="schema"?{types:[m]}:m;a(null,v);break;default:r(new Error(Fs("invalid import kind: %s",c.kind)))}})}}function a(c,f){if(c){r(c);return}(f.types||[]).forEach(function(l){if(l.namespace===void 0){var h=f.namespace;if(!h){var m=/^(.*)\.[^.]+$/.exec(f.protocol);m&&(h=m[1])}l.namespace=h||""}n.push(l)});try{Object.keys(f.messages||{}).forEach(function(l){if(i.messages||(i.messages={}),i.messages[l])throw new Error(Fs("duplicate message: %s",l));i.messages[l]=f.messages[l]})}catch(l){r(l);return}o()}}function hv(t){var e;if(typeof t=="string"&&~t.indexOf(gf.sep)&&za.existsSync(t)){var r=za.readFileSync(t,{encoding:"utf8"});try{return JSON.parse(r)}catch{var n={importHook:za.createSyncImportHook()};_l(t,n,function(s,o){e=s?r:o})}}else e=t;if(typeof e!="string"||e==="null")return e;try{return JSON.parse(e)}catch{try{return bt.readProtocol(e)}catch{try{return bt.readSchema(e)}catch{return e}}}}function bt(t,e){e=e||{},this._tk=new bi(t),this._ackVoidMessages=!!e.ackVoidMessages,this._implicitTags=!e.delimitedCollections,this._typeRefs=e.typeRefs||dv}bt.readProtocol=function(t,e){var r=new bt(t,e),n=r._readProtocol();if(n.imports.length)throw new Error("unresolvable import");return n.protocol};bt.readSchema=function(t,e){var r=new bt(t,e),n=r._readJavadoc(),i=r._readType(n===void 0?{}:{doc:n});return r._tk.next({id:"(eof)"}),i};bt.prototype._readProtocol=function(){var t=this._tk,e=[],r=[],n={},i;this._readImports(e);var s={},o=this._readJavadoc();for(o!==void 0&&(s.doc=o),this._readAnnotations(s),t.next({val:"protocol"}),t.next({val:"{",silent:!0})||(s.protocol=t.next({id:"name"}).val,t.next({val:"{"}));!t.next({val:"}",silent:!0});)if(!this._readImports(e)){var a=this._readJavadoc(),c=this._readType(),f=this._readImports(e,!0),l=void 0;if(i=t.pos,!f&&(l=this._readMessage(c))){a!==void 0&&l.schema.doc===void 0&&(l.schema.doc=a);var h=!1;if((l.schema.response==="void"||l.schema.response.type==="void")&&(h=!this._ackVoidMessages&&!l.schema.errors,l.schema.response==="void"?l.schema.response="null":l.schema.response.type="null"),h&&(l.schema["one-way"]=!0),n[l.name])throw new Error(Fs("duplicate message: %s",l.name));n[l.name]=l.schema}else a&&(typeof c=="string"?c={doc:a,type:c}:c.doc===void 0&&(c.doc=a)),r.push(c),t.pos=i,t.next({val:";",silent:!0});a=void 0}return t.next({id:"(eof)"}),r.length&&(s.types=r),Object.keys(n).length&&(s.messages=n),{protocol:s,imports:e}};bt.prototype._readAnnotations=function(t){for(var e=this._tk;e.next({val:"@",silent:!0});){for(var r=[];!e.next({val:"(",silent:!0});)r.push(e.next().val);t[r.join("")]=e.next({id:"json"}).val,e.next({val:")"})}};bt.prototype._readMessage=function(t){var e=this._tk,r={request:[],response:t};this._readAnnotations(r);var n=e.next().val;if(e.next().val==="("){if(!e.next({val:")",silent:!0}))do r.request.push(this._readField());while(!e.next({val:")",silent:!0})&&e.next({val:","}));var i=e.next();switch(i.val){case"throws":r.errors=[];do r.errors.push(this._readType());while(!e.next({val:";",silent:!0})&&e.next({val:","}));break;case"oneway":r["one-way"]=!0,e.next({val:";"});break;case";":break;default:throw e.error("invalid message suffix",i)}return{name:n,schema:r}}};bt.prototype._readJavadoc=function(){var t=this._tk.next({id:"javadoc",emitJavadoc:!0,silent:!0});if(t)return t.val};bt.prototype._readField=function(){var t=this._tk,e=this._readJavadoc(),r={type:this._readType()};return e!==void 0&&r.doc===void 0&&(r.doc=e),this._readAnnotations(r),r.name=t.next({id:"name"}).val,t.next({val:"=",silent:!0})&&(r.default=t.next({id:"json"}).val),r};bt.prototype._readType=function(t){switch(t=t||{},this._readAnnotations(t),t.type=this._tk.next({id:"name"}).val,t.type){case"record":case"error":return this._readRecord(t);case"fixed":return this._readFixed(t);case"enum":return this._readEnum(t);case"map":return this._readMap(t);case"array":return this._readArray(t);case"union":if(Object.keys(t).length>1)throw new Error("union annotations are not supported");return this._readUnion();default:var e=this._typeRefs[t.type];return e&&(delete t.type,og.copyOwnProperties(e,t)),Object.keys(t).length>1?t:t.type}};bt.prototype._readFixed=function(t){var e=this._tk;return e.next({val:"(",silent:!0})||(t.name=e.next({id:"name"}).val,e.next({val:"("})),t.size=parseInt(e.next({id:"number"}).val),e.next({val:")"}),t};bt.prototype._readMap=function(t){var e=this._tk,r=this._implicitTags,n=e.next({val:"<",silent:r})===void 0;return t.values=this._readType(),e.next({val:">",silent:n}),t};bt.prototype._readArray=function(t){var e=this._tk,r=this._implicitTags,n=e.next({val:"<",silent:r})===void 0;return t.items=this._readType(),e.next({val:">",silent:n}),t};bt.prototype._readEnum=function(t){var e=this._tk;e.next({val:"{",silent:!0})||(t.name=e.next({id:"name"}).val,e.next({val:"{"})),t.symbols=[];do t.symbols.push(e.next().val);while(!e.next({val:"}",silent:!0})&&e.next({val:","}));return t};bt.prototype._readUnion=function(){var t=this._tk,e=[];t.next({val:"{"});do e.push(this._readType());while(!t.next({val:"}",silent:!0})&&t.next({val:","}));return e};bt.prototype._readRecord=function(t){var e=this._tk;for(e.next({val:"{",silent:!0})||(t.name=e.next({id:"name"}).val,e.next({val:"{"})),t.fields=[];!e.next({val:"}",silent:!0});)t.fields.push(this._readField()),e.next({val:";"});return t};bt.prototype._readImports=function(t,e){for(var r=this._tk,n=0,i=r.pos;r.next({val:"import",silent:!0});){if(!n&&e&&r.next({val:"(",silent:!0})){r.pos=i;return}var s=r.next({id:"name"}).val,o=JSON.parse(r.next({id:"string"}).val);r.next({val:";"}),t.push({kind:s,name:o}),n++}return n};function bi(t){this._str=t,this.pos=0}bi.prototype.next=function(t){var e={pos:this.pos,id:void 0,val:void 0},r=this._skip(t&&t.emitJavadoc);if(r)e.id="javadoc",e.val=r;else{var n=this.pos,i=this._str,s=i.charAt(n);if(!s)e.id="(eof)";else if(t&&t.id==="json"?(e.id="json",this.pos=this._endOfJson()):s==='"'?(e.id="string",this.pos=this._endOfString()):/[0-9]/.test(s)?(e.id="number",this.pos=this._endOf(/[0-9]/)):/[`A-Za-z_.]/.test(s)?(e.id="name",this.pos=this._endOf(/[`A-Za-z0-9_.]/)):(e.id="operator",this.pos=n+1),e.val=i.slice(n,this.pos),e.id==="json")try{e.val=JSON.parse(e.val)}catch{throw this.error("invalid JSON",e)}else e.id==="name"&&(e.val=e.val.replace(/`/g,""))}var o;if(t&&t.id&&t.id!==e.id?o=this.error(Fs("expected ID %s",t.id),e):t&&t.val&&t.val!==e.val&&(o=this.error(Fs("expected value %s",t.val),e)),o)if(t&&t.silent){this.pos=e.pos;return}else throw o;else return e};bi.prototype.error=function(t,e){var r=typeof e!="number",n=r?e.pos:e,i=this._str,s=1,o=0,a;for(a=0;a<n;a++)i.charAt(a)===`
`&&(s++,o=a);var c=r?Fs("invalid token %j: %s",e,t):t,f=new Error(c);return f.token=r?e:void 0,f.lineNum=s,f.colNum=n-o,f};bi.prototype._skip=function(t){for(var e=this._str,r=!1,n,i;(i=e.charAt(this.pos))&&/\s/.test(i);)this.pos++;if(n=this.pos,i==="/")switch(e.charAt(this.pos+1)){case"/":for(this.pos+=2;(i=e.charAt(this.pos))&&i!==`
`;)this.pos++;return this._skip(t);case"*":for(this.pos+=2,e.charAt(this.pos)==="*"&&(r=!0);i=e.charAt(this.pos++);)if(i==="*"&&e.charAt(this.pos)==="/")return this.pos++,r&&t?pv(e.slice(n+3,this.pos-2)):this._skip(t);throw this.error("unterminated comment",n)}};bi.prototype._endOf=function(t){for(var e=this.pos,r=this._str;t.test(r.charAt(e));)e++;return e};bi.prototype._endOfString=function(){for(var t=this.pos+1,e=this._str,r;r=e.charAt(t);){if(r==='"')return t+1;r==="\\"?t+=2:t++}throw this.error("unterminated string",t-1)};bi.prototype._endOfJson=function(){var t=og.jsonEnd(this._str,this.pos);if(t<0)throw this.error("invalid JSON",t);return t};function pv(t){for(var e=t.replace(/^[ \t]+|[ \t]+$/g,"").split(`
`).map(function(r,n){return n?r.replace(/^\s*\*\s?/,""):r});!e[0];)e.shift();for(;!e[e.length-1];)e.pop();return e.join(`
`)}var gv={Tokenizer:bi,assembleProtocol:_l,read:hv,readProtocol:bt.readProtocol,readSchema:bt.readSchema};(function(t){var e=rv,r=sv,n=gv,i=Ws;function s(o,a){var c=n.read(o);return c.protocol?r.Service.forProtocol(c,a):e.Type.forSchema(c,a)}t.exports={Service:r.Service,assembleProtocol:n.assembleProtocol,discoverProtocol:r.discoverProtocol,parse:s,readProtocol:n.readProtocol,readSchema:n.readSchema},i.copyOwnProperties(e,t.exports)})(Kp);var An=ll,$t=Ws,xi=vc,sa=zs,ag=Xm,Dc={namespace:"org.apache.avro.file"},ah=An.Type.forSchema("long",Dc),cg=An.Type.forSchema({type:"map",values:"bytes"},Dc),El=An.Type.forSchema({name:"Header",type:"record",fields:[{name:"magic",type:{type:"fixed",name:"Magic",size:4}},{name:"meta",type:cg},{name:"sync",type:{type:"fixed",name:"Sync",size:16}}]},Dc),ug=An.Type.forSchema({name:"Block",type:"record",fields:[{name:"count",type:"long"},{name:"data",type:"bytes"},{name:"sync",type:"Sync"}]},Dc),ko=$t.bufferFrom("Obj"),Fc=sa.format,Lo=$t.Tap;function Lc(t,e){e=e||{};var r=!!e.noDecode;xi.Duplex.call(this,{readableObjectMode:!r,allowHalfOpen:!1}),this._type=An.Type.forSchema(t),this._tap=new Lo($t.newBuffer(0)),this._writeCb=null,this._needPush=!1,this._readValue=lg(r,this._type),this._finished=!1,this.on("finish",function(){this._finished=!0,this._read()})}sa.inherits(Lc,xi.Duplex);Lc.prototype._write=function(t,e,r){this._writeCb=r;var n=this._tap;n.buf=z.Buffer.concat([n.buf.slice(n.pos),t]),n.pos=0,this._needPush&&(this._needPush=!1,this._read())};Lc.prototype._read=function(){this._needPush=!1;var t=this._tap,e=t.pos,r=this._readValue(t);t.isValid()?this.push(r):this._finished?this.push(null):(t.pos=e,this._needPush=!0,this._writeCb&&this._writeCb())};function tn(t){t=t||{};var e=!!t.noDecode;xi.Duplex.call(this,{allowHalfOpen:!0,readableObjectMode:!e}),this._rType=t.readerSchema!==void 0?An.Type.forSchema(t.readerSchema):void 0,this._wType=null,this._codecs=t.codecs,this._codec=void 0,this._parseHook=t.parseHook,this._tap=new Lo($t.newBuffer(0)),this._blockTap=new Lo($t.newBuffer(0)),this._syncMarker=null,this._readValue=null,this._noDecode=e,this._queue=new $t.OrderedQueue,this._decompress=null,this._index=0,this._remaining=void 0,this._needPush=!1,this._finished=!1,this.on("finish",function(){this._finished=!0,this._needPush&&this._read()})}sa.inherits(tn,xi.Duplex);tn.defaultCodecs=function(){return{null:function(t,e){e(null,t)},deflate:ag.inflateRaw}};tn.getDefaultCodecs=tn.defaultCodecs;tn.prototype._decodeHeader=function(){var t=this._tap;if(t.buf.length<ko.length)return!1;if(!ko.equals(t.buf.slice(0,ko.length)))return this.emit("error",new Error("invalid magic bytes")),!1;var e=El._read(t);if(!t.isValid())return!1;this._codec=(e.meta["avro.codec"]||"null").toString();var r=this._codecs||tn.getDefaultCodecs();if(this._decompress=r[this._codec],!this._decompress){this.emit("error",new Error(Fc("unknown codec: %s",this._codec)));return}try{var n=JSON.parse(e.meta["avro.schema"].toString());this._parseHook&&(n=this._parseHook(n)),this._wType=An.Type.forSchema(n)}catch(i){this.emit("error",i);return}return this._readValue=lg(this._noDecode,this._wType,this._rType),this._syncMarker=e.sync,this.emit("metadata",this._wType,this._codec,e),!0};tn.prototype._write=function(t,e,r){var n=this._tap;if(n.buf=z.Buffer.concat([n.buf,t]),n.pos=0,!this._decodeHeader()){ft.nextTick(r);return}this._write=this._writeChunk,this._write($t.newBuffer(0),e,r)};tn.prototype._writeChunk=function(t,e,r){var n=this._tap;n.buf=z.Buffer.concat([n.buf.slice(n.pos),t]),n.pos=0;for(var i=1,s;s=yv(n);){if(!this._syncMarker.equals(s.sync)){this.emit("error",new Error("invalid sync marker"));return}i++,this._decompress(s.data,this._createBlockCallback(s.count,o))}o();function o(){--i||r()}};tn.prototype._createBlockCallback=function(t,e){var r=this,n=this._index++;return function(i,s){if(i){var o=new Error(Fc("%s codec decompression error",r._codec));o.cause=i,r.emit("error",o),e()}else r._queue.push(new fg(n,s,e,t)),r._needPush&&r._read()}};tn.prototype._read=function(){this._needPush=!1;var t=this._blockTap;if(!this._remaining){var e=this._queue.pop();if(!e||!e.count){this._finished?this.push(null):this._needPush=!0,e&&e.cb();return}e.cb(),this._remaining=e.count,t.buf=e.buf,t.pos=0}this._remaining--,this.push(this._readValue(t))};function Uc(t,e){e=e||{},xi.Transform.call(this,{writableObjectMode:!0,allowHalfOpen:!1}),this._type=An.Type.forSchema(t),this._writeValue=function(r,n){try{this._type._write(r,n)}catch(i){this.emit("error",i)}},this._tap=new Lo($t.newBuffer(e.batchSize||65536))}sa.inherits(Uc,xi.Transform);Uc.prototype._transform=function(t,e,r){var n=this._tap,i=n.buf,s=n.pos;if(this._writeValue(n,t),!n.isValid()){s&&this.push(mv(n.buf,0,s));var o=n.pos-s;o>i.length&&(n.buf=$t.newBuffer(2*o)),n.pos=0,this._writeValue(n,t)}r()};Uc.prototype._flush=function(t){var e=this._tap,r=e.pos;r&&this.push(e.buf.slice(0,r)),t()};function rn(t,e){e=e||{},xi.Duplex.call(this,{allowHalfOpen:!0,writableObjectMode:!0});var r;if(An.Type.isType(t)?(r=t,t=void 0):r=An.Type.forSchema(t),this._schema=t,this._type=r,this._writeValue=function(i,s){try{this._type._write(i,s)}catch(o){this.emit("error",o)}},this._blockSize=e.blockSize||65536,this._tap=new Lo($t.newBuffer(this._blockSize)),this._codecs=e.codecs,this._codec=e.codec||"null",this._blockCount=0,this._syncMarker=e.syncMarker||new $t.Lcg().nextBuffer(16),this._queue=new $t.OrderedQueue,this._pending=0,this._finished=!1,this._needHeader=!1,this._needPush=!1,this._metadata=e.metadata||{},!cg.isValid(this._metadata))throw new Error("invalid metadata");var n=this._codec;if(this._compress=(this._codecs||rn.getDefaultCodecs())[n],!this._compress)throw new Error(Fc("unsupported codec: %s",n));switch(e.omitHeader!==void 0&&(e.writeHeader=e.omitHeader?"never":"auto"),e.writeHeader){case!1:case"never":break;case void 0:case"auto":this._needHeader=!0;break;default:this._writeHeader()}this.on("finish",function(){this._finished=!0,this._blockCount?this._flushChunk():this._finished&&this._needPush&&this.push(null)})}sa.inherits(rn,xi.Duplex);rn.defaultCodecs=function(){return{null:function(t,e){e(null,t)},deflate:ag.deflateRaw}};rn.getDefaultCodecs=rn.defaultCodecs;rn.prototype._writeHeader=function(){var t=JSON.stringify(this._schema?this._schema:this._type.getSchema({exportAttrs:!0})),e=$t.copyOwnProperties(this._metadata,{"avro.schema":$t.bufferFrom(t),"avro.codec":$t.bufferFrom(this._codec)},!0),r=El.getRecordConstructor(),n=new r(ko,e,this._syncMarker);this.push(n.toBuffer())};rn.prototype._write=function(t,e,r){this._needHeader&&(this._writeHeader(),this._needHeader=!1);var n=this._tap,i=n.pos,s=!1;if(this._writeValue(n,t),!n.isValid()){i&&(this._flushChunk(i,r),s=!0);var o=n.pos-i;o>this._blockSize&&(this._blockSize=o*2),n.buf=$t.newBuffer(this._blockSize),n.pos=0,this._writeValue(n,t)}this._blockCount++,s||r()};rn.prototype._flushChunk=function(t,e){var r=this._tap;t=t||r.pos,this._compress(r.buf.slice(0,t),this._createBlockCallback(e)),this._blockCount=0};rn.prototype._read=function(){var t=this,e=this._queue.pop();if(!e){this._finished&&!this._pending?ft.nextTick(function(){t.push(null)}):this._needPush=!0;return}this.push(ah.toBuffer(e.count,!0)),this.push(ah.toBuffer(e.buf.length,!0)),this.push(e.buf),this.push(this._syncMarker),this._finished||e.cb()};rn.prototype._createBlockCallback=function(t){var e=this,r=this._index++,n=this._blockCount;return this._pending++,function(i,s){if(i){var o=new Error(Fc("%s codec compression error",e._codec));o.cause=i,e.emit("error",o);return}e._pending--,e._queue.push(new fg(r,s,t,n)),e._needPush&&(e._needPush=!1,e._read())}};function fg(t,e,r,n){this.index=t,this.buf=e,this.cb=r,this.count=n|0}function yv(t){var e=t.pos,r=ug._read(t);return t.isValid()?r:(t.pos=e,null)}function lg(t,e,r){if(t)return function(i){return function(s){var o=s.pos;return i(s),s.buf.slice(o,s.pos)}}(e._skip);if(r){var n=r.createResolver(e);return function(i){return n._read(i)}}else return function(i){return e._read(i)}}function mv(t,e,r){var n=$t.newBuffer(r);return t.copy(n,0,e,e+r),n}var bv={BLOCK_TYPE:ug,HEADER_TYPE:El,MAGIC_BYTES:ko,streams:{BlockDecoder:tn,BlockEncoder:rn,RawDecoder:Lc,RawEncoder:Uc}};(function(t){var e=Kp.exports,r=bv,n=Ws,i=vc,s=zs;function o(l,h){i.Readable.call(this),h=h||{},this._batchSize=h.batchSize||65536,this._blob=l,this._pos=0}s.inherits(o,i.Readable),o.prototype._read=function(){var l=this._pos;if(l>=this._blob.size){this.push(null);return}this._pos+=this._batchSize;var h=this._blob.slice(l,this._pos,this._blob.type),m=new FileReader,v=this;m.addEventListener("loadend",function T(x){m.removeEventListener("loadend",T,!1),x.error?v.emit("error",x.error):v.push(n.bufferFrom(m.result))},!1),m.readAsArrayBuffer(h)};function a(){i.Transform.call(this,{readableObjectMode:!0}),this._bufs=[]}s.inherits(a,i.Transform),a.prototype._transform=function(l,h,m){this._bufs.push(l),m()},a.prototype._flush=function(l){this.push(new Blob(this._bufs,{type:"application/octet-binary"})),l()};function c(l,h){return new o(l).pipe(new r.streams.BlockDecoder(h))}function f(l,h){var m=new r.streams.BlockEncoder(l,h),v=new a;return m.pipe(v),new i.Duplex({objectMode:!0,read:function(){var T=v.read();T?b(T):v.once("readable",b);var x=this;function b(_){x.push(_||v.read()),x.push(null)}},write:function(T,x,b){return m.write(T,x,b)}}).on("finish",function(){m.end()})}t.exports={createBlobDecoder:c,createBlobEncoder:f,streams:r.streams},n.copyOwnProperties(e,t.exports)})(Up);(function(t){var e=F&&F.__createBinding||(Object.create?function(o,a,c,f){f===void 0&&(f=c),Object.defineProperty(o,f,{enumerable:!0,get:function(){return a[c]}})}:function(o,a,c,f){f===void 0&&(f=c),o[f]=a[c]}),r=F&&F.__setModuleDefault||(Object.create?function(o,a){Object.defineProperty(o,"default",{enumerable:!0,value:a})}:function(o,a){o.default=a}),n=F&&F.__importStar||function(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var c in o)c!=="default"&&Object.prototype.hasOwnProperty.call(o,c)&&e(a,o,c);return r(a,o),a};Object.defineProperty(t,"__esModule",{value:!0}),t.serializeTags=t.tagsParser=t.tagParser=void 0;const i=n(Up.exports);t.tagParser=i.Type.forSchema({type:"record",name:"Tag",fields:[{name:"name",type:"string"},{name:"value",type:"string"}]}),t.tagsParser=i.Type.forSchema({type:"array",items:t.tagParser});function s(o){if(o.length==0)return new Uint8Array(0);let a;try{a=t.tagsParser.toBuffer(o)}catch{throw new Error("Incorrect tag format used. Make sure your tags are { name: string!, value: string! }[]")}return Uint8Array.from(a)}t.serializeTags=s})(ol);var Xs={},Kc={};Object.defineProperty(Kc,"__esModule",{value:!0});Kc.Signer=void 0;class xv{static verify(e){throw new Error("You must implement verify method on child")}}Kc.Signer=xv;var jc={},oa={},dg=Rf(Zm),es={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SIG_CONFIG=t.SignatureConfig=void 0;var e;(function(r){r[r.ARWEAVE=1]="ARWEAVE",r[r.ED25519=2]="ED25519",r[r.ETHEREUM=3]="ETHEREUM",r[r.SOLANA=4]="SOLANA"})(e=t.SignatureConfig||(t.SignatureConfig={})),t.SIG_CONFIG={[e.ARWEAVE]:{sigLength:512,pubLength:512,sigName:"arweave"},[e.ED25519]:{sigLength:64,pubLength:32,sigName:"ed25519"},[e.ETHEREUM]:{sigLength:65,pubLength:65,sigName:"ethereum"},[e.SOLANA]:{sigLength:64,pubLength:32,sigName:"solana"}}})(es);var vv=F&&F.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wv=F&&F.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_v=F&&F.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&vv(e,t,r);return wv(e,t),e},Ev=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oa,"__esModule",{value:!0});const Av=Ev(nn.exports),ch=_v(dg),uh=es;class Sv{constructor(e,r){this._key=e,this.pk=r,this.ownerLength=uh.SIG_CONFIG[2].pubLength,this.signatureLength=uh.SIG_CONFIG[2].sigLength,this.signatureType=2}get publicKey(){return this._publicKey}get key(){return new Uint8Array(0)}sign(e){return ch.sign(z.Buffer.from(e),z.Buffer.from(this.key))}static async verify(e,r,n){let i=e;return typeof e=="string"&&(i=Av.default.toBuffer(e)),ch.verify(z.Buffer.from(n),z.Buffer.from(r),z.Buffer.from(i))}}oa.default=Sv;var Zs={},Al={};const xe={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function kr(t,e){if(!t)throw new Error(e)}function me(t,e,r){if(kr(e instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){const n=r.join(", "),i=`Expected ${t} to be an Uint8Array with length [${n}]`;kr(r.includes(e.length),i)}else{const n=`Expected ${t} to be an Uint8Array with length ${r}`;kr(e.length===r,n)}}function Ri(t){kr(_s(t)==="Boolean","Expected compressed to be a Boolean")}function Vr(t=r=>new Uint8Array(r),e){return typeof t=="function"&&(t=t(e)),me("output",t,e),t}function _s(t){return Object.prototype.toString.call(t).slice(8,-1)}var Tv=t=>({contextRandomize(e){switch(kr(e===null||e instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),e!==null&&me("seed",e,32),t.contextRandomize(e)){case 1:throw new Error(xe.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(e){return me("private key",e,32),t.privateKeyVerify(e)===0},privateKeyNegate(e){switch(me("private key",e,32),t.privateKeyNegate(e)){case 0:return e;case 1:throw new Error(xe.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(e,r){switch(me("private key",e,32),me("tweak",r,32),t.privateKeyTweakAdd(e,r)){case 0:return e;case 1:throw new Error(xe.TWEAK_ADD)}},privateKeyTweakMul(e,r){switch(me("private key",e,32),me("tweak",r,32),t.privateKeyTweakMul(e,r)){case 0:return e;case 1:throw new Error(xe.TWEAK_MUL)}},publicKeyVerify(e){return me("public key",e,[33,65]),t.publicKeyVerify(e)===0},publicKeyCreate(e,r=!0,n){switch(me("private key",e,32),Ri(r),n=Vr(n,r?33:65),t.publicKeyCreate(n,e)){case 0:return n;case 1:throw new Error(xe.SECKEY_INVALID);case 2:throw new Error(xe.PUBKEY_SERIALIZE)}},publicKeyConvert(e,r=!0,n){switch(me("public key",e,[33,65]),Ri(r),n=Vr(n,r?33:65),t.publicKeyConvert(n,e)){case 0:return n;case 1:throw new Error(xe.PUBKEY_PARSE);case 2:throw new Error(xe.PUBKEY_SERIALIZE)}},publicKeyNegate(e,r=!0,n){switch(me("public key",e,[33,65]),Ri(r),n=Vr(n,r?33:65),t.publicKeyNegate(n,e)){case 0:return n;case 1:throw new Error(xe.PUBKEY_PARSE);case 2:throw new Error(xe.IMPOSSIBLE_CASE);case 3:throw new Error(xe.PUBKEY_SERIALIZE)}},publicKeyCombine(e,r=!0,n){kr(Array.isArray(e),"Expected public keys to be an Array"),kr(e.length>0,"Expected public keys array will have more than zero items");for(const i of e)me("public key",i,[33,65]);switch(Ri(r),n=Vr(n,r?33:65),t.publicKeyCombine(n,e)){case 0:return n;case 1:throw new Error(xe.PUBKEY_PARSE);case 2:throw new Error(xe.PUBKEY_COMBINE);case 3:throw new Error(xe.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(e,r,n=!0,i){switch(me("public key",e,[33,65]),me("tweak",r,32),Ri(n),i=Vr(i,n?33:65),t.publicKeyTweakAdd(i,e,r)){case 0:return i;case 1:throw new Error(xe.PUBKEY_PARSE);case 2:throw new Error(xe.TWEAK_ADD)}},publicKeyTweakMul(e,r,n=!0,i){switch(me("public key",e,[33,65]),me("tweak",r,32),Ri(n),i=Vr(i,n?33:65),t.publicKeyTweakMul(i,e,r)){case 0:return i;case 1:throw new Error(xe.PUBKEY_PARSE);case 2:throw new Error(xe.TWEAK_MUL)}},signatureNormalize(e){switch(me("signature",e,64),t.signatureNormalize(e)){case 0:return e;case 1:throw new Error(xe.SIG_PARSE)}},signatureExport(e,r){me("signature",e,64),r=Vr(r,72);const n={output:r,outputlen:72};switch(t.signatureExport(n,e)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(xe.SIG_PARSE);case 2:throw new Error(xe.IMPOSSIBLE_CASE)}},signatureImport(e,r){switch(me("signature",e),r=Vr(r,64),t.signatureImport(r,e)){case 0:return r;case 1:throw new Error(xe.SIG_PARSE);case 2:throw new Error(xe.IMPOSSIBLE_CASE)}},ecdsaSign(e,r,n={},i){me("message",e,32),me("private key",r,32),kr(_s(n)==="Object","Expected options to be an Object"),n.data!==void 0&&me("options.data",n.data),n.noncefn!==void 0&&kr(_s(n.noncefn)==="Function","Expected options.noncefn to be a Function"),i=Vr(i,64);const s={signature:i,recid:null};switch(t.ecdsaSign(s,e,r,n.data,n.noncefn)){case 0:return s;case 1:throw new Error(xe.SIGN);case 2:throw new Error(xe.IMPOSSIBLE_CASE)}},ecdsaVerify(e,r,n){switch(me("signature",e,64),me("message",r,32),me("public key",n,[33,65]),t.ecdsaVerify(e,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(xe.SIG_PARSE);case 2:throw new Error(xe.PUBKEY_PARSE)}},ecdsaRecover(e,r,n,i=!0,s){switch(me("signature",e,64),kr(_s(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),me("message",n,32),Ri(i),s=Vr(s,i?33:65),t.ecdsaRecover(s,e,r,n)){case 0:return s;case 1:throw new Error(xe.SIG_PARSE);case 2:throw new Error(xe.RECOVER);case 3:throw new Error(xe.IMPOSSIBLE_CASE)}},ecdh(e,r,n={},i){switch(me("public key",e,[33,65]),me("private key",r,32),kr(_s(n)==="Object","Expected options to be an Object"),n.data!==void 0&&me("options.data",n.data),n.hashfn!==void 0?(kr(_s(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&me("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&me("options.ybuf",n.ybuf,32),me("output",i)):i=Vr(i,32),t.ecdh(i,e,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(xe.PUBKEY_PARSE);case 2:throw new Error(xe.ECDH)}}});const kv=eb.ec,hn=new kv("secp256k1"),pe=hn.curve,ot=pe.n.constructor;function Pv(t,e){let r=new ot(e);if(r.cmp(pe.p)>=0)return null;r=r.toRed(pe.red);let n=r.redSqr().redIMul(r).redIAdd(pe.b).redSqrt();return t===3!==n.isOdd()&&(n=n.redNeg()),hn.keyPair({pub:{x:r,y:n}})}function Iv(t,e,r){let n=new ot(e),i=new ot(r);if(n.cmp(pe.p)>=0||i.cmp(pe.p)>=0||(n=n.toRed(pe.red),i=i.toRed(pe.red),(t===6||t===7)&&i.isOdd()!==(t===7)))return null;const s=n.redSqr().redIMul(n);return i.redSqr().redISub(s.redIAdd(pe.b)).isZero()?hn.keyPair({pub:{x:n,y:i}}):null}function Yn(t){const e=t[0];switch(e){case 2:case 3:return t.length!==33?null:Pv(e,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:Iv(e,t.subarray(1,33),t.subarray(33,65));default:return null}}function Oi(t,e){const r=e.encode(null,t.length===33);for(let n=0;n<t.length;++n)t[n]=r[n]}var Cv={contextRandomize(){return 0},privateKeyVerify(t){const e=new ot(t);return e.cmp(pe.n)<0&&!e.isZero()?0:1},privateKeyNegate(t){const e=new ot(t),r=pe.n.sub(e).umod(pe.n).toArrayLike(Uint8Array,"be",32);return t.set(r),0},privateKeyTweakAdd(t,e){const r=new ot(e);if(r.cmp(pe.n)>=0||(r.iadd(new ot(t)),r.cmp(pe.n)>=0&&r.isub(pe.n),r.isZero()))return 1;const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},privateKeyTweakMul(t,e){let r=new ot(e);if(r.cmp(pe.n)>=0||r.isZero())return 1;r.imul(new ot(t)),r.cmp(pe.n)>=0&&(r=r.umod(pe.n));const n=r.toArrayLike(Uint8Array,"be",32);return t.set(n),0},publicKeyVerify(t){return Yn(t)===null?1:0},publicKeyCreate(t,e){const r=new ot(e);if(r.cmp(pe.n)>=0||r.isZero())return 1;const n=hn.keyFromPrivate(e).getPublic();return Oi(t,n),0},publicKeyConvert(t,e){const r=Yn(e);if(r===null)return 1;const n=r.getPublic();return Oi(t,n),0},publicKeyNegate(t,e){const r=Yn(e);if(r===null)return 1;const n=r.getPublic();return n.y=n.y.redNeg(),Oi(t,n),0},publicKeyCombine(t,e){const r=new Array(e.length);for(let i=0;i<e.length;++i)if(r[i]=Yn(e[i]),r[i]===null)return 1;let n=r[0].getPublic();for(let i=1;i<r.length;++i)n=n.add(r[i].pub);return n.isInfinity()?2:(Oi(t,n),0)},publicKeyTweakAdd(t,e,r){const n=Yn(e);if(n===null)return 1;if(r=new ot(r),r.cmp(pe.n)>=0)return 2;const i=n.getPublic().add(pe.g.mul(r));return i.isInfinity()?2:(Oi(t,i),0)},publicKeyTweakMul(t,e,r){const n=Yn(e);if(n===null)return 1;if(r=new ot(r),r.cmp(pe.n)>=0||r.isZero())return 2;const i=n.getPublic().mul(r);return Oi(t,i),0},signatureNormalize(t){const e=new ot(t.subarray(0,32)),r=new ot(t.subarray(32,64));return e.cmp(pe.n)>=0||r.cmp(pe.n)>=0?1:(r.cmp(hn.nh)===1&&t.set(pe.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,e){const r=e.subarray(0,32),n=e.subarray(32,64);if(new ot(r).cmp(pe.n)>=0||new ot(n).cmp(pe.n)>=0)return 1;const{output:i}=t;let s=i.subarray(4,4+33);s[0]=0,s.set(r,1);let o=33,a=0;for(;o>1&&s[a]===0&&!(s[a+1]&128);--o,++a);if(s=s.subarray(a),s[0]&128||o>1&&s[0]===0&&!(s[1]&128))return 1;let c=i.subarray(6+33,6+33+33);c[0]=0,c.set(n,1);let f=33,l=0;for(;f>1&&c[l]===0&&!(c[l+1]&128);--f,++l);return c=c.subarray(l),c[0]&128||f>1&&c[0]===0&&!(c[1]&128)?1:(t.outputlen=6+o+f,i[0]=48,i[1]=t.outputlen-2,i[2]=2,i[3]=s.length,i.set(s,4),i[4+o]=2,i[5+o]=c.length,i.set(c,6+o),0)},signatureImport(t,e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return 1;const r=e[3];if(r===0||5+r>=e.length||e[4+r]!==2)return 1;const n=e[5+r];if(n===0||6+r+n!==e.length||e[4]&128||r>1&&e[4]===0&&!(e[5]&128)||e[r+6]&128||n>1&&e[r+6]===0&&!(e[r+7]&128))return 1;let i=e.subarray(4,4+r);if(i.length===33&&i[0]===0&&(i=i.subarray(1)),i.length>32)return 1;let s=e.subarray(6+r);if(s.length===33&&s[0]===0&&(s=s.slice(1)),s.length>32)throw new Error("S length is too long");let o=new ot(i);o.cmp(pe.n)>=0&&(o=new ot(0));let a=new ot(e.subarray(6+r));return a.cmp(pe.n)>=0&&(a=new ot(0)),t.set(o.toArrayLike(Uint8Array,"be",32),0),t.set(a.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,e,r,n,i){if(i){const a=i;i=c=>{const f=a(e,r,null,n,c);if(!(f instanceof Uint8Array&&f.length===32))throw new Error("This is the way");return new ot(f)}}const s=new ot(r);if(s.cmp(pe.n)>=0||s.isZero())return 1;let o;try{o=hn.sign(e,r,{canonical:!0,k:i,pers:n})}catch{return 1}return t.signature.set(o.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(o.s.toArrayLike(Uint8Array,"be",32),32),t.recid=o.recoveryParam,0},ecdsaVerify(t,e,r){const n={r:t.subarray(0,32),s:t.subarray(32,64)},i=new ot(n.r),s=new ot(n.s);if(i.cmp(pe.n)>=0||s.cmp(pe.n)>=0)return 1;if(s.cmp(hn.nh)===1||i.isZero()||s.isZero())return 3;const o=Yn(r);if(o===null)return 2;const a=o.getPublic();return hn.verify(e,n,a)?0:3},ecdsaRecover(t,e,r,n){const i={r:e.slice(0,32),s:e.slice(32,64)},s=new ot(i.r),o=new ot(i.s);if(s.cmp(pe.n)>=0||o.cmp(pe.n)>=0)return 1;if(s.isZero()||o.isZero())return 2;let a;try{a=hn.recoverPubKey(n,i,r)}catch{return 2}return Oi(t,a),0},ecdh(t,e,r,n,i,s,o){const a=Yn(e);if(a===null)return 1;const c=new ot(r);if(c.cmp(pe.n)>=0||c.isZero())return 2;const f=a.getPublic().mul(c);if(i===void 0){const l=f.encode(null,!0),h=hn.hash().update(l).digest();for(let m=0;m<32;++m)t[m]=h[m]}else{s||(s=new Uint8Array(32));const l=f.getX().toArray("be",32);for(let T=0;T<32;++T)s[T]=l[T];o||(o=new Uint8Array(32));const h=f.getY().toArray("be",32);for(let T=0;T<32;++T)o[T]=h[T];const m=i(s,o,n);if(!(m instanceof Uint8Array&&m.length===t.length))return 2;t.set(m)}return 0}},hg=Tv(Cv),pg=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};const Nv=pg(Q0.exports),ei=z,Mv=pg(vb);function gg(t){return t=Bv(t),Mv.default("keccak256").update(t).digest()}function Bv(t){if(!ei.Buffer.isBuffer(t))if(Array.isArray(t))t=ei.Buffer.from(t);else if(typeof t=="string")Rv(t)?t=ei.Buffer.from(yg(Ov(t)),"hex"):t=ei.Buffer.from(t);else if(typeof t=="number")t=Fv(t);else if(t==null)t=ei.Buffer.allocUnsafe(0);else if(Nv.default.isBN(t))t=t.toArrayLike(ei.Buffer);else if(t.toArray)t=ei.Buffer.from(t.toArray());else throw new Error("invalid type");return t}function Rv(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}function yg(t){if(typeof t!="string")throw new Error(`while padding to even, value must be string, is currently ${typeof t}, while padToEven.`);return t.length%2&&(t=`0${t}`),t}function Ov(t){return typeof t!="string"?t:Dv(t)?t.slice(2):t}function Dv(t){if(typeof t!="string")throw new Error("value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"}function Fv(t){const e=Lv(t);return ei.Buffer.from(yg(e.slice(2)),"hex")}function Lv(t){return`0x${t.toString(16)}`}typeof window<"u"&&(window.keccak256=gg);var mg=gg,Sl=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Al,"__esModule",{value:!0});const Uv=Sl(nn.exports),fh=Sl(hg),uo=es,lh=Sl(mg);class Kv{constructor(e,r){this._key=e,this.ownerLength=uo.SIG_CONFIG[uo.SignatureConfig.ETHEREUM].pubLength,this.signatureLength=uo.SIG_CONFIG[uo.SignatureConfig.ETHEREUM].sigLength,this.signatureType=uo.SignatureConfig.ETHEREUM,this.pk=r.toString("hex")}get publicKey(){return z.Buffer.alloc(0)}get key(){return z.Buffer.from(this._key,"hex")}static async verify(e,r,n){let i=e;typeof e=="string"&&(i=Uv.default.toBuffer(e));let s=!1;try{s=fh.default.ecdsaVerify(n,lh.default(z.Buffer.from(r)),i)}catch{}return s}sign(e){return fh.default.ecdsaSign(lh.default(z.Buffer.from(e)),z.Buffer.from(this.key)).signature}}Al.default=Kv;const jv="logger/5.7.0";let dh=!1,hh=!1;const Ga={debug:1,default:2,info:2,warning:3,error:4,off:5};let ph=Ga.default,ku=null;function $v(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const gh=$v();var yf;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(yf||(yf={}));var dr;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(dr||(dr={}));const yh="0123456789abcdef";class M{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();Ga[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(ph>Ga[n])&&console.log.apply(console,r)}debug(...e){this._log(M.levels.DEBUG,e)}info(...e){this._log(M.levels.INFO,e)}warn(...e){this._log(M.levels.WARNING,e)}makeError(e,r,n){if(hh)return this.makeError("censored error",r,{});r||(r=M.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(c=>{const f=n[c];try{if(f instanceof Uint8Array){let l="";for(let h=0;h<f.length;h++)l+=yh[f[h]>>4],l+=yh[f[h]&15];i.push(c+"=Uint8Array(0x"+l+")")}else i.push(c+"="+JSON.stringify(f))}catch{i.push(c+"="+JSON.stringify(n[c].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);const s=e;let o="";switch(r){case dr.NUMERIC_FAULT:{o="NUMERIC_FAULT";const c=e;switch(c){case"overflow":case"underflow":case"division-by-zero":o+="-"+c;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case dr.CALL_EXCEPTION:case dr.INSUFFICIENT_FUNDS:case dr.MISSING_NEW:case dr.NONCE_EXPIRED:case dr.REPLACEMENT_UNDERPRICED:case dr.TRANSACTION_REPLACED:case dr.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=r,Object.keys(n).forEach(function(c){a[c]=n[c]}),a}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,M.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){gh&&this.throwError("platform missing String.prototype.normalize",M.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:gh})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,M.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,M.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,M.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,M.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",M.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",M.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",M.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return ku||(ku=new M(jv)),ku}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",M.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),dh){if(!e)return;this.globalLogger().throwError("error censorship permanent",M.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}hh=!!e,dh=!!r}static setLogLevel(e){const r=Ga[e.toLowerCase()];if(r==null){M.globalLogger().warn("invalid log level - "+e);return}ph=r}static from(e){return new M(e)}}M.errors=dr;M.levels=yf;const Hv="bytes/5.7.0",gt=new M(Hv);function bg(t){return!!t.toHexString}function Ms(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return Ms(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function aa(t){return ce(t)&&!(t.length%2)||vi(t)}function mh(t){return typeof t=="number"&&t==t&&t%1===0}function vi(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!mh(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!mh(r)||r<0||r>=256)return!1}return!0}function Y(t,e){if(e||(e={}),typeof t=="number"){gt.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),Ms(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),bg(t)&&(t=t.toHexString()),ce(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":gt.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return Ms(new Uint8Array(n))}return vi(t)?Ms(new Uint8Array(t)):gt.throwArgumentError("invalid arrayify value","value",t)}function at(t){const e=t.map(i=>Y(i)),r=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(r);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),Ms(n)}function vn(t){let e=Y(t);if(e.length===0)return e;let r=0;for(;r<e.length&&e[r]===0;)r++;return r&&(e=e.slice(r)),e}function Po(t,e){t=Y(t),t.length>e&&gt.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),Ms(r)}function ce(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const Pu="0123456789abcdef";function X(t,e){if(e||(e={}),typeof t=="number"){gt.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=Pu[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),bg(t))return t.toHexString();if(ce(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":gt.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(vi(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=Pu[(i&240)>>4]+Pu[i&15]}return r}return gt.throwArgumentError("invalid hexlify value","value",t)}function Sn(t){if(typeof t!="string")t=X(t);else if(!ce(t)||t.length%2)return null;return(t.length-2)/2}function _t(t,e,r){return typeof t!="string"?t=X(t):(!ce(t)||t.length%2)&&gt.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function Yt(t){let e="0x";return t.forEach(r=>{e+=X(r).substring(2)}),e}function ca(t){const e=xg(X(t,{hexPad:"left"}));return e==="0x"?"0x0":e}function xg(t){typeof t!="string"&&(t=X(t)),ce(t)||gt.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&t[e]==="0";)e++;return"0x"+t.substring(e)}function ct(t,e){for(typeof t!="string"?t=X(t):ce(t)||gt.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&gt.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function ts(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(aa(t)){let r=Y(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=X(r.slice(0,32)),e.s=X(r.slice(32,64))):r.length===65?(e.r=X(r.slice(0,32)),e.s=X(r.slice(32,64)),e.v=r[64]):gt.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:gt.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=X(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const i=Po(Y(e._vs),32);e._vs=X(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&gt.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const o=X(i);e.s==null?e.s=o:e.s!==o&&gt.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?gt.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&gt.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!ce(e.r)?gt.throwArgumentError("signature missing or invalid r","signature",t):e.r=ct(e.r,32),e.s==null||!ce(e.s)?gt.throwArgumentError("signature missing or invalid s","signature",t):e.s=ct(e.s,32);const r=Y(e.s);r[0]>=128&&gt.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=X(r);e._vs&&(ce(e._vs)||gt.throwArgumentError("signature invalid _vs","signature",t),e._vs=ct(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&gt.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function mf(t){return t=ts(t),X(at([t.r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}const vg="bignumber/5.7.0";var Uo=ae.BN;const Rn=new M(vg),Iu={},bh=9007199254740991;function qv(t){return t!=null&&(W.isBigNumber(t)||typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||ce(t)||typeof t=="bigint"||vi(t))}let xh=!1;class W{constructor(e,r){e!==Iu&&Rn.throwError("cannot call constructor directly; use BigNumber.from",M.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return tr(he(this).fromTwos(e))}toTwos(e){return tr(he(this).toTwos(e))}abs(){return this._hex[0]==="-"?W.from(this._hex.substring(1)):this}add(e){return tr(he(this).add(he(e)))}sub(e){return tr(he(this).sub(he(e)))}div(e){return W.from(e).isZero()&&Ar("division-by-zero","div"),tr(he(this).div(he(e)))}mul(e){return tr(he(this).mul(he(e)))}mod(e){const r=he(e);return r.isNeg()&&Ar("division-by-zero","mod"),tr(he(this).umod(r))}pow(e){const r=he(e);return r.isNeg()&&Ar("negative-power","pow"),tr(he(this).pow(r))}and(e){const r=he(e);return(this.isNegative()||r.isNeg())&&Ar("unbound-bitwise-result","and"),tr(he(this).and(r))}or(e){const r=he(e);return(this.isNegative()||r.isNeg())&&Ar("unbound-bitwise-result","or"),tr(he(this).or(r))}xor(e){const r=he(e);return(this.isNegative()||r.isNeg())&&Ar("unbound-bitwise-result","xor"),tr(he(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&Ar("negative-width","mask"),tr(he(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Ar("negative-width","shl"),tr(he(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Ar("negative-width","shr"),tr(he(this).shrn(e))}eq(e){return he(this).eq(he(e))}lt(e){return he(this).lt(he(e))}lte(e){return he(this).lte(he(e))}gt(e){return he(this).gt(he(e))}gte(e){return he(this).gte(he(e))}isNegative(){return this._hex[0]==="-"}isZero(){return he(this).isZero()}toNumber(){try{return he(this).toNumber()}catch{Ar("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Rn.throwError("this platform does not support BigInt",M.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?xh||(xh=!0,Rn.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Rn.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",M.errors.UNEXPECTED_ARGUMENT,{}):Rn.throwError("BigNumber.toString does not accept parameters",M.errors.UNEXPECTED_ARGUMENT,{})),he(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof W)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new W(Iu,Ko(e)):e.match(/^-?[0-9]+$/)?new W(Iu,Ko(new Uo(e))):Rn.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Ar("underflow","BigNumber.from",e),(e>=bh||e<=-bh)&&Ar("overflow","BigNumber.from",e),W.from(String(e));const r=e;if(typeof r=="bigint")return W.from(r.toString());if(vi(r))return W.from(X(r));if(r)if(r.toHexString){const n=r.toHexString();if(typeof n=="string")return W.from(n)}else{let n=r._hex;if(n==null&&r.type==="BigNumber"&&(n=r.hex),typeof n=="string"&&(ce(n)||n[0]==="-"&&ce(n.substring(1))))return W.from(n)}return Rn.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function Ko(t){if(typeof t!="string")return Ko(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&Rn.throwArgumentError("invalid hex","value",t),t=Ko(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function tr(t){return W.from(Ko(t))}function he(t){const e=W.from(t).toHexString();return e[0]==="-"?new Uo("-"+e.substring(3),16):new Uo(e.substring(2),16)}function Ar(t,e,r){const n={fault:t,operation:e};return r!=null&&(n.value=r),Rn.throwError(t,M.errors.NUMERIC_FAULT,n)}function zv(t){return new Uo(t,36).toString(16)}function Gv(t){return new Uo(t,16).toString(36)}const Qt=new M(vg),Io={},wg=W.from(0),_g=W.from(-1);function Eg(t,e,r,n){const i={fault:e,operation:r};return n!==void 0&&(i.value=n),Qt.throwError(t,M.errors.NUMERIC_FAULT,i)}let Co="0";for(;Co.length<256;)Co+=Co;function Tl(t){if(typeof t!="number")try{t=W.from(t).toNumber()}catch{}return typeof t=="number"&&t>=0&&t<=256&&!(t%1)?"1"+Co.substring(0,t):Qt.throwArgumentError("invalid decimal size","decimals",t)}function Va(t,e){e==null&&(e=0);const r=Tl(e);t=W.from(t);const n=t.lt(wg);n&&(t=t.mul(_g));let i=t.mod(r).toString();for(;i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=t.div(r).toString();return r.length===1?t=s:t=s+"."+i,n&&(t="-"+t),t}function dn(t,e){e==null&&(e=0);const r=Tl(e);(typeof t!="string"||!t.match(/^-?[0-9.]+$/))&&Qt.throwArgumentError("invalid decimal value","value",t);const n=t.substring(0,1)==="-";n&&(t=t.substring(1)),t==="."&&Qt.throwArgumentError("missing value","value",t);const i=t.split(".");i.length>2&&Qt.throwArgumentError("too many decimal points","value",t);let s=i[0],o=i[1];for(s||(s="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>r.length-1&&Eg("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<r.length-1;)o+="0";const a=W.from(s),c=W.from(o);let f=a.mul(r).add(c);return n&&(f=f.mul(_g)),f}class Bs{constructor(e,r,n,i){e!==Io&&Qt.throwError("cannot use FixedFormat constructor; use FixedFormat.from",M.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=n,this.decimals=i,this.name=(r?"":"u")+"fixed"+String(n)+"x"+String(i),this._multiplier=Tl(i),Object.freeze(this)}static from(e){if(e instanceof Bs)return e;typeof e=="number"&&(e=`fixed128x${e}`);let r=!0,n=128,i=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")r=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||Qt.throwArgumentError("invalid fixed format","format",e),r=s[1]!=="u",n=parseInt(s[2]),i=parseInt(s[3])}}else if(e){const s=(o,a,c)=>e[o]==null?c:(typeof e[o]!==a&&Qt.throwArgumentError("invalid fixed format ("+o+" not "+a+")","format."+o,e[o]),e[o]);r=s("signed","boolean",r),n=s("width","number",n),i=s("decimals","number",i)}return n%8&&Qt.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),i>80&&Qt.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new Bs(Io,r,n,i)}}class Nt{constructor(e,r,n,i){e!==Io&&Qt.throwError("cannot use FixedNumber constructor; use FixedNumber.from",M.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=r,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&Qt.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const r=dn(this._value,this.format.decimals),n=dn(e._value,e.format.decimals);return Nt.fromValue(r.add(n),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const r=dn(this._value,this.format.decimals),n=dn(e._value,e.format.decimals);return Nt.fromValue(r.sub(n),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const r=dn(this._value,this.format.decimals),n=dn(e._value,e.format.decimals);return Nt.fromValue(r.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const r=dn(this._value,this.format.decimals),n=dn(e._value,e.format.decimals);return Nt.fromValue(r.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=Nt.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(r=r.subUnsafe(vh.toFormat(r.format))),r}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=Nt.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(r=r.addUnsafe(vh.toFormat(r.format))),r}round(e){e==null&&(e=0);const r=this.toString().split(".");if(r.length===1&&r.push("0"),(e<0||e>80||e%1)&&Qt.throwArgumentError("invalid decimal count","decimals",e),r[1].length<=e)return this;const n=Nt.from("1"+Co.substring(0,e),this.format),i=Vv.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(i).floor().divUnsafe(n)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&Qt.throwArgumentError("invalid byte width","width",e);const r=W.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return ct(r,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Nt.fromString(this._value,e)}static fromValue(e,r,n){return n==null&&r!=null&&!qv(r)&&(n=r,r=null),r==null&&(r=0),n==null&&(n="fixed"),Nt.fromString(Va(e,r),Bs.from(n))}static fromString(e,r){r==null&&(r="fixed");const n=Bs.from(r),i=dn(e,n.decimals);!n.signed&&i.lt(wg)&&Eg("unsigned value cannot be negative","overflow","value",e);let s=null;n.signed?s=i.toTwos(n.width).toHexString():(s=i.toHexString(),s=ct(s,n.width/8));const o=Va(i,n.decimals);return new Nt(Io,s,o,n)}static fromBytes(e,r){r==null&&(r="fixed");const n=Bs.from(r);if(Y(e).length>n.width/8)throw new Error("overflow");let i=W.from(e);n.signed&&(i=i.fromTwos(n.width));const s=i.toTwos((n.signed?0:1)+n.width).toHexString(),o=Va(i,n.decimals);return new Nt(Io,s,o,n)}static from(e,r){if(typeof e=="string")return Nt.fromString(e,r);if(vi(e))return Nt.fromBytes(e,r);try{return Nt.fromValue(e,0,r)}catch(n){if(n.code!==M.errors.INVALID_ARGUMENT)throw n}return Qt.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const vh=Nt.from(1),Vv=Nt.from("0.5"),Jv="properties/5.7.0";var Wv=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{f(n.next(l))}catch(h){o(h)}}function c(l){try{f(n.throw(l))}catch(h){o(h)}}function f(l){l.done?s(l.value):i(l.value).then(a,c)}f((n=n.apply(t,e||[])).next())})};const ac=new M(Jv);function j(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function Kt(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function yt(t){return Wv(this,void 0,void 0,function*(){const e=Object.keys(t).map(n=>{const i=t[n];return Promise.resolve(i).then(s=>({key:n,value:s}))});return(yield Promise.all(e)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function kl(t,e){(!t||typeof t!="object")&&ac.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(r=>{e[r]||ac.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)})}function ut(t){const e={};for(const r in t)e[r]=t[r];return e}const Yv={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Ag(t){if(t==null||Yv[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch{continue}if(!Ag(n))return!1}return!0}return ac.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function Qv(t){if(Ag(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>Xt(e)));if(typeof t=="object"){const e={};for(const r in t){const n=t[r];n!==void 0&&j(e,r,Xt(n))}return e}return ac.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function Xt(t){return Qv(t)}class rs{constructor(e){for(const r in e)this[r]=Xt(e[r])}}const ua="abi/5.7.0",ge=new M(ua),zi={};let wh={calldata:!0,memory:!0,storage:!0},Xv={calldata:!0,memory:!0};function ka(t,e){if(t==="bytes"||t==="string"){if(wh[e])return!0}else if(t==="address"){if(e==="payable")return!0}else if((t.indexOf("[")>=0||t==="tuple")&&Xv[e])return!0;return(wh[e]||e==="payable")&&ge.throwArgumentError("invalid modifier","name",e),!1}function Zv(t,e){let r=t;function n(a){ge.throwArgumentError(`unexpected character at position ${a}`,"param",t)}t=t.replace(/\s/g," ");function i(a){let c={type:"",name:"",parent:a,state:{allowType:!0}};return e&&(c.indexed=!1),c}let s={type:"",name:"",state:{allowType:!0}},o=s;for(let a=0;a<t.length;a++){let c=t[a];switch(c){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||n(a),o.state.allowType=!1,o.type=Es(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||n(a),o.indexed=!0,o.name=""),ka(o.type,o.name)&&(o.name=""),o.type=Es(o.type);let f=o;o=o.parent,o||n(a),delete f.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||n(a),o.indexed=!0,o.name=""),ka(o.type,o.name)&&(o.name=""),o.type=Es(o.type);let l=i(o.parent);o.parent.components.push(l),delete o.parent,o=l;break;case" ":o.state.allowType&&o.type!==""&&(o.type=Es(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||n(a),o.indexed&&n(a),o.indexed=!0,o.name=""):ka(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||n(a),o.type+=c,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||n(a),o.type+=c,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=c,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=c,delete o.state.allowArray):o.state.readArray?o.type+=c:n(a)}}return o.parent&&ge.throwArgumentError("unexpected eof","param",t),delete s.state,o.name==="indexed"?(e||n(r.length-7),o.indexed&&n(r.length-7),o.indexed=!0,o.name=""):ka(o.type,o.name)&&(o.name=""),s.type=Es(s.type),s}function Ja(t,e){for(let r in e)j(t,r,e[r])}const be=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),ew=new RegExp(/^(.*)\[([0-9]*)\]$/);class Mt{constructor(e,r){e!==zi&&ge.throwError("use fromString",M.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Ja(this,r);let n=this.type.match(ew);n?Ja(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:Mt.fromObject({type:n[1],components:this.components}),baseType:"array"}):Ja(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=be.sighash),be[e]||ge.throwArgumentError("invalid format type","format",e),e===be.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(n)}let r="";return this.baseType==="array"?(r+=this.arrayChildren.format(e),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==be.sighash&&(r+=this.type),r+="("+this.components.map(n=>n.format(e)).join(e===be.full?", ":",")+")"):r+=this.type,e!==be.sighash&&(this.indexed===!0&&(r+=" indexed"),e===be.full&&this.name&&(r+=" "+this.name)),r}static from(e,r){return typeof e=="string"?Mt.fromString(e,r):Mt.fromObject(e)}static fromObject(e){return Mt.isParamType(e)?e:new Mt(zi,{name:e.name||null,type:Es(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(Mt.fromObject):null})}static fromString(e,r){function n(i){return Mt.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return n(Zv(e,!!r))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function jo(t,e){return rw(t).map(r=>Mt.fromString(r,e))}class mn{constructor(e,r){e!==zi&&ge.throwError("use a static from method",M.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),Ja(this,r),this._isFragment=!0,Object.freeze(this)}static from(e){return mn.isFragment(e)?e:typeof e=="string"?mn.fromString(e):mn.fromObject(e)}static fromObject(e){if(mn.isFragment(e))return e;switch(e.type){case"function":return Xr.fromObject(e);case"event":return yn.fromObject(e);case"constructor":return Qr.fromObject(e);case"error":return Fn.fromObject(e);case"fallback":case"receive":return null}return ge.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?yn.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?Xr.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?Qr.fromString(e.trim()):e.split(" ")[0]==="error"?Fn.fromString(e.substring(5).trim()):ge.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class yn extends mn{format(e){if(e||(e=be.sighash),be[e]||ge.throwArgumentError("invalid format type","format",e),e===be.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==be.sighash&&(r+="event "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===be.full?", ":",")+") ",e!==be.sighash&&this.anonymous&&(r+="anonymous "),r.trim()}static from(e){return typeof e=="string"?yn.fromString(e):yn.fromObject(e)}static fromObject(e){if(yn.isEventFragment(e))return e;e.type!=="event"&&ge.throwArgumentError("invalid event object","value",e);const r={name:$o(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Mt.fromObject):[],type:"event"};return new yn(zi,r)}static fromString(e){let r=e.match(Ho);r||ge.throwArgumentError("invalid event string","value",e);let n=!1;return r[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":n=!0;break;case"":break;default:ge.warn("unknown modifier: "+i)}}),yn.fromObject({name:r[1].trim(),anonymous:n,inputs:jo(r[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function Sg(t,e){e.gas=null;let r=t.split("@");return r.length!==1?(r.length>2&&ge.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||ge.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=W.from(r[1]),r[0]):t}function Tg(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach(r=>{switch(r.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+r)}})}function kg(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return t.stateMutability!=null?(e.stateMutability=t.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",t.constant!=null&&!!t.constant!==e.constant&&ge.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable=e.stateMutability==="payable",t.payable!=null&&!!t.payable!==e.payable&&ge.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):t.payable!=null?(e.payable=!!t.payable,t.constant==null&&!e.payable&&t.type!=="constructor"&&ge.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&ge.throwArgumentError("cannot have constant payable function","value",t)):t.constant!=null?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):t.type!=="constructor"&&ge.throwArgumentError("unable to determine stateMutability","value",t),e}class Qr extends mn{format(e){if(e||(e=be.sighash),be[e]||ge.throwArgumentError("invalid format type","format",e),e===be.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});e===be.sighash&&ge.throwError("cannot format a constructor for sighash",M.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let r="constructor("+this.inputs.map(n=>n.format(e)).join(e===be.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "),r.trim()}static from(e){return typeof e=="string"?Qr.fromString(e):Qr.fromObject(e)}static fromObject(e){if(Qr.isConstructorFragment(e))return e;e.type!=="constructor"&&ge.throwArgumentError("invalid constructor object","value",e);let r=kg(e);r.constant&&ge.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Mt.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?W.from(e.gas):null};return new Qr(zi,n)}static fromString(e){let r={type:"constructor"};e=Sg(e,r);let n=e.match(Ho);return(!n||n[1].trim()!=="constructor")&&ge.throwArgumentError("invalid constructor string","value",e),r.inputs=jo(n[2].trim(),!1),Tg(n[3].trim(),r),Qr.fromObject(r)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class Xr extends Qr{format(e){if(e||(e=be.sighash),be[e]||ge.throwArgumentError("invalid format type","format",e),e===be.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==be.sighash&&(r+="function "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===be.full?", ":",")+") ",e!==be.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "):this.constant&&(r+="view "),this.outputs&&this.outputs.length&&(r+="returns ("+this.outputs.map(n=>n.format(e)).join(", ")+") "),this.gas!=null&&(r+="@"+this.gas.toString()+" ")),r.trim()}static from(e){return typeof e=="string"?Xr.fromString(e):Xr.fromObject(e)}static fromObject(e){if(Xr.isFunctionFragment(e))return e;e.type!=="function"&&ge.throwArgumentError("invalid function object","value",e);let r=kg(e);const n={type:e.type,name:$o(e.name),constant:r.constant,inputs:e.inputs?e.inputs.map(Mt.fromObject):[],outputs:e.outputs?e.outputs.map(Mt.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?W.from(e.gas):null};return new Xr(zi,n)}static fromString(e){let r={type:"function"};e=Sg(e,r);let n=e.split(" returns ");n.length>2&&ge.throwArgumentError("invalid function string","value",e);let i=n[0].match(Ho);if(i||ge.throwArgumentError("invalid function signature","value",e),r.name=i[1].trim(),r.name&&$o(r.name),r.inputs=jo(i[2],!1),Tg(i[3].trim(),r),n.length>1){let s=n[1].match(Ho);(s[1].trim()!=""||s[3].trim()!="")&&ge.throwArgumentError("unexpected tokens","value",e),r.outputs=jo(s[2],!1)}else r.outputs=[];return Xr.fromObject(r)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function _h(t){const e=t.format();return(e==="Error(string)"||e==="Panic(uint256)")&&ge.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class Fn extends mn{format(e){if(e||(e=be.sighash),be[e]||ge.throwArgumentError("invalid format type","format",e),e===be.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==be.sighash&&(r+="error "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===be.full?", ":",")+") ",r.trim()}static from(e){return typeof e=="string"?Fn.fromString(e):Fn.fromObject(e)}static fromObject(e){if(Fn.isErrorFragment(e))return e;e.type!=="error"&&ge.throwArgumentError("invalid error object","value",e);const r={type:e.type,name:$o(e.name),inputs:e.inputs?e.inputs.map(Mt.fromObject):[]};return _h(new Fn(zi,r))}static fromString(e){let r={type:"error"},n=e.match(Ho);return n||ge.throwArgumentError("invalid error signature","value",e),r.name=n[1].trim(),r.name&&$o(r.name),r.inputs=jo(n[2],!1),_h(Fn.fromObject(r))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function Es(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const tw=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function $o(t){return(!t||!t.match(tw))&&ge.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const Ho=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function rw(t){t=t.trim();let e=[],r="",n=0;for(let i=0;i<t.length;i++){let s=t[i];s===","&&n===0?(e.push(r),r=""):(r+=s,s==="("?n++:s===")"&&(n--,n===-1&&ge.throwArgumentError("unbalanced parenthesis","value",t)))}return r&&e.push(r),e}const Pl=new M(ua);function Pg(t){const e=[],r=function(n,i){if(!!Array.isArray(i))for(let s in i){const o=n.slice();o.push(s);try{r(o,i[s])}catch(a){e.push({path:o,error:a})}}};return r([],t),e}class zn{constructor(e,r,n,i){this.name=e,this.type=r,this.localName=n,this.dynamic=i}_throwError(e,r){Pl.throwArgumentError(e,this.localName,r)}}class bf{constructor(e){j(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Yt(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(at(e._data))}writeBytes(e){let r=Y(e);const n=r.length%this.wordSize;return n&&(r=at([r,this._padding.slice(n)])),this._writeData(r)}_getValue(e){let r=Y(W.from(e));return r.length>this.wordSize&&Pl.throwError("value out-of-bounds",M.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:r.length}),r.length%this.wordSize&&(r=at([this._padding.slice(r.length%this.wordSize),r])),r}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,r=>{this._data[e]=this._getValue(r)}}}class cc{constructor(e,r,n,i){j(this,"_data",Y(e)),j(this,"wordSize",r||32),j(this,"_coerceFunc",n),j(this,"allowLoose",i),this._offset=0}get data(){return X(this._data)}get consumed(){return this._offset}static coerce(e,r){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(r=r.toNumber()),r}coerce(e,r){return this._coerceFunc?this._coerceFunc(e,r):cc.coerce(e,r)}_peekBytes(e,r,n){let i=Math.ceil(r/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&n&&this._offset+r<=this._data.length?i=r:Pl.throwError("data out-of-bounds",M.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new cc(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,r){let n=this._peekBytes(0,e,!!r);return this._offset+=n.length,n.slice(0,e)}readValue(){return W.from(this.readBytes(this.wordSize))}}var Ig={exports:{}};(function(t){(function(){var e="input is invalid type",r="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof ft=="object"&&ft.versions&&ft.versions.node;o?i=F:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,c=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",f="0123456789abcdef".split(""),l=[31,7936,2031616,520093696],h=[4,1024,262144,67108864],m=[1,256,65536,16777216],v=[6,1536,393216,100663296],T=[0,8,16,24],x=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],b=[224,256,384,512],_=[128,256],k=["hex","buffer","arrayBuffer","array","digest"],N={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(p){return Object.prototype.toString.call(p)==="[object Array]"}),c&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(p){return typeof p=="object"&&p.buffer&&p.buffer.constructor===ArrayBuffer});for(var D=function(p,R,U){return function(K){return new d(p,R,p).update(K)[U]()}},C=function(p,R,U){return function(K,H){return new d(p,R,H).update(K)[U]()}},L=function(p,R,U){return function(K,H,Z,Q){return u["cshake"+p].update(K,H,Z,Q)[U]()}},$=function(p,R,U){return function(K,H,Z,Q){return u["kmac"+p].update(K,H,Z,Q)[U]()}},q=function(p,R,U,K){for(var H=0;H<k.length;++H){var Z=k[H];p[Z]=R(U,K,Z)}return p},J=function(p,R){var U=D(p,R,"hex");return U.create=function(){return new d(p,R,p)},U.update=function(K){return U.create().update(K)},q(U,D,p,R)},re=function(p,R){var U=C(p,R,"hex");return U.create=function(K){return new d(p,R,K)},U.update=function(K,H){return U.create(H).update(K)},q(U,C,p,R)},te=function(p,R){var U=N[p],K=L(p,R,"hex");return K.create=function(H,Z,Q){return!Z&&!Q?u["shake"+p].create(H):new d(p,R,H).bytepad([Z,Q],U)},K.update=function(H,Z,Q,ee){return K.create(Z,Q,ee).update(H)},q(K,L,p,R)},V=function(p,R){var U=N[p],K=$(p,R,"hex");return K.create=function(H,Z,Q){return new A(p,R,Z).bytepad(["KMAC",Q],U).bytepad([H],U)},K.update=function(H,Z,Q,ee){return K.create(H,Q,ee).update(Z)},q(K,$,p,R)},E=[{name:"keccak",padding:m,bits:b,createMethod:J},{name:"sha3",padding:v,bits:b,createMethod:J},{name:"shake",padding:l,bits:_,createMethod:re},{name:"cshake",padding:h,bits:_,createMethod:te},{name:"kmac",padding:h,bits:_,createMethod:V}],u={},g=[],w=0;w<E.length;++w)for(var S=E[w],P=S.bits,I=0;I<P.length;++I){var B=S.name+"_"+P[I];if(g.push(B),u[B]=S.createMethod(P[I],S.padding),S.name!=="sha3"){var y=S.name+P[I];g.push(y),u[y]=u[B]}}function d(p,R,U){this.blocks=[],this.s=[],this.padding=R,this.outputBits=U,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(p<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=U>>5,this.extraBytes=(U&31)>>3;for(var K=0;K<50;++K)this.s[K]=0}d.prototype.update=function(p){if(this.finalized)throw new Error(r);var R,U=typeof p;if(U!=="string"){if(U==="object"){if(p===null)throw new Error(e);if(c&&p.constructor===ArrayBuffer)p=new Uint8Array(p);else if(!Array.isArray(p)&&(!c||!ArrayBuffer.isView(p)))throw new Error(e)}else throw new Error(e);R=!0}for(var K=this.blocks,H=this.byteCount,Z=p.length,Q=this.blockCount,ee=0,ye=this.s,ne,se;ee<Z;){if(this.reset)for(this.reset=!1,K[0]=this.block,ne=1;ne<Q+1;++ne)K[ne]=0;if(R)for(ne=this.start;ee<Z&&ne<H;++ee)K[ne>>2]|=p[ee]<<T[ne++&3];else for(ne=this.start;ee<Z&&ne<H;++ee)se=p.charCodeAt(ee),se<128?K[ne>>2]|=se<<T[ne++&3]:se<2048?(K[ne>>2]|=(192|se>>6)<<T[ne++&3],K[ne>>2]|=(128|se&63)<<T[ne++&3]):se<55296||se>=57344?(K[ne>>2]|=(224|se>>12)<<T[ne++&3],K[ne>>2]|=(128|se>>6&63)<<T[ne++&3],K[ne>>2]|=(128|se&63)<<T[ne++&3]):(se=65536+((se&1023)<<10|p.charCodeAt(++ee)&1023),K[ne>>2]|=(240|se>>18)<<T[ne++&3],K[ne>>2]|=(128|se>>12&63)<<T[ne++&3],K[ne>>2]|=(128|se>>6&63)<<T[ne++&3],K[ne>>2]|=(128|se&63)<<T[ne++&3]);if(this.lastByteIndex=ne,ne>=H){for(this.start=ne-H,this.block=K[Q],ne=0;ne<Q;++ne)ye[ne]^=K[ne];O(ye),this.reset=!0}else this.start=ne}return this},d.prototype.encode=function(p,R){var U=p&255,K=1,H=[U];for(p=p>>8,U=p&255;U>0;)H.unshift(U),p=p>>8,U=p&255,++K;return R?H.push(K):H.unshift(K),this.update(H),H.length},d.prototype.encodeString=function(p){var R,U=typeof p;if(U!=="string"){if(U==="object"){if(p===null)throw new Error(e);if(c&&p.constructor===ArrayBuffer)p=new Uint8Array(p);else if(!Array.isArray(p)&&(!c||!ArrayBuffer.isView(p)))throw new Error(e)}else throw new Error(e);R=!0}var K=0,H=p.length;if(R)K=H;else for(var Z=0;Z<p.length;++Z){var Q=p.charCodeAt(Z);Q<128?K+=1:Q<2048?K+=2:Q<55296||Q>=57344?K+=3:(Q=65536+((Q&1023)<<10|p.charCodeAt(++Z)&1023),K+=4)}return K+=this.encode(K*8),this.update(p),K},d.prototype.bytepad=function(p,R){for(var U=this.encode(R),K=0;K<p.length;++K)U+=this.encodeString(p[K]);var H=R-U%R,Z=[];return Z.length=H,this.update(Z),this},d.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var p=this.blocks,R=this.lastByteIndex,U=this.blockCount,K=this.s;if(p[R>>2]|=this.padding[R&3],this.lastByteIndex===this.byteCount)for(p[0]=p[U],R=1;R<U+1;++R)p[R]=0;for(p[U-1]|=2147483648,R=0;R<U;++R)K[R]^=p[R];O(K)}},d.prototype.toString=d.prototype.hex=function(){this.finalize();for(var p=this.blockCount,R=this.s,U=this.outputBlocks,K=this.extraBytes,H=0,Z=0,Q="",ee;Z<U;){for(H=0;H<p&&Z<U;++H,++Z)ee=R[H],Q+=f[ee>>4&15]+f[ee&15]+f[ee>>12&15]+f[ee>>8&15]+f[ee>>20&15]+f[ee>>16&15]+f[ee>>28&15]+f[ee>>24&15];Z%p===0&&(O(R),H=0)}return K&&(ee=R[H],Q+=f[ee>>4&15]+f[ee&15],K>1&&(Q+=f[ee>>12&15]+f[ee>>8&15]),K>2&&(Q+=f[ee>>20&15]+f[ee>>16&15])),Q},d.prototype.arrayBuffer=function(){this.finalize();var p=this.blockCount,R=this.s,U=this.outputBlocks,K=this.extraBytes,H=0,Z=0,Q=this.outputBits>>3,ee;K?ee=new ArrayBuffer(U+1<<2):ee=new ArrayBuffer(Q);for(var ye=new Uint32Array(ee);Z<U;){for(H=0;H<p&&Z<U;++H,++Z)ye[Z]=R[H];Z%p===0&&O(R)}return K&&(ye[H]=R[H],ee=ee.slice(0,Q)),ee},d.prototype.buffer=d.prototype.arrayBuffer,d.prototype.digest=d.prototype.array=function(){this.finalize();for(var p=this.blockCount,R=this.s,U=this.outputBlocks,K=this.extraBytes,H=0,Z=0,Q=[],ee,ye;Z<U;){for(H=0;H<p&&Z<U;++H,++Z)ee=Z<<2,ye=R[H],Q[ee]=ye&255,Q[ee+1]=ye>>8&255,Q[ee+2]=ye>>16&255,Q[ee+3]=ye>>24&255;Z%p===0&&O(R)}return K&&(ee=Z<<2,ye=R[H],Q[ee]=ye&255,K>1&&(Q[ee+1]=ye>>8&255),K>2&&(Q[ee+2]=ye>>16&255)),Q};function A(p,R,U){d.call(this,p,R,U)}A.prototype=new d,A.prototype.finalize=function(){return this.encode(this.outputBits,!0),d.prototype.finalize.call(this)};var O=function(p){var R,U,K,H,Z,Q,ee,ye,ne,se,Tt,Je,We,an,Ye,Qe,cn,Xe,Ze,un,et,tt,Or,_e,Ee,Dr,Ae,Se,Fr,Te,ke,Lr,Pe,Ie,Ur,Ce,Ne,Kr,Me,Be,jr,Re,Oe,$r,De,Fe,Hr,Le,Ue,qr,Ke,je,zr,$e,He,Gr,qe,ze,xr,vr,wr,_r,Er;for(K=0;K<48;K+=2)H=p[0]^p[10]^p[20]^p[30]^p[40],Z=p[1]^p[11]^p[21]^p[31]^p[41],Q=p[2]^p[12]^p[22]^p[32]^p[42],ee=p[3]^p[13]^p[23]^p[33]^p[43],ye=p[4]^p[14]^p[24]^p[34]^p[44],ne=p[5]^p[15]^p[25]^p[35]^p[45],se=p[6]^p[16]^p[26]^p[36]^p[46],Tt=p[7]^p[17]^p[27]^p[37]^p[47],Je=p[8]^p[18]^p[28]^p[38]^p[48],We=p[9]^p[19]^p[29]^p[39]^p[49],R=Je^(Q<<1|ee>>>31),U=We^(ee<<1|Q>>>31),p[0]^=R,p[1]^=U,p[10]^=R,p[11]^=U,p[20]^=R,p[21]^=U,p[30]^=R,p[31]^=U,p[40]^=R,p[41]^=U,R=H^(ye<<1|ne>>>31),U=Z^(ne<<1|ye>>>31),p[2]^=R,p[3]^=U,p[12]^=R,p[13]^=U,p[22]^=R,p[23]^=U,p[32]^=R,p[33]^=U,p[42]^=R,p[43]^=U,R=Q^(se<<1|Tt>>>31),U=ee^(Tt<<1|se>>>31),p[4]^=R,p[5]^=U,p[14]^=R,p[15]^=U,p[24]^=R,p[25]^=U,p[34]^=R,p[35]^=U,p[44]^=R,p[45]^=U,R=ye^(Je<<1|We>>>31),U=ne^(We<<1|Je>>>31),p[6]^=R,p[7]^=U,p[16]^=R,p[17]^=U,p[26]^=R,p[27]^=U,p[36]^=R,p[37]^=U,p[46]^=R,p[47]^=U,R=se^(H<<1|Z>>>31),U=Tt^(Z<<1|H>>>31),p[8]^=R,p[9]^=U,p[18]^=R,p[19]^=U,p[28]^=R,p[29]^=U,p[38]^=R,p[39]^=U,p[48]^=R,p[49]^=U,an=p[0],Ye=p[1],Fe=p[11]<<4|p[10]>>>28,Hr=p[10]<<4|p[11]>>>28,Se=p[20]<<3|p[21]>>>29,Fr=p[21]<<3|p[20]>>>29,vr=p[31]<<9|p[30]>>>23,wr=p[30]<<9|p[31]>>>23,Re=p[40]<<18|p[41]>>>14,Oe=p[41]<<18|p[40]>>>14,Ie=p[2]<<1|p[3]>>>31,Ur=p[3]<<1|p[2]>>>31,Qe=p[13]<<12|p[12]>>>20,cn=p[12]<<12|p[13]>>>20,Le=p[22]<<10|p[23]>>>22,Ue=p[23]<<10|p[22]>>>22,Te=p[33]<<13|p[32]>>>19,ke=p[32]<<13|p[33]>>>19,_r=p[42]<<2|p[43]>>>30,Er=p[43]<<2|p[42]>>>30,$e=p[5]<<30|p[4]>>>2,He=p[4]<<30|p[5]>>>2,Ce=p[14]<<6|p[15]>>>26,Ne=p[15]<<6|p[14]>>>26,Xe=p[25]<<11|p[24]>>>21,Ze=p[24]<<11|p[25]>>>21,qr=p[34]<<15|p[35]>>>17,Ke=p[35]<<15|p[34]>>>17,Lr=p[45]<<29|p[44]>>>3,Pe=p[44]<<29|p[45]>>>3,_e=p[6]<<28|p[7]>>>4,Ee=p[7]<<28|p[6]>>>4,Gr=p[17]<<23|p[16]>>>9,qe=p[16]<<23|p[17]>>>9,Kr=p[26]<<25|p[27]>>>7,Me=p[27]<<25|p[26]>>>7,un=p[36]<<21|p[37]>>>11,et=p[37]<<21|p[36]>>>11,je=p[47]<<24|p[46]>>>8,zr=p[46]<<24|p[47]>>>8,$r=p[8]<<27|p[9]>>>5,De=p[9]<<27|p[8]>>>5,Dr=p[18]<<20|p[19]>>>12,Ae=p[19]<<20|p[18]>>>12,ze=p[29]<<7|p[28]>>>25,xr=p[28]<<7|p[29]>>>25,Be=p[38]<<8|p[39]>>>24,jr=p[39]<<8|p[38]>>>24,tt=p[48]<<14|p[49]>>>18,Or=p[49]<<14|p[48]>>>18,p[0]=an^~Qe&Xe,p[1]=Ye^~cn&Ze,p[10]=_e^~Dr&Se,p[11]=Ee^~Ae&Fr,p[20]=Ie^~Ce&Kr,p[21]=Ur^~Ne&Me,p[30]=$r^~Fe&Le,p[31]=De^~Hr&Ue,p[40]=$e^~Gr&ze,p[41]=He^~qe&xr,p[2]=Qe^~Xe&un,p[3]=cn^~Ze&et,p[12]=Dr^~Se&Te,p[13]=Ae^~Fr&ke,p[22]=Ce^~Kr&Be,p[23]=Ne^~Me&jr,p[32]=Fe^~Le&qr,p[33]=Hr^~Ue&Ke,p[42]=Gr^~ze&vr,p[43]=qe^~xr&wr,p[4]=Xe^~un&tt,p[5]=Ze^~et&Or,p[14]=Se^~Te&Lr,p[15]=Fr^~ke&Pe,p[24]=Kr^~Be&Re,p[25]=Me^~jr&Oe,p[34]=Le^~qr&je,p[35]=Ue^~Ke&zr,p[44]=ze^~vr&_r,p[45]=xr^~wr&Er,p[6]=un^~tt&an,p[7]=et^~Or&Ye,p[16]=Te^~Lr&_e,p[17]=ke^~Pe&Ee,p[26]=Be^~Re&Ie,p[27]=jr^~Oe&Ur,p[36]=qr^~je&$r,p[37]=Ke^~zr&De,p[46]=vr^~_r&$e,p[47]=wr^~Er&He,p[8]=tt^~an&Qe,p[9]=Or^~Ye&cn,p[18]=Lr^~_e&Dr,p[19]=Pe^~Ee&Ae,p[28]=Re^~Ie&Ce,p[29]=Oe^~Ur&Ne,p[38]=je^~$r&Fe,p[39]=zr^~De&Hr,p[48]=_r^~$e&Gr,p[49]=Er^~He&qe,p[0]^=x[K],p[1]^=x[K+1]};if(a)t.exports=u;else for(w=0;w<g.length;++w)i[g[w]]=u[g[w]]})()})(Ig);var nw=Ig.exports;function nt(t){return"0x"+nw.keccak_256(Y(t))}const iw="rlp/5.7.0",pn=new M(iw);function Eh(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Ah(t,e,r){let n=0;for(let i=0;i<r;i++)n=n*256+t[e+i];return n}function Cg(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(s){n=n.concat(Cg(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=Eh(n.length);return i.unshift(247+i.length),i.concat(n)}aa(t)||pn.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(Y(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=Eh(e.length);return r.unshift(183+r.length),r.concat(e)}function Gi(t){return X(Cg(t))}function Sh(t,e,r,n){const i=[];for(;r<e+1+n;){const s=Ng(t,r);i.push(s.result),r+=s.consumed,r>e+1+n&&pn.throwError("child data too short",M.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function Ng(t,e){if(t.length===0&&pn.throwError("data too short",M.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&pn.throwError("data short segment too short",M.errors.BUFFER_OVERRUN,{});const n=Ah(t,e+1,r);return e+1+r+n>t.length&&pn.throwError("data long segment too short",M.errors.BUFFER_OVERRUN,{}),Sh(t,e,e+1+r,r+n)}else if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&pn.throwError("data array too short",M.errors.BUFFER_OVERRUN,{}),Sh(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&pn.throwError("data array too short",M.errors.BUFFER_OVERRUN,{});const n=Ah(t,e+1,r);e+1+r+n>t.length&&pn.throwError("data array too short",M.errors.BUFFER_OVERRUN,{});const i=X(t.slice(e+1+r,e+1+r+n));return{consumed:1+r+n,result:i}}else if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&pn.throwError("data too short",M.errors.BUFFER_OVERRUN,{});const n=X(t.slice(e+1,e+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:X(t[e])}}function $c(t){const e=Y(t),r=Ng(e,0);return r.consumed!==e.length&&pn.throwArgumentError("invalid rlp data","data",t),r.result}var sw=Object.freeze(Object.defineProperty({__proto__:null,encode:Gi,decode:$c},Symbol.toStringTag,{value:"Module"}));const ow="address/5.7.0",si=new M(ow);function Th(t){ce(t,20)||si.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);const n=Y(nt(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const aw=9007199254740991;function cw(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const Il={};for(let t=0;t<10;t++)Il[String(t)]=String(t);for(let t=0;t<26;t++)Il[String.fromCharCode(65+t)]=String(10+t);const kh=Math.floor(cw(aw));function Mg(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>Il[n]).join("");for(;e.length>=kh;){let n=e.substring(0,kh);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function Ge(t){let e=null;if(typeof t!="string"&&si.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=Th(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&si.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==Mg(t)&&si.throwArgumentError("bad icap checksum","address",t),e=zv(t.substring(4));e.length<40;)e="0"+e;e=Th("0x"+e)}else si.throwArgumentError("invalid address","address",t);return e}function uw(t){try{return Ge(t),!0}catch{}return!1}function fw(t){let e=Gv(Ge(t).substring(2)).toUpperCase();for(;e.length<30;)e="0"+e;return"XE"+Mg("XE00"+e)+e}function Hc(t){let e=null;try{e=Ge(t.from)}catch{si.throwArgumentError("missing from address","transaction",t)}const r=vn(Y(W.from(t.nonce).toHexString()));return Ge(_t(nt(Gi([e,r])),12))}function lw(t,e,r){return Sn(e)!==32&&si.throwArgumentError("salt must be 32 bytes","salt",e),Sn(r)!==32&&si.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r),Ge(_t(nt(at(["0xff",Ge(t),e,r])),12))}class dw extends zn{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){try{r=Ge(r)}catch(n){this._throwError(n.message,r)}return e.writeValue(r)}decode(e){return Ge(ct(e.readValue().toHexString(),20))}}class hw extends zn{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,r){return this.coder.encode(e,r)}decode(e){return this.coder.decode(e)}}const ks=new M(ua);function Bg(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let c={};n=e.map(f=>{const l=f.localName;return l||ks.throwError("cannot encode object for signature with missing names",M.errors.INVALID_ARGUMENT,{argument:"values",coder:f,value:r}),c[l]&&ks.throwError("cannot encode object for signature with duplicate names",M.errors.INVALID_ARGUMENT,{argument:"values",coder:f,value:r}),c[l]=!0,r[l]})}else ks.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&ks.throwArgumentError("types/value length mismatch","tuple",r);let i=new bf(t.wordSize),s=new bf(t.wordSize),o=[];e.forEach((c,f)=>{let l=n[f];if(c.dynamic){let h=s.length;c.encode(s,l);let m=i.writeUpdatableValue();o.push(v=>{m(v+h)})}else c.encode(i,l)}),o.forEach(c=>{c(i.length)});let a=t.appendWriter(i);return a+=t.appendWriter(s),a}function Rg(t,e){let r=[],n=t.subReader(0);e.forEach(s=>{let o=null;if(s.dynamic){let a=t.readValue(),c=n.subReader(a.toNumber());try{o=s.decode(c)}catch(f){if(f.code===M.errors.BUFFER_OVERRUN)throw f;o=f,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(t)}catch(a){if(a.code===M.errors.BUFFER_OVERRUN)throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}o!=null&&r.push(o)});const i=e.reduce((s,o)=>{const a=o.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});e.forEach((s,o)=>{let a=s.localName;if(!a||i[a]!==1||(a==="length"&&(a="_length"),r[a]!=null))return;const c=r[o];c instanceof Error?Object.defineProperty(r,a,{enumerable:!0,get:()=>{throw c}}):r[a]=c});for(let s=0;s<r.length;s++){const o=r[s];o instanceof Error&&Object.defineProperty(r,s,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(r)}class pw extends zn{constructor(e,r,n){const i=e.type+"["+(r>=0?r:"")+"]",s=r===-1||e.dynamic;super("array",i,n,s),this.coder=e,this.length=r}defaultValue(){const e=this.coder.defaultValue(),r=[];for(let n=0;n<this.length;n++)r.push(e);return r}encode(e,r){Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;n===-1&&(n=r.length,e.writeValue(r.length)),ks.checkArgumentCount(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<r.length;s++)i.push(this.coder);return Bg(e,i,r)}decode(e){let r=this.length;r===-1&&(r=e.readValue().toNumber(),r*32>e._data.length&&ks.throwError("insufficient data length",M.errors.BUFFER_OVERRUN,{length:e._data.length,count:r}));let n=[];for(let i=0;i<r;i++)n.push(new hw(this.coder));return e.coerce(this.name,Rg(e,n))}}class gw extends zn{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){return e.writeValue(r?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class Og extends zn{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=Y(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class yw extends Og{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,X(super.decode(e)))}}class mw extends zn{constructor(e,r){let n="bytes"+String(e);super(n,n,r,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,r){let n=Y(r);return n.length!==this.size&&this._throwError("incorrect data length",r),e.writeBytes(n)}decode(e){return e.coerce(this.name,X(e.readBytes(this.size)))}}class bw extends zn{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const Dg="0x0000000000000000000000000000000000000000",Fg=W.from(-1),Cl=W.from(0),Lg=W.from(1),xw=W.from(2),vw=W.from("1000000000000000000"),Ug=W.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ww=W.from("-0x8000000000000000000000000000000000000000000000000000000000000000"),_w=W.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Nl="0x0000000000000000000000000000000000000000000000000000000000000000",Ew="\u039E";var Kg=Object.freeze(Object.defineProperty({__proto__:null,AddressZero:Dg,NegativeOne:Fg,Zero:Cl,One:Lg,Two:xw,WeiPerEther:vw,MaxUint256:Ug,MinInt256:ww,MaxInt256:_w,HashZero:Nl,EtherSymbol:Ew},Symbol.toStringTag,{value:"Module"}));class Aw extends zn{constructor(e,r,n){const i=(r?"int":"uint")+e*8;super(i,i,n,!1),this.size=e,this.signed=r}defaultValue(){return 0}encode(e,r){let n=W.from(r),i=Ug.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(n.gt(s)||n.lt(s.add(Lg).mul(Fg)))&&this._throwError("value out-of-bounds",r)}else(n.lt(Cl)||n.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",r);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let r=e.readValue().mask(this.size*8);return this.signed&&(r=r.fromTwos(this.size*8)),e.coerce(this.name,r)}}const Sw="strings/5.7.0",jg=new M(Sw);var Tn;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(Tn||(Tn={}));var nr;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(nr||(nr={}));function Tw(t,e,r,n,i){return jg.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function $g(t,e,r,n,i){if(t===nr.BAD_PREFIX||t===nr.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<r.length&&r[o]>>6===2;o++)s++;return s}return t===nr.OVERRUN?r.length-e-1:0}function kw(t,e,r,n,i){return t===nr.OVERLONG?(n.push(i),0):(n.push(65533),$g(t,e,r))}const Hg=Object.freeze({error:Tw,ignore:$g,replace:kw});function Ml(t,e){e==null&&(e=Hg.error),t=Y(t);const r=[];let n=0;for(;n<t.length;){const i=t[n++];if(i>>7===0){r.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?n+=e(nr.UNEXPECTED_CONTINUE,n-1,t,r):n+=e(nr.BAD_PREFIX,n-1,t,r);continue}if(n-1+s>=t.length){n+=e(nr.OVERRUN,n-1,t,r);continue}let a=i&(1<<8-s-1)-1;for(let c=0;c<s;c++){let f=t[n];if((f&192)!=128){n+=e(nr.MISSING_CONTINUE,n,t,r),a=null;break}a=a<<6|f&63,n++}if(a!==null){if(a>1114111){n+=e(nr.OUT_OF_RANGE,n-1-s,t,r,a);continue}if(a>=55296&&a<=57343){n+=e(nr.UTF16_SURROGATE,n-1-s,t,r,a);continue}if(a<=o){n+=e(nr.OVERLONG,n-1-s,t,r,a);continue}r.push(a)}}return r}function At(t,e=Tn.current){e!=Tn.current&&(jg.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;const s=t.charCodeAt(n);if(n>=t.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return Y(r)}function Cu(t){const e="0000"+t.toString(16);return"\\u"+e.substring(e.length-4)}function Pw(t,e){return'"'+Ml(t,e).map(r=>{if(r<256){switch(r){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(r>=32&&r<127)return String.fromCharCode(r)}return r<=65535?Cu(r):(r-=65536,Cu((r>>10&1023)+55296)+Cu((r&1023)+56320))}).join("")+'"'}function xf(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function ns(t,e){return xf(Ml(t,e))}function uc(t,e=Tn.current){return Ml(At(t,e))}function Iw(t){const e=At(t);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return X(at([e,Nl]).slice(0,32))}function Cw(t){const e=Y(t);if(e.length!==32)throw new Error("invalid bytes32 - not 32 bytes long");if(e[31]!==0)throw new Error("invalid bytes32 string - no null terminator");let r=31;for(;e[r-1]===0;)r--;return ns(e.slice(0,r))}function Nw(t){if(t.length%4!==0)throw new Error("bad data");let e=[];for(let r=0;r<t.length;r+=4)e.push(parseInt(t.substring(r,r+4),16));return e}function Bl(t,e){e||(e=function(i){return[parseInt(i,16)]});let r=0,n={};return t.split(",").forEach(i=>{let s=i.split(":");r+=parseInt(s[0],16),n[r]=e(s[1])}),n}function qg(t){let e=0;return t.split(",").map(r=>{let n=r.split("-");n.length===1?n[1]="0":n[1]===""&&(n[1]="1");let i=e+parseInt(n[0],16);return e=parseInt(n[1],16),{l:i,h:e}})}function Rl(t,e){let r=0;for(let n=0;n<e.length;n++){let i=e[n];if(r+=i.l,t>=r&&t<=r+i.h&&(t-r)%(i.d||1)===0){if(i.e&&i.e.indexOf(t-r)!==-1)continue;return i}}return null}const Mw=qg("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),Bw="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(t=>parseInt(t,16)),Rw=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],Ow=Bl("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Dw=Bl("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Fw=Bl("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",Nw),Lw=qg("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function Uw(t){return t.reduce((e,r)=>(r.forEach(n=>{e.push(n)}),e),[])}function Kw(t){return!!Rl(t,Mw)}function jw(t){let e=Rl(t,Rw);if(e)return[t+e.s];let r=Ow[t];if(r)return r;let n=Dw[t];if(n)return[t+n[0]];let i=Fw[t];return i||null}function $w(t){return!!Rl(t,Lw)}function Hw(t){if(t.match(/^[a-z0-9-]*$/i)&&t.length<=59)return t.toLowerCase();let e=uc(t);e=Uw(e.map(n=>{if(Bw.indexOf(n)>=0)return[];if(n>=65024&&n<=65039)return[];let i=jw(n);return i||[n]})),e=uc(xf(e),Tn.NFKC),e.forEach(n=>{if($w(n))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")}),e.forEach(n=>{if(Kw(n))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")});let r=xf(e);if(r.substring(0,1)==="-"||r.substring(2,4)==="--"||r.substring(r.length-1)==="-")throw new Error("invalid hyphen");return r}class qw extends Og{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,At(r))}decode(e){return ns(super.decode(e))}}class Pa extends zn{constructor(e,r){let n=!1;const i=[];e.forEach(o=>{o.dynamic&&(n=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,r,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const r=this.coders.reduce((n,i)=>{const s=i.localName;return s&&(n[s]||(n[s]=0),n[s]++),n},{});return this.coders.forEach((n,i)=>{let s=n.localName;!s||r[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,r){return Bg(e,this.coders,r)}decode(e){return e.coerce(this.name,Rg(e,this.coders))}}const Ia=new M(ua),zw=new RegExp(/^bytes([0-9]*)$/),Gw=new RegExp(/^(u?int)([0-9]*)$/);class zg{constructor(e){j(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new dw(e.name);case"bool":return new gw(e.name);case"string":return new qw(e.name);case"bytes":return new yw(e.name);case"array":return new pw(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Pa((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new bw(e.name)}let r=e.type.match(Gw);if(r){let n=parseInt(r[2]||"256");return(n===0||n>256||n%8!==0)&&Ia.throwArgumentError("invalid "+r[1]+" bit length","param",e),new Aw(n/8,r[1]==="int",e.name)}if(r=e.type.match(zw),r){let n=parseInt(r[1]);return(n===0||n>32)&&Ia.throwArgumentError("invalid bytes length","param",e),new mw(n,e.name)}return Ia.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,r){return new cc(e,this._getWordSize(),this.coerceFunc,r)}_getWriter(){return new bf(this._getWordSize())}getDefaultValue(e){const r=e.map(i=>this._getCoder(Mt.from(i)));return new Pa(r,"_").defaultValue()}encode(e,r){e.length!==r.length&&Ia.throwError("types/values length mismatch",M.errors.INVALID_ARGUMENT,{count:{types:e.length,values:r.length},value:{types:e,values:r}});const n=e.map(o=>this._getCoder(Mt.from(o))),i=new Pa(n,"_"),s=this._getWriter();return i.encode(s,r),s.data}decode(e,r,n){const i=e.map(o=>this._getCoder(Mt.from(o)));return new Pa(i,"_").decode(this._getReader(Y(r),n))}}const Gg=new zg;function oi(t){return nt(At(t))}const Vg="hash/5.7.0";function Ol(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return Y(e)}function Dl(t){t=Y(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}var Vw=Object.freeze(Object.defineProperty({__proto__:null,decode:Ol,encode:Dl},Symbol.toStringTag,{value:"Module"}));function Jg(t,e){e==null&&(e=1);const r=[],n=r.forEach,i=function(s,o){n.call(s,function(a){o>0&&Array.isArray(a)?i(a,o-1):r.push(a)})};return i(t,e),r}function Jw(t){const e={};for(let r=0;r<t.length;r++){const n=t[r];e[n[0]]=n[1]}return e}function Ww(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),i=1,s=[0,1];for(let C=1;C<n;C++)s.push(i+=r());let o=r(),a=e;e+=o;let c=0,f=0;function l(){return c==0&&(f=f<<8|t[e++],c=8),f>>--c&1}const h=31,m=Math.pow(2,h),v=m>>>1,T=v>>1,x=m-1;let b=0;for(let C=0;C<h;C++)b=b<<1|l();let _=[],k=0,N=m;for(;;){let C=Math.floor(((b-k+1)*i-1)/N),L=0,$=n;for(;$-L>1;){let re=L+$>>>1;C<s[re]?$=re:L=re}if(L==0)break;_.push(L);let q=k+Math.floor(N*s[L]/i),J=k+Math.floor(N*s[L+1]/i)-1;for(;((q^J)&v)==0;)b=b<<1&x|l(),q=q<<1&x,J=J<<1&x|1;for(;q&~J&T;)b=b&v|b<<1&x>>>1|l(),q=q<<1^v,J=(J^v)<<1|v|1;k=q,N=1+J-q}let D=n-4;return _.map(C=>{switch(C-D){case 3:return D+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return D+256+(t[a++]<<8|t[a++]);case 1:return D+t[a++];default:return C-1}})}function Yw(t){let e=0;return()=>t[e++]}function Qw(t){return Yw(Ww(t))}function Xw(t){return t&1?~t>>1:t>>1}function Zw(t,e){let r=Array(t);for(let n=0;n<t;n++)r[n]=1+e();return r}function Ph(t,e){let r=Array(t);for(let n=0,i=-1;n<t;n++)r[n]=i+=1+e();return r}function e_(t,e){let r=Array(t);for(let n=0,i=0;n<t;n++)r[n]=i+=Xw(e());return r}function fc(t,e){let r=Ph(t(),t),n=t(),i=Ph(n,t),s=Zw(n,t);for(let o=0;o<n;o++)for(let a=0;a<s[o];a++)r.push(i[o]+a);return e?r.map(o=>e[o]):r}function t_(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(n_(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(i_(r,t))}return Jw(Jg(e))}function r_(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(r)}return e}function Wg(t,e,r){let n=Array(t).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)e_(t,r).forEach((s,o)=>n[o].push(s));return n}function n_(t,e){let r=1+e(),n=e(),i=r_(e),s=Wg(i.length,1+t,e);return Jg(s.map((o,a)=>{const c=o[0],f=o.slice(1);return Array(i[a]).fill(void 0).map((l,h)=>{let m=h*n;return[c+h*r,f.map(v=>v+m)]})}))}function i_(t,e){let r=1+e();return Wg(r,1+t,e).map(i=>[i[0],i.slice(1)])}function s_(t){let e=fc(t).sort((n,i)=>n-i);return r();function r(){let n=[];for(;;){let f=fc(t,e);if(f.length==0)break;n.push({set:new Set(f),node:r()})}n.sort((f,l)=>l.set.size-f.set.size);let i=t(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let a=i==1,c=i==2;return{branches:n,valid:s,fe0f:o,save:a,check:c}}}function o_(){return Qw(Ol("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const qc=o_(),a_=new Set(fc(qc)),c_=new Set(fc(qc)),u_=t_(qc),f_=s_(qc),Ih=45,Ch=95;function Yg(t){return uc(t)}function l_(t){return t.filter(e=>e!=65039)}function Qg(t){for(let e of t.split(".")){let r=Yg(e);try{for(let n=r.lastIndexOf(Ch)-1;n>=0;n--)if(r[n]!==Ch)throw new Error("underscore only allowed at start");if(r.length>=4&&r.every(n=>n<128)&&r[2]===Ih&&r[3]===Ih)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return t}function d_(t){return Qg(h_(t,l_))}function h_(t,e){let r=Yg(t).reverse(),n=[];for(;r.length;){let i=g_(r);if(i){n.push(...e(i));continue}let s=r.pop();if(a_.has(s)){n.push(s);continue}if(c_.has(s))continue;let o=u_[s];if(o){n.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return Qg(p_(String.fromCodePoint(...n)))}function p_(t){return t.normalize("NFC")}function g_(t,e){var r;let n=f_,i,s,o=[],a=t.length;for(e&&(e.length=0);a;){let c=t[--a];if(n=(r=n.branches.find(f=>f.set.has(c)))===null||r===void 0?void 0:r.node,!n)break;if(n.save)s=c;else if(n.check&&c===s)break;o.push(c),n.fe0f&&(o.push(65039),a>0&&t[a-1]==65039&&a--),n.valid&&(i=o.slice(),n.valid==2&&i.splice(1,1),e&&e.push(...t.slice(a).reverse()),t.length=a)}return i}const y_=new M(Vg),Xg=new Uint8Array(32);Xg.fill(0);function Nh(t){if(t.length===0)throw new Error("invalid ENS name; empty component");return t}function Fl(t){const e=At(d_(t)),r=[];if(t.length===0)return r;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(r.push(Nh(e.slice(n,i))),n=i+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return r.push(Nh(e.slice(n))),r}function m_(t){try{return Fl(t).length!==0}catch{}return!1}function No(t){typeof t!="string"&&y_.throwArgumentError("invalid ENS name; not a string","name",t);let e=Xg;const r=Fl(t);for(;r.length;)e=nt(at([e,nt(r.pop())]));return X(e)}function Zg(t){return X(at(Fl(t).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const r=new Uint8Array(e.length+1);return r.set(e,1),r[0]=r.length-1,r})))+"00"}const b_=`Ethereum Signed Message:
`;function Ll(t){return typeof t=="string"&&(t=At(t)),nt(at([At(b_),At(String(t.length)),t]))}var x_=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{f(n.next(l))}catch(h){o(h)}}function c(l){try{f(n.throw(l))}catch(h){o(h)}}function f(l){l.done?s(l.value):i(l.value).then(a,c)}f((n=n.apply(t,e||[])).next())})};const dt=new M(Vg),ey=new Uint8Array(32);ey.fill(0);const v_=W.from(-1),ty=W.from(0),ry=W.from(1),w_=W.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function __(t){const e=Y(t),r=e.length%32;return r?Yt([e,ey.slice(r)]):X(e)}const E_=ct(ry.toHexString(),32),A_=ct(ty.toHexString(),32),Mh={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Nu=["name","version","chainId","verifyingContract","salt"];function Bh(t){return function(e){return typeof e!="string"&&dt.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const S_={name:Bh("name"),version:Bh("version"),chainId:function(t){try{return W.from(t).toString()}catch{}return dt.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return Ge(t).toLowerCase()}catch{}return dt.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=Y(t);if(e.length!==32)throw new Error("bad length");return X(e)}catch{}return dt.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function Mu(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&dt.throwArgumentError("invalid numeric width","type",t);const i=w_.mask(r?n-1:n),s=r?i.add(ry).mul(v_):ty;return function(o){const a=W.from(o);return(a.lt(s)||a.gt(i))&&dt.throwArgumentError(`value out-of-bounds for ${t}`,"value",o),ct(a.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(r===0||r>32||e[1]!==String(r))&&dt.throwArgumentError("invalid bytes width","type",t),function(n){return Y(n).length!==r&&dt.throwArgumentError(`invalid length for ${t}`,"value",n),__(n)}}}switch(t){case"address":return function(e){return ct(Ge(e),32)};case"bool":return function(e){return e?E_:A_};case"bytes":return function(e){return nt(e)};case"string":return function(e){return oi(e)}}return null}function Rh(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}class Lt{constructor(e){j(this,"types",Object.freeze(Xt(e))),j(this,"_encoderCache",{}),j(this,"_types",{});const r={},n={},i={};Object.keys(e).forEach(a=>{r[a]={},n[a]=[],i[a]={}});for(const a in e){const c={};e[a].forEach(f=>{c[f.name]&&dt.throwArgumentError(`duplicate variable name ${JSON.stringify(f.name)} in ${JSON.stringify(a)}`,"types",e),c[f.name]=!0;const l=f.type.match(/^([^\x5b]*)(\x5b|$)/)[1];l===a&&dt.throwArgumentError(`circular type reference to ${JSON.stringify(l)}`,"types",e),!Mu(l)&&(n[l]||dt.throwArgumentError(`unknown type ${JSON.stringify(l)}`,"types",e),n[l].push(a),r[a][l]=!0)})}const s=Object.keys(n).filter(a=>n[a].length===0);s.length===0?dt.throwArgumentError("missing primary type","types",e):s.length>1&&dt.throwArgumentError(`ambiguous primary types or unused types: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),j(this,"primaryType",s[0]);function o(a,c){c[a]&&dt.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),c[a]=!0,Object.keys(r[a]).forEach(f=>{!n[f]||(o(f,c),Object.keys(c).forEach(l=>{i[l][f]=!0}))}),delete c[a]}o(this.primaryType,{});for(const a in i){const c=Object.keys(i[a]);c.sort(),this._types[a]=Rh(a,e[a])+c.map(f=>Rh(f,e[f])).join("")}}getEncoder(e){let r=this._encoderCache[e];return r||(r=this._encoderCache[e]=this._getEncoder(e)),r}_getEncoder(e){{const i=Mu(e);if(i)return i}const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const i=r[1],s=this.getEncoder(i),o=parseInt(r[3]);return a=>{o>=0&&a.length!==o&&dt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let c=a.map(s);return this._types[i]&&(c=c.map(nt)),nt(Yt(c))}}const n=this.types[e];if(n){const i=oi(this._types[e]);return s=>{const o=n.map(({name:a,type:c})=>{const f=this.getEncoder(c)(s[a]);return this._types[c]?nt(f):f});return o.unshift(i),Yt(o)}}return dt.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const r=this._types[e];return r||dt.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return nt(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(Mu(e))return n(e,r);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],a=parseInt(i[3]);return a>=0&&r.length!==a&&dt.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(c=>this._visit(o,c,n))}const s=this.types[e];return s?s.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,r[a],n),o),{}):dt.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new Lt(e)}static getPrimaryType(e){return Lt.from(e).primaryType}static hashStruct(e,r,n){return Lt.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){const i=Mh[n];i||dt.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:i})}return r.sort((n,i)=>Nu.indexOf(n.name)-Nu.indexOf(i.name)),Lt.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return Yt(["0x1901",Lt.hashDomain(e),Lt.from(r).hash(n)])}static hash(e,r,n){return nt(Lt.encode(e,r,n))}static resolveNames(e,r,n,i){return x_(this,void 0,void 0,function*(){e=ut(e);const s={};e.verifyingContract&&!ce(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=Lt.from(r);o.visit(n,(a,c)=>(a==="address"&&!ce(c,20)&&(s[c]="0x"),c));for(const a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&s[c]?s[c]:c),{domain:e,value:n}})}static getPayload(e,r,n){Lt.hashDomain(e);const i={},s=[];Nu.forEach(c=>{const f=e[c];f!=null&&(i[c]=S_[c](f),s.push({name:c,type:Mh[c]}))});const o=Lt.from(r),a=ut(r);return a.EIP712Domain?dt.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):a.EIP712Domain=s,o.encode(n),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(n,(c,f)=>{if(c.match(/^bytes(\d*)/))return X(Y(f));if(c.match(/^u?int/))return W.from(f).toString();switch(c){case"address":return f.toLowerCase();case"bool":return!!f;case"string":return typeof f!="string"&&dt.throwArgumentError("invalid string","value",f),f}return dt.throwArgumentError("unsupported type","type",c)})}}}const lt=new M(ua);class ny extends rs{}class iy extends rs{}class T_ extends rs{}class lc extends rs{static isIndexed(e){return!!(e&&e._isIndexed)}}const k_={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function Oh(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class vf{constructor(e){let r=[];typeof e=="string"?r=JSON.parse(e):r=e,j(this,"fragments",r.map(n=>mn.from(n)).filter(n=>n!=null)),j(this,"_abiCoder",Kt(new.target,"getAbiCoder")()),j(this,"functions",{}),j(this,"errors",{}),j(this,"events",{}),j(this,"structs",{}),this.fragments.forEach(n=>{let i=null;switch(n.type){case"constructor":if(this.deploy){lt.warn("duplicate definition - constructor");return}j(this,"deploy",n);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=n.format();if(i[s]){lt.warn("duplicate definition - "+s);return}i[s]=n}),this.deploy||j(this,"deploy",Qr.from({payable:!1,type:"constructor"})),j(this,"_isInterface",!0)}format(e){e||(e=be.full),e===be.sighash&&lt.throwArgumentError("interface does not support formatting sighash","format",e);const r=this.fragments.map(n=>n.format(e));return e===be.json?JSON.stringify(r.map(n=>JSON.parse(n))):r}static getAbiCoder(){return Gg}static getAddress(e){return Ge(e)}static getSighash(e){return _t(oi(e.format()),0,4)}static getEventTopic(e){return oi(e.format())}getFunction(e){if(ce(e)){for(const n in this.functions)if(e===this.getSighash(n))return this.functions[n];lt.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===n);return i.length===0?lt.throwArgumentError("no matching function","name",n):i.length>1&&lt.throwArgumentError("multiple matching functions","name",n),this.functions[i[0]]}const r=this.functions[Xr.fromString(e).format()];return r||lt.throwArgumentError("no matching function","signature",e),r}getEvent(e){if(ce(e)){const n=e.toLowerCase();for(const i in this.events)if(n===this.getEventTopic(i))return this.events[i];lt.throwArgumentError("no matching event","topichash",n)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===n);return i.length===0?lt.throwArgumentError("no matching event","name",n):i.length>1&&lt.throwArgumentError("multiple matching events","name",n),this.events[i[0]]}const r=this.events[yn.fromString(e).format()];return r||lt.throwArgumentError("no matching event","signature",e),r}getError(e){if(ce(e)){const n=Kt(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===n(s))return this.errors[i]}lt.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===n);return i.length===0?lt.throwArgumentError("no matching error","name",n):i.length>1&&lt.throwArgumentError("multiple matching errors","name",n),this.errors[i[0]]}const r=this.errors[Xr.fromString(e).format()];return r||lt.throwArgumentError("no matching error","signature",e),r}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(r){try{e=this.getError(e)}catch{throw r}}return Kt(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),Kt(this.constructor,"getEventTopic")(e)}_decodeParams(e,r){return this._abiCoder.decode(e,r)}_encodeParams(e,r){return this._abiCoder.encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){typeof e=="string"&&(e=this.getError(e));const n=Y(r);return X(n.slice(0,4))!==this.getSighash(e)&&lt.throwArgumentError(`data signature does not match error ${e.name}.`,"data",X(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,r){return typeof e=="string"&&(e=this.getError(e)),X(at([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionData(e,r){typeof e=="string"&&(e=this.getFunction(e));const n=Y(r);return X(n.slice(0,4))!==this.getSighash(e)&&lt.throwArgumentError(`data signature does not match function ${e.name}.`,"data",X(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,r){return typeof e=="string"&&(e=this.getFunction(e)),X(at([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionResult(e,r){typeof e=="string"&&(e=this.getFunction(e));let n=Y(r),i=null,s="",o=null,a=null,c=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch{}break;case 4:{const f=X(n.slice(0,4)),l=k_[f];if(l)o=this._abiCoder.decode(l.inputs,n.slice(4)),a=l.name,c=l.signature,l.reason&&(i=o[0]),a==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:a==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const h=this.getError(f);o=this._abiCoder.decode(h.inputs,n.slice(4)),a=h.name,c=h.format()}catch{}break}}return lt.throwError("call revert exception"+s,M.errors.CALL_EXCEPTION,{method:e.format(),data:X(r),errorArgs:o,errorName:a,errorSignature:c,reason:i})}encodeFunctionResult(e,r){return typeof e=="string"&&(e=this.getFunction(e)),X(this._abiCoder.encode(e.outputs,r||[]))}encodeFilterTopics(e,r){typeof e=="string"&&(e=this.getEvent(e)),r.length>e.inputs.length&&lt.throwError("too many arguments for "+e.format(),M.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:r});let n=[];e.anonymous||n.push(this.getEventTopic(e));const i=(s,o)=>s.type==="string"?oi(o):s.type==="bytes"?nt(X(o)):(s.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),s.type.match(/^u?int/)&&(o=W.from(o).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[o]),ct(X(o),32));for(r.forEach((s,o)=>{let a=e.inputs[o];if(!a.indexed){s!=null&&lt.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?lt.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?n.push(s.map(c=>i(a,c))):n.push(i(a,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){typeof e=="string"&&(e=this.getEvent(e));const n=[],i=[],s=[];return e.anonymous||n.push(this.getEventTopic(e)),r.length!==e.inputs.length&&lt.throwArgumentError("event arguments/values mismatch","values",r),e.inputs.forEach((o,a)=>{const c=r[a];if(o.indexed)if(o.type==="string")n.push(oi(c));else if(o.type==="bytes")n.push(nt(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(this._abiCoder.encode([o.type],[c]))}else i.push(o),s.push(c)}),{data:this._abiCoder.encode(i,s),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"&&(e=this.getEvent(e)),n!=null&&!e.anonymous){let m=this.getEventTopic(e);(!ce(n[0],32)||n[0].toLowerCase()!==m)&&lt.throwError("fragment/topic mismatch",M.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:m,value:n[0]}),n=n.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((m,v)=>{m.indexed?m.type==="string"||m.type==="bytes"||m.baseType==="tuple"||m.baseType==="array"?(i.push(Mt.fromObject({type:"bytes32",name:m.name})),o.push(!0)):(i.push(m),o.push(!1)):(s.push(m),o.push(!1))});let a=n!=null?this._abiCoder.decode(i,at(n)):null,c=this._abiCoder.decode(s,r,!0),f=[],l=0,h=0;e.inputs.forEach((m,v)=>{if(m.indexed)if(a==null)f[v]=new lc({_isIndexed:!0,hash:null});else if(o[v])f[v]=new lc({_isIndexed:!0,hash:a[h++]});else try{f[v]=a[h++]}catch(T){f[v]=T}else try{f[v]=c[l++]}catch(T){f[v]=T}if(m.name&&f[m.name]==null){const T=f[v];T instanceof Error?Object.defineProperty(f,m.name,{enumerable:!0,get:()=>{throw Oh(`property ${JSON.stringify(m.name)}`,T)}}):f[m.name]=T}});for(let m=0;m<f.length;m++){const v=f[m];v instanceof Error&&Object.defineProperty(f,m,{enumerable:!0,get:()=>{throw Oh(`index ${m}`,v)}})}return Object.freeze(f)}parseTransaction(e){let r=this.getFunction(e.data.substring(0,10).toLowerCase());return r?new iy({args:this._abiCoder.decode(r.inputs,"0x"+e.data.substring(10)),functionFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r),value:W.from(e.value||"0")}):null}parseLog(e){let r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new ny({eventFragment:r,name:r.name,signature:r.format(),topic:this.getEventTopic(r),args:this.decodeEventLog(r,e.data,e.topics)})}parseError(e){const r=X(e);let n=this.getError(r.substring(0,10).toLowerCase());return n?new T_({args:this._abiCoder.decode(n.inputs,"0x"+r.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const P_="abstract-provider/5.7.0";var I_=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{f(n.next(l))}catch(h){o(h)}}function c(l){try{f(n.throw(l))}catch(h){o(h)}}function f(l){l.done?s(l.value):i(l.value).then(a,c)}f((n=n.apply(t,e||[])).next())})};const C_=new M(P_);class N_ extends rs{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class is{constructor(){C_.checkAbstract(new.target,is),j(this,"_isProvider",!0)}getFeeData(){return I_(this,void 0,void 0,function*(){const{block:e,gasPrice:r}=yield yt({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let n=null,i=null,s=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,s=W.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:r}})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}}const M_="abstract-signer/5.7.0";var Jr=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{f(n.next(l))}catch(h){o(h)}}function c(l){try{f(n.throw(l))}catch(h){o(h)}}function f(l){l.done?s(l.value):i(l.value).then(a,c)}f((n=n.apply(t,e||[])).next())})};const Tr=new M(M_),B_=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],R_=[M.errors.INSUFFICIENT_FUNDS,M.errors.NONCE_EXPIRED,M.errors.REPLACEMENT_UNDERPRICED];class Gn{constructor(){Tr.checkAbstract(new.target,Gn),j(this,"_isSigner",!0)}getBalance(e){return Jr(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return Jr(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return Jr(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const r=yield yt(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return Jr(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield yt(this.checkTransaction(e));return yield this.provider.call(n,r)})}sendTransaction(e){return Jr(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const r=yield this.populateTransaction(e),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return Jr(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Jr(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Jr(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return Jr(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)B_.indexOf(n)===-1&&Tr.throwArgumentError("invalid transaction key: "+n,"transaction",e);const r=ut(e);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&Tr.throwArgumentError("from address mismatch","transaction",e),n[0])),r}populateTransaction(e){return Jr(this,void 0,void 0,function*(){const r=yield yt(this.checkTransaction(e));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>Jr(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&Tr.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),r.to.catch(i=>{}));const n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?Tr.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(r.type===0||r.type===1)&&n&&Tr.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const s=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=s,r.maxPriorityFeePerGas=s}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&Tr.throwError("network does not support EIP-1559",M.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):Tr.throwError("failed to get consistent fee data",M.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if(R_.indexOf(i.code)>=0)throw i;return Tr.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",M.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&Tr.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield yt(r)})}_checkProvider(e){this.provider||Tr.throwError("missing provider",M.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class fa extends Gn{constructor(e,r){super(),j(this,"address",e),j(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,r){return Promise.resolve().then(()=>{Tr.throwError(e,M.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new fa(this.address,e)}}function eo(t,e,r){return r={path:e,exports:{},require:function(n,i){return O_(n,i??r.path)}},t(r,r.exports),r.exports}function O_(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Ul=sy;function sy(t,e){if(!t)throw new Error(e||"Assertion failed")}sy.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var en=eo(function(t,e){var r=e;function n(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var c=[];if(typeof o!="string"){for(var f=0;f<o.length;f++)c[f]=o[f]|0;return c}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var f=0;f<o.length;f+=2)c.push(parseInt(o[f]+o[f+1],16))}else for(var f=0;f<o.length;f++){var l=o.charCodeAt(f),h=l>>8,m=l&255;h?c.push(h,m):c.push(m)}return c}r.toArray=n;function i(o){return o.length===1?"0"+o:o}r.zero2=i;function s(o){for(var a="",c=0;c<o.length;c++)a+=i(o[c].toString(16));return a}r.toHex=s,r.encode=function(a,c){return c==="hex"?s(a):a}}),br=eo(function(t,e){var r=e;r.assert=Ul,r.toArray=en.toArray,r.zero2=en.zero2,r.toHex=en.toHex,r.encode=en.encode;function n(c,f,l){var h=new Array(Math.max(c.bitLength(),l)+1);h.fill(0);for(var m=1<<f+1,v=c.clone(),T=0;T<h.length;T++){var x,b=v.andln(m-1);v.isOdd()?(b>(m>>1)-1?x=(m>>1)-b:x=b,v.isubn(x)):x=0,h[T]=x,v.iushrn(1)}return h}r.getNAF=n;function i(c,f){var l=[[],[]];c=c.clone(),f=f.clone();for(var h=0,m=0,v;c.cmpn(-h)>0||f.cmpn(-m)>0;){var T=c.andln(3)+h&3,x=f.andln(3)+m&3;T===3&&(T=-1),x===3&&(x=-1);var b;(T&1)===0?b=0:(v=c.andln(7)+h&7,(v===3||v===5)&&x===2?b=-T:b=T),l[0].push(b);var _;(x&1)===0?_=0:(v=f.andln(7)+m&7,(v===3||v===5)&&T===2?_=-x:_=x),l[1].push(_),2*h===b+1&&(h=1-h),2*m===_+1&&(m=1-m),c.iushrn(1),f.iushrn(1)}return l}r.getJSF=i;function s(c,f,l){var h="_"+f;c.prototype[f]=function(){return this[h]!==void 0?this[h]:this[h]=l.call(this)}}r.cachedProperty=s;function o(c){return typeof c=="string"?r.toArray(c,"hex"):c}r.parseBytes=o;function a(c){return new ae(c,"hex","le")}r.intFromLE=a}),dc=br.getNAF,D_=br.getJSF,hc=br.assert;function wi(t,e){this.type=t,this.p=new ae(e.p,16),this.red=e.prime?ae.red(e.prime):ae.mont(this.p),this.zero=new ae(0).toRed(this.red),this.one=new ae(1).toRed(this.red),this.two=new ae(2).toRed(this.red),this.n=e.n&&new ae(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var ss=wi;wi.prototype.point=function(){throw new Error("Not implemented")};wi.prototype.validate=function(){throw new Error("Not implemented")};wi.prototype._fixedNafMul=function(e,r){hc(e.precomputed);var n=e._getDoubles(),i=dc(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,c;for(a=0;a<i.length;a+=n.step){c=0;for(var f=a+n.step-1;f>=a;f--)c=(c<<1)+i[f];o.push(c)}for(var l=this.jpoint(null,null,null),h=this.jpoint(null,null,null),m=s;m>0;m--){for(a=0;a<o.length;a++)c=o[a],c===m?h=h.mixedAdd(n.points[a]):c===-m&&(h=h.mixedAdd(n.points[a].neg()));l=l.add(h)}return l.toP()};wi.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=dc(r,n,this._bitLength),a=this.jpoint(null,null,null),c=o.length-1;c>=0;c--){for(var f=0;c>=0&&o[c]===0;c--)f++;if(c>=0&&f++,a=a.dblp(f),c<0)break;var l=o[c];hc(l!==0),e.type==="affine"?l>0?a=a.mixedAdd(s[l-1>>1]):a=a.mixedAdd(s[-l-1>>1].neg()):l>0?a=a.add(s[l-1>>1]):a=a.add(s[-l-1>>1].neg())}return e.type==="affine"?a.toP():a};wi.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,c=this._wnafT3,f=0,l,h,m;for(l=0;l<i;l++){m=r[l];var v=m._getNAFPoints(e);o[l]=v.wnd,a[l]=v.points}for(l=i-1;l>=1;l-=2){var T=l-1,x=l;if(o[T]!==1||o[x]!==1){c[T]=dc(n[T],o[T],this._bitLength),c[x]=dc(n[x],o[x],this._bitLength),f=Math.max(c[T].length,f),f=Math.max(c[x].length,f);continue}var b=[r[T],null,null,r[x]];r[T].y.cmp(r[x].y)===0?(b[1]=r[T].add(r[x]),b[2]=r[T].toJ().mixedAdd(r[x].neg())):r[T].y.cmp(r[x].y.redNeg())===0?(b[1]=r[T].toJ().mixedAdd(r[x]),b[2]=r[T].add(r[x].neg())):(b[1]=r[T].toJ().mixedAdd(r[x]),b[2]=r[T].toJ().mixedAdd(r[x].neg()));var _=[-3,-1,-5,-7,0,7,5,1,3],k=D_(n[T],n[x]);for(f=Math.max(k[0].length,f),c[T]=new Array(f),c[x]=new Array(f),h=0;h<f;h++){var N=k[0][h]|0,D=k[1][h]|0;c[T][h]=_[(N+1)*3+(D+1)],c[x][h]=0,a[T]=b}}var C=this.jpoint(null,null,null),L=this._wnafT4;for(l=f;l>=0;l--){for(var $=0;l>=0;){var q=!0;for(h=0;h<i;h++)L[h]=c[h][l]|0,L[h]!==0&&(q=!1);if(!q)break;$++,l--}if(l>=0&&$++,C=C.dblp($),l<0)break;for(h=0;h<i;h++){var J=L[h];J!==0&&(J>0?m=a[h][J-1>>1]:J<0&&(m=a[h][-J-1>>1].neg()),m.type==="affine"?C=C.mixedAdd(m):C=C.add(m))}}for(l=0;l<i;l++)a[l]=null;return s?C:C.toP()};function Mr(t,e){this.curve=t,this.type=e,this.precomputed=null}wi.BasePoint=Mr;Mr.prototype.eq=function(){throw new Error("Not implemented")};Mr.prototype.validate=function(){return this.curve.validate(this)};wi.prototype.decodePoint=function(e,r){e=br.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?hc(e[e.length-1]%2===0):e[0]===7&&hc(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Mr.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Mr.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Mr.prototype.encode=function(e,r){return br.encode(this._encode(r),e)};Mr.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Mr.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Mr.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};Mr.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};Mr.prototype._getBeta=function(){return null};Mr.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var Kl=eo(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),F_=br.assert;function Br(t){ss.call(this,"short",t),this.a=new ae(t.a,16).toRed(this.red),this.b=new ae(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Kl(Br,ss);var L_=Br;Br.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new ae(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new ae(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],F_(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new ae(a.a,16),b:new ae(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};Br.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:ae.mont(e),n=new ae(2).toRed(r).redInvm(),i=n.redNeg(),s=new ae(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};Br.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new ae(1),o=new ae(0),a=new ae(0),c=new ae(1),f,l,h,m,v,T,x,b=0,_,k;n.cmpn(0)!==0;){var N=i.div(n);_=i.sub(N.mul(n)),k=a.sub(N.mul(s));var D=c.sub(N.mul(o));if(!h&&_.cmp(r)<0)f=x.neg(),l=s,h=_.neg(),m=k;else if(h&&++b===2)break;x=_,i=n,n=_,a=s,s=k,c=o,o=D}v=_.neg(),T=k;var C=h.sqr().add(m.sqr()),L=v.sqr().add(T.sqr());return L.cmp(C)>=0&&(v=f,T=l),h.negative&&(h=h.neg(),m=m.neg()),v.negative&&(v=v.neg(),T=T.neg()),[{a:h,b:m},{a:v,b:T}]};Br.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),c=o.mul(i.a),f=s.mul(n.b),l=o.mul(i.b),h=e.sub(a).sub(c),m=f.add(l).neg();return{k1:h,k2:m}};Br.prototype.pointFromX=function(e,r){e=new ae(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};Br.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};Br.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),c=e[o],f=c._getBeta();a.k1.negative&&(a.k1.ineg(),c=c.neg(!0)),a.k2.negative&&(a.k2.ineg(),f=f.neg(!0)),i[o*2]=c,i[o*2+1]=f,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var l=this._wnafMulAdd(1,i,s,o*2,n),h=0;h<o*2;h++)i[h]=null,s[h]=null;return l};function Dt(t,e,r,n){ss.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new ae(e,16),this.y=new ae(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Kl(Dt,ss.BasePoint);Br.prototype.point=function(e,r,n){return new Dt(this,e,r,n)};Br.prototype.pointFromJSON=function(e,r){return Dt.fromJSON(this,e,r)};Dt.prototype._getBeta=function(){if(!!this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};Dt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Dt.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};Dt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Dt.prototype.isInfinity=function(){return this.inf};Dt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};Dt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};Dt.prototype.getX=function(){return this.x.fromRed()};Dt.prototype.getY=function(){return this.y.fromRed()};Dt.prototype.mul=function(e){return e=new ae(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Dt.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};Dt.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};Dt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Dt.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};Dt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function qt(t,e,r,n){ss.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new ae(0)):(this.x=new ae(e,16),this.y=new ae(r,16),this.z=new ae(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Kl(qt,ss.BasePoint);Br.prototype.jpoint=function(e,r,n){return new qt(this,e,r,n)};qt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};qt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};qt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),c=i.redSub(s),f=o.redSub(a);if(c.cmpn(0)===0)return f.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=c.redSqr(),h=l.redMul(c),m=i.redMul(l),v=f.redSqr().redIAdd(h).redISub(m).redISub(m),T=f.redMul(m.redISub(v)).redISub(o.redMul(h)),x=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(v,T,x)};qt.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(i),c=s.redSub(o);if(a.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var f=a.redSqr(),l=f.redMul(a),h=n.redMul(f),m=c.redSqr().redIAdd(l).redISub(h).redISub(h),v=c.redMul(h.redISub(m)).redISub(s.redMul(l)),T=this.z.redMul(a);return this.curve.jpoint(m,v,T)};qt.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,c=this.z,f=c.redSqr().redSqr(),l=a.redAdd(a);for(r=0;r<e;r++){var h=o.redSqr(),m=l.redSqr(),v=m.redSqr(),T=h.redAdd(h).redIAdd(h).redIAdd(i.redMul(f)),x=o.redMul(m),b=T.redSqr().redISub(x.redAdd(x)),_=x.redISub(b),k=T.redMul(_);k=k.redIAdd(k).redISub(v);var N=l.redMul(c);r+1<e&&(f=f.redMul(v)),o=b,c=N,l=k}return this.curve.jpoint(o,l.redMul(s),c)};qt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};qt.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i),f=c.redSqr().redISub(a).redISub(a),l=o.redIAdd(o);l=l.redIAdd(l),l=l.redIAdd(l),e=f,r=c.redMul(a.redISub(f)).redISub(l),n=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),m=this.y.redSqr(),v=m.redSqr(),T=this.x.redAdd(m).redSqr().redISub(h).redISub(v);T=T.redIAdd(T);var x=h.redAdd(h).redIAdd(h),b=x.redSqr(),_=v.redIAdd(v);_=_.redIAdd(_),_=_.redIAdd(_),e=b.redISub(T).redISub(T),r=x.redMul(T.redISub(e)).redISub(_),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};qt.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var c=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),f=c.redSqr().redISub(a).redISub(a);e=f;var l=o.redIAdd(o);l=l.redIAdd(l),l=l.redIAdd(l),r=c.redMul(a.redISub(f)).redISub(l),n=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),m=this.y.redSqr(),v=this.x.redMul(m),T=this.x.redSub(h).redMul(this.x.redAdd(h));T=T.redAdd(T).redIAdd(T);var x=v.redIAdd(v);x=x.redIAdd(x);var b=x.redAdd(x);e=T.redSqr().redISub(b),n=this.y.redAdd(this.z).redSqr().redISub(m).redISub(h);var _=m.redSqr();_=_.redIAdd(_),_=_.redIAdd(_),_=_.redIAdd(_),r=T.redMul(x.redISub(e)).redISub(_)}return this.curve.jpoint(e,r,n)};qt.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),c=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),f=r.redAdd(r);f=f.redIAdd(f);var l=f.redMul(a),h=c.redSqr().redISub(l.redAdd(l)),m=l.redISub(h),v=a.redSqr();v=v.redIAdd(v),v=v.redIAdd(v),v=v.redIAdd(v);var T=c.redMul(m).redISub(v),x=n.redAdd(n).redMul(i);return this.curve.jpoint(h,T,x)};qt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var c=a.redSqr(),f=i.redIAdd(i);f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var l=s.redIAdd(a).redSqr().redISub(o).redISub(c).redISub(f),h=r.redMul(l);h=h.redIAdd(h),h=h.redIAdd(h);var m=this.x.redMul(c).redISub(h);m=m.redIAdd(m),m=m.redIAdd(m);var v=this.y.redMul(l.redMul(f.redISub(l)).redISub(a.redMul(c)));v=v.redIAdd(v),v=v.redIAdd(v),v=v.redIAdd(v);var T=this.z.redAdd(a).redSqr().redISub(n).redISub(c);return this.curve.jpoint(m,v,T)};qt.prototype.mul=function(e,r){return e=new ae(e,r),this.curve._wnafMul(this,e)};qt.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};qt.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};qt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};qt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Wa=eo(function(t,e){var r=e;r.base=ss,r.short=L_,r.mont=null,r.edwards=null}),Ya=eo(function(t,e){var r=e,n=br.assert;function i(a){a.type==="short"?this.curve=new Wa.short(a):a.type==="edwards"?this.curve=new Wa.edwards(a):this.curve=new Wa.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(a,c){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var f=new i(c);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:f}),f}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:rr.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:rr.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:rr.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:rr.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:rr.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:rr.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:rr.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:rr.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function fi(t){if(!(this instanceof fi))return new fi(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=en.toArray(t.entropy,t.entropyEnc||"hex"),r=en.toArray(t.nonce,t.nonceEnc||"hex"),n=en.toArray(t.pers,t.persEnc||"hex");Ul(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var oy=fi;fi.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};fi.prototype._hmac=function(){return new rr.hmac(this.hash,this.K)};fi.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};fi.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=en.toArray(e,r),n=en.toArray(n,i),Ul(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};fi.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=en.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,en.encode(o,r)};var wf=br.assert;function Vt(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var jl=Vt;Vt.fromPublic=function(e,r,n){return r instanceof Vt?r:new Vt(e,{pub:r,pubEnc:n})};Vt.fromPrivate=function(e,r,n){return r instanceof Vt?r:new Vt(e,{priv:r,privEnc:n})};Vt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Vt.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Vt.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Vt.prototype._importPrivate=function(e,r){this.priv=new ae(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Vt.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?wf(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&wf(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Vt.prototype.derive=function(e){return e.validate()||wf(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Vt.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};Vt.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};Vt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var U_=br.assert;function zc(t,e){if(t instanceof zc)return t;this._importDER(t,e)||(U_(t.r&&t.s,"Signature without r or s"),this.r=new ae(t.r,16),this.s=new ae(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var Gc=zc;function K_(){this.place=0}function Bu(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function Dh(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}zc.prototype._importDER=function(e,r){e=br.toArray(e,r);var n=new K_;if(e[n.place++]!==48)return!1;var i=Bu(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=Bu(e,n);if(s===!1)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=Bu(e,n);if(a===!1||e.length!==a+n.place)return!1;var c=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new ae(o),this.s=new ae(c),this.recoveryParam=null,!0};function Ru(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}zc.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=Dh(r),n=Dh(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Ru(i,r.length),i=i.concat(r),i.push(2),Ru(i,n.length);var s=i.concat(n),o=[48];return Ru(o,s.length),o=o.concat(s),br.encode(o,e)};var j_=function(){throw new Error("unsupported")},ay=br.assert;function Cr(t){if(!(this instanceof Cr))return new Cr(t);typeof t=="string"&&(ay(Object.prototype.hasOwnProperty.call(Ya,t),"Unknown curve "+t),t=Ya[t]),t instanceof Ya.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var $_=Cr;Cr.prototype.keyPair=function(e){return new jl(this,e)};Cr.prototype.keyFromPrivate=function(e,r){return jl.fromPrivate(this,e,r)};Cr.prototype.keyFromPublic=function(e,r){return jl.fromPublic(this,e,r)};Cr.prototype.genKeyPair=function(e){e||(e={});for(var r=new oy({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||j_(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new ae(2));;){var s=new ae(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Cr.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};Cr.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new ae(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),c=new oy({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),f=this.n.sub(new ae(1)),l=0;;l++){var h=i.k?i.k(l):new ae(c.generate(this.n.byteLength()));if(h=this._truncateToN(h,!0),!(h.cmpn(1)<=0||h.cmp(f)>=0)){var m=this.g.mul(h);if(!m.isInfinity()){var v=m.getX(),T=v.umod(this.n);if(T.cmpn(0)!==0){var x=h.invm(this.n).mul(T.mul(r.getPrivate()).iadd(e));if(x=x.umod(this.n),x.cmpn(0)!==0){var b=(m.getY().isOdd()?1:0)|(v.cmp(T)!==0?2:0);return i.canonical&&x.cmp(this.nh)>0&&(x=this.n.sub(x),b^=1),new Gc({r:T,s:x,recoveryParam:b})}}}}}};Cr.prototype.verify=function(e,r,n,i){e=this._truncateToN(new ae(e,16)),n=this.keyFromPublic(n,i),r=new Gc(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),c=a.mul(e).umod(this.n),f=a.mul(s).umod(this.n),l;return this.curve._maxwellTrick?(l=this.g.jmulAdd(c,n.getPublic(),f),l.isInfinity()?!1:l.eqXToP(s)):(l=this.g.mulAdd(c,n.getPublic(),f),l.isInfinity()?!1:l.getX().umod(this.n).cmp(s)===0)};Cr.prototype.recoverPubKey=function(t,e,r,n){ay((3&r)===r,"The recovery param is more than two bits"),e=new Gc(e,n);var i=this.n,s=new ae(t),o=e.r,a=e.s,c=r&1,f=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");f?o=this.curve.pointFromX(o.add(this.curve.n),c):o=this.curve.pointFromX(o,c);var l=e.r.invm(i),h=i.sub(s).mul(l).umod(i),m=a.mul(l).umod(i);return this.g.mulAdd(h,o,m)};Cr.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new Gc(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var H_=eo(function(t,e){var r=e;r.version="6.5.4",r.utils=br,r.rand=function(){throw new Error("unsupported")},r.curve=Wa,r.curves=Ya,r.ec=$_,r.eddsa=null}),q_=H_.ec;const z_="signing-key/5.7.0",_f=new M(z_);let Ou=null;function gn(){return Ou||(Ou=new q_("secp256k1")),Ou}class $i{constructor(e){j(this,"curve","secp256k1"),j(this,"privateKey",X(e)),Sn(this.privateKey)!==32&&_f.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=gn().keyFromPrivate(Y(this.privateKey));j(this,"publicKey","0x"+r.getPublic(!1,"hex")),j(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),j(this,"_isSigningKey",!0)}_addPoint(e){const r=gn().keyFromPublic(Y(this.publicKey)),n=gn().keyFromPublic(Y(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=gn().keyFromPrivate(Y(this.privateKey)),n=Y(e);n.length!==32&&_f.throwArgumentError("bad digest length","digest",e);const i=r.sign(n,{canonical:!0});return ts({recoveryParam:i.recoveryParam,r:ct("0x"+i.r.toString(16),32),s:ct("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const r=gn().keyFromPrivate(Y(this.privateKey)),n=gn().keyFromPublic(Y($l(e)));return ct("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function cy(t,e){const r=ts(e),n={r:Y(r.r),s:Y(r.s)};return"0x"+gn().recoverPubKey(Y(t),n,r.recoveryParam).encode("hex",!1)}function $l(t,e){const r=Y(t);if(r.length===32){const n=new $i(r);return e?"0x"+gn().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return e?X(r):"0x"+gn().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return e?"0x"+gn().keyFromPublic(r).getPublic(!0,"hex"):X(r)}return _f.throwArgumentError("invalid public or private key","key","[REDACTED]")}const G_="transactions/5.7.0",Gt=new M(G_);var Ef;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(Ef||(Ef={}));function Hl(t){return t==="0x"?null:Ge(t)}function zt(t){return t==="0x"?Cl:W.from(t)}const V_=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],J_={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function ci(t){const e=$l(t);return Ge(_t(nt(_t(e,1)),12))}function la(t,e){return ci(cy(Y(t),e))}function hr(t,e){const r=vn(W.from(t).toHexString());return r.length>32&&Gt.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function Du(t,e){return{address:Ge(t),storageKeys:(e||[]).map((r,n)=>(Sn(r)!==32&&Gt.throwArgumentError("invalid access list storageKey",`accessList[${t}:${n}]`,r),r.toLowerCase()))}}function _i(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(r.length>2&&Gt.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),Du(r[0],r[1])):Du(r.address,r.storageKeys));const e=Object.keys(t).map(r=>{const n=t[r].reduce((i,s)=>(i[s]=!0,i),{});return Du(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function uy(t){return _i(t).map(e=>[e.address,e.storageKeys])}function fy(t,e){if(t.gasPrice!=null){const n=W.from(t.gasPrice),i=W.from(t.maxFeePerGas||0);n.eq(i)||Gt.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const r=[hr(t.chainId||0,"chainId"),hr(t.nonce||0,"nonce"),hr(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),hr(t.maxFeePerGas||0,"maxFeePerGas"),hr(t.gasLimit||0,"gasLimit"),t.to!=null?Ge(t.to):"0x",hr(t.value||0,"value"),t.data||"0x",uy(t.accessList||[])];if(e){const n=ts(e);r.push(hr(n.recoveryParam,"recoveryParam")),r.push(vn(n.r)),r.push(vn(n.s))}return Yt(["0x02",Gi(r)])}function ly(t,e){const r=[hr(t.chainId||0,"chainId"),hr(t.nonce||0,"nonce"),hr(t.gasPrice||0,"gasPrice"),hr(t.gasLimit||0,"gasLimit"),t.to!=null?Ge(t.to):"0x",hr(t.value||0,"value"),t.data||"0x",uy(t.accessList||[])];if(e){const n=ts(e);r.push(hr(n.recoveryParam,"recoveryParam")),r.push(vn(n.r)),r.push(vn(n.s))}return Yt(["0x01",Gi(r)])}function W_(t,e){kl(t,J_);const r=[];V_.forEach(function(o){let a=t[o.name]||[];const c={};o.numeric&&(c.hexPad="left"),a=Y(X(a,c)),o.length&&a.length!==o.length&&a.length>0&&Gt.throwArgumentError("invalid length for "+o.name,"transaction:"+o.name,a),o.maxLength&&(a=vn(a),a.length>o.maxLength&&Gt.throwArgumentError("invalid length for "+o.name,"transaction:"+o.name,a)),r.push(X(a))});let n=0;if(t.chainId!=null?(n=t.chainId,typeof n!="number"&&Gt.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!aa(e)&&e.v>28&&(n=Math.floor((e.v-35)/2)),n!==0&&(r.push(X(n)),r.push("0x"),r.push("0x")),!e)return Gi(r);const i=ts(e);let s=27+i.recoveryParam;return n!==0?(r.pop(),r.pop(),r.pop(),s+=n*2+8,i.v>28&&i.v!==s&&Gt.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):i.v!==s&&Gt.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),r.push(X(s)),r.push(vn(Y(i.r))),r.push(vn(Y(i.s))),Gi(r)}function Af(t,e){if(t.type==null||t.type===0)return t.accessList!=null&&Gt.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),W_(t,e);switch(t.type){case 1:return ly(t,e);case 2:return fy(t,e)}return Gt.throwError(`unsupported transaction type: ${t.type}`,M.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}function dy(t,e,r){try{const n=zt(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");t.v=n}catch{Gt.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=ct(e[1],32),t.s=ct(e[2],32);try{const n=nt(r(t));t.from=la(n,{r:t.r,s:t.s,recoveryParam:t.v})}catch{}}function Y_(t){const e=$c(t.slice(1));e.length!==9&&e.length!==12&&Gt.throwArgumentError("invalid component count for transaction type: 2","payload",X(t));const r=zt(e[2]),n=zt(e[3]),i={type:2,chainId:zt(e[0]).toNumber(),nonce:zt(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:zt(e[4]),to:Hl(e[5]),value:zt(e[6]),data:e[7],accessList:_i(e[8])};return e.length===9||(i.hash=nt(t),dy(i,e.slice(9),fy)),i}function Q_(t){const e=$c(t.slice(1));e.length!==8&&e.length!==11&&Gt.throwArgumentError("invalid component count for transaction type: 1","payload",X(t));const r={type:1,chainId:zt(e[0]).toNumber(),nonce:zt(e[1]).toNumber(),gasPrice:zt(e[2]),gasLimit:zt(e[3]),to:Hl(e[4]),value:zt(e[5]),data:e[6],accessList:_i(e[7])};return e.length===8||(r.hash=nt(t),dy(r,e.slice(8),ly)),r}function X_(t){const e=$c(t);e.length!==9&&e.length!==6&&Gt.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:zt(e[0]).toNumber(),gasPrice:zt(e[1]),gasLimit:zt(e[2]),to:Hl(e[3]),value:zt(e[4]),data:e[5],chainId:0};if(e.length===6)return r;try{r.v=W.from(e[6]).toNumber()}catch{return r}if(r.r=ct(e[7],32),r.s=ct(e[8],32),W.from(r.r).isZero()&&W.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=e.slice(0,6);r.chainId!==0&&(i.push(X(r.chainId)),i.push("0x"),i.push("0x"),n-=r.chainId*2+8);const s=nt(Gi(i));try{r.from=la(s,{r:X(r.r),s:X(r.s),recoveryParam:n})}catch{}r.hash=nt(t)}return r.type=null,r}function hy(t){const e=Y(t);if(e[0]>127)return X_(e);switch(e[0]){case 1:return Q_(e);case 2:return Y_(e)}return Gt.throwError(`unsupported transaction type: ${e[0]}`,M.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const Z_="contracts/5.7.0";var li=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{f(n.next(l))}catch(h){o(h)}}function c(l){try{f(n.throw(l))}catch(h){o(h)}}function f(l){l.done?s(l.value):i(l.value).then(a,c)}f((n=n.apply(t,e||[])).next())})};const rt=new M(Z_),e2={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0,ccipReadEnabled:!0};function pc(t,e){return li(this,void 0,void 0,function*(){const r=yield e;typeof r!="string"&&rt.throwArgumentError("invalid address or ENS name","name",r);try{return Ge(r)}catch{}t||rt.throwError("a provider or signer is needed to resolve ENS names",M.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield t.resolveName(r);return n==null&&rt.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n})}function Mo(t,e,r){return li(this,void 0,void 0,function*(){return Array.isArray(r)?yield Promise.all(r.map((n,i)=>Mo(t,Array.isArray(e)?e[i]:e[n.name],n))):r.type==="address"?yield pc(t,e):r.type==="tuple"?yield Mo(t,e,r.components):r.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>Mo(t,n,r.arrayChildren))):Promise.reject(rt.makeError("invalid value for array",M.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function Vc(t,e,r){return li(this,void 0,void 0,function*(){let n={};r.length===e.inputs.length+1&&typeof r[r.length-1]=="object"&&(n=ut(r.pop())),rt.checkArgumentCount(r.length,e.inputs.length,"passed to contract"),t.signer?n.from?n.from=yt({override:pc(t.signer,n.from),signer:t.signer.getAddress()}).then(f=>li(this,void 0,void 0,function*(){return Ge(f.signer)!==f.override&&rt.throwError("Contract with a Signer cannot override from",M.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),f.override})):n.from=t.signer.getAddress():n.from&&(n.from=pc(t.provider,n.from));const i=yield yt({args:Mo(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:yt(n)||{}}),s=t.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},a=i.overrides;if(a.nonce!=null&&(o.nonce=W.from(a.nonce).toNumber()),a.gasLimit!=null&&(o.gasLimit=W.from(a.gasLimit)),a.gasPrice!=null&&(o.gasPrice=W.from(a.gasPrice)),a.maxFeePerGas!=null&&(o.maxFeePerGas=W.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=W.from(a.maxPriorityFeePerGas)),a.from!=null&&(o.from=a.from),a.type!=null&&(o.type=a.type),a.accessList!=null&&(o.accessList=_i(a.accessList)),o.gasLimit==null&&e.gas!=null){let f=21e3;const l=Y(s);for(let h=0;h<l.length;h++)f+=4,l[h]&&(f+=64);o.gasLimit=W.from(e.gas).add(f)}if(a.value){const f=W.from(a.value);!f.isZero()&&!e.payable&&rt.throwError("non-payable method cannot override value",M.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),o.value=f}a.customData&&(o.customData=ut(a.customData)),a.ccipReadEnabled&&(o.ccipReadEnabled=!!a.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const c=Object.keys(n).filter(f=>n[f]!=null);return c.length&&rt.throwError(`cannot override ${c.map(f=>JSON.stringify(f)).join(",")}`,M.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:c}),o})}function t2(t,e){return function(...r){return Vc(t,e,r)}}function r2(t,e){const r=t.signer||t.provider;return function(...n){return li(this,void 0,void 0,function*(){r||rt.throwError("estimate require a provider or signer",M.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield Vc(t,e,n);return yield r.estimateGas(i)})}}function py(t,e){const r=e.wait.bind(e);e.wait=n=>r(n).then(i=>(i.events=i.logs.map(s=>{let o=Xt(s),a=null;try{a=t.interface.parseLog(s)}catch{}return a&&(o.args=a.args,o.decode=(c,f)=>t.interface.decodeEventLog(a.eventFragment,c,f),o.event=a.name,o.eventSignature=a.signature),o.removeListener=()=>t.provider,o.getBlock=()=>t.provider.getBlock(i.blockHash),o.getTransaction=()=>t.provider.getTransaction(i.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(i),o}),i))}function gy(t,e,r){const n=t.signer||t.provider;return function(...i){return li(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const c=ut(i.pop());c.blockTag!=null&&(s=yield c.blockTag),delete c.blockTag,i.push(c)}t.deployTransaction!=null&&(yield t._deployed(s));const o=yield Vc(t,e,i),a=yield n.call(o,s);try{let c=t.interface.decodeFunctionResult(e,a);return r&&e.outputs.length===1&&(c=c[0]),c}catch(c){throw c.code===M.errors.CALL_EXCEPTION&&(c.address=t.address,c.args=i,c.transaction=o),c}})}}function n2(t,e){return function(...r){return li(this,void 0,void 0,function*(){t.signer||rt.throwError("sending a transaction requires a signer",M.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.deployTransaction!=null&&(yield t._deployed());const n=yield Vc(t,e,r),i=yield t.signer.sendTransaction(n);return py(t,i),i})}}function Fh(t,e,r){return e.constant?gy(t,e,r):n2(t,e)}function yy(t){return t.address&&(t.topics==null||t.topics.length===0)?"*":(t.address||"*")+"@"+(t.topics?t.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class qo{constructor(e,r){j(this,"tag",e),j(this,"filter",r),this._listeners=[]}addListener(e,r){this._listeners.push({listener:e,once:r})}removeListener(e){let r=!1;this._listeners=this._listeners.filter(n=>r||n.listener!==e?!0:(r=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const r=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const i=e.slice();return setTimeout(()=>{n.listener.apply(this,i)},0),!n.once}),r}prepareEvent(e){}getEmit(e){return[e]}}class i2 extends qo{constructor(){super("error",null)}}class Lh extends qo{constructor(e,r,n,i){const s={address:e};let o=r.getEventTopic(n);i?(o!==i[0]&&rt.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[o],super(yy(s),s),j(this,"address",e),j(this,"interface",r),j(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(r,n)=>this.interface.decodeEventLog(this.fragment,r,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(r){e.args=null,e.decodeError=r}}getEmit(e){const r=Pg(e.args);if(r.length)throw r[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class Uh extends qo{constructor(e,r){super("*",{address:e}),j(this,"address",e),j(this,"interface",r)}prepareEvent(e){super.prepareEvent(e);try{const r=this.interface.parseLog(e);e.event=r.name,e.eventSignature=r.signature,e.decode=(n,i)=>this.interface.decodeEventLog(r.eventFragment,n,i),e.args=r.args}catch{}}}class ql{constructor(e,r,n){j(this,"interface",Kt(new.target,"getInterface")(r)),n==null?(j(this,"provider",null),j(this,"signer",null)):Gn.isSigner(n)?(j(this,"provider",n.provider||null),j(this,"signer",n)):is.isProvider(n)?(j(this,"provider",n),j(this,"signer",null)):rt.throwArgumentError("invalid signer or provider","signerOrProvider",n),j(this,"callStatic",{}),j(this,"estimateGas",{}),j(this,"functions",{}),j(this,"populateTransaction",{}),j(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(a=>{const c=this.interface.events[a];j(this.filters,a,(...f)=>({address:this.address,topics:this.interface.encodeFilterTopics(c,f)})),o[c.name]||(o[c.name]=[]),o[c.name].push(a)}),Object.keys(o).forEach(a=>{const c=o[a];c.length===1?j(this.filters,a,this.filters[c[0]]):rt.warn(`Duplicate definition of ${a} (${c.join(", ")})`)})}if(j(this,"_runningEvents",{}),j(this,"_wrappedEmits",{}),e==null&&rt.throwArgumentError("invalid contract address or ENS name","addressOrName",e),j(this,"address",e),this.provider)j(this,"resolvedAddress",pc(this.provider,e));else try{j(this,"resolvedAddress",Promise.resolve(Ge(e)))}catch{rt.throwError("provider is required to use ENS name as contract address",M.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const i={},s={};Object.keys(this.interface.functions).forEach(o=>{const a=this.interface.functions[o];if(s[o]){rt.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}s[o]=!0;{const c=a.name;i[`%${c}`]||(i[`%${c}`]=[]),i[`%${c}`].push(o)}this[o]==null&&j(this,o,Fh(this,a,!0)),this.functions[o]==null&&j(this.functions,o,Fh(this,a,!1)),this.callStatic[o]==null&&j(this.callStatic,o,gy(this,a,!0)),this.populateTransaction[o]==null&&j(this.populateTransaction,o,t2(this,a)),this.estimateGas[o]==null&&j(this.estimateGas,o,r2(this,a))}),Object.keys(i).forEach(o=>{const a=i[o];if(a.length>1)return;o=o.substring(1);const c=a[0];try{this[o]==null&&j(this,o,this[c])}catch{}this.functions[o]==null&&j(this.functions,o,this.functions[c]),this.callStatic[o]==null&&j(this.callStatic,o,this.callStatic[c]),this.populateTransaction[o]==null&&j(this.populateTransaction,o,this.populateTransaction[c]),this.estimateGas[o]==null&&j(this.estimateGas,o,this.estimateGas[c])})}static getContractAddress(e){return Hc(e)}static getInterface(e){return vf.isInterface(e)?e:new vf(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(r=>(r==="0x"&&rt.throwError("contract not deployed",M.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||rt.throwError("sending a transactions require a signer",M.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const r=ut(e||{});return["from","to"].forEach(function(n){r[n]!=null&&rt.throwError("cannot override "+n,M.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(r))}connect(e){typeof e=="string"&&(e=new fa(e,this.provider));const r=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&j(r,"deployTransaction",this.deployTransaction),r}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return lc.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new i2);if(e==="event")return this._normalizeRunningEvent(new qo("event",null));if(e==="*")return this._normalizeRunningEvent(new Uh(this.address,this.interface));const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new Lh(this.address,this.interface,r))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const i=this.interface.getEvent(n);return this._normalizeRunningEvent(new Lh(this.address,this.interface,i,e.topics))}catch{}const r={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new qo(yy(r),r))}return this._normalizeRunningEvent(new Uh(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const r=this._wrappedEmits[e.tag];r&&e.filter&&(this.provider.off(e.filter,r),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,r,n){const i=Xt(r);return i.removeListener=()=>{!n||(e.removeListener(n),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(r.blockHash),i.getTransaction=()=>this.provider.getTransaction(r.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(r.transactionHash),e.prepareEvent(i),i}_addEventListener(e,r,n){if(this.provider||rt.throwError("events require a provider or a signer with a provider",M.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(r,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let o=this._wrapEvent(e,s,r);if(o.decodeError==null)try{const a=e.getEmit(o);this.emit(e.filter,...a)}catch(a){o.decodeError=a.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,r,n){const i=this._getRunningEvent(e),s=ut(i.filter);return typeof r=="string"&&ce(r,32)?(n!=null&&rt.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),s.blockHash=r):(s.fromBlock=r??0,s.toBlock=n??"latest"),this.provider.getLogs(s).then(o=>o.map(a=>this._wrapEvent(i,a,null)))}on(e,r){return this._addEventListener(this._getRunningEvent(e),r,!1),this}once(e,r){return this._addEventListener(this._getRunningEvent(e),r,!0),this}emit(e,...r){if(!this.provider)return!1;const n=this._getRunningEvent(e),i=n.run(r)>0;return this._checkRunningEvents(n),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((r,n)=>r+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const r=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(i=>{r.push(i)});return r}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const i=this._runningEvents[n];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const r=this._getRunningEvent(e);return r.removeAllListeners(),this._checkRunningEvents(r),this}off(e,r){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(r),this._checkRunningEvents(n),this}removeListener(e,r){return this.off(e,r)}}class gc extends ql{}class my{constructor(e,r,n){let i=null;typeof r=="string"?i=r:vi(r)?i=X(r):r&&typeof r.object=="string"?i=r.object:i="!",i.substring(0,2)!=="0x"&&(i="0x"+i),(!ce(i)||i.length%2)&&rt.throwArgumentError("invalid bytecode","bytecode",r),n&&!Gn.isSigner(n)&&rt.throwArgumentError("invalid signer","signer",n),j(this,"bytecode",i),j(this,"interface",Kt(new.target,"getInterface")(e)),j(this,"signer",n||null)}getDeployTransaction(...e){let r={};if(e.length===this.interface.deploy.inputs.length+1&&typeof e[e.length-1]=="object"){r=ut(e.pop());for(const n in r)if(!e2[n])throw new Error("unknown transaction override "+n)}return["data","from","to"].forEach(n=>{r[n]!=null&&rt.throwError("cannot override "+n,M.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.value&&!W.from(r.value).isZero()&&!this.interface.deploy.payable&&rt.throwError("non-payable constructor cannot override value",M.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value}),rt.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor"),r.data=X(at([this.bytecode,this.interface.encodeDeploy(e)])),r}deploy(...e){return li(this,void 0,void 0,function*(){let r={};e.length===this.interface.deploy.inputs.length+1&&(r=e.pop()),rt.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");const n=yield Mo(this.signer,e,this.interface.deploy.inputs);n.push(r);const i=this.getDeployTransaction(...n),s=yield this.signer.sendTransaction(i),o=Kt(this.constructor,"getContractAddress")(s),a=Kt(this.constructor,"getContract")(o,this.interface,this.signer);return py(a,s),j(a,"deployTransaction",s),a})}attach(e){return this.constructor.getContract(e,this.interface,this.signer)}connect(e){return new this.constructor(this.interface,this.bytecode,e)}static fromSolidity(e,r){e==null&&rt.throwError("missing compiler output",M.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),typeof e=="string"&&(e=JSON.parse(e));const n=e.abi;let i=null;return e.bytecode?i=e.bytecode:e.evm&&e.evm.bytecode&&(i=e.evm.bytecode),new this(n,i,r)}static getInterface(e){return gc.getInterface(e)}static getContractAddress(e){return Hc(e)}static getContract(e,r,n){return new gc(e,r,n)}}class by{constructor(e){j(this,"alphabet",e),j(this,"base",e.length),j(this,"_alphabetMap",{}),j(this,"_leader",e.charAt(0));for(let r=0;r<e.length;r++)this._alphabetMap[e.charAt(r)]=r}encode(e){let r=Y(e);if(r.length===0)return"";let n=[0];for(let s=0;s<r.length;++s){let o=r[s];for(let a=0;a<n.length;++a)o+=n[a]<<8,n[a]=o%this.base,o=o/this.base|0;for(;o>0;)n.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;r[s]===0&&s<r.length-1;++s)i+=this._leader;for(let s=n.length-1;s>=0;--s)i+=this.alphabet[n[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let r=[];if(e.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<r.length;++o)s+=r[o]*this.base,r[o]=s&255,s>>=8;for(;s>0;)r.push(s&255),s>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)r.push(0);return Y(new Uint8Array(r.reverse()))}}new by("abcdefghijklmnopqrstuvwxyz234567");const Ls=new by("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var Us;(function(t){t.sha256="sha256",t.sha512="sha512"})(Us||(Us={}));const s2="sha2/5.7.0",o2=new M(s2);function xy(t){return"0x"+rr.ripemd160().update(Y(t)).digest("hex")}function $n(t){return"0x"+rr.sha256().update(Y(t)).digest("hex")}function a2(t){return"0x"+rr.sha512().update(Y(t)).digest("hex")}function zo(t,e,r){return Us[t]||o2.throwError("unsupported algorithm "+t,M.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+rr.hmac(rr[t],Y(e)).update(Y(r)).digest("hex")}function zl(t,e,r,n,i){t=Y(t),e=Y(e);let s,o=1;const a=new Uint8Array(n),c=new Uint8Array(e.length+4);c.set(e);let f,l;for(let h=1;h<=o;h++){c[e.length]=h>>24&255,c[e.length+1]=h>>16&255,c[e.length+2]=h>>8&255,c[e.length+3]=h&255;let m=Y(zo(i,t,c));s||(s=m.length,l=new Uint8Array(s),o=Math.ceil(n/s),f=n-(o-1)*s),l.set(m);for(let x=1;x<r;x++){m=Y(zo(i,t,m));for(let b=0;b<s;b++)l[b]^=m[b]}const v=(h-1)*s,T=h===o?f:s;a.set(Y(l).slice(0,T),v)}return X(a)}const c2="wordlists/5.7.0",u2=new M(c2);class os{constructor(e){u2.checkAbstract(new.target,os),j(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const r=[];for(let n=0;n<2048;n++){const i=e.getWord(n);if(n!==e.getWordIndex(i))return"0x";r.push(i)}return oi(r.join(`
`)+`
`)}static register(e,r){r||(r=e.locale)}}const f2="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let Bo=null;function Kh(t){if(Bo==null&&(Bo=f2.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),os.check(t)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw Bo=null,new Error("BIP39 Wordlist for en (English) FAILED")}class l2 extends os{constructor(){super("en")}getWord(e){return Kh(this),Bo[e]}getWordIndex(e){return Kh(this),Bo.indexOf(e)}}const vy=new l2;os.register(vy);const yc={en:vy},d2="hdnode/5.7.0",Go=new M(d2),h2=W.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),p2=At("Bitcoin seed"),As=2147483648;function wy(t){return(1<<t)-1<<8-t}function g2(t){return(1<<t)-1}function Ca(t){return ct(X(t),32)}function jh(t){return Ls.encode(at([t,_t($n($n(t)),0,4)]))}function Gl(t){if(t==null)return yc.en;if(typeof t=="string"){const e=yc[t];return e==null&&Go.throwArgumentError("unknown locale","wordlist",t),e}return t}const ps={},Ks="m/44'/60'/0'/0/0";class pr{constructor(e,r,n,i,s,o,a,c){if(e!==ps)throw new Error("HDNode constructor cannot be called directly");if(r){const f=new $i(r);j(this,"privateKey",f.privateKey),j(this,"publicKey",f.compressedPublicKey)}else j(this,"privateKey",null),j(this,"publicKey",X(n));j(this,"parentFingerprint",i),j(this,"fingerprint",_t(xy($n(this.publicKey)),0,4)),j(this,"address",ci(this.publicKey)),j(this,"chainCode",s),j(this,"index",o),j(this,"depth",a),c==null?(j(this,"mnemonic",null),j(this,"path",null)):typeof c=="string"?(j(this,"mnemonic",null),j(this,"path",c)):(j(this,"mnemonic",c),j(this,"path",c.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return jh(at([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",X(this.depth),this.parentFingerprint,ct(X(this.index),4),this.chainCode,this.privateKey!=null?at(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new pr(ps,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let r=this.path;r&&(r+="/"+(e&~As));const n=new Uint8Array(37);if(e&As){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set(Y(this.privateKey),1),r&&(r+="'")}else n.set(Y(this.publicKey));for(let h=24;h>=0;h-=8)n[33+(h>>3)]=e>>24-h&255;const i=Y(zo(Us.sha512,this.chainCode,n)),s=i.slice(0,32),o=i.slice(32);let a=null,c=null;this.privateKey?a=Ca(W.from(s).add(this.privateKey).mod(h2)):c=new $i(X(s))._addPoint(this.publicKey);let f=r;const l=this.mnemonic;return l&&(f=Object.freeze({phrase:l.phrase,path:r,locale:l.locale||"en"})),new pr(ps,a,c,this.fingerprint,Ca(o),e,this.depth+1,f)}derivePath(e){const r=e.split("/");if(r.length===0||r[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);r[0]==="m"&&r.shift();let n=this;for(let i=0;i<r.length;i++){const s=r[i];if(s.match(/^[0-9]+'$/)){const o=parseInt(s.substring(0,s.length-1));if(o>=As)throw new Error("invalid path index - "+s);n=n._derive(As+o)}else if(s.match(/^[0-9]+$/)){const o=parseInt(s);if(o>=As)throw new Error("invalid path index - "+s);n=n._derive(o)}else throw new Error("invalid path component - "+s)}return n}static _fromSeed(e,r){const n=Y(e);if(n.length<16||n.length>64)throw new Error("invalid seed");const i=Y(zo(Us.sha512,p2,n));return new pr(ps,Ca(i.slice(0,32)),null,"0x00000000",Ca(i.slice(32)),0,0,r)}static fromMnemonic(e,r,n){return n=Gl(n),e=Wc(Jc(e,n),n),pr._fromSeed(_y(e,r),{phrase:e,path:"m",locale:n.locale})}static fromSeed(e){return pr._fromSeed(e,null)}static fromExtendedKey(e){const r=Ls.decode(e);(r.length!==82||jh(r.slice(0,78))!==e)&&Go.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const n=r[4],i=X(r.slice(5,9)),s=parseInt(X(r.slice(9,13)).substring(2),16),o=X(r.slice(13,45)),a=r.slice(45,78);switch(X(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new pr(ps,null,X(a),i,o,s,n,null);case"0x0488ade4":case"0x04358394 ":if(a[0]!==0)break;return new pr(ps,X(a.slice(1)),null,i,o,s,n,null)}return Go.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function _y(t,e){e||(e="");const r=At("mnemonic"+e,Tn.NFKD);return zl(At(t,Tn.NFKD),r,2048,64,"sha512")}function Jc(t,e){e=Gl(e),Go.checkNormalize();const r=e.split(t);if(r.length%3!==0)throw new Error("invalid mnemonic");const n=Y(new Uint8Array(Math.ceil(11*r.length/8)));let i=0;for(let f=0;f<r.length;f++){let l=e.getWordIndex(r[f].normalize("NFKD"));if(l===-1)throw new Error("invalid mnemonic");for(let h=0;h<11;h++)l&1<<10-h&&(n[i>>3]|=1<<7-i%8),i++}const s=32*r.length/3,o=r.length/3,a=wy(o);if((Y($n(n.slice(0,s/8)))[0]&a)!==(n[n.length-1]&a))throw new Error("invalid checksum");return X(n.slice(0,s/8))}function Wc(t,e){if(e=Gl(e),t=Y(t),t.length%4!==0||t.length<16||t.length>32)throw new Error("invalid entropy");const r=[0];let n=11;for(let o=0;o<t.length;o++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=t[o],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=t[o]>>8-n,r.push(t[o]&g2(8-n)),n+=3);const i=t.length/4,s=Y($n(t))[0]&wy(i);return r[r.length-1]<<=i,r[r.length-1]|=s>>8-i,e.join(r.map(o=>e.getWord(o)))}function y2(t,e){try{return Jc(t,e),!0}catch{}return!1}function m2(t){return(typeof t!="number"||t<0||t>=As||t%1)&&Go.throwArgumentError("invalid account index","index",t),`m/44'/60'/${t}'/0/0`}const b2="random/5.7.0",Sf=new M(b2);function x2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof Kd<"u")return Kd;throw new Error("unable to locate global object")}const $h=x2();let Qa=$h.crypto||$h.msCrypto;(!Qa||!Qa.getRandomValues)&&(Sf.warn("WARNING: Missing strong random number source"),Qa={getRandomValues:function(t){return Sf.throwError("no secure random source avaialble",M.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function Ps(t){(t<=0||t>1024||t%1||t!=t)&&Sf.throwArgumentError("invalid length","length",t);const e=new Uint8Array(t);return Qa.getRandomValues(e),Y(e)}function Ey(t){t=t.slice();for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t}var Ay={exports:{}};(function(t,e){(function(r){function n(y){return parseInt(y)===y}function i(y){if(!n(y.length))return!1;for(var d=0;d<y.length;d++)if(!n(y[d])||y[d]<0||y[d]>255)return!1;return!0}function s(y,d){if(y.buffer&&ArrayBuffer.isView(y)&&y.name==="Uint8Array")return d&&(y.slice?y=y.slice():y=Array.prototype.slice.call(y)),y;if(Array.isArray(y)){if(!i(y))throw new Error("Array contains invalid value: "+y);return new Uint8Array(y)}if(n(y.length)&&i(y))return new Uint8Array(y);throw new Error("unsupported array-like object")}function o(y){return new Uint8Array(y)}function a(y,d,A,O,p){(O!=null||p!=null)&&(y.slice?y=y.slice(O,p):y=Array.prototype.slice.call(y,O,p)),d.set(y,A)}var c=function(){function y(A){var O=[],p=0;for(A=encodeURI(A);p<A.length;){var R=A.charCodeAt(p++);R===37?(O.push(parseInt(A.substr(p,2),16)),p+=2):O.push(R)}return s(O)}function d(A){for(var O=[],p=0;p<A.length;){var R=A[p];R<128?(O.push(String.fromCharCode(R)),p++):R>191&&R<224?(O.push(String.fromCharCode((R&31)<<6|A[p+1]&63)),p+=2):(O.push(String.fromCharCode((R&15)<<12|(A[p+1]&63)<<6|A[p+2]&63)),p+=3)}return O.join("")}return{toBytes:y,fromBytes:d}}(),f=function(){function y(O){for(var p=[],R=0;R<O.length;R+=2)p.push(parseInt(O.substr(R,2),16));return p}var d="0123456789abcdef";function A(O){for(var p=[],R=0;R<O.length;R++){var U=O[R];p.push(d[(U&240)>>4]+d[U&15])}return p.join("")}return{toBytes:y,fromBytes:A}}(),l={16:10,24:12,32:14},h=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],m=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],v=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],T=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],x=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],b=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],_=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],k=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],N=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],D=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],C=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],L=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],$=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],q=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],J=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function re(y){for(var d=[],A=0;A<y.length;A+=4)d.push(y[A]<<24|y[A+1]<<16|y[A+2]<<8|y[A+3]);return d}var te=function(y){if(!(this instanceof te))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:s(y,!0)}),this._prepare()};te.prototype._prepare=function(){var y=l[this.key.length];if(y==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var d=0;d<=y;d++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var A=(y+1)*4,O=this.key.length/4,p=re(this.key),R,d=0;d<O;d++)R=d>>2,this._Ke[R][d%4]=p[d],this._Kd[y-R][d%4]=p[d];for(var U=0,K=O,H;K<A;){if(H=p[O-1],p[0]^=m[H>>16&255]<<24^m[H>>8&255]<<16^m[H&255]<<8^m[H>>24&255]^h[U]<<24,U+=1,O!=8)for(var d=1;d<O;d++)p[d]^=p[d-1];else{for(var d=1;d<O/2;d++)p[d]^=p[d-1];H=p[O/2-1],p[O/2]^=m[H&255]^m[H>>8&255]<<8^m[H>>16&255]<<16^m[H>>24&255]<<24;for(var d=O/2+1;d<O;d++)p[d]^=p[d-1]}for(var d=0,Z,Q;d<O&&K<A;)Z=K>>2,Q=K%4,this._Ke[Z][Q]=p[d],this._Kd[y-Z][Q]=p[d++],K++}for(var Z=1;Z<y;Z++)for(var Q=0;Q<4;Q++)H=this._Kd[Z][Q],this._Kd[Z][Q]=L[H>>24&255]^$[H>>16&255]^q[H>>8&255]^J[H&255]},te.prototype.encrypt=function(y){if(y.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var d=this._Ke.length-1,A=[0,0,0,0],O=re(y),p=0;p<4;p++)O[p]^=this._Ke[0][p];for(var R=1;R<d;R++){for(var p=0;p<4;p++)A[p]=T[O[p]>>24&255]^x[O[(p+1)%4]>>16&255]^b[O[(p+2)%4]>>8&255]^_[O[(p+3)%4]&255]^this._Ke[R][p];O=A.slice()}for(var U=o(16),K,p=0;p<4;p++)K=this._Ke[d][p],U[4*p]=(m[O[p]>>24&255]^K>>24)&255,U[4*p+1]=(m[O[(p+1)%4]>>16&255]^K>>16)&255,U[4*p+2]=(m[O[(p+2)%4]>>8&255]^K>>8)&255,U[4*p+3]=(m[O[(p+3)%4]&255]^K)&255;return U},te.prototype.decrypt=function(y){if(y.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var d=this._Kd.length-1,A=[0,0,0,0],O=re(y),p=0;p<4;p++)O[p]^=this._Kd[0][p];for(var R=1;R<d;R++){for(var p=0;p<4;p++)A[p]=k[O[p]>>24&255]^N[O[(p+3)%4]>>16&255]^D[O[(p+2)%4]>>8&255]^C[O[(p+1)%4]&255]^this._Kd[R][p];O=A.slice()}for(var U=o(16),K,p=0;p<4;p++)K=this._Kd[d][p],U[4*p]=(v[O[p]>>24&255]^K>>24)&255,U[4*p+1]=(v[O[(p+3)%4]>>16&255]^K>>16)&255,U[4*p+2]=(v[O[(p+2)%4]>>8&255]^K>>8)&255,U[4*p+3]=(v[O[(p+1)%4]&255]^K)&255;return U};var V=function(y){if(!(this instanceof V))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new te(y)};V.prototype.encrypt=function(y){if(y=s(y),y.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var d=o(y.length),A=o(16),O=0;O<y.length;O+=16)a(y,A,0,O,O+16),A=this._aes.encrypt(A),a(A,d,O);return d},V.prototype.decrypt=function(y){if(y=s(y),y.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var d=o(y.length),A=o(16),O=0;O<y.length;O+=16)a(y,A,0,O,O+16),A=this._aes.decrypt(A),a(A,d,O);return d};var E=function(y,d){if(!(this instanceof E))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!d)d=o(16);else if(d.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=s(d,!0),this._aes=new te(y)};E.prototype.encrypt=function(y){if(y=s(y),y.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var d=o(y.length),A=o(16),O=0;O<y.length;O+=16){a(y,A,0,O,O+16);for(var p=0;p<16;p++)A[p]^=this._lastCipherblock[p];this._lastCipherblock=this._aes.encrypt(A),a(this._lastCipherblock,d,O)}return d},E.prototype.decrypt=function(y){if(y=s(y),y.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var d=o(y.length),A=o(16),O=0;O<y.length;O+=16){a(y,A,0,O,O+16),A=this._aes.decrypt(A);for(var p=0;p<16;p++)d[O+p]=A[p]^this._lastCipherblock[p];a(y,this._lastCipherblock,0,O,O+16)}return d};var u=function(y,d,A){if(!(this instanceof u))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!d)d=o(16);else if(d.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");A||(A=1),this.segmentSize=A,this._shiftRegister=s(d,!0),this._aes=new te(y)};u.prototype.encrypt=function(y){if(y.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var d=s(y,!0),A,O=0;O<d.length;O+=this.segmentSize){A=this._aes.encrypt(this._shiftRegister);for(var p=0;p<this.segmentSize;p++)d[O+p]^=A[p];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(d,this._shiftRegister,16-this.segmentSize,O,O+this.segmentSize)}return d},u.prototype.decrypt=function(y){if(y.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var d=s(y,!0),A,O=0;O<d.length;O+=this.segmentSize){A=this._aes.encrypt(this._shiftRegister);for(var p=0;p<this.segmentSize;p++)d[O+p]^=A[p];a(this._shiftRegister,this._shiftRegister,0,this.segmentSize),a(y,this._shiftRegister,16-this.segmentSize,O,O+this.segmentSize)}return d};var g=function(y,d){if(!(this instanceof g))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!d)d=o(16);else if(d.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=s(d,!0),this._lastPrecipherIndex=16,this._aes=new te(y)};g.prototype.encrypt=function(y){for(var d=s(y,!0),A=0;A<d.length;A++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),d[A]^=this._lastPrecipher[this._lastPrecipherIndex++];return d},g.prototype.decrypt=g.prototype.encrypt;var w=function(y){if(!(this instanceof w))throw Error("Counter must be instanitated with `new`");y!==0&&!y&&(y=1),typeof y=="number"?(this._counter=o(16),this.setValue(y)):this.setBytes(y)};w.prototype.setValue=function(y){if(typeof y!="number"||parseInt(y)!=y)throw new Error("invalid counter value (must be an integer)");for(var d=15;d>=0;--d)this._counter[d]=y%256,y=y>>8},w.prototype.setBytes=function(y){if(y=s(y,!0),y.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=y},w.prototype.increment=function(){for(var y=15;y>=0;y--)if(this._counter[y]===255)this._counter[y]=0;else{this._counter[y]++;break}};var S=function(y,d){if(!(this instanceof S))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",d instanceof w||(d=new w(d)),this._counter=d,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new te(y)};S.prototype.encrypt=function(y){for(var d=s(y,!0),A=0;A<d.length;A++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),d[A]^=this._remainingCounter[this._remainingCounterIndex++];return d},S.prototype.decrypt=S.prototype.encrypt;function P(y){y=s(y,!0);var d=16-y.length%16,A=o(y.length+d);a(y,A);for(var O=y.length;O<A.length;O++)A[O]=d;return A}function I(y){if(y=s(y,!0),y.length<16)throw new Error("PKCS#7 invalid length");var d=y[y.length-1];if(d>16)throw new Error("PKCS#7 padding byte out of range");for(var A=y.length-d,O=0;O<d;O++)if(y[A+O]!==d)throw new Error("PKCS#7 invalid padding byte");var p=o(A);return a(y,p,0,0,A),p}var B={AES:te,Counter:w,ModeOfOperation:{ecb:V,cbc:E,cfb:u,ofb:g,ctr:S},utils:{hex:f,utf8:c},padding:{pkcs7:{pad:P,strip:I}},_arrayTest:{coerceArray:s,createArray:o,copyArray:a}};t.exports=B})()})(Ay);var bn=Ay.exports;const Sy="json-wallets/5.7.0";function Hi(t){return typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Y(t)}function fo(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function Vl(t){return typeof t=="string"?At(t,Tn.NFKC):Y(t)}function wt(t,e){let r=t;const n=e.toLowerCase().split("/");for(let i=0;i<n.length;i++){let s=null;for(const o in r)if(o.toLowerCase()===n[i]){s=r[o];break}if(s===null)return null;r=s}return r}function v2(t){const e=Y(t);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const r=X(e);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}const w2=new M(Sy);class _2 extends rs{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function Ty(t,e){const r=JSON.parse(t);e=Vl(e);const n=Ge(wt(r,"ethaddr")),i=Hi(wt(r,"encseed"));(!i||i.length%16!==0)&&w2.throwArgumentError("invalid encseed","json",t);const s=Y(zl(e,e,2e3,32,"sha256")).slice(0,16),o=i.slice(0,16),a=i.slice(16),c=new bn.ModeOfOperation.cbc(s,o),f=bn.padding.pkcs7.strip(Y(c.decrypt(a)));let l="";for(let v=0;v<f.length;v++)l+=String.fromCharCode(f[v]);const h=At(l),m=nt(h);return new _2({_isCrowdsaleAccount:!0,address:n,privateKey:m})}function Jl(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return e.encseed&&e.ethaddr}function Wl(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}function E2(t){if(Jl(t))try{return Ge(JSON.parse(t).ethaddr)}catch{return null}if(Wl(t))try{return Ge(JSON.parse(t).address)}catch{return null}return null}var ky={exports:{}};(function(t,e){(function(r){function i(x){const b=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let _=1779033703,k=3144134277,N=1013904242,D=2773480762,C=1359893119,L=2600822924,$=528734635,q=1541459225;const J=new Uint32Array(64);function re(S){let P=0,I=S.length;for(;I>=64;){let B=_,y=k,d=N,A=D,O=C,p=L,R=$,U=q,K,H,Z,Q,ee;for(H=0;H<16;H++)Z=P+H*4,J[H]=(S[Z]&255)<<24|(S[Z+1]&255)<<16|(S[Z+2]&255)<<8|S[Z+3]&255;for(H=16;H<64;H++)K=J[H-2],Q=(K>>>17|K<<32-17)^(K>>>19|K<<32-19)^K>>>10,K=J[H-15],ee=(K>>>7|K<<32-7)^(K>>>18|K<<32-18)^K>>>3,J[H]=(Q+J[H-7]|0)+(ee+J[H-16]|0)|0;for(H=0;H<64;H++)Q=(((O>>>6|O<<32-6)^(O>>>11|O<<32-11)^(O>>>25|O<<32-25))+(O&p^~O&R)|0)+(U+(b[H]+J[H]|0)|0)|0,ee=((B>>>2|B<<32-2)^(B>>>13|B<<32-13)^(B>>>22|B<<32-22))+(B&y^B&d^y&d)|0,U=R,R=p,p=O,O=A+Q|0,A=d,d=y,y=B,B=Q+ee|0;_=_+B|0,k=k+y|0,N=N+d|0,D=D+A|0,C=C+O|0,L=L+p|0,$=$+R|0,q=q+U|0,P+=64,I-=64}}re(x);let te,V=x.length%64,E=x.length/536870912|0,u=x.length<<3,g=V<56?56:120,w=x.slice(x.length-V,x.length);for(w.push(128),te=V+1;te<g;te++)w.push(0);return w.push(E>>>24&255),w.push(E>>>16&255),w.push(E>>>8&255),w.push(E>>>0&255),w.push(u>>>24&255),w.push(u>>>16&255),w.push(u>>>8&255),w.push(u>>>0&255),re(w),[_>>>24&255,_>>>16&255,_>>>8&255,_>>>0&255,k>>>24&255,k>>>16&255,k>>>8&255,k>>>0&255,N>>>24&255,N>>>16&255,N>>>8&255,N>>>0&255,D>>>24&255,D>>>16&255,D>>>8&255,D>>>0&255,C>>>24&255,C>>>16&255,C>>>8&255,C>>>0&255,L>>>24&255,L>>>16&255,L>>>8&255,L>>>0&255,$>>>24&255,$>>>16&255,$>>>8&255,$>>>0&255,q>>>24&255,q>>>16&255,q>>>8&255,q>>>0&255]}function s(x,b,_){x=x.length<=64?x:i(x);const k=64+b.length+4,N=new Array(k),D=new Array(64);let C,L=[];for(C=0;C<64;C++)N[C]=54;for(C=0;C<x.length;C++)N[C]^=x[C];for(C=0;C<b.length;C++)N[64+C]=b[C];for(C=k-4;C<k;C++)N[C]=0;for(C=0;C<64;C++)D[C]=92;for(C=0;C<x.length;C++)D[C]^=x[C];function $(){for(let q=k-1;q>=k-4;q--){if(N[q]++,N[q]<=255)return;N[q]=0}}for(;_>=32;)$(),L=L.concat(i(D.concat(i(N)))),_-=32;return _>0&&($(),L=L.concat(i(D.concat(i(N))).slice(0,_))),L}function o(x,b,_,k,N){let D;for(l(x,(2*_-1)*16,N,0,16),D=0;D<2*_;D++)f(x,D*16,N,16),c(N,k),l(N,0,x,b+D*16,16);for(D=0;D<_;D++)l(x,b+D*2*16,x,D*16,16);for(D=0;D<_;D++)l(x,b+(D*2+1)*16,x,(D+_)*16,16)}function a(x,b){return x<<b|x>>>32-b}function c(x,b){l(x,0,b,0,16);for(let _=8;_>0;_-=2)b[4]^=a(b[0]+b[12],7),b[8]^=a(b[4]+b[0],9),b[12]^=a(b[8]+b[4],13),b[0]^=a(b[12]+b[8],18),b[9]^=a(b[5]+b[1],7),b[13]^=a(b[9]+b[5],9),b[1]^=a(b[13]+b[9],13),b[5]^=a(b[1]+b[13],18),b[14]^=a(b[10]+b[6],7),b[2]^=a(b[14]+b[10],9),b[6]^=a(b[2]+b[14],13),b[10]^=a(b[6]+b[2],18),b[3]^=a(b[15]+b[11],7),b[7]^=a(b[3]+b[15],9),b[11]^=a(b[7]+b[3],13),b[15]^=a(b[11]+b[7],18),b[1]^=a(b[0]+b[3],7),b[2]^=a(b[1]+b[0],9),b[3]^=a(b[2]+b[1],13),b[0]^=a(b[3]+b[2],18),b[6]^=a(b[5]+b[4],7),b[7]^=a(b[6]+b[5],9),b[4]^=a(b[7]+b[6],13),b[5]^=a(b[4]+b[7],18),b[11]^=a(b[10]+b[9],7),b[8]^=a(b[11]+b[10],9),b[9]^=a(b[8]+b[11],13),b[10]^=a(b[9]+b[8],18),b[12]^=a(b[15]+b[14],7),b[13]^=a(b[12]+b[15],9),b[14]^=a(b[13]+b[12],13),b[15]^=a(b[14]+b[13],18);for(let _=0;_<16;++_)x[_]+=b[_]}function f(x,b,_,k){for(let N=0;N<k;N++)_[N]^=x[b+N]}function l(x,b,_,k,N){for(;N--;)_[k++]=x[b++]}function h(x){if(!x||typeof x.length!="number")return!1;for(let b=0;b<x.length;b++){const _=x[b];if(typeof _!="number"||_%1||_<0||_>=256)return!1}return!0}function m(x,b){if(typeof x!="number"||x%1)throw new Error("invalid "+b);return x}function v(x,b,_,k,N,D,C){if(_=m(_,"N"),k=m(k,"r"),N=m(N,"p"),D=m(D,"dkLen"),_===0||(_&_-1)!==0)throw new Error("N must be power of 2");if(_>2147483647/128/k)throw new Error("N too large");if(k>2147483647/128/N)throw new Error("r too large");if(!h(x))throw new Error("password must be an array or buffer");if(x=Array.prototype.slice.call(x),!h(b))throw new Error("salt must be an array or buffer");b=Array.prototype.slice.call(b);let L=s(x,b,N*128*k);const $=new Uint32Array(N*32*k);for(let O=0;O<$.length;O++){const p=O*4;$[O]=(L[p+3]&255)<<24|(L[p+2]&255)<<16|(L[p+1]&255)<<8|(L[p+0]&255)<<0}const q=new Uint32Array(64*k),J=new Uint32Array(32*k*_),re=32*k,te=new Uint32Array(16),V=new Uint32Array(16),E=N*_*2;let u=0,g=null,w=!1,S=0,P=0,I,B;const y=C?parseInt(1e3/k):4294967295,d=typeof setImmediate<"u"?setImmediate:setTimeout,A=function(){if(w)return C(new Error("cancelled"),u/E);let O;switch(S){case 0:B=P*32*k,l($,B,q,0,re),S=1,I=0;case 1:O=_-I,O>y&&(O=y);for(let R=0;R<O;R++)l(q,0,J,(I+R)*re,re),o(q,re,k,te,V);if(I+=O,u+=O,C){const R=parseInt(1e3*u/E);if(R!==g){if(w=C(null,u/E),w)break;g=R}}if(I<_)break;I=0,S=2;case 2:O=_-I,O>y&&(O=y);for(let R=0;R<O;R++){const U=(2*k-1)*16,K=q[U]&_-1;f(J,K*re,q,re),o(q,re,k,te,V)}if(I+=O,u+=O,C){const R=parseInt(1e3*u/E);if(R!==g){if(w=C(null,u/E),w)break;g=R}}if(I<_)break;if(l(q,0,$,B,re),P++,P<N){S=0;break}L=[];for(let R=0;R<$.length;R++)L.push($[R]>>0&255),L.push($[R]>>8&255),L.push($[R]>>16&255),L.push($[R]>>24&255);const p=s(x,L,D);return C&&C(null,1,p),p}C&&d(A)};if(!C)for(;;){const O=A();if(O!=null)return O}A()}const T={scrypt:function(x,b,_,k,N,D,C){return new Promise(function(L,$){let q=0;C&&C(0),v(x,b,_,k,N,D,function(J,re,te){if(J)$(J);else if(te)C&&q!==1&&C(1),L(new Uint8Array(te));else if(C&&re!==q)return q=re,C(re)})})},syncScrypt:function(x,b,_,k,N,D){return new Uint8Array(v(x,b,_,k,N,D))}};t.exports=T})()})(ky);var Yl=ky.exports,A2=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{f(n.next(l))}catch(h){o(h)}}function c(l){try{f(n.throw(l))}catch(h){o(h)}}function f(l){l.done?s(l.value):i(l.value).then(a,c)}f((n=n.apply(t,e||[])).next())})};const Tf=new M(Sy);function Hh(t){return t!=null&&t.mnemonic&&t.mnemonic.phrase}class S2 extends rs{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function T2(t,e,r){if(wt(t,"crypto/cipher")==="aes-128-ctr"){const i=Hi(wt(t,"crypto/cipherparams/iv")),s=new bn.Counter(i),o=new bn.ModeOfOperation.ctr(e,s);return Y(o.decrypt(r))}return null}function Py(t,e){const r=Hi(wt(t,"crypto/ciphertext"));if(X(nt(at([e.slice(16,32),r]))).substring(2)!==wt(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const i=T2(t,e.slice(0,16),r);i||Tf.throwError("unsupported cipher",M.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const s=e.slice(32,64),o=ci(i);if(t.address){let c=t.address.toLowerCase();if(c.substring(0,2)!=="0x"&&(c="0x"+c),Ge(c)!==o)throw new Error("address mismatch")}const a={_isKeystoreAccount:!0,address:o,privateKey:X(i)};if(wt(t,"x-ethers/version")==="0.1"){const c=Hi(wt(t,"x-ethers/mnemonicCiphertext")),f=Hi(wt(t,"x-ethers/mnemonicCounter")),l=new bn.Counter(f),h=new bn.ModeOfOperation.ctr(s,l),m=wt(t,"x-ethers/path")||Ks,v=wt(t,"x-ethers/locale")||"en",T=Y(h.decrypt(c));try{const x=Wc(T,v),b=pr.fromMnemonic(x,null,v).derivePath(m);if(b.privateKey!=a.privateKey)throw new Error("mnemonic mismatch");a.mnemonic=b.mnemonic}catch(x){if(x.code!==M.errors.INVALID_ARGUMENT||x.argument!=="wordlist")throw x}}return new S2(a)}function Iy(t,e,r,n,i){return Y(zl(t,e,r,n,i))}function k2(t,e,r,n,i){return Promise.resolve(Iy(t,e,r,n,i))}function Cy(t,e,r,n,i){const s=Vl(e),o=wt(t,"crypto/kdf");if(o&&typeof o=="string"){const a=function(c,f){return Tf.throwArgumentError("invalid key-derivation function parameters",c,f)};if(o.toLowerCase()==="scrypt"){const c=Hi(wt(t,"crypto/kdfparams/salt")),f=parseInt(wt(t,"crypto/kdfparams/n")),l=parseInt(wt(t,"crypto/kdfparams/r")),h=parseInt(wt(t,"crypto/kdfparams/p"));(!f||!l||!h)&&a("kdf",o),(f&f-1)!==0&&a("N",f);const m=parseInt(wt(t,"crypto/kdfparams/dklen"));return m!==32&&a("dklen",m),n(s,c,f,l,h,64,i)}else if(o.toLowerCase()==="pbkdf2"){const c=Hi(wt(t,"crypto/kdfparams/salt"));let f=null;const l=wt(t,"crypto/kdfparams/prf");l==="hmac-sha256"?f="sha256":l==="hmac-sha512"?f="sha512":a("prf",l);const h=parseInt(wt(t,"crypto/kdfparams/c")),m=parseInt(wt(t,"crypto/kdfparams/dklen"));return m!==32&&a("dklen",m),r(s,c,h,m,f)}}return Tf.throwArgumentError("unsupported key-derivation function","kdf",o)}function P2(t,e){const r=JSON.parse(t),n=Cy(r,e,Iy,Yl.syncScrypt);return Py(r,n)}function I2(t,e,r){return A2(this,void 0,void 0,function*(){const n=JSON.parse(t),i=yield Cy(n,e,k2,Yl.scrypt,r);return Py(n,i)})}function C2(t,e,r,n){try{if(Ge(t.address)!==ci(t.privateKey))throw new Error("address/privateKey mismatch");if(Hh(t)){const b=t.mnemonic;if(pr.fromMnemonic(b.phrase,null,b.locale).derivePath(b.path||Ks).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(b){return Promise.reject(b)}typeof r=="function"&&!n&&(n=r,r={}),r||(r={});const i=Y(t.privateKey),s=Vl(e);let o=null,a=null,c=null;if(Hh(t)){const b=t.mnemonic;o=Y(Jc(b.phrase,b.locale||"en")),a=b.path||Ks,c=b.locale||"en"}let f=r.client;f||(f="ethers.js");let l=null;r.salt?l=Y(r.salt):l=Ps(32);let h=null;if(r.iv){if(h=Y(r.iv),h.length!==16)throw new Error("invalid iv")}else h=Ps(16);let m=null;if(r.uuid){if(m=Y(r.uuid),m.length!==16)throw new Error("invalid uuid")}else m=Ps(16);let v=1<<17,T=8,x=1;return r.scrypt&&(r.scrypt.N&&(v=r.scrypt.N),r.scrypt.r&&(T=r.scrypt.r),r.scrypt.p&&(x=r.scrypt.p)),Yl.scrypt(s,l,v,T,x,64,n).then(b=>{b=Y(b);const _=b.slice(0,16),k=b.slice(16,32),N=b.slice(32,64),D=new bn.Counter(h),C=new bn.ModeOfOperation.ctr(_,D),L=Y(C.encrypt(i)),$=nt(at([k,L])),q={address:t.address.substring(2).toLowerCase(),id:v2(m),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:X(h).substring(2)},ciphertext:X(L).substring(2),kdf:"scrypt",kdfparams:{salt:X(l).substring(2),n:v,dklen:32,p:x,r:T},mac:$.substring(2)}};if(o){const J=Ps(16),re=new bn.Counter(J),te=new bn.ModeOfOperation.ctr(N,re),V=Y(te.encrypt(o)),E=new Date,u=E.getUTCFullYear()+"-"+fo(E.getUTCMonth()+1,2)+"-"+fo(E.getUTCDate(),2)+"T"+fo(E.getUTCHours(),2)+"-"+fo(E.getUTCMinutes(),2)+"-"+fo(E.getUTCSeconds(),2)+".0Z";q["x-ethers"]={client:f,gethFilename:"UTC--"+u+"--"+q.address,mnemonicCounter:X(J).substring(2),mnemonicCiphertext:X(V).substring(2),path:a,locale:c,version:"0.1"}}return JSON.stringify(q)})}function N2(t,e,r){if(Jl(t)){r&&r(0);const n=Ty(t,e);return r&&r(1),Promise.resolve(n)}return Wl(t)?I2(t,e,r):Promise.reject(new Error("invalid JSON wallet"))}function M2(t,e){if(Jl(t))return Ty(t,e);if(Wl(t))return P2(t,e);throw new Error("invalid JSON wallet")}const B2="wallet/5.7.0";var qh=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{f(n.next(l))}catch(h){o(h)}}function c(l){try{f(n.throw(l))}catch(h){o(h)}}function f(l){l.done?s(l.value):i(l.value).then(a,c)}f((n=n.apply(t,e||[])).next())})};const gs=new M(B2);function R2(t){return t!=null&&ce(t.privateKey,32)&&t.address!=null}function O2(t){const e=t.mnemonic;return e&&e.phrase}class ri extends Gn{constructor(e,r){if(super(),R2(e)){const n=new $i(e.privateKey);if(j(this,"_signingKey",()=>n),j(this,"address",ci(this.publicKey)),this.address!==Ge(e.address)&&gs.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),O2(e)){const i=e.mnemonic;j(this,"_mnemonic",()=>({phrase:i.phrase,path:i.path||Ks,locale:i.locale||"en"}));const s=this.mnemonic,o=pr.fromMnemonic(s.phrase,null,s.locale).derivePath(s.path);ci(o.privateKey)!==this.address&&gs.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else j(this,"_mnemonic",()=>null)}else{if($i.isSigningKey(e))e.curve!=="secp256k1"&&gs.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),j(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const n=new $i(e);j(this,"_signingKey",()=>n)}j(this,"_mnemonic",()=>null),j(this,"address",ci(this.publicKey))}r&&!is.isProvider(r)&&gs.throwArgumentError("invalid provider","provider",r),j(this,"provider",r||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new ri(this,e)}signTransaction(e){return yt(e).then(r=>{r.from!=null&&(Ge(r.from)!==this.address&&gs.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete r.from);const n=this._signingKey().signDigest(nt(Af(r)));return Af(r,n)})}signMessage(e){return qh(this,void 0,void 0,function*(){return mf(this._signingKey().signDigest(Ll(e)))})}_signTypedData(e,r,n){return qh(this,void 0,void 0,function*(){const i=yield Lt.resolveNames(e,r,n,s=>(this.provider==null&&gs.throwError("cannot resolve ENS names without a provider",M.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:s}),this.provider.resolveName(s)));return mf(this._signingKey().signDigest(Lt.hash(i.domain,r,i.value)))})}encrypt(e,r,n){if(typeof r=="function"&&!n&&(n=r,r={}),n&&typeof n!="function")throw new Error("invalid callback");return r||(r={}),C2(this,e,r,n)}static createRandom(e){let r=Ps(16);e||(e={}),e.extraEntropy&&(r=Y(_t(nt(at([r,e.extraEntropy])),0,16)));const n=Wc(r,e.locale);return ri.fromMnemonic(n,e.path,e.locale)}static fromEncryptedJson(e,r,n){return N2(e,r,n).then(i=>new ri(i))}static fromEncryptedJsonSync(e,r){return new ri(M2(e,r))}static fromMnemonic(e,r,n){return r||(r=Ks),new ri(pr.fromMnemonic(e,null,n).derivePath(r))}}function D2(t,e){return la(Ll(t),e)}function F2(t,e,r,n){return la(Lt.hash(t,e,r),n)}const L2="networks/5.7.1",zh=new M(L2);function U2(t){return t&&typeof t.renetwork=="function"}function Dn(t){const e=function(r,n){n==null&&(n={});const i=[];if(r.InfuraProvider&&n.infura!=="-")try{i.push(new r.InfuraProvider(t,n.infura))}catch{}if(r.EtherscanProvider&&n.etherscan!=="-")try{i.push(new r.EtherscanProvider(t,n.etherscan))}catch{}if(r.AlchemyProvider&&n.alchemy!=="-")try{i.push(new r.AlchemyProvider(t,n.alchemy))}catch{}if(r.PocketProvider&&n.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new r.PocketProvider(t,n.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(r.CloudflareProvider&&n.cloudflare!=="-")try{i.push(new r.CloudflareProvider(t))}catch{}if(r.AnkrProvider&&n.ankr!=="-")try{const s=["ropsten"],o=new r.AnkrProvider(t,n.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(i.length===0)return null;if(r.FallbackProvider){let s=1;return n.quorum!=null?s=n.quorum:t==="homestead"&&(s=2),new r.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(r){return Dn(r)},e}function mc(t,e){const r=function(n,i){return n.JsonRpcProvider?new n.JsonRpcProvider(t,e):null};return r.renetwork=function(n){return mc(t,n)},r}const Gh={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Dn("homestead")},Vh={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Dn("ropsten")},Jh={chainId:63,name:"classicMordor",_defaultProvider:mc("https://www.ethercluster.com/mordor","classicMordor")},Na={unspecified:{chainId:0,name:"unspecified"},homestead:Gh,mainnet:Gh,morden:{chainId:2,name:"morden"},ropsten:Vh,testnet:Vh,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Dn("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Dn("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Dn("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:Dn("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:mc("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:Jh,classicTestnet:Jh,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:mc("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:Dn("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:Dn("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Ql(t){if(t==null)return null;if(typeof t=="number"){for(const n in Na){const i=Na[n];if(i.chainId===t)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:t,name:"unknown"}}if(typeof t=="string"){const n=Na[t];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=Na[t.name];if(!e)return typeof t.chainId!="number"&&zh.throwArgumentError("invalid network chainId","network",t),t;t.chainId!==0&&t.chainId!==e.chainId&&zh.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;return r==null&&e._defaultProvider&&(U2(e._defaultProvider)?r=e._defaultProvider.renetwork(t):r=e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}const K2="web/5.7.1";var j2=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{f(n.next(l))}catch(h){o(h)}}function c(l){try{f(n.throw(l))}catch(h){o(h)}}function f(l){l.done?s(l.value):i(l.value).then(a,c)}f((n=n.apply(t,e||[])).next())})};function $2(t,e){return j2(this,void 0,void 0,function*(){e==null&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(r.mode=o.mode),o.cache&&(r.cache=o.cache),o.credentials&&(r.credentials=o.credentials),o.redirect&&(r.redirect=o.redirect),o.referrer&&(r.referrer=o.referrer)}const n=yield fetch(t,r),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):n.headers.keys().forEach(o=>{s[o.toLowerCase()]=n.headers.get(o)}),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:Y(new Uint8Array(i))}})}var H2=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{f(n.next(l))}catch(h){o(h)}}function c(l){try{f(n.throw(l))}catch(h){o(h)}}function f(l){l.done?s(l.value):i(l.value).then(a,c)}f((n=n.apply(t,e||[])).next())})};const Wr=new M(K2);function Wh(t){return new Promise(e=>{setTimeout(e,t)})}function Qn(t,e){if(t==null)return null;if(typeof t=="string")return t;if(aa(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return ns(t)}catch{}return X(t)}return t}function q2(t){return At(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,r)=>String.fromCharCode(parseInt(r,16))))}function Ny(t,e,r){const n=typeof t=="object"&&t.throttleLimit!=null?t.throttleLimit:12;Wr.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof t=="object"?t.throttleCallback:null,s=typeof t=="object"&&typeof t.throttleSlotInterval=="number"?t.throttleSlotInterval:100;Wr.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof t=="object"?!!t.errorPassThrough:!1,a={};let c=null;const f={method:"GET"};let l=!1,h=2*60*1e3;if(typeof t=="string")c=t;else if(typeof t=="object"){if((t==null||t.url==null)&&Wr.throwArgumentError("missing URL","connection.url",t),c=t.url,typeof t.timeout=="number"&&t.timeout>0&&(h=t.timeout),t.headers)for(const _ in t.headers)a[_.toLowerCase()]={key:_,value:String(t.headers[_])},["if-none-match","if-modified-since"].indexOf(_.toLowerCase())>=0&&(l=!0);if(f.allowGzip=!!t.allowGzip,t.user!=null&&t.password!=null){c.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==!0&&Wr.throwError("basic authentication requires a secure https url",M.errors.INVALID_ARGUMENT,{argument:"url",url:c,user:t.user,password:"[REDACTED]"});const _=t.user+":"+t.password;a.authorization={key:"Authorization",value:"Basic "+Dl(At(_))}}t.skipFetchSetup!=null&&(f.skipFetchSetup=!!t.skipFetchSetup),t.fetchOptions!=null&&(f.fetchOptions=ut(t.fetchOptions))}const m=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),v=c?c.match(m):null;if(v)try{const _={statusCode:200,statusMessage:"OK",headers:{"content-type":v[1]||"text/plain"},body:v[2]?Ol(v[3]):q2(v[3])};let k=_.body;return r&&(k=r(_.body,_)),Promise.resolve(k)}catch(_){Wr.throwError("processing response error",M.errors.SERVER_ERROR,{body:Qn(v[1],v[2]),error:_,requestBody:null,requestMethod:"GET",url:c})}e&&(f.method="POST",f.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const T={};Object.keys(a).forEach(_=>{const k=a[_];T[k.key]=k.value}),f.headers=T;const x=function(){let _=null;return{promise:new Promise(function(D,C){h&&(_=setTimeout(()=>{_!=null&&(_=null,C(Wr.makeError("timeout",M.errors.TIMEOUT,{requestBody:Qn(f.body,T["content-type"]),requestMethod:f.method,timeout:h,url:c})))},h))}),cancel:function(){_!=null&&(clearTimeout(_),_=null)}}}(),b=function(){return H2(this,void 0,void 0,function*(){for(let _=0;_<n;_++){let k=null;try{if(k=yield $2(c,f),_<n){if(k.statusCode===301||k.statusCode===302){const D=k.headers.location||"";if(f.method==="GET"&&D.match(/^https:/)){c=k.headers.location;continue}}else if(k.statusCode===429){let D=!0;if(i&&(D=yield i(_,c)),D){let C=0;const L=k.headers["retry-after"];typeof L=="string"&&L.match(/^[1-9][0-9]*$/)?C=parseInt(L)*1e3:C=s*parseInt(String(Math.random()*Math.pow(2,_))),yield Wh(C);continue}}}}catch(D){k=D.response,k==null&&(x.cancel(),Wr.throwError("missing response",M.errors.SERVER_ERROR,{requestBody:Qn(f.body,T["content-type"]),requestMethod:f.method,serverError:D,url:c}))}let N=k.body;if(l&&k.statusCode===304?N=null:!o&&(k.statusCode<200||k.statusCode>=300)&&(x.cancel(),Wr.throwError("bad response",M.errors.SERVER_ERROR,{status:k.statusCode,headers:k.headers,body:Qn(N,k.headers?k.headers["content-type"]:null),requestBody:Qn(f.body,T["content-type"]),requestMethod:f.method,url:c})),r)try{const D=yield r(N,k);return x.cancel(),D}catch(D){if(D.throttleRetry&&_<n){let C=!0;if(i&&(C=yield i(_,c)),C){const L=s*parseInt(String(Math.random()*Math.pow(2,_)));yield Wh(L);continue}}x.cancel(),Wr.throwError("processing response error",M.errors.SERVER_ERROR,{body:Qn(N,k.headers?k.headers["content-type"]:null),error:D,requestBody:Qn(f.body,T["content-type"]),requestMethod:f.method,url:c})}return x.cancel(),N}return Wr.throwError("failed response",M.errors.SERVER_ERROR,{requestBody:Qn(f.body,T["content-type"]),requestMethod:f.method,url:c})})}();return Promise.race([x.promise,b])}function to(t,e,r){let n=(s,o)=>{let a=null;if(s!=null)try{a=JSON.parse(ns(s))}catch(c){Wr.throwError("invalid JSON",M.errors.SERVER_ERROR,{body:s,error:c})}return r&&(a=r(a,o)),a},i=null;if(e!=null){i=At(e);const s=typeof t=="string"?{url:t}:ut(t);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=ut(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},t=s}return Ny(t,i,n)}function ji(t,e){return e||(e={}),e=ut(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(r,n){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&n(new Error("timeout"))},e.timeout));const a=e.retryLimit;let c=0;function f(){return t().then(function(l){if(l!==void 0)o()&&r(l);else if(e.oncePoll)e.oncePoll.once("poll",f);else if(e.onceBlock)e.onceBlock.once("block",f);else if(!s){if(c++,c>a){o()&&n(new Error("retry limit reached"));return}let h=e.interval*parseInt(String(Math.random()*Math.pow(2,c)));h<e.floor&&(h=e.floor),h>e.ceiling&&(h=e.ceiling),setTimeout(f,h)}return null},function(l){o()&&n(l)})}f()})}var bc="qpzry9x8gf2tvdw0s3jn54khce6mua7l",kf={};for(var Ma=0;Ma<bc.length;Ma++){var Fu=bc.charAt(Ma);if(kf[Fu]!==void 0)throw new TypeError(Fu+" is ambiguous");kf[Fu]=Ma}function Rs(t){var e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function My(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=Rs(e)^n>>5}for(e=Rs(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=Rs(e)^i&31}return e}function z2(t,e,r){if(r=r||90,t.length+7+e.length>r)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var n=My(t);if(typeof n=="string")throw new Error(n);for(var i=t+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5!==0)throw new Error("Non 5-bit word");n=Rs(n)^o,i+=bc.charAt(o)}for(s=0;s<6;++s)n=Rs(n);for(n^=1,s=0;s<6;++s){var a=n>>(5-s)*5&31;i+=bc.charAt(a)}return i}function By(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;t=r;var i=t.lastIndexOf("1");if(i===-1)return"No separator character for "+t;if(i===0)return"Missing prefix for "+t;var s=t.slice(0,i),o=t.slice(i+1);if(o.length<6)return"Data too short";var a=My(s);if(typeof a=="string")return a;for(var c=[],f=0;f<o.length;++f){var l=o.charAt(f),h=kf[l];if(h===void 0)return"Unknown character "+l;a=Rs(a)^h,!(f+6>=o.length)&&c.push(h)}return a!==1?"Invalid checksum for "+t:{prefix:s,words:c}}function G2(){var t=By.apply(null,arguments);if(typeof t=="object")return t}function V2(t){var e=By.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function Yc(t,e,r,n){for(var i=0,s=0,o=(1<<r)-1,a=[],c=0;c<t.length;++c)for(i=i<<e|t[c],s+=e;s>=r;)s-=r,a.push(i>>s&o);if(n)s>0&&a.push(i<<r-s&o);else{if(s>=e)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return a}function J2(t){var e=Yc(t,8,5,!0);if(Array.isArray(e))return e}function W2(t){var e=Yc(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function Y2(t){var e=Yc(t,5,8,!1);if(Array.isArray(e))return e}function Q2(t){var e=Yc(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var X2={decodeUnsafe:G2,decode:V2,encode:z2,toWordsUnsafe:J2,toWords:W2,fromWordsUnsafe:Y2,fromWords:Q2},Yh=X2;const Wt="providers/5.7.2",lo=new M(Wt);class ie{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},r=this.address.bind(this),n=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),c=this.number.bind(this),f=this.type.bind(this),l=h=>this.data(h,!0);return e.transaction={hash:o,type:f,accessList:ie.allowNull(this.accessList.bind(this),null),blockHash:ie.allowNull(o,null),blockNumber:ie.allowNull(c,null),transactionIndex:ie.allowNull(c,null),confirmations:ie.allowNull(c,null),from:r,gasPrice:ie.allowNull(n),maxPriorityFeePerGas:ie.allowNull(n),maxFeePerGas:ie.allowNull(n),gasLimit:n,to:ie.allowNull(r,null),value:n,nonce:c,data:s,r:ie.allowNull(this.uint256),s:ie.allowNull(this.uint256),v:ie.allowNull(c),creates:ie.allowNull(r,null),raw:ie.allowNull(s)},e.transactionRequest={from:ie.allowNull(r),nonce:ie.allowNull(c),gasLimit:ie.allowNull(n),gasPrice:ie.allowNull(n),maxPriorityFeePerGas:ie.allowNull(n),maxFeePerGas:ie.allowNull(n),to:ie.allowNull(r),value:ie.allowNull(n),data:ie.allowNull(l),type:ie.allowNull(c),accessList:ie.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:c,blockNumber:c,transactionHash:o,address:r,topics:ie.arrayOf(o),data:s,logIndex:c,blockHash:o},e.receipt={to:ie.allowNull(this.address,null),from:ie.allowNull(this.address,null),contractAddress:ie.allowNull(r,null),transactionIndex:c,root:ie.allowNull(a),gasUsed:n,logsBloom:ie.allowNull(s),blockHash:o,transactionHash:o,logs:ie.arrayOf(this.receiptLog.bind(this)),blockNumber:c,confirmations:ie.allowNull(c,null),cumulativeGasUsed:n,effectiveGasPrice:ie.allowNull(n),status:ie.allowNull(c),type:f},e.block={hash:ie.allowNull(o),parentHash:o,number:c,timestamp:c,nonce:ie.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:ie.allowNull(r),extraData:s,transactions:ie.allowNull(ie.arrayOf(o)),baseFeePerGas:ie.allowNull(n)},e.blockWithTransactions=ut(e.block),e.blockWithTransactions.transactions=ie.allowNull(ie.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:ie.allowNull(i,void 0),toBlock:ie.allowNull(i,void 0),blockHash:ie.allowNull(o,void 0),address:ie.allowNull(r,void 0),topics:ie.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:ie.allowNull(c),blockHash:ie.allowNull(o),transactionIndex:c,removed:ie.allowNull(this.boolean.bind(this)),address:r,data:ie.allowFalsish(s,"0x"),topics:ie.arrayOf(o),transactionHash:o,logIndex:c},e}accessList(e){return _i(e||[])}number(e){return e==="0x"?0:W.from(e).toNumber()}type(e){return e==="0x"||e==null?0:W.from(e).toNumber()}bigNumber(e){return W.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,r){return typeof e=="string"&&(!r&&e.substring(0,2)!=="0x"&&(e="0x"+e),ce(e))?e.toLowerCase():lo.throwArgumentError("invalid hash","value",e)}data(e,r){const n=this.hex(e,r);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return Ge(e)}callAddress(e){if(!ce(e,32))return null;const r=Ge(_t(e,12));return r===Dg?null:r}contractAddress(e){return Hc(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||ce(e))return ca(e);throw new Error("invalid blockTag")}hash(e,r){const n=this.hex(e,r);return Sn(n)!==32?lo.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const r=W.from(e);try{return r.toNumber()}catch{}return null}uint256(e){if(!ce(e))throw new Error("invalid uint256");return ct(e,32)}_block(e,r){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,i=ie.check(r,e);return i._difficulty=n==null?null:W.from(n),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return ie.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&W.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const r=ie.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;ce(n)&&(n=W.from(n).toNumber()),r.chainId=n}else{let n=e.networkId;n==null&&r.v==null&&(n=e.chainId),ce(n)&&(n=W.from(n).toNumber()),typeof n!="number"&&r.v!=null&&(n=(r.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),r.chainId=n}return r.blockHash&&r.blockHash.replace(/0/g,"")==="x"&&(r.blockHash=null),r}transaction(e){return hy(e)}receiptLog(e){return ie.check(this.formats.receiptLog,e)}receipt(e){const r=ie.check(this.formats.receipt,e);if(r.root!=null)if(r.root.length<=4){const n=W.from(r.root).toNumber();n===0||n===1?(r.status!=null&&r.status!==n&&lo.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=n,delete r.root):lo.throwArgumentError("invalid alt-root-status","value.root",r.root)}else r.root.length!==66&&lo.throwArgumentError("invalid root hash","value.root",r.root);return r.status!=null&&(r.byzantium=!0),r}topics(e){return Array.isArray(e)?e.map(r=>this.topics(r)):e!=null?this.hash(e,!0):null}filter(e){return ie.check(this.formats.filter,e)}filterLog(e){return ie.check(this.formats.filterLog,e)}static check(e,r){const n={};for(const i in e)try{const s=e[i](r[i]);s!==void 0&&(n[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=r[i],s}return n}static allowNull(e,r){return function(n){return n==null?r:e(n)}}static allowFalsish(e,r){return function(n){return n?e(n):r}}static arrayOf(e){return function(r){if(!Array.isArray(r))throw new Error("not an array");const n=[];return r.forEach(function(i){n.push(e(i))}),n}}}function Ry(t){return t&&typeof t.isCommunityResource=="function"}function Pf(t){return Ry(t)&&t.isCommunityResource()}let Qh=!1;function da(){Qh||(Qh=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var oe=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{f(n.next(l))}catch(h){o(h)}}function c(l){try{f(n.throw(l))}catch(h){o(h)}}function f(l){l.done?s(l.value):i(l.value).then(a,c)}f((n=n.apply(t,e||[])).next())})};const fe=new M(Wt),Z2=10;function Xh(t){return t==null?"null":(Sn(t)!==32&&fe.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function Zh(t){for(t=t.slice();t.length>0&&t[t.length-1]==null;)t.pop();return t.map(e=>{if(Array.isArray(e)){const r={};e.forEach(i=>{r[Xh(i)]=!0});const n=Object.keys(r);return n.sort(),n.join("|")}else return Xh(e)}).join("&")}function e3(t){return t===""?[]:t.split(/&/g).map(e=>{if(e==="")return[];const r=e.split("|").map(n=>n==="null"?null:n);return r.length===1?r[0]:r})}function ys(t){if(typeof t=="string"){if(t=t.toLowerCase(),Sn(t)===32)return"tx:"+t;if(t.indexOf(":")===-1)return t}else{if(Array.isArray(t))return"filter:*:"+Zh(t);if(N_.isForkEvent(t))throw fe.warn("not implemented"),new Error("not implemented");if(t&&typeof t=="object")return"filter:"+(t.address||"*")+":"+Zh(t.topics||[])}throw new Error("invalid event - "+t)}function ho(){return new Date().getTime()}function e0(t){return new Promise(e=>{setTimeout(e,t)})}const t3=["block","network","pending","poll"];class r3{constructor(e,r,n){j(this,"tag",e),j(this,"listener",r),j(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const r=e[1],n=e3(e[2]),i={};return n.length>0&&(i.topics=n),r&&r!=="*"&&(i.address=r),i}pollable(){return this.tag.indexOf(":")>=0||t3.indexOf(this.tag)>=0}}const n3={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Lu(t){return ct(W.from(t).toHexString(),32)}function t0(t){return Ls.encode(at([t,_t($n($n(t)),0,4)]))}const Oy=new RegExp("^(ipfs)://(.*)$","i"),r0=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Oy,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Xa(t,e){try{return ns(Vo(t,e))}catch{}return null}function Vo(t,e){if(t==="0x")return null;const r=W.from(_t(t,e,e+32)).toNumber(),n=W.from(_t(t,r,r+32)).toNumber();return _t(t,r+32,r+32+n)}function Uu(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):fe.throwArgumentError("unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}function n0(t){const e=Y(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function i3(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}function Dy(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(null),r+=32;for(let n=0;n<t.length;n++){const i=Y(t[n]);e[n]=n0(r),e.push(n0(i.length)),e.push(i3(i)),r+=32+Math.ceil(i.length/32)*32}return Yt(e)}class If{constructor(e,r,n,i){j(this,"provider",e),j(this,"name",n),j(this,"address",e.formatter.address(r)),j(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>W.from(e).eq(1)).catch(e=>{if(e.code===M.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,r){return oe(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:Yt([e,No(this.name),r||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,n.data=Yt(["0x9061b923",Dy([Zg(this.name),n.data])]));try{let s=yield this.provider.call(n);return Y(s).length%32===4&&fe.throwError("resolver threw error",M.errors.CALL_EXCEPTION,{transaction:n,data:s}),i&&(s=Vo(s,0)),s}catch(s){if(s.code===M.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,r){return oe(this,void 0,void 0,function*(){const n=yield this._fetch(e,r);return n!=null?Vo(n,0):null})}_getAddress(e,r){const n=n3[String(e)];if(n==null&&fe.throwError(`unsupported coin type: ${e}`,M.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(r);const i=Y(r);if(n.p2pkh!=null){const s=r.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return t0(at([[n.p2pkh],"0x"+s[2]]))}}if(n.p2sh!=null){const s=r.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return t0(at([[n.p2sh],"0x"+s[2]]))}}if(n.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const a=Yh.toWords(i.slice(2));return a.unshift(o),Yh.encode(n.prefix,a)}}return null}getAddress(e){return oe(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===Nl?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===M.errors.CALL_EXCEPTION)return null;throw i}const r=yield this._fetchBytes("0xf1cb7e06",Lu(e));if(r==null||r==="0x")return null;const n=this._getAddress(e,r);return n==null&&fe.throwError("invalid or unsupported coin data",M.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:r}),n})}getAvatar(){return oe(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const r=yield this.getText("avatar");if(r==null)return null;for(let n=0;n<r0.length;n++){const i=r.match(r0[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:r}),{linkage:e,url:r};case"data":return e.push({type:"data",content:r}),{linkage:e,url:r};case"ipfs":return e.push({type:"ipfs",content:r}),{linkage:e,url:Uu(r)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:r});const a=this._resolvedAddress||(yield this.getAddress()),c=(i[2]||"").split("/");if(c.length!==2)return null;const f=yield this.provider.formatter.address(c[0]),l=ct(W.from(c[1]).toHexString(),32);if(s==="erc721"){const x=this.provider.formatter.callAddress(yield this.provider.call({to:f,data:Yt(["0x6352211e",l])}));if(a!==x)return null;e.push({type:"owner",content:x})}else if(s==="erc1155"){const x=W.from(yield this.provider.call({to:f,data:Yt(["0x00fdd58e",ct(a,32),l])}));if(x.isZero())return null;e.push({type:"balance",content:x.toString()})}const h={to:this.provider.formatter.address(c[0]),data:Yt([o,l])};let m=Xa(yield this.provider.call(h),0);if(m==null)return null;e.push({type:"metadata-url-base",content:m}),s==="erc1155"&&(m=m.replace("{id}",l.substring(2)),e.push({type:"metadata-url-expanded",content:m})),m.match(/^ipfs:/i)&&(m=Uu(m)),e.push({type:"metadata-url",content:m});const v=yield to(m);if(!v)return null;e.push({type:"metadata",content:JSON.stringify(v)});let T=v.image;if(typeof T!="string")return null;if(!T.match(/^(https:\/\/|data:)/i)){if(T.match(Oy)==null)return null;e.push({type:"url-ipfs",content:T}),T=Uu(T)}return e.push({type:"url",content:T}),{linkage:e,url:T}}}}}catch{}return null})}getContentHash(){return oe(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const r=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const o=parseInt(r[3],16);if(r[4].length===o*2)return"ipfs://"+Ls.encode("0x"+r[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const o=parseInt(n[3],16);if(n[4].length===o*2)return"ipns://"+Ls.encode("0x"+n[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const o={"=":"","+":"-","/":"_"},a=Dl("0x"+s[1]).replace(/[=+\/]/g,c=>o[c]);return"sia://"+a}return fe.throwError("invalid or unsupported content hash data",M.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return oe(this,void 0,void 0,function*(){let r=At(e);r=at([Lu(64),Lu(r.length),r]),r.length%32!==0&&(r=at([r,ct("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",X(r));return n==null||n==="0x"?null:ns(n)})}}let Ku=null,s3=1;class Qc extends is{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),j(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(r=>{}),this._ready().catch(r=>{});else{const r=Kt(new.target,"getNetwork")(e);r?(j(this,"_network",r),this.emit("network",r,null)):fe.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return oe(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||fe.throwError("no network detected",M.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:j(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return ji(()=>this._ready().then(e=>e,e=>{if(!(e.code===M.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return Ku==null&&(Ku=new ie),Ku}static getNetwork(e){return Ql(e??"homestead")}ccipReadFetch(e,r,n){return oe(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const i=e.to.toLowerCase(),s=r.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],f=c.replace("{sender}",i).replace("{data}",s),l=c.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),h=yield to({url:f,errorPassThrough:!0},l,(v,T)=>(v.status=T.statusCode,v));if(h.data)return h.data;const m=h.message||"unknown error";if(h.status>=400&&h.status<500)return fe.throwError(`response not found during CCIP fetch: ${m}`,M.errors.SERVER_ERROR,{url:c,errorMessage:m});o.push(m)}return fe.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,M.errors.SERVER_ERROR,{urls:n,errorMessages:o})})}_getInternalBlockNumber(e){return oe(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(ho()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const r=ho(),n=yt({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),s;const o=ho();return i=W.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:r,respTime:o}});return this._internalBlockNumber=n,n.catch(i=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return oe(this,void 0,void 0,function*(){const e=s3++,r=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)fe.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",fe.makeError("network block skew detected",M.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let i=this._emitted.block+1;i<=n;i++)this.emit("block",i);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&n-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+s]=a.blockNumber,this.emit(s,a)),null)).catch(a=>{this.emit("error",a)});r.push(o);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=n-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=n;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const a=this.getLogs(s).then(c=>{i._inflight=!1,c.length!==0&&c.forEach(f=>{f.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=f.blockNumber),this._emitted["b:"+f.blockHash]=f.blockNumber,this._emitted["t:"+f.transactionHash]=f.blockNumber,this.emit(s,f)})}).catch(c=>{this.emit("error",c),i._inflight=!1});r.push(a)}break}}}),this._lastBlockNumber=n,Promise.all(r).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return oe(this,void 0,void 0,function*(){return fe.throwError("provider does not support network detection",M.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return oe(this,void 0,void 0,function*(){const e=yield this._ready(),r=yield this.detectNetwork();if(e.chainId!==r.chainId){if(this.anyNetwork)return this._network=r,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",r,e),yield e0(0),this._network;const n=fe.makeError("underlying network changed",M.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:r});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=ho();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(r=>((this._fastBlockNumber==null||r>this._fastBlockNumber)&&(this._fastBlockNumber=r),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=ho(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,r,n){return oe(this,void 0,void 0,function*(){return this._waitForTransaction(e,r??1,n||0,null)})}_waitForTransaction(e,r,n,i){return oe(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=r?s:new Promise((o,a)=>{const c=[];let f=!1;const l=function(){return f?!0:(f=!0,c.forEach(m=>{m()}),!1)},h=m=>{m.confirmations<r||l()||o(m)};if(this.on(e,h),c.push(()=>{this.removeListener(e,h)}),i){let m=i.startBlock,v=null;const T=x=>oe(this,void 0,void 0,function*(){f||(yield e0(1e3),this.getTransactionCount(i.from).then(b=>oe(this,void 0,void 0,function*(){if(!f){if(b<=i.nonce)m=x;else{{const _=yield this.getTransaction(e);if(_&&_.blockNumber!=null)return}for(v==null&&(v=m-3,v<i.startBlock&&(v=i.startBlock));v<=x;){if(f)return;const _=yield this.getBlockWithTransactions(v);for(let k=0;k<_.transactions.length;k++){const N=_.transactions[k];if(N.hash===e)return;if(N.from===i.from&&N.nonce===i.nonce){if(f)return;const D=yield this.waitForTransaction(N.hash,r);if(l())return;let C="replaced";N.data===i.data&&N.to===i.to&&N.value.eq(i.value)?C="repriced":N.data==="0x"&&N.from===N.to&&N.value.isZero()&&(C="cancelled"),a(fe.makeError("transaction was replaced",M.errors.TRANSACTION_REPLACED,{cancelled:C==="replaced"||C==="cancelled",reason:C,replacement:this._wrapTransaction(N),hash:e,receipt:D}));return}}v++}}f||this.once("block",T)}}),b=>{f||this.once("block",T)}))});if(f)return;this.once("block",T),c.push(()=>{this.removeListener("block",T)})}if(typeof n=="number"&&n>0){const m=setTimeout(()=>{l()||a(fe.makeError("timeout exceeded",M.errors.TIMEOUT,{timeout:n}))},n);m.unref&&m.unref(),c.push(()=>{clearTimeout(m)})}})})}getBlockNumber(){return oe(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return oe(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return W.from(e)}catch(r){return fe.throwError("bad result from backend",M.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:r})}})}getBalance(e,r){return oe(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield yt({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getBalance",n);try{return W.from(i)}catch(s){return fe.throwError("bad result from backend",M.errors.SERVER_ERROR,{method:"getBalance",params:n,result:i,error:s})}})}getTransactionCount(e,r){return oe(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield yt({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getTransactionCount",n);try{return W.from(i).toNumber()}catch(s){return fe.throwError("bad result from backend",M.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:i,error:s})}})}getCode(e,r){return oe(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield yt({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getCode",n);try{return X(i)}catch(s){return fe.throwError("bad result from backend",M.errors.SERVER_ERROR,{method:"getCode",params:n,result:i,error:s})}})}getStorageAt(e,r,n){return oe(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield yt({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(r).then(o=>ca(o))}),s=yield this.perform("getStorageAt",i);try{return X(s)}catch(o){return fe.throwError("bad result from backend",M.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,r,n){if(r!=null&&Sn(r)!==32)throw new Error("invalid response - sendTransaction");const i=e;return r!=null&&e.hash!==r&&fe.throwError("Transaction hash mismatch from Provider.sendTransaction.",M.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:r}),i.wait=(s,o)=>oe(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let a;s!==0&&n!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const c=yield this._waitForTransaction(e.hash,s,o,a);return c==null&&s===0?null:(this._emitted["t:"+e.hash]=c.blockNumber,c.status===0&&fe.throwError("transaction failed",M.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:c}),c)}),i}sendTransaction(e){return oe(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Promise.resolve(e).then(s=>X(s)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:r});return this._wrapTransaction(n,s,i)}catch(s){throw s.transaction=n,s.transactionHash=n.hash,s}})}_getTransactionRequest(e){return oe(this,void 0,void 0,function*(){const r=yield e,n={};return["from","to"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?W.from(s):null))}),["type"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s??null))}),r.accessList&&(n.accessList=this.formatter.accessList(r.accessList)),["data"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?X(s):null))}),this.formatter.transactionRequest(yield yt(n))})}_getFilter(e){return oe(this,void 0,void 0,function*(){e=yield e;const r={};return e.address!=null&&(r.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(r[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(r[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield yt(r))})}_call(e,r,n){return oe(this,void 0,void 0,function*(){n>=Z2&&fe.throwError("CCIP read exceeded maximum redirections",M.errors.SERVER_ERROR,{redirects:n,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:r});if(n>=0&&r==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&Sn(s)%32===4)try{const o=_t(s,4),a=_t(o,0,32);W.from(a).eq(i)||fe.throwError("CCIP Read sender did not match",M.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const c=[],f=W.from(_t(o,32,64)).toNumber(),l=W.from(_t(o,f,f+32)).toNumber(),h=_t(o,f+32);for(let _=0;_<l;_++){const k=Xa(h,_*32);k==null&&fe.throwError("CCIP Read contained corrupt URL string",M.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),c.push(k)}const m=Vo(o,64);W.from(_t(o,100,128)).isZero()||fe.throwError("CCIP Read callback selector included junk",M.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const v=_t(o,96,100),T=Vo(o,128),x=yield this.ccipReadFetch(e,m,c);x==null&&fe.throwError("CCIP Read disabled or provided no URLs",M.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const b={to:i,data:Yt([v,Dy([x,T])])};return this._call(b,r,n+1)}catch(o){if(o.code===M.errors.SERVER_ERROR)throw o}try{return X(s)}catch(o){return fe.throwError("bad result from backend",M.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:r},result:s,error:o})}})}call(e,r){return oe(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield yt({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(r),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return oe(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield yt({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",r);try{return W.from(n)}catch(i){return fe.throwError("bad result from backend",M.errors.SERVER_ERROR,{method:"estimateGas",params:r,result:n,error:i})}})}_getAddress(e){return oe(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&fe.throwArgumentError("invalid address or ENS name","name",e);const r=yield this.resolveName(e);return r==null&&fe.throwError("ENS name not configured",M.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),r})}_getBlock(e,r){return oe(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const i={includeTransactions:!!r};if(ce(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),ce(i.blockTag)&&(n=parseInt(i.blockTag.substring(2),16))}catch{fe.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return ji(()=>oe(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&n>this._emitted.block?null:void 0;if(r){let o=null;for(let c=0;c<s.transactions.length;c++){const f=s.transactions[c];if(f.blockNumber==null)f.confirmations=0;else if(f.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let l=o-f.blockNumber+1;l<=0&&(l=1),f.confirmations=l}}const a=this.formatter.blockWithTransactions(s);return a.transactions=a.transactions.map(c=>this._wrapTransaction(c)),a}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return oe(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return ji(()=>oe(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return oe(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return ji(()=>oe(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const i=this.formatter.receipt(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return oe(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield yt({filter:this._getFilter(e)}),n=yield this.perform("getLogs",r);return n.forEach(i=>{i.removed==null&&(i.removed=!1)}),ie.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return oe(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return oe(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&fe.throwArgumentError("invalid BlockTag","blockTag",e);let r=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return r+=e,r<0&&(r=0),this.formatter.blockTag(r)}return this.formatter.blockTag(e)})}getResolver(e){return oe(this,void 0,void 0,function*(){let r=e;for(;;){if(r===""||r==="."||e!=="eth"&&r==="eth")return null;const n=yield this._getResolver(r,"getResolver");if(n!=null){const i=new If(this,n,e);return r!==e&&!(yield i.supportsWildcard())?null:i}r=r.split(".").slice(1).join(".")}})}_getResolver(e,r){return oe(this,void 0,void 0,function*(){r==null&&(r="ENS");const n=yield this.getNetwork();n.ensAddress||fe.throwError("network does not support ENS",M.errors.UNSUPPORTED_OPERATION,{operation:r,network:n.name});try{const i=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+No(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return oe(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(ce(e))throw n}typeof e!="string"&&fe.throwArgumentError("invalid ENS name","name",e);const r=yield this.getResolver(e);return r?yield r.getAddress():null})}lookupAddress(e){return oe(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const r=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"lookupAddress");if(n==null)return null;const i=Xa(yield this.call({to:n,data:"0x691f3431"+No(r).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return oe(this,void 0,void 0,function*(){let r=null;if(ce(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s,"getAvatar");if(!o)return null;r=new If(this,o,s);try{const a=yield r.getAvatar();if(a)return a.url}catch(a){if(a.code!==M.errors.CALL_EXCEPTION)throw a}try{const a=Xa(yield this.call({to:o,data:"0x691f3431"+No(s).substring(2)}),0);r=yield this.getResolver(a)}catch(a){if(a.code!==M.errors.CALL_EXCEPTION)throw a;return null}}else if(r=yield this.getResolver(e),!r)return null;const n=yield r.getAvatar();return n==null?null:n.url})}perform(e,r){return fe.throwError(e+" not implemented",M.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_addEventListener(e,r,n){const i=new r3(ys(e),r,n);return this._events.push(i),this._startEvent(i),this}on(e,r){return this._addEventListener(e,r,!1)}once(e,r){return this._addEventListener(e,r,!0)}emit(e,...r){let n=!1,i=[],s=ys(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,r)},0),n=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),n}listenerCount(e){if(!e)return this._events.length;let r=ys(e);return this._events.filter(n=>n.tag===r).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let r=ys(e);return this._events.filter(n=>n.tag===r).map(n=>n.listener)}off(e,r){if(r==null)return this.removeAllListeners(e);const n=[];let i=!1,s=ys(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=r||i?!0:(i=!0,n.push(o),!1)),n.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let r=[];if(e==null)r=this._events,this._events=[];else{const n=ys(e);this._events=this._events.filter(i=>i.tag!==n?!0:(r.push(i),!1))}return r.forEach(n=>{this._stopEvent(n)}),this}}var On=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{f(n.next(l))}catch(h){o(h)}}function c(l){try{f(n.throw(l))}catch(h){o(h)}}function f(l){l.done?s(l.value):i(l.value).then(a,c)}f((n=n.apply(t,e||[])).next())})};const kt=new M(Wt),o3=["call","estimateGas"];function Ro(t,e){if(t==null)return null;if(typeof t.message=="string"&&t.message.match("reverted")){const r=ce(t.data)?t.data:null;if(!e||r)return{message:t.message,data:r}}if(typeof t=="object"){for(const r in t){const n=Ro(t[r],e);if(n)return n}return null}if(typeof t=="string")try{return Ro(JSON.parse(t),e)}catch{}return null}function Fy(t,e,r){const n=r.transaction||r.signedTransaction;if(t==="call"){const s=Ro(e,!0);if(s)return s.data;kt.throwError("missing revert data in call exception; Transaction reverted without a reason string",M.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(t==="estimateGas"){let s=Ro(e.body,!1);s==null&&(s=Ro(e,!1)),s&&kt.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",M.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:t,transaction:n,error:e})}let i=e.message;throw e.code===M.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&kt.throwError("insufficient funds for intrinsic transaction cost",M.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n}),i.match(/nonce (is )?too low/i)&&kt.throwError("nonce has already been used",M.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&kt.throwError("replacement fee too low",M.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n}),i.match(/only replay-protected/i)&&kt.throwError("legacy pre-eip-155 transactions not supported",M.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:n}),o3.indexOf(t)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&kt.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",M.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n}),e}function i0(t){return new Promise(function(e){setTimeout(e,t)})}function a3(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function po(t){return t&&t.toLowerCase()}const Cf={};class Xl extends Gn{constructor(e,r,n){if(super(),e!==Cf)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");j(this,"provider",r),n==null&&(n=0),typeof n=="string"?(j(this,"_address",this.provider.formatter.address(n)),j(this,"_index",null)):typeof n=="number"?(j(this,"_index",n),j(this,"_address",null)):kt.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return kt.throwError("cannot alter JSON-RPC Signer connection",M.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new c3(Cf,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&kt.throwError("unknown account #"+this._index,M.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=ut(e);const r=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=ut(e);n.from=r,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>On(this,void 0,void 0,function*(){if(n==null)return null;const i=yield this.provider.resolveName(n);return i==null&&kt.throwArgumentError("provided ENS name resolves to null","tx.to",n),i}))),yt({tx:yt(e),sender:r}).then(({tx:n,sender:i})=>{n.from!=null?n.from.toLowerCase()!==i&&kt.throwArgumentError("from address mismatch","transaction",e):n.from=i;const s=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&kt.throwError("user rejected transaction",M.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),Fy("sendTransaction",o,s)))})}signTransaction(e){return kt.throwError("signing transactions is unsupported",M.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return On(this,void 0,void 0,function*(){const r=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield ji(()=>On(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(n);if(i!==null)return this.provider._wrapTransaction(i,n,r)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=n,i}})}signMessage(e){return On(this,void 0,void 0,function*(){const r=typeof e=="string"?At(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[X(r),n.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&kt.throwError("user rejected signing",M.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),i}})}_legacySignMessage(e){return On(this,void 0,void 0,function*(){const r=typeof e=="string"?At(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),X(r)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&kt.throwError("user rejected signing",M.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),i}})}_signTypedData(e,r,n){return On(this,void 0,void 0,function*(){const i=yield Lt.resolveNames(e,r,n,o=>this.provider.resolveName(o)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(Lt.getPayload(i.domain,r,i.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&kt.throwError("user rejected signing",M.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:r,value:i.value}}),o}})}unlock(e){return On(this,void 0,void 0,function*(){const r=this.provider,n=yield this.getAddress();return r.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class c3 extends Xl{sendTransaction(e){return this.sendUncheckedTransaction(e).then(r=>({hash:r,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(r,n)}))}}const u3={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class Vi extends Qc{constructor(e,r){let n=r;n==null&&(n=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(n),e||(e=Kt(this.constructor,"defaultUrl")()),typeof e=="string"?j(this,"connection",Object.freeze({url:e})):j(this,"connection",Object.freeze(ut(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return On(this,void 0,void 0,function*(){yield i0(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const r=Kt(this.constructor,"getNetwork");try{return r(W.from(e).toNumber())}catch(n){return kt.throwError("could not detect network",M.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return kt.throwError("could not detect network",M.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new Xl(Cf,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(r=>this.formatter.address(r)))}send(e,r){const n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Xt(n),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=to(this.connection,JSON.stringify(n),a3).then(o=>(this.emit("debug",{action:"response",request:n,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:n,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,r){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[po(r.address),r.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[po(r.address),r.blockTag]];case"getCode":return["eth_getCode",[po(r.address),r.blockTag]];case"getStorageAt":return["eth_getStorageAt",[po(r.address),ct(r.position,32),r.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[r.signedTransaction]];case"getBlock":return r.blockTag?["eth_getBlockByNumber",[r.blockTag,!!r.includeTransactions]]:r.blockHash?["eth_getBlockByHash",[r.blockHash,!!r.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[r.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[r.transactionHash]];case"call":{const n=Kt(this.constructor,"hexlifyTransaction");return["eth_call",[n(r.transaction,{from:!0}),r.blockTag]]}case"estimateGas":{const n=Kt(this.constructor,"hexlifyTransaction");return["eth_estimateGas",[n(r.transaction,{from:!0})]]}case"getLogs":return r.filter&&r.filter.address!=null&&(r.filter.address=po(r.filter.address)),["eth_getLogs",[r.filter]]}return null}perform(e,r){return On(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=r.transaction;if(i&&i.type!=null&&W.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(r=ut(r),r.transaction=ut(i),delete r.transaction.type)}}const n=this.prepareRequest(e,r);n==null&&kt.throwError(e+" not implemented",M.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(i){return Fy(e,i,r)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,r=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=r,r.then(function(n){function i(){e.send("eth_getFilterChanges",[n]).then(function(s){if(e._pendingFilter!=r)return null;let o=Promise.resolve();return s.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(c){return e.emit("pending",c),null})})}),o.then(function(){return i0(1e3)})}).then(function(){if(e._pendingFilter!=r){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,r){const n=ut(u3);if(r)for(const s in r)r[s]&&(n[s]=!0);kl(e,n);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=ca(W.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=X(e[s]))}),e.accessList&&(i.accessList=_i(e.accessList)),i}}let Oo=null;try{if(Oo=WebSocket,Oo==null)throw new Error("inject please")}catch{const e=new M(Wt);Oo=function(){e.throwError("WebSockets not supported in this environment",M.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var ju=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{f(n.next(l))}catch(h){o(h)}}function c(l){try{f(n.throw(l))}catch(h){o(h)}}function f(l){l.done?s(l.value):i(l.value).then(a,c)}f((n=n.apply(t,e||[])).next())})};const Ba=new M(Wt);let f3=1;class Xc extends Vi{constructor(e,r){r==="any"&&Ba.throwError("WebSocketProvider does not support 'any' network yet",M.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),typeof e=="string"?super(e,r):super("_websocket",r),this._pollingInterval=-1,this._wsReady=!1,typeof e=="string"?j(this,"_websocket",new Oo(this.connection.url)):j(this,"_websocket",e),j(this,"_requests",{}),j(this,"_subs",{}),j(this,"_subIds",{}),j(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(i=>{this.websocket.send(this._requests[i].payload)})},this.websocket.onmessage=i=>{const s=i.data,o=JSON.parse(s);if(o.id!=null){const a=String(o.id),c=this._requests[a];if(delete this._requests[a],o.result!==void 0)c.callback(null,o.result),this.emit("debug",{action:"response",request:JSON.parse(c.payload),response:o.result,provider:this});else{let f=null;o.error?(f=new Error(o.error.message||"unknown error"),j(f,"code",o.error.code||null),j(f,"response",s)):f=new Error("unknown error"),c.callback(f,void 0),this.emit("debug",{action:"response",error:f,request:JSON.parse(c.payload),provider:this})}}else if(o.method==="eth_subscription"){const a=this._subs[o.params.subscription];a&&a.processFunc(o.params.result)}else console.warn("this should not happen")};const n=setInterval(()=>{this.emit("poll")},1e3);n.unref&&n.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){Ba.throwError("cannot reset events block on WebSocketProvider",M.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){Ba.throwError("cannot set polling interval on WebSocketProvider",M.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return ju(this,void 0,void 0,function*(){return null})}set polling(e){!e||Ba.throwError("cannot set polling on WebSocketProvider",M.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,r){const n=f3++;return new Promise((i,s)=>{function o(c,f){return c?s(c):i(f)}const a=JSON.stringify({method:e,params:r,id:n,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(a),provider:this}),this._requests[String(n)]={callback:o,payload:a},this._wsReady&&this.websocket.send(a)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,r,n){return ju(this,void 0,void 0,function*(){let i=this._subIds[e];i==null&&(i=Promise.all(r).then(o=>this.send("eth_subscribe",o)),this._subIds[e]=i);const s=yield i;this._subs[s]={tag:e,processFunc:n}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],r=>{const n=W.from(r.number).toNumber();this._emitted.block=n,this.emit("block",n)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],r=>{this.emit("pending",r)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],r=>{r.removed==null&&(r.removed=!1),this.emit(e.filter,this.formatter.filterLog(r))});break;case"tx":{const r=n=>{const i=n.hash;this.getTransactionReceipt(i).then(s=>{!s||this.emit(i,s)})};r(e),this._subscribe("tx",["newHeads"],n=>{this._events.filter(i=>i.type==="tx").forEach(r)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e);break}}_stopEvent(e){let r=e.tag;if(e.type==="tx"){if(this._events.filter(i=>i.type==="tx").length)return;r="tx"}else if(this.listenerCount(e.event))return;const n=this._subIds[r];!n||(delete this._subIds[r],n.then(i=>{!this._subs[i]||(delete this._subs[i],this.send("eth_unsubscribe",[i]))}))}destroy(){return ju(this,void 0,void 0,function*(){this.websocket.readyState===Oo.CONNECTING&&(yield new Promise(e=>{this.websocket.onopen=function(){e(!0)},this.websocket.onerror=function(){e(!1)}})),this.websocket.close(1e3)})}}var l3=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{f(n.next(l))}catch(h){o(h)}}function c(l){try{f(n.throw(l))}catch(h){o(h)}}function f(l){l.done?s(l.value):i(l.value).then(a,c)}f((n=n.apply(t,e||[])).next())})};const Ao=new M(Wt);class Ly extends Vi{detectNetwork(){const e=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return l3(this,void 0,void 0,function*(){let r=this.network;return r==null&&(r=yield e.detectNetwork.call(this),r||Ao.throwError("no network detected",M.errors.UNKNOWN_ERROR,{}),this._network==null&&(j(this,"_network",r),this.emit("network",r,null))),r})}}class Vn extends Ly{constructor(e,r){Ao.checkAbstract(new.target,Vn),e=Kt(new.target,"getNetwork")(e),r=Kt(new.target,"getApiKey")(r);const n=Kt(new.target,"getUrl")(e,r);super(n,e),typeof r=="string"?j(this,"apiKey",r):r!=null&&Object.keys(r).forEach(i=>{j(this,i,r[i])})}_startPending(){Ao.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return Ao.throwError("API provider does not support signing",M.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,r){return Ao.throwError("not implemented; sub-classes must override getUrl",M.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const s0=new M(Wt),Za="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class Uy extends Xc{constructor(e,r){const n=new Zl(e,r),i=n.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");super(i,n.network),j(this,"apiKey",n.apiKey)}isCommunityResource(){return this.apiKey===Za}}class Zl extends Vn{static getWebSocketProvider(e,r){return new Uy(e,r)}static getApiKey(e){return e==null?Za:(e&&typeof e!="string"&&s0.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,r){let n=null;switch(e.name){case"homestead":n="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":n="eth-goerli.g.alchemy.com/v2/";break;case"matic":n="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":n="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":n="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":n="arb-goerli.g.alchemy.com/v2/";break;case"optimism":n="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":n="opt-goerli.g.alchemy.com/v2/";break;default:s0.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+n+r,throttleCallback:(i,s)=>(r===Za&&da(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===Za}}const d3=new M(Wt),Ra="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function h3(t){switch(t){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return d3.throwArgumentError("unsupported network","name",t)}class Ky extends Vn{isCommunityResource(){return this.apiKey===Ra}static getApiKey(e){return e??Ra}static getUrl(e,r){r==null&&(r=Ra);const n={allowGzip:!0,url:"https://"+h3(e.name)+r,throttleCallback:(i,s)=>(r.apiKey===Ra&&da(),Promise.resolve(!0))};return r.projectSecret!=null&&(n.user="",n.password=r.projectSecret),n}}var p3=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{f(n.next(l))}catch(h){o(h)}}function c(l){try{f(n.throw(l))}catch(h){o(h)}}function f(l){l.done?s(l.value):i(l.value).then(a,c)}f((n=n.apply(t,e||[])).next())})};const o0=new M(Wt);class jy extends Vn{static getApiKey(e){return e!=null&&o0.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,r){let n=null;switch(e.name){case"homestead":n="https://cloudflare-eth.com/";break;default:o0.throwArgumentError("unsupported network","network",arguments[0])}return n}perform(e,r){const n=Object.create(null,{perform:{get:()=>super.perform}});return p3(this,void 0,void 0,function*(){return e==="getBlockNumber"?(yield n.perform.call(this,"getBlock",{blockTag:"latest"})).number:n.perform.call(this,e,r)})}}var Oa=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{f(n.next(l))}catch(h){o(h)}}function c(l){try{f(n.throw(l))}catch(h){o(h)}}function f(l){l.done?s(l.value):i(l.value).then(a,c)}f((n=n.apply(t,e||[])).next())})};const ni=new M(Wt);function a0(t){const e={};for(let r in t){if(t[r]==null)continue;let n=t[r];r==="type"&&n===0||({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r]?n=ca(X(n)):r==="accessList"?n="["+_i(n).map(i=>`{address:"${i.address}",storageKeys:["${i.storageKeys.join('","')}"]}`).join(",")+"]":n=X(n),e[r]=n)}return e}function g3(t){if(t.status==0&&(t.message==="No records found"||t.message==="No transactions found"))return t.result;if(t.status!=1||typeof t.message!="string"||!t.message.match(/^OK/)){const e=new Error("invalid response");throw e.result=JSON.stringify(t),(t.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return t.result}function c0(t){if(t&&t.status==0&&t.message=="NOTOK"&&(t.result||"").toLowerCase().indexOf("rate limit")>=0){const e=new Error("throttled response");throw e.result=JSON.stringify(t),e.throttleRetry=!0,e}if(t.jsonrpc!="2.0"){const e=new Error("invalid response");throw e.result=JSON.stringify(t),e}if(t.error){const e=new Error(t.error.message||"unknown error");throw t.error.code&&(e.code=t.error.code),t.error.data&&(e.data=t.error.data),e}return t.result}function u0(t){if(t==="pending")throw new Error("pending not supported");return t==="latest"?t:parseInt(t.substring(2),16)}function $u(t,e,r){if(t==="call"&&e.code===M.errors.SERVER_ERROR){const i=e.error;if(i&&(i.message.match(/reverted/i)||i.message.match(/VM execution error/i))){let s=i.data;if(s&&(s="0x"+s.replace(/^.*0x/i,"")),ce(s))return s;ni.throwError("missing revert data in call exception",M.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}let n=e.message;throw e.code===M.errors.SERVER_ERROR&&(e.error&&typeof e.error.message=="string"?n=e.error.message:typeof e.body=="string"?n=e.body:typeof e.responseText=="string"&&(n=e.responseText)),n=(n||"").toLowerCase(),n.match(/insufficient funds/)&&ni.throwError("insufficient funds for intrinsic transaction cost",M.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:r}),n.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&ni.throwError("nonce has already been used",M.errors.NONCE_EXPIRED,{error:e,method:t,transaction:r}),n.match(/another transaction with same nonce/)&&ni.throwError("replacement fee too low",M.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:r}),n.match(/execution failed due to an exception|execution reverted/)&&ni.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",M.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:r}),e}class $y extends Qc{constructor(e,r){super(e),j(this,"baseUrl",this.getBaseUrl()),j(this,"apiKey",r||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return ni.throwArgumentError("unsupported network","network",this.network.name)}getUrl(e,r){const n=Object.keys(r).reduce((s,o)=>{const a=r[o];return a!=null&&(s+=`&${o}=${a}`),s},""),i=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${n}${i}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,r){return r.module=e,r.apikey=this.apiKey,r}fetch(e,r,n){return Oa(this,void 0,void 0,function*(){const i=n?this.getPostUrl():this.getUrl(e,r),s=n?this.getPostData(e,r):null,o=e==="proxy"?c0:g3;this.emit("debug",{action:"request",request:i,provider:this});const a={url:i,throttleSlotInterval:1e3,throttleCallback:(l,h)=>(this.isCommunityResource()&&da(),Promise.resolve(!0))};let c=null;s&&(a.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},c=Object.keys(s).map(l=>`${l}=${s[l]}`).join("&"));const f=yield to(a,c,o||c0);return this.emit("debug",{action:"response",request:i,response:Xt(f),provider:this}),f})}detectNetwork(){return Oa(this,void 0,void 0,function*(){return this.network})}perform(e,r){const n=Object.create(null,{perform:{get:()=>super.perform}});return Oa(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:r.address,tag:r.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:r.address,tag:r.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:r.address,tag:r.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:r.address,position:r.position,tag:r.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:r.signedTransaction},!0).catch(i=>$u("sendTransaction",i,r.signedTransaction));case"getBlock":if(r.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:r.blockTag,boolean:r.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:r.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:r.transactionHash});case"call":{if(r.blockTag!=="latest")throw new Error("EtherscanProvider does not support blockTag for call");const i=a0(r.transaction);i.module="proxy",i.action="eth_call";try{return yield this.fetch("proxy",i,!0)}catch(s){return $u("call",s,r.transaction)}}case"estimateGas":{const i=a0(r.transaction);i.module="proxy",i.action="eth_estimateGas";try{return yield this.fetch("proxy",i,!0)}catch(s){return $u("estimateGas",s,r.transaction)}}case"getLogs":{const i={action:"getLogs"};if(r.filter.fromBlock&&(i.fromBlock=u0(r.filter.fromBlock)),r.filter.toBlock&&(i.toBlock=u0(r.filter.toBlock)),r.filter.address&&(i.address=r.filter.address),r.filter.topics&&r.filter.topics.length>0&&(r.filter.topics.length>1&&ni.throwError("unsupported topic count",M.errors.UNSUPPORTED_OPERATION,{topics:r.filter.topics}),r.filter.topics.length===1)){const a=r.filter.topics[0];(typeof a!="string"||a.length!==66)&&ni.throwError("unsupported topic format",M.errors.UNSUPPORTED_OPERATION,{topic0:a}),i.topic0=a}const s=yield this.fetch("logs",i);let o={};for(let a=0;a<s.length;a++){const c=s[a];if(c.blockHash==null){if(o[c.blockNumber]==null){const f=yield this.getBlock(c.blockNumber);f&&(o[c.blockNumber]=f.hash)}c.blockHash=o[c.blockNumber]}}return s}case"getEtherPrice":return this.network.name!=="homestead"?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return n.perform.call(this,e,r)})}getHistory(e,r,n){return Oa(this,void 0,void 0,function*(){const i={action:"txlist",address:yield this.resolveName(e),startblock:r??0,endblock:n??99999999,sort:"asc"};return(yield this.fetch("account",i)).map(o=>{["contractAddress","to"].forEach(function(c){o[c]==""&&delete o[c]}),o.creates==null&&o.contractAddress!=null&&(o.creates=o.contractAddress);const a=this.formatter.transactionResponse(o);return o.timeStamp&&(a.timestamp=parseInt(o.timeStamp)),a})})}isCommunityResource(){return this.apiKey==null}}var xc=globalThis&&globalThis.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(l){try{f(n.next(l))}catch(h){o(h)}}function c(l){try{f(n.throw(l))}catch(h){o(h)}}function f(l){l.done?s(l.value):i(l.value).then(a,c)}f((n=n.apply(t,e||[])).next())})};const Ki=new M(Wt);function Da(){return new Date().getTime()}function f0(t){let e=null;for(let r=0;r<t.length;r++){const n=t[r];if(n==null)return null;e?e.name===n.name&&e.chainId===n.chainId&&(e.ensAddress===n.ensAddress||e.ensAddress==null&&n.ensAddress==null)||Ki.throwArgumentError("provider mismatch","networks",t):e=n}return e}function l0(t,e){t=t.slice().sort();const r=Math.floor(t.length/2);if(t.length%2)return t[r];const n=t[r-1],i=t[r];return e!=null&&Math.abs(n-i)>e?null:(n+i)/2}function Is(t){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return JSON.stringify(t);if(typeof t=="string")return t;if(W.isBigNumber(t))return t.toString();if(Array.isArray(t))return JSON.stringify(t.map(e=>Is(e)));if(typeof t=="object"){const e=Object.keys(t);return e.sort(),"{"+e.map(r=>{let n=t[r];return typeof n=="function"?n="[function]":n=Is(n),JSON.stringify(r)+":"+n}).join(",")+"}"}throw new Error("unknown value type: "+typeof t)}let y3=1;function d0(t){let e=null,r=null,n=new Promise(o=>{e=function(){r&&(clearTimeout(r),r=null),o()},r=setTimeout(e,t)});const i=o=>(n=n.then(o),n);function s(){return n}return{cancel:e,getPromise:s,wait:i}}const m3=[M.errors.CALL_EXCEPTION,M.errors.INSUFFICIENT_FUNDS,M.errors.NONCE_EXPIRED,M.errors.REPLACEMENT_UNDERPRICED,M.errors.UNPREDICTABLE_GAS_LIMIT],b3=["address","args","errorArgs","errorSignature","method","transaction"];function Fa(t,e){const r={weight:t.weight};return Object.defineProperty(r,"provider",{get:()=>t.provider}),t.start&&(r.start=t.start),e&&(r.duration=e-t.start),t.done&&(t.error?r.error=t.error:r.result=t.result||null),r}function x3(t,e){return function(r){const n={};r.forEach(s=>{const o=t(s.result);n[o]||(n[o]={count:0,result:s.result}),n[o].count++});const i=Object.keys(n);for(let s=0;s<i.length;s++){const o=n[i[s]];if(o.count>=e)return o.result}}}function v3(t,e,r){let n=Is;switch(e){case"getBlockNumber":return function(i){const s=i.map(a=>a.result);let o=l0(i.map(a=>a.result),2);if(o!=null)return o=Math.ceil(o),s.indexOf(o+1)>=0&&o++,o>=t._highestBlockNumber&&(t._highestBlockNumber=o),t._highestBlockNumber};case"getGasPrice":return function(i){const s=i.map(o=>o.result);return s.sort(),s[Math.floor(s.length/2)]};case"getEtherPrice":return function(i){return l0(i.map(s=>s.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(i){return i==null?null:(i=ut(i),i.confirmations=-1,Is(i))};break;case"getBlock":r.includeTransactions?n=function(i){return i==null?null:(i=ut(i),i.transactions=i.transactions.map(s=>(s=ut(s),s.confirmations=-1,s)),Is(i))}:n=function(i){return i==null?null:Is(i)};break;default:throw new Error("unknown method: "+e)}return x3(n,t.quorum)}function go(t,e){return xc(this,void 0,void 0,function*(){const r=t.provider;return r.blockNumber!=null&&r.blockNumber>=e||e===-1?r:ji(()=>new Promise((n,i)=>{setTimeout(function(){return r.blockNumber>=e?n(r):t.cancelled?n(null):n(void 0)},0)}),{oncePoll:r})})}function w3(t,e,r,n){return xc(this,void 0,void 0,function*(){let i=t.provider;switch(r){case"getBlockNumber":case"getGasPrice":return i[r]();case"getEtherPrice":if(i.getEtherPrice)return i.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return n.blockTag&&ce(n.blockTag)&&(i=yield go(t,e)),i[r](n.address,n.blockTag||"latest");case"getStorageAt":return n.blockTag&&ce(n.blockTag)&&(i=yield go(t,e)),i.getStorageAt(n.address,n.position,n.blockTag||"latest");case"getBlock":return n.blockTag&&ce(n.blockTag)&&(i=yield go(t,e)),i[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash);case"call":case"estimateGas":return n.blockTag&&ce(n.blockTag)&&(i=yield go(t,e)),r==="call"&&n.blockTag?i[r](n.transaction,n.blockTag):i[r](n.transaction);case"getTransaction":case"getTransactionReceipt":return i[r](n.transactionHash);case"getLogs":{let s=n.filter;return(s.fromBlock&&ce(s.fromBlock)||s.toBlock&&ce(s.toBlock))&&(i=yield go(t,e)),i.getLogs(s)}}return Ki.throwError("unknown method error",M.errors.UNKNOWN_ERROR,{method:r,params:n})})}class Hy extends Qc{constructor(e,r){e.length===0&&Ki.throwArgumentError("missing providers","providers",e);const n=e.map((o,a)=>{if(is.isProvider(o)){const l=Pf(o)?2e3:750;return Object.freeze({provider:o,weight:1,stallTimeout:l,priority:1})}const c=ut(o);c.priority==null&&(c.priority=1),c.stallTimeout==null&&(c.stallTimeout=Pf(o)?2e3:750),c.weight==null&&(c.weight=1);const f=c.weight;return(f%1||f>512||f<1)&&Ki.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${a}].weight`,f),Object.freeze(c)}),i=n.reduce((o,a)=>o+a.weight,0);r==null?r=i/2:r>i&&Ki.throwArgumentError("quorum will always fail; larger than total weight","quorum",r);let s=f0(n.map(o=>o.provider.network));s==null&&(s=new Promise((o,a)=>{setTimeout(()=>{this.detectNetwork().then(o,a)},0)})),super(s),j(this,"providerConfigs",Object.freeze(n)),j(this,"quorum",r),this._highestBlockNumber=-1}detectNetwork(){return xc(this,void 0,void 0,function*(){const e=yield Promise.all(this.providerConfigs.map(r=>r.provider.getNetwork()));return f0(e)})}perform(e,r){return xc(this,void 0,void 0,function*(){if(e==="sendTransaction"){const c=yield Promise.all(this.providerConfigs.map(f=>f.provider.sendTransaction(r.signedTransaction).then(l=>l.hash,l=>l)));for(let f=0;f<c.length;f++){const l=c[f];if(typeof l=="string")return l}throw c[0]}this._highestBlockNumber===-1&&e!=="getBlockNumber"&&(yield this.getBlockNumber());const n=v3(this,e,r),i=Ey(this.providerConfigs.map(ut));i.sort((c,f)=>c.priority-f.priority);const s=this._highestBlockNumber;let o=0,a=!0;for(;;){const c=Da();let f=i.filter(v=>v.runner&&c-v.start<v.stallTimeout).reduce((v,T)=>v+T.weight,0);for(;f<this.quorum&&o<i.length;){const v=i[o++],T=y3++;v.start=Da(),v.staller=d0(v.stallTimeout),v.staller.wait(()=>{v.staller=null}),v.runner=w3(v,s,e,r).then(x=>{v.done=!0,v.result=x,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:T,backend:Fa(v,Da()),request:{method:e,params:Xt(r)},provider:this})},x=>{v.done=!0,v.error=x,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:T,backend:Fa(v,Da()),request:{method:e,params:Xt(r)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:T,backend:Fa(v,null),request:{method:e,params:Xt(r)},provider:this}),f+=v.weight}const l=[];i.forEach(v=>{v.done||!v.runner||(l.push(v.runner),v.staller&&l.push(v.staller.getPromise()))}),l.length&&(yield Promise.race(l));const h=i.filter(v=>v.done&&v.error==null);if(h.length>=this.quorum){const v=n(h);if(v!==void 0)return i.forEach(T=>{T.staller&&T.staller.cancel(),T.cancelled=!0}),v;a||(yield d0(100).getPromise()),a=!1}const m=i.reduce((v,T)=>{if(!T.done||T.error==null)return v;const x=T.error.code;return m3.indexOf(x)>=0&&(v[x]||(v[x]={error:T.error,weight:0}),v[x].weight+=T.weight),v},{});if(Object.keys(m).forEach(v=>{const T=m[v];if(T.weight<this.quorum)return;i.forEach(_=>{_.staller&&_.staller.cancel(),_.cancelled=!0});const x=T.error,b={};b3.forEach(_=>{x[_]!=null&&(b[_]=x[_])}),Ki.throwError(x.reason||x.message,v,b)}),i.filter(v=>!v.done).length===0)break}return i.forEach(c=>{c.staller&&c.staller.cancel(),c.cancelled=!0}),Ki.throwError("failed to meet quorum",M.errors.SERVER_ERROR,{method:e,params:r,results:i.map(c=>Fa(c)),provider:this})})}}const qy=null,ec=new M(Wt),So="84842078b09946638c03157f83405213";class zy extends Xc{constructor(e,r){const n=new ed(e,r),i=n.connection;i.password&&ec.throwError("INFURA WebSocket project secrets unsupported",M.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});const s=i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");super(s,e),j(this,"apiKey",n.projectId),j(this,"projectId",n.projectId),j(this,"projectSecret",n.projectSecret)}isCommunityResource(){return this.projectId===So}}class ed extends Vn{static getWebSocketProvider(e,r){return new zy(e,r)}static getApiKey(e){const r={apiKey:So,projectId:So,projectSecret:null};return e==null||(typeof e=="string"?r.projectId=e:e.projectSecret!=null?(ec.assertArgument(typeof e.projectId=="string","projectSecret requires a projectId","projectId",e.projectId),ec.assertArgument(typeof e.projectSecret=="string","invalid projectSecret","projectSecret","[REDACTED]"),r.projectId=e.projectId,r.projectSecret=e.projectSecret):e.projectId&&(r.projectId=e.projectId),r.apiKey=r.projectId),r}static getUrl(e,r){let n=null;switch(e?e.name:"unknown"){case"homestead":n="mainnet.infura.io";break;case"goerli":n="goerli.infura.io";break;case"sepolia":n="sepolia.infura.io";break;case"matic":n="polygon-mainnet.infura.io";break;case"maticmum":n="polygon-mumbai.infura.io";break;case"optimism":n="optimism-mainnet.infura.io";break;case"optimism-goerli":n="optimism-goerli.infura.io";break;case"arbitrum":n="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":n="arbitrum-goerli.infura.io";break;default:ec.throwError("unsupported network",M.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i={allowGzip:!0,url:"https://"+n+"/v3/"+r.projectId,throttleCallback:(s,o)=>(r.projectId===So&&da(),Promise.resolve(!0))};return r.projectSecret!=null&&(i.user="",i.password=r.projectSecret),i}isCommunityResource(){return this.projectId===So}}class _3 extends Vi{send(e,r){const n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};this._pendingBatch==null&&(this._pendingBatch=[]);const i={request:n,resolve:null,reject:null},s=new Promise((o,a)=>{i.resolve=o,i.reject=a});return this._pendingBatch.push(i),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const o=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const a=o.map(c=>c.request);return this.emit("debug",{action:"requestBatch",request:Xt(a),provider:this}),to(this.connection,JSON.stringify(a)).then(c=>{this.emit("debug",{action:"response",request:a,response:c,provider:this}),o.forEach((f,l)=>{const h=c[l];if(h.error){const m=new Error(h.error.message);m.code=h.error.code,m.data=h.error.data,f.reject(m)}else f.resolve(h.result)})},c=>{this.emit("debug",{action:"response",error:c,request:a,provider:this}),o.forEach(f=>{f.reject(c)})})},10)),s}}const Hu=new M(Wt),E3="ETHERS_JS_SHARED";class Gy extends Vn{static getApiKey(e){return e&&typeof e!="string"&&Hu.throwArgumentError("invalid apiKey","apiKey",e),e||E3}static getUrl(e,r){Hu.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let n=null;switch(e.name){case"homestead":n="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":n="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":n="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":n="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":n="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:Hu.throwArgumentError("unsupported network","network",arguments[0])}return n+"?apiKey="+r}}const h0=new M(Wt),p0="62e1ad51b37b8e00394bda3b";class Vy extends Vn{static getApiKey(e){const r={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return e==null?r.applicationId=p0:typeof e=="string"?r.applicationId=e:e.applicationSecretKey!=null?(r.applicationId=e.applicationId,r.applicationSecretKey=e.applicationSecretKey):e.applicationId?r.applicationId=e.applicationId:h0.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),r}static getUrl(e,r){let n=null;switch(e?e.name:"unknown"){case"goerli":n="eth-goerli.gateway.pokt.network";break;case"homestead":n="eth-mainnet.gateway.pokt.network";break;case"kovan":n="poa-kovan.gateway.pokt.network";break;case"matic":n="poly-mainnet.gateway.pokt.network";break;case"maticmum":n="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":n="eth-rinkeby.gateway.pokt.network";break;case"ropsten":n="eth-ropsten.gateway.pokt.network";break;default:h0.throwError("unsupported network",M.errors.INVALID_ARGUMENT,{argument:"network",value:e})}const i=`https://${n}/v1/lb/${r.applicationId}`,s={headers:{},url:i};return r.applicationSecretKey!=null&&(s.user="",s.password=r.applicationSecretKey),s}isCommunityResource(){return this.applicationId===p0}}const g0=new M(Wt);let A3=1;function y0(t,e){const r="Web3LegacyFetcher";return function(n,i){const s={method:n,params:i,id:A3++,jsonrpc:"2.0"};return new Promise((o,a)=>{this.emit("debug",{action:"request",fetcher:r,request:Xt(s),provider:this}),e(s,(c,f)=>{if(c)return this.emit("debug",{action:"response",fetcher:r,error:c,request:s,provider:this}),a(c);if(this.emit("debug",{action:"response",fetcher:r,request:s,response:f,provider:this}),f.error){const l=new Error(f.error.message);return l.code=f.error.code,l.data=f.error.data,a(l)}o(f.result)})})}}function S3(t){return function(e,r){r==null&&(r=[]);const n={method:e,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Xt(n),provider:this}),t.request(n).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:i,provider:this}),i})}}class Jy extends Vi{constructor(e,r){e==null&&g0.throwArgumentError("missing provider","provider",e);let n=null,i=null,s=null;typeof e=="function"?(n="unknown:",i=e):(n=e.host||e.path||"",!n&&e.isMetaMask&&(n="metamask"),s=e,e.request?(n===""&&(n="eip-1193:"),i=S3(e)):e.sendAsync?i=y0(e,e.sendAsync.bind(e)):e.send?i=y0(e,e.send.bind(e)):g0.throwArgumentError("unsupported provider","provider",e),n||(n="unknown:")),super(n,r),j(this,"jsonRpcFetchFunc",i),j(this,"provider",s)}send(e,r){return this.jsonRpcFetchFunc(e,r)}}const m0=new M(Wt);function td(t,e){if(t==null&&(t="homestead"),typeof t=="string"){const n=t.match(/^(ws|http)s?:/i);if(n)switch(n[1].toLowerCase()){case"http":case"https":return new Vi(t);case"ws":case"wss":return new Xc(t);default:m0.throwArgumentError("unsupported URL scheme","network",t)}}const r=Ql(t);return(!r||!r._defaultProvider)&&m0.throwError("unsupported getDefaultProvider network",M.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:t}),r._defaultProvider({FallbackProvider:Hy,AlchemyProvider:Zl,AnkrProvider:Ky,CloudflareProvider:jy,EtherscanProvider:$y,InfuraProvider:ed,JsonRpcProvider:Vi,NodesmithProvider:Gy,PocketProvider:Vy,Web3Provider:Jy,IpcProvider:qy},e)}var Wy=Object.freeze(Object.defineProperty({__proto__:null,Provider:is,BaseProvider:Qc,Resolver:If,UrlJsonRpcProvider:Vn,FallbackProvider:Hy,AlchemyProvider:Zl,AlchemyWebSocketProvider:Uy,AnkrProvider:Ky,CloudflareProvider:jy,EtherscanProvider:$y,InfuraProvider:ed,InfuraWebSocketProvider:zy,JsonRpcProvider:Vi,JsonRpcBatchProvider:_3,NodesmithProvider:Gy,PocketProvider:Vy,StaticJsonRpcProvider:Ly,Web3Provider:Jy,WebSocketProvider:Xc,IpcProvider:qy,JsonRpcSigner:Xl,getDefaultProvider:td,getNetwork:Ql,isCommunityResource:Pf,isCommunityResourcable:Ry,showThrottleMessage:da,Formatter:ie},Symbol.toStringTag,{value:"Module"}));const T3="solidity/5.7.0",k3=new RegExp("^bytes([0-9]+)$"),P3=new RegExp("^(u?int)([0-9]*)$"),I3=new RegExp("^(.*)\\[([0-9]*)\\]$"),C3="0000000000000000000000000000000000000000000000000000000000000000",Ss=new M(T3);function Yy(t,e,r){switch(t){case"address":return r?Po(e,32):Y(e);case"string":return At(e);case"bytes":return Y(e);case"bool":return e=e?"0x01":"0x00",r?Po(e,32):Y(e)}let n=t.match(P3);if(n){let i=parseInt(n[2]||"256");return(n[2]&&String(i)!==n[2]||i%8!==0||i===0||i>256)&&Ss.throwArgumentError("invalid number type","type",t),r&&(i=256),e=W.from(e).toTwos(i),Po(e,i/8)}if(n=t.match(k3),n){const i=parseInt(n[1]);return(String(i)!==n[1]||i===0||i>32)&&Ss.throwArgumentError("invalid bytes type","type",t),Y(e).byteLength!==i&&Ss.throwArgumentError(`invalid value for ${t}`,"value",e),r?Y((e+C3).substring(0,66)):e}if(n=t.match(I3),n&&Array.isArray(e)){const i=n[1];parseInt(n[2]||String(e.length))!=e.length&&Ss.throwArgumentError(`invalid array length for ${t}`,"value",e);const o=[];return e.forEach(function(a){o.push(Yy(i,a,!0))}),at(o)}return Ss.throwArgumentError("invalid type","type",t)}function rd(t,e){t.length!=e.length&&Ss.throwArgumentError("wrong number of values; expected ${ types.length }","values",e);const r=[];return t.forEach(function(n,i){r.push(Yy(n,e[i]))}),X(at(r))}function N3(t,e){return nt(rd(t,e))}function M3(t,e){return $n(rd(t,e))}const B3="units/5.7.0",Qy=new M(B3),Xy=["wei","kwei","mwei","gwei","szabo","finney","ether"];function R3(t){const e=String(t).split(".");(e.length>2||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||t==="."||t==="-.")&&Qy.throwArgumentError("invalid value","value",t);let r=e[0],n="";for(r.substring(0,1)==="-"&&(n="-",r=r.substring(1));r.substring(0,1)==="0";)r=r.substring(1);r===""&&(r="0");let i="";for(e.length===2&&(i="."+(e[1]||"0"));i.length>2&&i[i.length-1]==="0";)i=i.substring(0,i.length-1);const s=[];for(;r.length;)if(r.length<=3){s.unshift(r);break}else{const o=r.length-3;s.unshift(r.substring(o)),r=r.substring(0,o)}return n+s.join(",")+i}function Zy(t,e){if(typeof e=="string"){const r=Xy.indexOf(e);r!==-1&&(e=3*r)}return Va(t,e??18)}function em(t,e){if(typeof t!="string"&&Qy.throwArgumentError("value must be a string","value",t),typeof e=="string"){const r=Xy.indexOf(e);r!==-1&&(e=3*r)}return dn(t,e??18)}function O3(t){return Zy(t,18)}function D3(t){return em(t,18)}var tm=Object.freeze(Object.defineProperty({__proto__:null,AbiCoder:zg,defaultAbiCoder:Gg,Fragment:mn,ConstructorFragment:Qr,ErrorFragment:Fn,EventFragment:yn,FunctionFragment:Xr,ParamType:Mt,FormatTypes:be,checkResultErrors:Pg,Logger:M,RLP:sw,_fetchData:Ny,fetchJson:to,poll:ji,checkProperties:kl,deepCopy:Xt,defineReadOnly:j,getStatic:Kt,resolveProperties:yt,shallowCopy:ut,arrayify:Y,concat:at,stripZeros:vn,zeroPad:Po,isBytes:vi,isBytesLike:aa,defaultPath:Ks,HDNode:pr,SigningKey:$i,Interface:vf,LogDescription:ny,TransactionDescription:iy,base58:Ls,base64:Vw,hexlify:X,isHexString:ce,hexConcat:Yt,hexStripZeros:xg,hexValue:ca,hexZeroPad:ct,hexDataLength:Sn,hexDataSlice:_t,nameprep:Hw,_toEscapedUtf8String:Pw,toUtf8Bytes:At,toUtf8CodePoints:uc,toUtf8String:ns,Utf8ErrorFuncs:Hg,formatBytes32String:Iw,parseBytes32String:Cw,dnsEncode:Zg,hashMessage:Ll,namehash:No,isValidName:m_,id:oi,_TypedDataEncoder:Lt,getAddress:Ge,getIcapAddress:fw,getContractAddress:Hc,getCreate2Address:lw,isAddress:uw,formatEther:O3,parseEther:D3,formatUnits:Zy,parseUnits:em,commify:R3,computeHmac:zo,keccak256:nt,ripemd160:xy,sha256:$n,sha512:a2,randomBytes:Ps,shuffled:Ey,solidityPack:rd,solidityKeccak256:N3,soliditySha256:M3,splitSignature:ts,joinSignature:mf,accessListify:_i,parseTransaction:hy,serializeTransaction:Af,get TransactionTypes(){return Ef},getJsonWalletAddress:E2,computeAddress:ci,recoverAddress:la,computePublicKey:$l,recoverPublicKey:cy,verifyMessage:D2,verifyTypedData:F2,getAccountPath:m2,mnemonicToEntropy:Jc,entropyToMnemonic:Wc,isValidMnemonic:y2,mnemonicToSeed:_y,get SupportedAlgorithm(){return Us},get UnicodeNormalizationForm(){return Tn},get Utf8ErrorReason(){return nr},Indexed:lc},Symbol.toStringTag,{value:"Module"}));const nd="ethers/5.7.2",rm=new M(nd);var nm=Object.freeze(Object.defineProperty({__proto__:null,Signer:Gn,Wallet:ri,VoidSigner:fa,getDefaultProvider:td,providers:Wy,BaseContract:ql,Contract:gc,ContractFactory:my,BigNumber:W,FixedNumber:Nt,constants:Kg,get errors(){return dr},logger:rm,utils:tm,wordlists:yc,version:nd,Wordlist:os},Symbol.toStringTag,{value:"Module"}));try{const t=window;t._ethers==null&&(t._ethers=nm)}catch{}var F3=Object.freeze(Object.defineProperty({__proto__:null,ethers:nm,Signer:Gn,Wallet:ri,VoidSigner:fa,getDefaultProvider:td,providers:Wy,BaseContract:ql,Contract:gc,ContractFactory:my,BigNumber:W,FixedNumber:Nt,constants:Kg,get errors(){return dr},logger:rm,utils:tm,wordlists:yc,version:nd,Wordlist:os},Symbol.toStringTag,{value:"Module"})),Zc=Rf(F3),im=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zs,"__esModule",{value:!0});const L3=im(Al),U3=im(hg),qu=Zc;class K3 extends L3.default{get publicKey(){return z.Buffer.from(this.pk,"hex")}constructor(e){const r=z.Buffer.from(e,"hex"),n=U3.default.publicKeyCreate(r,!1);super(e,z.Buffer.from(n))}sign(e){return new qu.ethers.Wallet(this._key).signMessage(e).then(n=>z.Buffer.from(n.slice(2),"hex"))}static async verify(e,r,n){const i=qu.ethers.utils.computeAddress(e);return qu.ethers.utils.verifyMessage(r,n)===i}}Zs.default=K3;var id={},sd={},eu={},sm=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(eu,"__esModule",{value:!0});const zu=Wi,j3=sm(Yi),$3=sm(nn.exports),b0=es;class H3{constructor(e,r){this._key=e,this.pk=r,this.signatureType=1,this.ownerLength=b0.SIG_CONFIG[1].pubLength,this.signatureLength=b0.SIG_CONFIG[1].sigLength,r||(this.pk=zu.createPublicKey({key:e,type:"pkcs1",format:"pem"}).export({format:"pem",type:"pkcs1"}).toString())}get publicKey(){return this._publicKey}sign(e){return zu.createSign("sha256").update(e).sign({key:this._key,padding:zu.constants.RSA_PKCS1_PSS_PADDING})}static async verify(e,r,n){return await j3.default.crypto.verify(z.Buffer.isBuffer(e)?$3.default.encode(e):e,r,n)}}eu.default=H3;var js={},q3=F&&F.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),z3=F&&F.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),G3=F&&F.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&q3(e,t,r);return z3(e,t),e};Object.defineProperty(js,"__esModule",{value:!0});js.jwkTopem=js.pemTojwk=void 0;const Jn=G3(tb);function V3(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function od(t){return V3(z.Buffer.from(t,"hex").toString("base64"))}var om=Jn.define("RSAPublicKey",function(){this.seq().obj(this.key("n").int(),this.key("e").int())}),am=Jn.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())}),J3=Jn.define("PublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(am),this.key("publicKey").bitstr())}),cm=Jn.define("Version",function(){this.int({0:"two-prime",1:"multi"})}),W3=Jn.define("OtherPrimeInfos",function(){this.seq().obj(this.key("ri").int(),this.key("di").int(),this.key("ti").int())}),um=Jn.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").use(cm),this.key("n").int(),this.key("e").int(),this.key("d").int(),this.key("p").int(),this.key("q").int(),this.key("dp").int(),this.key("dq").int(),this.key("qi").int(),this.key("other").optional().use(W3))}),Y3=Jn.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").use(cm),this.key("algorithm").use(am),this.key("privateKey").bitstr())});function fm(t,e){return e=e||{},Object.keys(e).forEach(function(r){t[r]=e[r]}),t}function ad(t){return t.length%2===1?"0"+t:t}function lm(t,e){var r=om.decode(t,"der"),n=ad(r.e.toString(16)),i={kty:"RSA",n:ti(r.n),e:od(n)};return fm(i,e)}function dm(t,e){var r=um.decode(t,"der"),n=ad(r.e.toString(16)),i={kty:"RSA",n:ti(r.n),e:od(n),d:ti(r.d),p:ti(r.p),q:ti(r.q),dp:ti(r.dp),dq:ti(r.dq),qi:ti(r.qi)};return fm(i,e)}function Q3(t,e){var r=J3.decode(t,"der");return lm(r.publicKey.data,e)}function X3(t,e){var r=Y3.decode(t,"der");return dm(r.privateKey.data,e)}function Z3(t){var e=/^-----BEGIN (RSA )?(PUBLIC|PRIVATE) KEY-----$/.exec(t);if(!e)return null;var r=!!e[1],n=e[2]==="PRIVATE";return n?r?dm:X3:r?lm:Q3}function eE(t){return{n:Xn(t.n),e:Xn(t.e),d:t.d&&Xn(t.d),p:t.p&&Xn(t.p),q:t.q&&Xn(t.q),dp:t.dp&&Xn(t.dp),dq:t.dq&&Xn(t.dq),qi:t.qi&&Xn(t.qi)}}function ti(t){return od(ad(t.toString(16)))}function tE(t){return new Jn.bignum(z.Buffer.from(t,"base64"))}function Xn(t){return/^[0-9]+$/.test(t)?new Jn.bignum(t,10):tE(t)}function rE(t,e){var r=t.toString().split(/(\r\n|\r|\n)+/g);r=r.filter(function(i){return i.trim().length!==0});var n=Z3(r[0]);return r=r.slice(1,-1).join(""),n(z.Buffer.from(r.replace(/[^\w\d\+\/=]+/g,""),"base64"),e)}js.pemTojwk=rE;function nE(t){var e=eE(t),r=!!e.d,n=r?"PRIVATE":"PUBLIC",i="-----BEGIN RSA "+n+` KEY-----
`,s=`
-----END RSA `+n+` KEY-----
`,o=z.Buffer.alloc(0);r?(e.version="two-prime",o=um.encode(e,"der")):o=om.encode(e,"der");var a=o.toString("base64").match(/.{1,64}/g).join(`
`);return i+a+s}js.jwkTopem=nE;var cd=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sd,"__esModule",{value:!0});const iE=cd(eu),sE=js,oE=cd(nn.exports),x0=cd(Yi);class aE extends iE.default{constructor(e){super(sE.jwkTopem(e),e.n),this.jwk=e}get publicKey(){return oE.default.toBuffer(this.pk)}sign(e){return x0.default.crypto.sign(this.jwk,e)}static async verify(e,r,n){return await x0.default.crypto.verify(e,r,n)}}sd.default=aE;var ud={},cE=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ud,"__esModule",{value:!0});const uE=cE(Zs);class fE extends uE.default{}ud.default=fE;var ro={},hm=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ro,"__esModule",{value:!0});const lE=hm(oa),yo=hm(Of);class dE extends lE.default{get publicKey(){return yo.default.decode(this.pk)}get key(){return yo.default.decode(this._key)}constructor(e){const r=yo.default.decode(e);super(yo.default.encode(r.subarray(0,32)),yo.default.encode(r.subarray(32,64)))}}ro.default=dE;var fd={};Object.defineProperty(fd,"__esModule",{value:!0});const ms=Zc,mo=es;class hE{constructor(e){this.ownerLength=mo.SIG_CONFIG[mo.SignatureConfig.ETHEREUM].pubLength,this.signatureLength=mo.SIG_CONFIG[mo.SignatureConfig.ETHEREUM].sigLength,this.signatureType=mo.SignatureConfig.ETHEREUM,this.signer=e.getSigner()}async setPublicKey(){const e="sign this message to connect to Bundlr.Network",r=await this.signer.signMessage(e),n=await ms.ethers.utils.hashMessage(e),i=ms.ethers.utils.recoverPublicKey(ms.ethers.utils.arrayify(n),r);this.publicKey=z.Buffer.from(ms.ethers.utils.arrayify(i))}async sign(e){this.publicKey||await this.setPublicKey();const r=await this.signer.signMessage(e);return z.Buffer.from(r.slice(2),"hex")}static verify(e,r,n){const i=ms.ethers.utils.computeAddress(e);return ms.ethers.utils.verifyMessage(r,n)===i}}fd.default=hE;var tu={},pE=F&&F.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),gE=F&&F.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),yE=F&&F.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&pE(e,t,r);return gE(e,t),e},mE=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tu,"__esModule",{value:!0});const bE=yE(dg),xE=mE(nn.exports),v0=es;class vE{constructor(e){this.ownerLength=v0.SIG_CONFIG[2].pubLength,this.signatureLength=v0.SIG_CONFIG[2].sigLength,this.signatureType=2,this.provider=e,this._publicKey=this.provider.publicKey.toBuffer()}get publicKey(){return this._publicKey}async sign(e){if(!this.provider.signMessage)throw new Error("Selected Wallet does not support message signing");return await this.provider.signMessage(e)}static async verify(e,r,n){let i=e;return typeof e=="string"&&(i=xE.default.toBuffer(e)),bE.verify(z.Buffer.from(n),z.Buffer.from(r),z.Buffer.from(i))}}tu.default=vE;var ld={},wE=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ld,"__esModule",{value:!0});const _E=wE(ro);class EE extends _E.default{constructor(e){super(e.replace("ed25519:",""))}}ld.default=EE;var dd={},AE=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dd,"__esModule",{value:!0});const SE=AE(oa);class TE extends SE.default{get publicKey(){return z.Buffer.from(this.pk)}get key(){return z.Buffer.from(this._key)}constructor(e,r){super(e.subarray(0,32),r)}}dd.default=TE;var hd={},kE=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hd,"__esModule",{value:!0});const PE=kE(tu);class IE extends PE.default{constructor(e){super(e),this.signatureType=4}async sign(e){return super.sign(z.Buffer.from(z.Buffer.from(e).toString("hex")))}static async verify(e,r,n){return super.verify(e,z.Buffer.from(z.Buffer.from(r).toString("hex")),n)}}hd.default=IE;var pd={},CE=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pd,"__esModule",{value:!0});const NE=CE(ro);class ME extends NE.default{constructor(e){super(e),this.signatureType=4}async sign(e){return super.sign(z.Buffer.from(z.Buffer.from(e).toString("hex")))}static async verify(e,r,n){return super.verify(e,z.Buffer.from(z.Buffer.from(r).toString("hex")),n)}}pd.default=ME;(function(t){var e=F&&F.__createBinding||(Object.create?function(m,v,T,x){x===void 0&&(x=T),Object.defineProperty(m,x,{enumerable:!0,get:function(){return v[T]}})}:function(m,v,T,x){x===void 0&&(x=T),m[x]=v[T]}),r=F&&F.__exportStar||function(m,v){for(var T in m)T!=="default"&&!Object.prototype.hasOwnProperty.call(v,T)&&e(v,m,T)},n=F&&F.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(t,"__esModule",{value:!0}),t.HexSolanaSigner=t.HexInjectedSolanaSigner=t.AlgorandSigner=t.NearSigner=t.InjectedEthereumSigner=t.PolygonSigner=t.ArweaveSigner=t.InjectedSolanaSigner=void 0;const i=n(sd);t.ArweaveSigner=i.default,r(Zs,t);const s=n(ud);t.PolygonSigner=s.default,r(ro,t);const o=n(fd);t.InjectedEthereumSigner=o.default;var a=tu;Object.defineProperty(t,"InjectedSolanaSigner",{enumerable:!0,get:function(){return n(a).default}});var c=ld;Object.defineProperty(t,"NearSigner",{enumerable:!0,get:function(){return n(c).default}});var f=dd;Object.defineProperty(t,"AlgorandSigner",{enumerable:!0,get:function(){return n(f).default}});var l=hd;Object.defineProperty(t,"HexInjectedSolanaSigner",{enumerable:!0,get:function(){return n(l).default}});var h=pd;Object.defineProperty(t,"HexSolanaSigner",{enumerable:!0,get:function(){return n(h).default}})})(id);var pm=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jc,"__esModule",{value:!0});jc.indexToType=void 0;const BE=pm(oa),RE=pm(Zs),w0=id;jc.indexToType={1:w0.ArweaveSigner,2:BE.default,3:RE.default,4:w0.HexInjectedSolanaSigner};var gm={};(function(t){var e=F&&F.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(eu,t)})(gm);(function(t){var e=F&&F.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=F&&F.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(Kc,t),r(jc,t),r(gm,t),r(id,t)})(Xs);(function(t){var e=F&&F.__createBinding||(Object.create?function(_,k,N,D){D===void 0&&(D=N),Object.defineProperty(_,D,{enumerable:!0,get:function(){return k[N]}})}:function(_,k,N,D){D===void 0&&(D=N),_[D]=k[N]}),r=F&&F.__setModuleDefault||(Object.create?function(_,k){Object.defineProperty(_,"default",{enumerable:!0,value:k})}:function(_,k){_.default=k}),n=F&&F.__importStar||function(_){if(_&&_.__esModule)return _;var k={};if(_!=null)for(var N in _)N!=="default"&&Object.prototype.hasOwnProperty.call(_,N)&&e(k,_,N);return r(k,_),k},i=F&&F.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(t,"__esModule",{value:!0}),t.MIN_BINARY_SIZE=void 0;const s=Pt,o=ol,a=i(nn.exports),c=z,f=Zr,l=Xs,h=Qo,m=i(ob),v=es,T=n(Wi),x=i(Yi);t.MIN_BINARY_SIZE=80;class b{constructor(k){this.binary=k}static isDataItem(k){return k.binary!==void 0}get signatureType(){const k=s.byteArrayToLong(this.binary.subarray(0,2));switch(k){case 1:return v.SignatureConfig.ARWEAVE;case 2:return v.SignatureConfig.ED25519;case 3:return v.SignatureConfig.ETHEREUM;case 4:return v.SignatureConfig.SOLANA;default:throw new Error("Unknown signature type: "+k)}}async isValid(){return b.verify(this.binary)}get id(){return a.default.encode(this.rawId)}set id(k){this._id=a.default.toBuffer(k)}get rawId(){return T.createHash("sha256").update(this.rawSignature).digest()}set rawId(k){this._id=k}get rawSignature(){return this.binary.subarray(2,2+this.signatureLength)}get signature(){return a.default.encode(this.rawSignature)}get signatureLength(){return v.SIG_CONFIG[this.signatureType].sigLength}get rawOwner(){return this.binary.subarray(2+this.signatureLength,2+this.signatureLength+this.ownerLength)}get owner(){return a.default.encode(this.rawOwner)}get ownerLength(){return v.SIG_CONFIG[this.signatureType].pubLength}get rawTarget(){const k=this.getTargetStart();return this.binary[k]==1?this.binary.subarray(k+1,k+33):c.Buffer.alloc(0)}get target(){return a.default.encode(this.rawTarget)}get rawAnchor(){const k=this.getAnchorStart();return this.binary[k]==1?this.binary.subarray(k+1,k+33):c.Buffer.alloc(0)}get anchor(){return this.rawAnchor.toString()}get rawTags(){const k=this.getTagsStart(),N=s.byteArrayToLong(this.binary.subarray(k+8,k+16));return this.binary.subarray(k+16,k+16+N)}get tags(){const k=this.getTagsStart();if(s.byteArrayToLong(this.binary.subarray(k,k+8))==0)return[];const D=s.byteArrayToLong(this.binary.subarray(k+8,k+16));return o.tagsParser.fromBuffer(c.Buffer.from(this.binary.subarray(k+16,k+16+D)))}get tagsB64Url(){return this.tags.map(N=>({name:a.default.encode(N.name),value:a.default.encode(N.value)}))}getStartOfData(){const k=this.getTagsStart(),N=this.binary.subarray(k+8,k+16),D=s.byteArrayToLong(N);return k+16+D}get rawData(){const k=this.getTagsStart(),N=this.binary.subarray(k+8,k+16),D=s.byteArrayToLong(N),C=k+16+D;return this.binary.subarray(C,this.binary.length)}get data(){return a.default.encode(this.rawData)}getRaw(){return this.binary}async sign(k){return this._id=await f.sign(this,k),this.rawId}async setSignature(k){this.binary.set(k,2),this._id=c.Buffer.from(await x.default.crypto.hash(k))}isSigned(){var k,N;return((N=(k=this._id)===null||k===void 0?void 0:k.length)!==null&&N!==void 0?N:0)>0}toJSON(){return{signature:this.signature,owner:this.owner,target:this.target,tags:this.tags.map(k=>({name:a.default.encode(k.name),value:a.default.encode(k.value)})),data:this.data}}async sendToBundler(k){const N={"Content-Type":"application/octet-stream"};if(!this.isSigned())throw new Error("You must sign before sending to bundler");const D=await m.default.post(`${k}/tx`,this.getRaw(),{headers:N,timeout:1e5,maxBodyLength:1/0,validateStatus:C=>C>200&&C<300||C!==402});if(D.status===402)throw new Error("Not enough funds to send data");return D}static async verify(k){if(k.byteLength<t.MIN_BINARY_SIZE)return!1;const N=new b(k),D=N.signatureType,C=N.getTagsStart(),L=s.byteArrayToLong(k.subarray(C,C+8)),$=k.subarray(C+8,C+16),q=s.byteArrayToLong($);if(q>4096)return!1;if(L>0)try{if(o.tagsParser.fromBuffer(c.Buffer.from(k.subarray(C+16,C+16+q))).length!==L)return!1}catch{return!1}const J=l.indexToType[D],re=await h.getSignatureData(N);return await J.verify(N.rawOwner,re,N.rawSignature)}async getSignatureData(){return h.getSignatureData(this)}getTagsStart(){const k=this.getTargetStart(),N=this.binary[k]==1;let D=k+(N?33:1);return D+=this.binary[D]==1?33:1,D}getTargetStart(){return 2+this.signatureLength+this.ownerLength}getAnchorStart(){let k=this.getTargetStart()+1;return k+=this.binary[this.getTargetStart()]==1?32:0,k}}t.default=b})(Nc);var ym=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cc,"__esModule",{value:!0});const La=ym(nn.exports),Di=Pt,Gu=ym(Nc),OE=Wi,ln=32;class DE{constructor(e){this.binary=e,this.length=this.getDataItemCount(),this.items=this.getItems()}getRaw(){return this.binary}get(e){if(typeof e=="number"){if(e>=this.length)throw new RangeError("Index out of range");return this.getByIndex(e)}else return this.getById(e)}getSizes(){const e=[];for(let r=ln;r<ln+64*this.length;r+=64)e.push(Di.byteArrayToLong(this.binary.subarray(r,r+32)));return e}getIds(){const e=[];for(let r=ln;r<ln+64*this.length;r+=64)e.push(La.default.encode(this.binary.subarray(r+32,r+64)));return e}getIdBy(e){if(e>this.length-1)throw new RangeError("Index of bundle out of range");const r=64+64*e;return La.default.encode(this.binary.subarray(r,r+32))}async toTransaction(e,r,n){const i=await r.createTransaction({data:this.binary,...e},n);return i.addTag("Bundle-Format","binary"),i.addTag("Bundle-Version","2.0.0"),i}async verify(){for(const e of this.items){const r=await e.isValid(),n=La.default(OE.createHash("sha256").update(e.rawSignature).digest());if(!(r&&e.id===n))return!1}return!0}getOffset(e){let r=0;for(let n=ln;n<ln+64*this.length;n+=64){const i=Di.byteArrayToLong(this.binary.subarray(n,n+32));r+=i;const s=this.binary.subarray(n+32,n+64);if(Di.arraybufferEqual(s,e))return{startOffset:r,size:i}}return{startOffset:-1,size:-1}}getByIndex(e){let r=0;const n=32+64*e,i=Di.byteArrayToLong(this.binary.subarray(n,n+32));let s=0;for(let l=ln;l<ln+64*this.length&&s!=e;l+=64)r+=Di.byteArrayToLong(this.binary.subarray(l,l+32)),s++;const a=this.getBundleStart()+r,c=this.binary.subarray(a,a+i+200),f=new Gu.default(c);return f.rawId=this.binary.slice(32+64*e,64+64*e),f}getById(e){const r=La.default.toBuffer(e),n=this.getOffset(r);if(n.startOffset===-1)throw new Error("Transaction not found");const s=this.getBundleStart()+n.startOffset;return new Gu.default(this.binary.subarray(s,s+n.size))}getDataItemCount(){return Di.byteArrayToLong(this.binary.subarray(0,32))}getBundleStart(){return 32+64*this.length}getItems(){const e=new Array(this.length);let r=0;const n=this.getBundleStart();let i=0;for(let s=ln;s<ln+64*this.length;s+=64){const o=Di.byteArrayToLong(this.binary.subarray(s,s+32)),a=this.binary.subarray(s+32,s+64),c=n+r,f=this.binary.subarray(c,c+o);r+=o;const l=new Gu.default(f);l.rawId=a,e[i]=l,i++}return e}}Cc.default=DE;var mm=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.sign=Zr.getSignatureAndId=Zr.bundleAndSignData=Zr.unbundleData=void 0;const FE=Qo,_0=Pt,LE=mm(Yi),bm=mm(Cc);function UE(t){return new bm.default(t)}Zr.unbundleData=UE;async function KE(t,e){const r=new Uint8Array(64*t.length),n=await Promise.all(t.map(async(s,o)=>{const a=s.isSigned()?s.rawId:await vm(s,e),c=new Uint8Array(64);return c.set(_0.longTo32ByteArray(s.getRaw().byteLength),0),c.set(a,32),r.set(c,64*o),s.getRaw()})).then(s=>z.Buffer.concat(s)),i=z.Buffer.concat([_0.longTo32ByteArray(t.length),r,n]);return new bm.default(i)}Zr.bundleAndSignData=KE;async function xm(t,e){const r=await FE.getSignatureData(t),n=await e.sign(r),i=await LE.default.crypto.hash(n);return{signature:z.Buffer.from(n),id:z.Buffer.from(i)}}Zr.getSignatureAndId=xm;async function vm(t,e){const{signature:r,id:n}=await xm(t,e);return t.getRaw().set(r,2),n}Zr.sign=vm;var ru={},gd=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ru,"__esModule",{value:!0});ru.createData=void 0;const Vu=gd(rb.exports),jE=gd(nn.exports),Ju=Pt,$E=gd(Nc),HE=ol;function qE(t,e,r){var n,i,s,o,a,c,f;const l=e.publicKey,h=r?.target?jE.default.toBuffer(r.target):null,m=1+((n=h?.byteLength)!==null&&n!==void 0?n:0),v=r?.anchor?z.Buffer.from(r.anchor):null,T=1+((i=v?.byteLength)!==null&&i!==void 0?i:0),x=((o=(s=r?.tags)===null||s===void 0?void 0:s.length)!==null&&o!==void 0?o:0)>0?HE.serializeTags(r.tags):null,b=16+(x?x.byteLength:0),_=typeof t=="string"?z.Buffer.from(t):z.Buffer.from(t),k=_.byteLength,N=2+e.signatureLength+e.ownerLength+m+T+b+k,D=z.Buffer.alloc(N);D.set(Ju.shortTo2ByteArray(e.signatureType),0),D.set(new Uint8Array(e.signatureLength).fill(0),2),Vu.default(l.byteLength==e.ownerLength,new Error(`Owner must be ${e.ownerLength} bytes, but was incorrectly ${l.byteLength}`)),D.set(l,2+e.signatureLength);const C=2+e.signatureLength+e.ownerLength;D[C]=h?1:0,h&&(Vu.default(h.byteLength==32,new Error("Target must be 32 bytes but was incorrectly ${_target.byteLength}")),D.set(h,C+1));const L=C+m;let $=L+1;D[L]=v?1:0,v&&($+=v.byteLength,Vu.default(v.byteLength==32,new Error("Anchor must be 32 bytes")),D.set(v,L+1)),D.set(Ju.longTo8ByteArray((c=(a=r?.tags)===null||a===void 0?void 0:a.length)!==null&&c!==void 0?c:0),$);const q=Ju.longTo8ByteArray((f=x?.byteLength)!==null&&f!==void 0?f:0);D.set(q,$+8),x&&D.set(x,$+16);const J=$+b;return D.set(_,J),new $E.default(D)}ru.createData=qE;(function(t){var e=F&&F.__createBinding||(Object.create?function(T,x,b,_){_===void 0&&(_=b),Object.defineProperty(T,_,{enumerable:!0,get:function(){return x[b]}})}:function(T,x,b,_){_===void 0&&(_=b),T[_]=x[b]}),r=F&&F.__setModuleDefault||(Object.create?function(T,x){Object.defineProperty(T,"default",{enumerable:!0,value:x})}:function(T,x){T.default=x}),n=F&&F.__importStar||function(T){if(T&&T.__esModule)return T;var x={};if(T!=null)for(var b in T)b!=="default"&&Object.prototype.hasOwnProperty.call(T,b)&&e(x,T,b);return r(x,T),x},i=F&&F.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(t,"__esModule",{value:!0}),t.signers=t.deepHash=t.unbundleData=t.bundleAndSignData=t.createData=t.DataItem=t.Bundle=t.MIN_BINARY_SIZE=void 0;const s=Zr;Object.defineProperty(t,"bundleAndSignData",{enumerable:!0,get:function(){return s.bundleAndSignData}}),Object.defineProperty(t,"unbundleData",{enumerable:!0,get:function(){return s.unbundleData}});const o=i(Cc);t.Bundle=o.default;const a=n(Nc);t.DataItem=a.default,Object.defineProperty(t,"MIN_BINARY_SIZE",{enumerable:!0,get:function(){return a.MIN_BINARY_SIZE}});const c=Ln;Object.defineProperty(t,"deepHash",{enumerable:!0,get:function(){return c.deepHash}});const f=ru;Object.defineProperty(t,"createData",{enumerable:!0,get:function(){return f.createData}});const l=Xs,h=i(ro),m=i(Zs),v={ArweaveSigner:l.ArweaveSigner,SolanaSigner:h.default,EthereumSigner:m.default};t.signers=v})(Yo);var as={};(function(t){var e=F&&F.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=void 0;const r=e(hi);r.default.set({DECIMAL_PLACES:50});const n=s=>new Promise(o=>setTimeout(o,s));t.sleep=n;class i{constructor(o,a,c){this.api=o,this.currency=a,this.currencyConfig=c}static checkAndThrow(o,a,c){if(o?.status&&!(c??[]).includes(o.status)&&o.status!=200)throw new Error(`HTTP Error: ${a}: ${o.status} ${typeof o.data!="string"?o.statusText:o.data}`)}async getNonce(){const o=await this.api.get(`/account/withdrawals/${this.currency}?address=${this.currencyConfig.address}`);return i.checkAndThrow(o,"Getting withdrawal nonce"),o.data}async getBalance(o){const a=await this.api.get(`/account/balance/${this.currency}?address=${o}`);return i.checkAndThrow(a,"Getting balance"),new r.default(a.data.balance)}async getBundlerAddress(o){const a=await this.api.get("/info");i.checkAndThrow(a,"Getting Bundler address");const c=a.data.addresses[o];if(!c)throw new Error(`Specified bundler does not support currency ${o}`);return c}async getPrice(o,a){const c=await this.api.get(`/price/${o}/${a}`);return i.checkAndThrow(c,"Getting storage cost"),new r.default(c.data)}async confirmationPoll(o){if(!this.currencyConfig.isSlow){for(let a=0;a<30;a++)if(await(0,t.sleep)(1e3),await this.currencyConfig.getTx(o).then(c=>c?.confirmed).catch(c=>!1))return;console.warn(`Tx ${o} didn't finalize after 30 seconds`)}}unitConverter(o){return new r.default(o).dividedBy(this.currencyConfig.base[1])}}t.default=i})(as);var yd=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Tc,"__esModule",{value:!0});Tc.withdrawBalance=void 0;const E0=Yo,bs=ht,zE=yd(as),GE=yd(hi),xs=yd(nn.exports);async function VE(t,e,r){const n=t.currencyConfig,s={publicKey:await n.getPublicKey(),currency:t.currency,amount:new GE.default(r).toString(),nonce:await t.getNonce(),signature:void 0,sigType:n.getSigner().signatureType},o=await(0,E0.deepHash)([(0,bs.stringToBuffer)(s.currency),(0,bs.stringToBuffer)(s.amount.toString()),(0,bs.stringToBuffer)(s.nonce.toString())]);z.Buffer.isBuffer(s.publicKey)||(s.publicKey=z.Buffer.from(s.publicKey)),s.signature=await n.sign(o);const a=await n.verify(s.publicKey,o,s.signature);s.publicKey=xs.default.encode(s.publicKey),s.signature=xs.default.encode(s.signature);const c=xs.default.toBuffer(s.publicKey),f=xs.default.toBuffer(s.signature),l=await(0,E0.deepHash)([(0,bs.stringToBuffer)(s.currency),(0,bs.stringToBuffer)(s.amount.toString()),(0,bs.stringToBuffer)(s.nonce.toString())]),h=await n.verify(c,l,f),m=n.ownerToAddress(n.name=="arweave"?xs.default.decode(s.publicKey):xs.default.toBuffer(s.publicKey))===n.address;if(!(a||h||m))throw new Error(`Internal withdrawal validation failed - please report this!
Debug Info:${JSON.stringify(s)}`);const v=await e.post("/account/withdraw",s);return zE.default.checkAndThrow(v,"Withdrawing balance"),v}Tc.withdrawBalance=VE;var md={},JE=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(md,"__esModule",{value:!0});const A0=Yo,WE=JE(Wi);class YE extends A0.DataItem{constructor(e,r,n){var i;super((0,A0.createData)(e,r.currencyConfig.getSigner(),{...n,anchor:(i=n?.anchor)!==null&&i!==void 0?i:WE.default.randomBytes(32).toString("base64").slice(0,32)}).getRaw()),this.bundlr=r,this.signer=r.currencyConfig.getSigner()}sign(){return super.sign(this.signer)}get size(){return this.getRaw().length}async upload(){return this.bundlr.uploader.transactionUploader(this)}}md.default=YE;var QE=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jf,"__esModule",{value:!0});const XE=Tc,ZE=QE(md);class eA{constructor(){}get signer(){return this.currencyConfig.getSigner()}async withdrawBalance(e){return await(0,XE.withdrawBalance)(this.utils,this.api,e)}async getLoadedBalance(){return this.utils.getBalance(this.address)}async getBalance(e){return this.utils.getBalance(e)}async fund(e,r){return this.funder.fund(e,r)}async getPrice(e){return this.utils.getPrice(this.currency,e)}createTransaction(e,r){return new ZE.default(e,this,r)}getSigner(){return this.currencyConfig.getSigner()}}Jf.default=eA;var bd={},wm={};function Nr(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var tA=Nr;Nr.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};Nr.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};Nr.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};Nr.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};Nr.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};Nr.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};Nr.prototype.start=Nr.prototype.try;Nr.prototype.errors=function(){return this._errors};Nr.prototype.attempts=function(){return this._attempts};Nr.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],s=i.message,o=(t[s]||0)+1;t[s]=o,o>=r&&(e=i,r=o)}return e};(function(t){var e=tA;t.operation=function(r){var n=t.timeouts(r);return new e(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in r)n[i]=r[i];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],o=0;o<n.retries;o++)s.push(this.createTimeout(o,n));return r&&r.forever&&!s.length&&s.push(this.createTimeout(o,n)),s.sort(function(a,c){return a-c}),s},t.createTimeout=function(r,n){var i=n.randomize?Math.random()+1:1,s=Math.round(i*Math.max(n.minTimeout,1)*Math.pow(n.factor,r));return s=Math.min(s,n.maxTimeout),s},t.wrap=function(r,n,i){if(n instanceof Array&&(i=n,n=null),!i){i=[];for(var s in r)typeof r[s]=="function"&&i.push(s)}for(var o=0;o<i.length;o++){var a=i[o],c=r[a];r[a]=function(l){var h=t.operation(n),m=Array.prototype.slice.call(arguments,1),v=m.pop();m.push(function(T){h.retry(T)||(T&&(arguments[0]=h.mainError()),v.apply(this,arguments))}),h.attempt(function(){l.apply(r,m)})}.bind(r,c),r[a].options=n}}})(wm);var rA=wm,nA=rA;function iA(t,e){function r(n,i){var s=e||{},o;"randomize"in s||(s.randomize=!0),o=nA.operation(s);function a(l){i(l||new Error("Aborted"))}function c(l,h){if(l.bail){a(l);return}o.retry(l)?s.onRetry&&s.onRetry(l,h):i(o.mainError())}function f(l){var h;try{h=t(a,l)}catch(m){c(m,l);return}Promise.resolve(h).then(n).catch(function(v){c(v,l)})}o.attempt(f)}return new Promise(r)}var nu=iA,xd=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bd,"__esModule",{value:!0});const sA=xd(nu),oA=xd(hi),S0=xd(as);class aA{constructor(e){this.utils=e}async fund(e,r=1){const n=new oA.default(e);if(!n.isInteger())throw new Error("must use an integer for funding amount");const i=this.utils.currencyConfig,s=await this.utils.getBundlerAddress(this.utils.currency);let o="0";i.needsFee&&(o=(await i.getFee(i.base[0]==="winston"?0:n,s)).multipliedBy(r).toFixed(0).toString());const a=await i.createTx(n,s,o);let c;try{c=await i.sendTx(a.tx)}catch(l){throw l}if(a.txId||(a.txId=c),S0.default.checkAndThrow(c,`Sending transaction to the ${this.utils.currency} network`),await this.utils.confirmationPoll(a.txId),!await(0,sA.default)(async l=>{const h=await this.utils.api.post(`/account/balance/${this.utils.currency}`,{tx_id:a.txId});return h.status==400&&l(new Error(`failed to post funding tx - ${a.txId} (keep this id!) - ${h.data}`)),S0.default.checkAndThrow(h,`Posting transaction ${a.txId} information to the bundler`,[202]),h},{retries:5,maxTimeout:1e3,minTimeout:100,randomize:!0}))throw new Error(`failed to post funding tx - ${a.txId} - keep this id!`);return{reward:o,target:s,quantity:n.toString(),id:a.txId}}}bd.default=aA;var ha={},_m={},$s={},iu={},pa={};Object.defineProperty(pa,"__esModule",{value:!0});pa.PromisePoolError=void 0;class cA extends Error{constructor(e,r){super(),this.raw=e,this.item=r,this.name=this.constructor.name,this.message=this.messageFrom(e),Error.captureStackTrace(this,this.constructor)}static createFrom(e,r){return new this(e,r)}messageFrom(e){return e instanceof Error||typeof e=="object"?e.message:typeof e=="string"||typeof e=="number"?e.toString():""}}pa.PromisePoolError=cA;var ga={};Object.defineProperty(ga,"__esModule",{value:!0});ga.StopThePromisePoolError=void 0;class uA extends Error{}ga.StopThePromisePoolError=uA;var ya={};Object.defineProperty(ya,"__esModule",{value:!0});ya.ValidationError=void 0;class fA extends Error{constructor(e){super(e),Error.captureStackTrace(this,this.constructor)}static createFrom(e){return new this(e)}}ya.ValidationError=fA;Object.defineProperty(iu,"__esModule",{value:!0});iu.PromisePoolExecutor=void 0;const T0=$s,k0=pa,P0=ga,Zn=ya;class lA{constructor(){this.meta={tasks:[],items:[],errors:[],results:[],stopped:!1,concurrency:10,shouldResultsCorrespond:!1,processedItems:[],taskTimeout:0},this.handler=()=>{},this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[]}useConcurrency(e){if(!this.isValidConcurrency(e))throw Zn.ValidationError.createFrom(`"concurrency" must be a number, 1 or up. Received "${e}" (${typeof e})`);return this.meta.concurrency=e,this}isValidConcurrency(e){return typeof e=="number"&&e>=1}withTaskTimeout(e){return this.meta.taskTimeout=e,this}concurrency(){return this.meta.concurrency}useCorrespondingResults(e){return this.meta.shouldResultsCorrespond=e,this}shouldUseCorrespondingResults(){return this.meta.shouldResultsCorrespond}taskTimeout(){return this.meta.taskTimeout}for(e){return this.meta.items=e,this}items(){return this.meta.items}itemsCount(){return this.items().length}tasks(){return this.meta.tasks}activeTaskCount(){return this.activeTasksCount()}activeTasksCount(){return this.tasks().length}processedItems(){return this.meta.processedItems}processedCount(){return this.processedItems().length}processedPercentage(){return this.processedCount()/this.itemsCount()*100}results(){return this.meta.results}errors(){return this.meta.errors}withHandler(e){return this.handler=e,this}hasErrorHandler(){return!!this.errorHandler}handleError(e){return this.errorHandler=e,this}onTaskStarted(e){return this.onTaskStartedHandlers=e,this}onTaskFinished(e){return this.onTaskFinishedHandlers=e,this}hasReachedConcurrencyLimit(){return this.activeTasksCount()>=this.concurrency()}stop(){throw this.markAsStopped(),new P0.StopThePromisePoolError}markAsStopped(){return this.meta.stopped=!0,this}isStopped(){return this.meta.stopped}async start(){return await this.validateInputs().prepareResultsArray().process()}validateInputs(){if(typeof this.handler!="function")throw Zn.ValidationError.createFrom("The first parameter for the .process(fn) method must be a function");const e=this.taskTimeout();if(!(e==null||typeof e=="number"&&e>=0))throw Zn.ValidationError.createFrom(`"timeout" must be undefined or a number. A number must be 0 or up. Received "${String(e)}" (${typeof e})`);if(!Array.isArray(this.items()))throw Zn.ValidationError.createFrom(`"items" must be an array. Received "${typeof this.items()}"`);if(this.errorHandler&&typeof this.errorHandler!="function")throw Zn.ValidationError.createFrom(`The error handler must be a function. Received "${typeof this.errorHandler}"`);return this.onTaskStartedHandlers.forEach(r=>{if(r&&typeof r!="function")throw Zn.ValidationError.createFrom(`The onTaskStarted handler must be a function. Received "${typeof r}"`)}),this.onTaskFinishedHandlers.forEach(r=>{if(r&&typeof r!="function")throw Zn.ValidationError.createFrom(`The error handler must be a function. Received "${typeof r}"`)}),this}prepareResultsArray(){return this.shouldUseCorrespondingResults()&&(this.meta.results=Array(this.items().length).fill(T0.PromisePool.notRun)),this}async process(){for(const[e,r]of this.items().entries()){if(this.isStopped())break;await this.waitForProcessingSlot(),this.startProcessing(r,e)}return await this.drained()}async waitForProcessingSlot(){for(;this.hasReachedConcurrencyLimit();)await this.waitForActiveTaskToFinish()}async waitForActiveTaskToFinish(){await Promise.race(this.tasks())}startProcessing(e,r){const n=this.createTaskFor(e,r).then(i=>{this.save(i,r).removeActive(n)}).catch(async i=>{await this.handleErrorFor(i,e,r),this.removeActive(n)}).finally(()=>{this.processedItems().push(e),this.runOnTaskFinishedHandlers(e)});this.tasks().push(n),this.runOnTaskStartedHandlers(e)}async createTaskFor(e,r){return this.taskTimeout()===void 0?this.handler(e,r,this):Promise.race([this.handler(e,r,this),this.createTaskTimeout(e)])}async createTaskTimeout(e){return new Promise((r,n)=>{setTimeout(()=>{n(new k0.PromisePoolError(`Promise in pool timed out after ${this.taskTimeout()}ms`,e))},this.taskTimeout())})}save(e,r){return this.shouldUseCorrespondingResults()?this.results()[r]=e:this.results().push(e),this}removeActive(e){return this.tasks().splice(this.tasks().indexOf(e),1),this}async handleErrorFor(e,r,n){if(this.shouldUseCorrespondingResults()&&(this.results()[n]=T0.PromisePool.failed),!this.isStoppingThePoolError(e)){if(this.isValidationError(e))throw this.markAsStopped(),e;this.hasErrorHandler()?await this.runErrorHandlerFor(e,r):this.saveErrorFor(e,r)}}isStoppingThePoolError(e){return e instanceof P0.StopThePromisePoolError}isValidationError(e){return e instanceof Zn.ValidationError}async runErrorHandlerFor(e,r){var n;try{await((n=this.errorHandler)===null||n===void 0?void 0:n.call(this,e,r,this))}catch(i){this.rethrowIfNotStoppingThePool(i)}}runOnTaskStartedHandlers(e){this.onTaskStartedHandlers.forEach(r=>{r(e,this)})}runOnTaskFinishedHandlers(e){this.onTaskFinishedHandlers.forEach(r=>{r(e,this)})}rethrowIfNotStoppingThePool(e){if(!this.isStoppingThePoolError(e))throw e}saveErrorFor(e,r){this.errors().push(k0.PromisePoolError.createFrom(e,r))}async drained(){return await this.drainActiveTasks(),{errors:this.errors(),results:this.results()}}async drainActiveTasks(){await Promise.all(this.tasks())}}iu.PromisePoolExecutor=lA;Object.defineProperty($s,"__esModule",{value:!0});$s.PromisePool=void 0;const dA=iu;class Hs{constructor(e){this.timeout=void 0,this.concurrency=10,this.shouldResultsCorrespond=!1,this.items=e??[],this.errorHandler=void 0,this.onTaskStartedHandlers=[],this.onTaskFinishedHandlers=[]}withConcurrency(e){return this.concurrency=e,this}static withConcurrency(e){return new this().withConcurrency(e)}withTaskTimeout(e){return this.timeout=e,this}static withTaskTimeout(e){return new this().withTaskTimeout(e)}for(e){return typeof this.timeout=="number"?new Hs(e).withConcurrency(this.concurrency).withTaskTimeout(this.timeout):new Hs(e).withConcurrency(this.concurrency)}static for(e){return new this().for(e)}handleError(e){return this.errorHandler=e,this}onTaskStarted(e){return this.onTaskStartedHandlers.push(e),this}onTaskFinished(e){return this.onTaskFinishedHandlers.push(e),this}useCorrespondingResults(){return this.shouldResultsCorrespond=!0,this}async process(e){return new dA.PromisePoolExecutor().useConcurrency(this.concurrency).useCorrespondingResults(this.shouldResultsCorrespond).withTaskTimeout(this.timeout).withHandler(e).handleError(this.errorHandler).onTaskStarted(this.onTaskStartedHandlers).onTaskFinished(this.onTaskFinishedHandlers).for(this.items).start()}}$s.PromisePool=Hs;Hs.notRun=Symbol("notRun");Hs.failed=Symbol("failed");var Em={};Object.defineProperty(Em,"__esModule",{value:!0});var Am={};Object.defineProperty(Am,"__esModule",{value:!0});(function(t){var e=F&&F.__createBinding||(Object.create?function(i,s,o,a){a===void 0&&(a=o);var c=Object.getOwnPropertyDescriptor(s,o);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(i,a,c)}:function(i,s,o,a){a===void 0&&(a=o),i[a]=s[o]}),r=F&&F.__exportStar||function(i,s){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,i,o)};Object.defineProperty(t,"__esModule",{value:!0});const n=$s;t.default=n.PromisePool,r(Em,t),r($s,t),r(pa,t),r(Am,t),r(ga,t),r(ya,t)})(_m);var su={},Sm={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.STATES=void 0;const e=Symbol("not readable"),r=Symbol("readable"),n=Symbol("ended"),i=Symbol("errored");t.STATES={notReadable:e,readable:r,ended:n,errored:i};class s{constructor(a,{size:c}={}){this._state=t.STATES.notReadable,this._rejections=new Set,this._stream=a,this._size=c;const f=["_handleStreamEnd","_handleStreamError"];for(const l of f)Object.defineProperty(this,l,{configurable:!0,writable:!0,value:this[l].bind(this)});a.once("error",this._handleStreamError),a.once("end",this._handleStreamEnd),a.on("readable",()=>{this._state=t.STATES.readable})}get closed(){return this._state===t.STATES.ended}[Symbol.asyncIterator](){return this}async next(){switch(this._state){case t.STATES.notReadable:{let a,c;try{a=this._untilReadable(),c=this._untilEnd(),await Promise.race([a.promise,c.promise])}finally{a?.close(),c?.close()}return this.next()}case t.STATES.ended:return this.close(),{done:!0,value:void 0};case t.STATES.errored:throw this.close(),this._error;case t.STATES.readable:{const a=this._size?this._stream.read(this._size):this._stream.read();return a!==null?{done:!1,value:a}:(this._state=t.STATES.notReadable,await new Promise(c=>setTimeout(f=>f(!0),0,c)),this.next())}}}_untilReadable(){let a;const c=new Promise((l,h)=>{a=()=>{this._state=t.STATES.readable,this._rejections.delete(h),l()},this._state,t.STATES.readable,this._stream.once("readable",a),this._rejections.add(h)});return{close:()=>{a!=null&&this._stream.removeListener("readable",a)},promise:c}}_untilEnd(){let a;const c=new Promise((l,h)=>{a=()=>{this._state=t.STATES.ended,this._rejections.delete(h),l()},this._stream.once("end",a),this._rejections.add(h)});return{close:()=>{a!=null&&this._stream.removeListener("end",a)},promise:c}}return(){return this._state=t.STATES.ended,this.next()}throw(a){return this._error=a,this._state=t.STATES.errored,this.next()}close(a){this._stream.removeListener("end",this._handleStreamEnd),this._stream.removeListener("error",this._handleStreamError),this._state=t.STATES.ended,this._stream.destroy(a)}_handleStreamError(a){this._error=a,this._state=t.STATES.errored;for(const c of this._rejections)c(a)}_handleStreamEnd(){this._state=t.STATES.ended}get state(){return this._state}}t.default=s})(Sm);var ou=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(su,"__esModule",{value:!0});su.ChunkingUploader=void 0;const Wu=Yo,I0=vc,hA=Z0.exports,Yu=ou(as),pA=ou(Wi),Qu=ve,gA=ou(nu),yA=ou(Sm);class mA extends hA.EventEmitter{constructor(e,r){super({captureRejections:!0}),this.paused=!1,this.isResume=!1,this.currencyConfig=e,this.api=r,this.currency=this.currencyConfig.name,this.chunkSize=25e6,this.batchSize=5,this.uploadID=""}setResumeData(e){return e&&(this.uploadID=e,this.isResume=!0),this}getResumeData(){return this.uploadID}setChunkSize(e){if(e<1)throw new Error("Invalid chunk size (must be >=1)");return this.chunkSize=e,this}setBatchSize(e){if(e<1)throw new Error("Invalid batch size (must be >=1)");return this.batchSize=e,this}pause(){this.emit("pause"),this.paused=!0}resume(){this.paused=!1,this.emit("resume")}async uploadTransaction(e){return Wu.DataItem.isDataItem(e)?this.runUpload(e.getRaw()):this.runUpload(e)}async uploadData(e,r){return this.runUpload(e,{...r})}async runUpload(e,r){var n,i,s;let o=this.uploadID;const a=r===void 0,c={"x-chunking-version":"2"};let f;if(!o)f=await this.api.get(`/chunks/${this.currency}/-1/-1`,{headers:c}),Yu.default.checkAndThrow(f,"Getting upload token"),this.uploadID=o=f.data.id;else{if(f=await this.api.get(`/chunks/${this.currency}/${o}/-1`,{headers:c}),f.status===404)throw new Error("Upload ID not found - your upload has probably expired.");if(Yu.default.checkAndThrow(f,"Getting upload info"),this.chunkSize!=+f.data.size)throw new Error(`Chunk size not equal to that of a previous upload (${+f.data.size}).`)}const{max:l,min:h}=f.data;if(this.chunkSize<+h||this.chunkSize>+l)throw new Error(`Chunk size out of allowed range: ${h} - ${l}`);let m=0;const v=(E,u,g)=>new Promise(w=>{(0,gA.default)(async()=>{await this.api.post(`/chunks/${this.currency}/${o}/${u}`,E,{headers:{"Content-Type":"application/octet-stream",...c},maxBodyLength:1/0,maxContentLength:1/0}).then(S=>{if(S?.status>=300){const P={res:S,id:g,offset:u,size:E.length};throw this.emit("chunkError",P),P}this.emit("chunkUpload",{id:g,offset:u,size:E.length,totalUploaded:m+=E.length}),w({o:u,d:S})})})}),T=(n=f.data.chunks)!==null&&n!==void 0?n:[],x=new I0.PassThrough;let b=z.Buffer.alloc(0),_=!1,k=!0;x.on("end",()=>_=!0),x.on("error",E=>{throw new Error(`Error processing readable: ${E}`)});const N=async E=>{for(;!_;){if(b.length>=E)return u=z.Buffer.from(b.slice(0,E)),b=b.slice(E),u;var u=x.read(E);if(u===null){await new Promise(g=>setTimeout(w=>w(!0),0,g));continue}if(u.length===E)return u;b=z.Buffer.concat([b,u])}for(;b.length>=E;)return u=z.Buffer.from(b.slice(0,E)),b=b.slice(E),u;return k=!1,b};let D;a||(D=(0,Wu.createData)("",this.currencyConfig.getSigner(),{...r,anchor:(i=r?.anchor)!==null&&i!==void 0?i:pA.default.randomBytes(32).toString("base64").slice(0,32)}),x.write(D.getRaw()),m-=D.getRaw().length),z.Buffer.isBuffer(e)?(x.write(e),x.end()):e.pipe(x);let C=0,L=[],$=0,q,J,re;if(!a){J=new I0.PassThrough;const E=D.getRaw().length;q=await N(this.chunkSize),$++,C+=q.length,J.write(q.slice(E));const u=[(0,Qu.stringToBuffer)("dataitem"),(0,Qu.stringToBuffer)("1"),(0,Qu.stringToBuffer)(D.signatureType.toString()),D.rawOwner,D.rawTarget,D.rawAnchor,D.rawTags,new yA.default(J)];re=(0,Wu.deepHash)(u)}let te=T.pop();for(;k;){if(this.paused&&await new Promise(u=>this.on("resume",()=>u(void 0))),te&&+te[0]-C<=this.chunkSize){const g=te[1],w=await N(g);a||J.write(w),C+=g,te=T.pop(),$++,m+=g;continue}const E=await N(this.chunkSize);a||J.write(E),L.length==this.batchSize&&(await Promise.all(L),L=[]),L.push(v(E,C,++$)),C+=E.length}if(J&&J.end(),await Promise.all(L),!a){const E=await re,u=z.Buffer.from(await this.currencyConfig.getSigner().sign(E));q.set(u,2),await v(q,0,0)}const V=await this.api.post(`/chunks/${this.currency}/${o}/-1`,null,{headers:{"Content-Type":"application/octet-stream",...c},timeout:this.api.config.timeout*10});if(V.status===402)throw new Error("Not enough funds to send data");return Yu.default.checkAndThrow(V,"Finalising upload",[201]),V.status===201&&(V.data={id:(s=V.statusText.split(" "))===null||s===void 0?void 0:s[1]}),this.emit("done",V),V}get completionPromise(){return new Promise(e=>this.on("done",e))}}su.ChunkingUploader=mA;var Tm=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ha,"__esModule",{value:!0});ha.sleep=void 0;const bA=Yo,xA=Tm(_m),vA=Tm(nu),wA=su,_A=t=>new Promise(e=>setTimeout(e,t));ha.sleep=_A;class EA{constructor(e,r,n,i){this.api=e,this.currency=n,this.currencyConfig=i,this.utils=r}async upload(e,r){return await this.chunkedUploader.uploadData(e,r)}get chunkedUploader(){return new wA.ChunkingUploader(this.currencyConfig,this.api)}async transactionUploader(e){let r;const n=bA.DataItem.isDataItem(e);if(this.forceUseChunking||n&&e.getRaw().length>5e7||!n)r=await this.chunkedUploader.uploadTransaction(n?e.getRaw():e);else{const{protocol:i,host:s,port:o,timeout:a}=this.api.getConfig();r=await this.api.post(`${i}://${s}:${o}/tx/${this.currency}`,e.getRaw(),{headers:{"Content-Type":"application/octet-stream"},timeout:a,maxBodyLength:1/0}),r.status==201&&(r.data={id:e.id})}switch(r.status){case 402:throw new Error("Not enough funds to send data");default:if(r.status>=400)throw new Error(`whilst uploading DataItem: ${r.status} ${r.statusText}`)}return r}async concurrentUploader(e,r=5,n,i){const s=[],o=await xA.default.for(e).withConcurrency(r>=1?r:5).handleError(async(a,c)=>{if(s.push(a),a.message==="Not enough funds to send data")throw a}).process(async(a,c,f)=>{await(0,vA.default)(async l=>{try{const h=await this.processItem(a);return c%r==0&&await i(`Processed ${c} Items`),n?await n({item:a,res:h,i:c}):{item:a,res:h,i:c}}catch(h){throw h.message==="Not enough funds to send data"&&l(h),h}},{retries:3,minTimeout:1e3,maxTimeout:1e4})});return{errors:s,results:o.results}}async processItem(e){return typeof e=="string"&&(e=z.Buffer.from(e)),await this.transactionUploader(e)}async generateManifest(e){const{items:r,indexFile:n}=e,i={manifest:"arweave/paths",version:"0.1.0",paths:{}};if(n){if(!r.has(n))throw new Error(`Unable to access item: ${n}`);i.index={path:n}}for(const[s,o]of r.entries())i.paths[s]={id:o};return i}set useChunking(e){typeof e=="boolean"&&(this.forceUseChunking=e)}set contentType(e){this.contentTypeOverride=e}}ha.default=EA;var vd={},au={},Ei={},cu=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ei,"__esModule",{value:!0});Ei.getRedstonePrice=void 0;const AA=cu(Yi),SA=cu(nn.exports),TA=cu(Vf),kA=cu(as);class PA{constructor(e){this.minConfirm=5,this.isSlow=!1,this.needsFee=!0,Object.assign(this,e)}get address(){return this._address}async ready(){this._address=this.wallet?this.ownerToAddress(await this.getPublicKey()):void 0}async getId(e){return SA.default.encode(z.Buffer.from(await AA.default.crypto.hash(await e.rawSignature())))}async price(){return km(this.ticker)}}Ei.default=PA;async function km(t){const e=await TA.default.get(`https://api.redstone.finance/prices?symbol=${t}&provider=redstone&limit=1`);return await kA.default.checkAndThrow(e,"Getting price data"),e.data[0].value}Ei.getRedstonePrice=km;var wd=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(au,"__esModule",{value:!0});const IA=wd(mg),Nf=Zc,Fi=wd(hi),Pm=Xs,CA=wd(Ei),NA=Nf.ethers.BigNumber,MA=Pm.InjectedEthereumSigner;class BA extends CA.default{constructor(e){super(e),this.base=["wei",1e18]}async getTx(e){const n=await this.providerInstance.getTransaction(e);if(!n)throw new Error("Tx doesn't exist");return{from:n.from,to:n.to,blockHeight:n.blockNumber?new Fi.default(n.blockNumber):null,amount:new Fi.default(n.value.toHexString(),16),pending:!n.blockNumber,confirmed:n.confirmations>=this.minConfirm}}ownerToAddress(e){return"0x"+(0,IA.default)(z.Buffer.from(e.slice(1))).slice(-20).toString("hex")}async sign(e){return(await this.getSigner()).sign(e)}getSigner(){return this.signer||(this.signer=new Pm.InjectedEthereumSigner(this.wallet)),this.signer}async verify(e,r,n){return MA.verify(e,r,n)}async getCurrentHeight(){const r=await this.providerInstance.send("eth_blockNumber",[]);return new Fi.default(r,16)}async getFee(e,r){const n=this.providerInstance,i={to:r,from:this.address,value:"0x"+new Fi.default(e).toString(16)},s=await n.estimateGas(i),o=await n.getGasPrice();return new Fi.default(s.mul(o).toString())}async sendTx(e){const n=await this.w3signer.sendTransaction(e);return n?n.hash:void 0}async createTx(e,r,n){const i=NA.from(new Fi.default(e).toFixed()),s=this.w3signer,o=await s.estimateGas({to:r,from:this.address,value:i.toHexString()});let a=await s.getGasPrice();this.name==="matic"&&(a=Nf.ethers.BigNumber.from(new Fi.default(a.toString()).multipliedBy(10).decimalPlaces(0).toString()));const c=await s.populateTransaction({to:r,from:this.address,value:i.toHexString(),gasPrice:a,gasLimit:o});return{txId:void 0,tx:c}}async getPublicKey(){const e=await this.getSigner();return await e.setPublicKey(),e.publicKey}pruneBalanceTransactions(e){throw new Error("Method not implemented.")}async ready(){var e;this.w3signer=await this.wallet.getSigner(),this._address=this.ownerToAddress(await this.getPublicKey()),this.providerInstance=new Nf.ethers.providers.JsonRpcProvider(this.providerUrl),await((e=this.providerInstance)===null||e===void 0?void 0:e._ready())}}au.default=BA;var _d={},Im={},Cm={},cs={};Object.defineProperty(cs,"__esModule",{value:!0});cs.KeyStore=void 0;class RA{}cs.KeyStore=RA;var ma={},kn={},Ed={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Gs;Object.defineProperty(t,"base_encode",{enumerable:!0,get:function(){return e.baseEncode}}),Object.defineProperty(t,"base_decode",{enumerable:!0,get:function(){return e.baseDecode}}),Object.defineProperty(t,"serialize",{enumerable:!0,get:function(){return e.serialize}}),Object.defineProperty(t,"deserialize",{enumerable:!0,get:function(){return e.deserialize}}),Object.defineProperty(t,"BorshError",{enumerable:!0,get:function(){return e.BorshError}}),Object.defineProperty(t,"BinaryWriter",{enumerable:!0,get:function(){return e.BinaryWriter}}),Object.defineProperty(t,"BinaryReader",{enumerable:!0,get:function(){return e.BinaryReader}})})(Ed);var di={};Object.defineProperty(di,"__esModule",{value:!0});di.Assignable=di.Enum=void 0;class OA{constructor(e){if(Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(r=>{this[r]=e[r],this.enum=r})}}di.Enum=OA;class DA{constructor(e){Object.keys(e).map(r=>{this[r]=e[r]})}}di.Assignable=DA;(function(t){var e=F&&F.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(t,"__esModule",{value:!0}),t.KeyPairEd25519=t.KeyPair=t.PublicKey=t.KeyType=void 0;const r=e(nb.exports),n=Ed,i=di;var s;(function(h){h[h.ED25519=0]="ED25519"})(s=t.KeyType||(t.KeyType={}));function o(h){switch(h){case s.ED25519:return"ed25519";default:throw new Error(`Unknown key type ${h}`)}}function a(h){switch(h.toLowerCase()){case"ed25519":return s.ED25519;default:throw new Error(`Unknown key type ${h}`)}}class c extends i.Assignable{static from(m){return typeof m=="string"?c.fromString(m):m}static fromString(m){const v=m.split(":");if(v.length===1)return new c({keyType:s.ED25519,data:n.base_decode(v[0])});if(v.length===2)return new c({keyType:a(v[0]),data:n.base_decode(v[1])});throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}toString(){return`${o(this.keyType)}:${n.base_encode(this.data)}`}verify(m,v){switch(this.keyType){case s.ED25519:return r.default.sign.detached.verify(m,v,this.data);default:throw new Error(`Unknown key type ${this.keyType}`)}}}t.PublicKey=c;class f{static fromRandom(m){switch(m.toUpperCase()){case"ED25519":return l.fromRandom();default:throw new Error(`Unknown curve ${m}`)}}static fromString(m){const v=m.split(":");if(v.length===1)return new l(v[0]);if(v.length===2)switch(v[0].toUpperCase()){case"ED25519":return new l(v[1]);default:throw new Error(`Unknown curve: ${v[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}t.KeyPair=f;class l extends f{constructor(m){super();const v=r.default.sign.keyPair.fromSecretKey(n.base_decode(m));this.publicKey=new c({keyType:s.ED25519,data:v.publicKey}),this.secretKey=m}static fromRandom(){const m=r.default.sign.keyPair();return new l(n.base_encode(m.secretKey))}sign(m){return{signature:r.default.sign.detached(m,n.base_decode(this.secretKey)),publicKey:this.publicKey}}verify(m,v){return this.publicKey.verify(m,v)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}t.KeyPairEd25519=l})(kn);Object.defineProperty(ma,"__esModule",{value:!0});ma.InMemoryKeyStore=void 0;const FA=cs,LA=kn;class UA extends FA.KeyStore{constructor(){super(),this.keys={}}async setKey(e,r,n){this.keys[`${r}:${e}`]=n.toString()}async getKey(e,r){const n=this.keys[`${r}:${e}`];return n?LA.KeyPair.fromString(n):null}async removeKey(e,r){delete this.keys[`${r}:${e}`]}async clear(){this.keys={}}async getNetworks(){const e=new Set;return Object.keys(this.keys).forEach(r=>{const n=r.split(":");e.add(n[1])}),Array.from(e.values())}async getAccounts(e){const r=new Array;return Object.keys(this.keys).forEach(n=>{const i=n.split(":");i[i.length-1]===e&&r.push(i.slice(0,i.length-1).join(":"))}),r}toString(){return"InMemoryKeyStore"}}ma.InMemoryKeyStore=UA;var uu={};Object.defineProperty(uu,"__esModule",{value:!0});uu.BrowserLocalStorageKeyStore=void 0;const KA=cs,jA=kn,$A="near-api-js:keystore:";class HA extends KA.KeyStore{constructor(e=window.localStorage,r=$A){super(),this.localStorage=e,this.prefix=r}async setKey(e,r,n){this.localStorage.setItem(this.storageKeyForSecretKey(e,r),n.toString())}async getKey(e,r){const n=this.localStorage.getItem(this.storageKeyForSecretKey(e,r));return n?jA.KeyPair.fromString(n):null}async removeKey(e,r){this.localStorage.removeItem(this.storageKeyForSecretKey(e,r))}async clear(){for(const e of this.storageKeys())e.startsWith(this.prefix)&&this.localStorage.removeItem(e)}async getNetworks(){const e=new Set;for(const r of this.storageKeys())if(r.startsWith(this.prefix)){const n=r.substring(this.prefix.length).split(":");e.add(n[1])}return Array.from(e.values())}async getAccounts(e){const r=new Array;for(const n of this.storageKeys())if(n.startsWith(this.prefix)){const i=n.substring(this.prefix.length).split(":");i[1]===e&&r.push(i[0])}return r}storageKeyForSecretKey(e,r){return`${this.prefix}${r}:${e}`}*storageKeys(){for(let e=0;e<this.localStorage.length;e++)yield this.localStorage.key(e)}}uu.BrowserLocalStorageKeyStore=HA;var fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.MergeKeyStore=void 0;const qA=cs;class zA extends qA.KeyStore{constructor(e,r={writeKeyStoreIndex:0}){super(),this.options=r,this.keyStores=e}async setKey(e,r,n){await this.keyStores[this.options.writeKeyStoreIndex].setKey(e,r,n)}async getKey(e,r){for(const n of this.keyStores){const i=await n.getKey(e,r);if(i)return i}return null}async removeKey(e,r){for(const n of this.keyStores)await n.removeKey(e,r)}async clear(){for(const e of this.keyStores)await e.clear()}async getNetworks(){const e=new Set;for(const r of this.keyStores)for(const n of await r.getNetworks())e.add(n);return Array.from(e)}async getAccounts(e){const r=new Set;for(const n of this.keyStores)for(const i of await n.getAccounts(e))r.add(i);return Array.from(r)}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}fu.MergeKeyStore=zA;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MergeKeyStore=t.BrowserLocalStorageKeyStore=t.InMemoryKeyStore=t.KeyStore=void 0;const e=cs;Object.defineProperty(t,"KeyStore",{enumerable:!0,get:function(){return e.KeyStore}});const r=ma;Object.defineProperty(t,"InMemoryKeyStore",{enumerable:!0,get:function(){return r.InMemoryKeyStore}});const n=uu;Object.defineProperty(t,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return n.BrowserLocalStorageKeyStore}});const i=fu;Object.defineProperty(t,"MergeKeyStore",{enumerable:!0,get:function(){return i.MergeKeyStore}})})(Cm);var Ad={},no={},Sd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getTransactionLastResult=t.Provider=t.IdType=t.FinalExecutionStatusBasic=t.ExecutionStatusBasic=void 0,function(n){n.Unknown="Unknown",n.Pending="Pending",n.Failure="Failure"}(t.ExecutionStatusBasic||(t.ExecutionStatusBasic={})),function(n){n.NotStarted="NotStarted",n.Started="Started",n.Failure="Failure"}(t.FinalExecutionStatusBasic||(t.FinalExecutionStatusBasic={})),function(n){n.Transaction="transaction",n.Receipt="receipt"}(t.IdType||(t.IdType={}));class e{}t.Provider=e;function r(n){if(typeof n.status=="object"&&typeof n.status.SuccessValue=="string"){const i=z.Buffer.from(n.status.SuccessValue,"base64").toString();try{return JSON.parse(i)}catch{return i}}return null}t.getTransactionLastResult=r})(Sd);var Nm={};/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var io=GA;function GA(t){if(!t)throw new TypeError("argument namespace is required");function e(r){}return e._file=void 0,e._ignored=!0,e._namespace=t,e._traced=!1,e._warned=Object.create(null),e.function=VA,e.property=JA,e}function VA(t,e){if(typeof t!="function")throw new TypeError("argument fn must be a function");return t}function JA(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable")}var us={},Mm={exports:{}};/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var WA=YA;function YA(t){if(!t)throw new TypeError("argument namespace is required");function e(r){}return e._file=void 0,e._ignored=!0,e._namespace=t,e._traced=!1,e._warned=Object.create(null),e.function=QA,e.property=XA,e}function QA(t,e){if(typeof t!="function")throw new TypeError("argument fn must be a function");return t}function XA(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable")}var ZA=Object.setPrototypeOf||({__proto__:[]}instanceof Array?e6:t6);function e6(t,e){return t.__proto__=e,t}function t6(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=e[r]);return t}var r6={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"(Unused)",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var Bm=r6,n6=wn;wn.STATUS_CODES=Bm;wn.codes=i6(wn,Bm);wn.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};wn.empty={204:!0,205:!0,304:!0};wn.retry={502:!0,503:!0,504:!0};function i6(t,e){var r=[];return Object.keys(e).forEach(function(i){var s=e[i],o=Number(i);t[o]=s,t[s]=o,t[s.toLowerCase()]=o,r.push(o)}),r}function wn(t){if(typeof t=="number"){if(!wn[t])throw new Error("invalid status code: "+t);return t}if(typeof t!="string")throw new TypeError("code must be a number or string");var e=parseInt(t,10);if(!isNaN(e)){if(!wn[e])throw new Error("invalid status code: "+e);return e}if(e=wn[t.toLowerCase()],!e)throw new Error('invalid status message: "'+t+'"');return e}/*!
 * toidentifier
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var s6=o6;function o6(t){return t.split(" ").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join("").replace(/[^ _0-9a-z]/gi,"")}/*!
 * http-errors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */(function(t){var e=WA("http-errors"),r=ZA,n=n6,i=ib.exports,s=s6;t.exports=a,t.exports.HttpError=c(),t.exports.isHttpError=l(t.exports.HttpError),v(t.exports,n.codes,t.exports.HttpError);function o(x){return Number(String(x).charAt(0)+"00")}function a(){for(var x,b,_=500,k={},N=0;N<arguments.length;N++){var D=arguments[N];if(D instanceof Error){x=D,_=x.status||x.statusCode||_;continue}switch(typeof D){case"string":b=D;break;case"number":_=D;break;case"object":k=D;break}}(typeof _!="number"||!n[_]&&(_<400||_>=600))&&(_=500);var C=a[_]||a[o(_)];x||(x=C?new C(b):new Error(b||n[_]),Error.captureStackTrace(x,a)),(!C||!(x instanceof C)||x.status!==_)&&(x.expose=_<500,x.status=x.statusCode=_);for(var L in k)L!=="status"&&L!=="statusCode"&&(x[L]=k[L]);return x}function c(){function x(){throw new TypeError("cannot construct abstract class")}return i(x,Error),x}function f(x,b,_){var k=T(b);function N(D){var C=D??n[_],L=new Error(C);return Error.captureStackTrace(L,N),r(L,N.prototype),Object.defineProperty(L,"message",{enumerable:!0,configurable:!0,value:C,writable:!0}),Object.defineProperty(L,"name",{enumerable:!1,configurable:!0,value:k,writable:!0}),L}return i(N,x),m(N,k),N.prototype.status=_,N.prototype.statusCode=_,N.prototype.expose=!0,N}function l(x){return function(_){return!_||typeof _!="object"?!1:_ instanceof x?!0:_ instanceof Error&&typeof _.expose=="boolean"&&typeof _.statusCode=="number"&&_.status===_.statusCode}}function h(x,b,_){var k=T(b);function N(D){var C=D??n[_],L=new Error(C);return Error.captureStackTrace(L,N),r(L,N.prototype),Object.defineProperty(L,"message",{enumerable:!0,configurable:!0,value:C,writable:!0}),Object.defineProperty(L,"name",{enumerable:!1,configurable:!0,value:k,writable:!0}),L}return i(N,x),m(N,k),N.prototype.status=_,N.prototype.statusCode=_,N.prototype.expose=!1,N}function m(x,b){var _=Object.getOwnPropertyDescriptor(x,"name");_&&_.configurable&&(_.value=b,Object.defineProperty(x,"name",_))}function v(x,b,_){b.forEach(function(N){var D,C=s(n[N]);switch(o(N)){case 400:D=f(_,C,N);break;case 500:D=h(_,C,N);break}D&&(x[N]=D,x[C]=D)}),x["I'mateapot"]=e.function(x.ImATeapot,`"I'mateapot"; use "ImATeapot" instead`)}function T(x){return x.substr(-5)!=="Error"?x+"Error":x}})(Mm);var ba={};Object.defineProperty(ba,"__esModule",{value:!0});async function a6(t,e,r,n){let i=t;for(let s=0;s<e;s++){const o=await n();if(o)return o;await c6(i),i*=r}return null}ba.default=a6;function c6(t){return new Promise(e=>setTimeout(e,t))}var Ut={};Object.defineProperty(Ut,"__esModule",{value:!0});Ut.logWarning=Ut.ErrorContext=Ut.TypedError=Ut.ArgumentTypeError=Ut.PositionalArgsError=void 0;class u6 extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}Ut.PositionalArgsError=u6;class f6 extends Error{constructor(e,r,n){super(`Expected ${r} for '${e}' argument, but got '${JSON.stringify(n)}'`)}}Ut.ArgumentTypeError=f6;class l6 extends Error{constructor(e,r,n){super(e),this.type=r||"UntypedError",this.context=n}}Ut.TypedError=l6;class d6{constructor(e){this.transactionHash=e}}Ut.ErrorContext=d6;function h6(...t){ft.env.NEAR_NO_LOGS||console.warn(...t)}Ut.logWarning=h6;var Rm=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(us,"__esModule",{value:!0});us.fetchJson=void 0;const p6=Rm(Mm.exports),g6=Rm(ba),y6=no,C0=Ut,m6=1e3,b6=1.5,N0=10;async function x6(t,e){let r={url:null};typeof t=="string"?r.url=t:r=t;const n=await g6.default(m6,N0,b6,async()=>{try{const i=await fetch(r.url,{method:e?"POST":"GET",body:e||void 0,headers:{...r.headers,"Content-Type":"application/json"}});if(!i.ok){if(i.status===503)return C0.logWarning(`Retrying HTTP request for ${r.url} as it's not available now`),null;throw p6.default(i.status,await i.text())}return i}catch(i){if(i.toString().includes("FetchError")||i.toString().includes("Failed to fetch"))return C0.logWarning(`Retrying HTTP request for ${r.url} because of error: ${i}`),null;throw i}});if(!n)throw new y6.TypedError(`Exceeded ${N0} attempts for ${r.url}.`,"RetriesExceeded");return await n.json()}us.fetchJson=x6;var ir={},Om={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(F,function(){/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var r=Object.prototype.toString,n=Array.isArray||function(E){return r.call(E)==="[object Array]"};function i(V){return typeof V=="function"}function s(V){return n(V)?"array":typeof V}function o(V){return V.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(V,E){return V!=null&&typeof V=="object"&&E in V}function c(V,E){return V!=null&&typeof V!="object"&&V.hasOwnProperty&&V.hasOwnProperty(E)}var f=RegExp.prototype.test;function l(V,E){return f.call(V,E)}var h=/\S/;function m(V){return!l(h,V)}var v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function T(V){return String(V).replace(/[&<>"'`=\/]/g,function(u){return v[u]})}var x=/\s*/,b=/\s+/,_=/\s*=/,k=/\s*\}/,N=/#|\^|\/|>|\{|&|=|!/;function D(V,E){if(!V)return[];var u=!1,g=[],w=[],S=[],P=!1,I=!1,B="",y=0;function d(){if(P&&!I)for(;S.length;)delete w[S.pop()];else S=[];P=!1,I=!1}var A,O,p;function R(Tt){if(typeof Tt=="string"&&(Tt=Tt.split(b,2)),!n(Tt)||Tt.length!==2)throw new Error("Invalid tags: "+Tt);A=new RegExp(o(Tt[0])+"\\s*"),O=new RegExp("\\s*"+o(Tt[1])),p=new RegExp("\\s*"+o("}"+Tt[1]))}R(E||re.tags);for(var U=new $(V),K,H,Z,Q,ee,ye;!U.eos();){if(K=U.pos,Z=U.scanUntil(A),Z)for(var ne=0,se=Z.length;ne<se;++ne)Q=Z.charAt(ne),m(Q)?(S.push(w.length),B+=Q):(I=!0,u=!0,B+=" "),w.push(["text",Q,K,K+1]),K+=1,Q===`
`&&(d(),B="",y=0,u=!1);if(!U.scan(A))break;if(P=!0,H=U.scan(N)||"name",U.scan(x),H==="="?(Z=U.scanUntil(_),U.scan(_),U.scanUntil(O)):H==="{"?(Z=U.scanUntil(p),U.scan(k),U.scanUntil(O),H="&"):Z=U.scanUntil(O),!U.scan(O))throw new Error("Unclosed tag at "+U.pos);if(H==">"?ee=[H,Z,K,U.pos,B,y,u]:ee=[H,Z,K,U.pos],y++,w.push(ee),H==="#"||H==="^")g.push(ee);else if(H==="/"){if(ye=g.pop(),!ye)throw new Error('Unopened section "'+Z+'" at '+K);if(ye[1]!==Z)throw new Error('Unclosed section "'+ye[1]+'" at '+K)}else H==="name"||H==="{"||H==="&"?I=!0:H==="="&&R(Z)}if(d(),ye=g.pop(),ye)throw new Error('Unclosed section "'+ye[1]+'" at '+U.pos);return L(C(w))}function C(V){for(var E=[],u,g,w=0,S=V.length;w<S;++w)u=V[w],u&&(u[0]==="text"&&g&&g[0]==="text"?(g[1]+=u[1],g[3]=u[3]):(E.push(u),g=u));return E}function L(V){for(var E=[],u=E,g=[],w,S,P=0,I=V.length;P<I;++P)switch(w=V[P],w[0]){case"#":case"^":u.push(w),g.push(w),u=w[4]=[];break;case"/":S=g.pop(),S[5]=w[2],u=g.length>0?g[g.length-1][4]:E;break;default:u.push(w)}return E}function $(V){this.string=V,this.tail=V,this.pos=0}$.prototype.eos=function(){return this.tail===""},$.prototype.scan=function(E){var u=this.tail.match(E);if(!u||u.index!==0)return"";var g=u[0];return this.tail=this.tail.substring(g.length),this.pos+=g.length,g},$.prototype.scanUntil=function(E){var u=this.tail.search(E),g;switch(u){case-1:g=this.tail,this.tail="";break;case 0:g="";break;default:g=this.tail.substring(0,u),this.tail=this.tail.substring(u)}return this.pos+=g.length,g};function q(V,E){this.view=V,this.cache={".":this.view},this.parent=E}q.prototype.push=function(E){return new q(E,this)},q.prototype.lookup=function(E){var u=this.cache,g;if(u.hasOwnProperty(E))g=u[E];else{for(var w=this,S,P,I,B=!1;w;){if(E.indexOf(".")>0)for(S=w.view,P=E.split("."),I=0;S!=null&&I<P.length;)I===P.length-1&&(B=a(S,P[I])||c(S,P[I])),S=S[P[I++]];else S=w.view[E],B=a(w.view,E);if(B){g=S;break}w=w.parent}u[E]=g}return i(g)&&(g=g.call(this.view)),g};function J(){this.templateCache={_cache:{},set:function(E,u){this._cache[E]=u},get:function(E){return this._cache[E]},clear:function(){this._cache={}}}}J.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},J.prototype.parse=function(E,u){var g=this.templateCache,w=E+":"+(u||re.tags).join(":"),S=typeof g<"u",P=S?g.get(w):void 0;return P==null&&(P=D(E,u),S&&g.set(w,P)),P},J.prototype.render=function(E,u,g,w){var S=this.getConfigTags(w),P=this.parse(E,S),I=u instanceof q?u:new q(u,void 0);return this.renderTokens(P,I,g,E,w)},J.prototype.renderTokens=function(E,u,g,w,S){for(var P="",I,B,y,d=0,A=E.length;d<A;++d)y=void 0,I=E[d],B=I[0],B==="#"?y=this.renderSection(I,u,g,w,S):B==="^"?y=this.renderInverted(I,u,g,w,S):B===">"?y=this.renderPartial(I,u,g,S):B==="&"?y=this.unescapedValue(I,u):B==="name"?y=this.escapedValue(I,u,S):B==="text"&&(y=this.rawValue(I)),y!==void 0&&(P+=y);return P},J.prototype.renderSection=function(E,u,g,w,S){var P=this,I="",B=u.lookup(E[1]);function y(O){return P.render(O,u,g,S)}if(!!B){if(n(B))for(var d=0,A=B.length;d<A;++d)I+=this.renderTokens(E[4],u.push(B[d]),g,w,S);else if(typeof B=="object"||typeof B=="string"||typeof B=="number")I+=this.renderTokens(E[4],u.push(B),g,w,S);else if(i(B)){if(typeof w!="string")throw new Error("Cannot use higher-order sections without the original template");B=B.call(u.view,w.slice(E[3],E[5]),y),B!=null&&(I+=B)}else I+=this.renderTokens(E[4],u,g,w,S);return I}},J.prototype.renderInverted=function(E,u,g,w,S){var P=u.lookup(E[1]);if(!P||n(P)&&P.length===0)return this.renderTokens(E[4],u,g,w,S)},J.prototype.indentPartial=function(E,u,g){for(var w=u.replace(/[^ \t]/g,""),S=E.split(`
`),P=0;P<S.length;P++)S[P].length&&(P>0||!g)&&(S[P]=w+S[P]);return S.join(`
`)},J.prototype.renderPartial=function(E,u,g,w){if(!!g){var S=this.getConfigTags(w),P=i(g)?g(E[1]):g[E[1]];if(P!=null){var I=E[6],B=E[5],y=E[4],d=P;B==0&&y&&(d=this.indentPartial(P,y,I));var A=this.parse(d,S);return this.renderTokens(A,u,g,d,w)}}},J.prototype.unescapedValue=function(E,u){var g=u.lookup(E[1]);if(g!=null)return g},J.prototype.escapedValue=function(E,u,g){var w=this.getConfigEscape(g)||re.escape,S=u.lookup(E[1]);if(S!=null)return typeof S=="number"&&w===re.escape?String(S):w(S)},J.prototype.rawValue=function(E){return E[1]},J.prototype.getConfigTags=function(E){return n(E)?E:E&&typeof E=="object"?E.tags:void 0},J.prototype.getConfigEscape=function(E){if(E&&typeof E=="object"&&!n(E))return E.escape};var re={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(V){te.templateCache=V},get templateCache(){return te.templateCache}},te=new J;return re.clearCache=function(){return te.clearCache()},re.parse=function(E,u){return te.parse(E,u)},re.render=function(E,u,g,w){if(typeof E!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+s(E)+'" was given as the first argument for mustache#render(template, view, partials)');return te.render(E,u,g,w)},re.escape=T,re.Scanner=$,re.Context=q,re.Writer=J,re})})(Om);const v6={BadUTF16:{name:"BadUTF16",subtypes:[],props:{}},BadUTF8:{name:"BadUTF8",subtypes:[],props:{}},BalanceExceeded:{name:"BalanceExceeded",subtypes:[],props:{}},BreakpointTrap:{name:"BreakpointTrap",subtypes:[],props:{}},CacheError:{name:"CacheError",subtypes:["ReadError","WriteError","DeserializationError","SerializationError"],props:{}},CallIndirectOOB:{name:"CallIndirectOOB",subtypes:[],props:{}},CannotAppendActionToJointPromise:{name:"CannotAppendActionToJointPromise",subtypes:[],props:{}},CannotReturnJointPromise:{name:"CannotReturnJointPromise",subtypes:[],props:{}},CodeDoesNotExist:{name:"CodeDoesNotExist",subtypes:[],props:{account_id:""}},CompilationError:{name:"CompilationError",subtypes:["CodeDoesNotExist","PrepareError","WasmerCompileError"],props:{}},ContractSizeExceeded:{name:"ContractSizeExceeded",subtypes:[],props:{limit:"",size:""}},Deprecated:{name:"Deprecated",subtypes:[],props:{method_name:""}},Deserialization:{name:"Deserialization",subtypes:[],props:{}},DeserializationError:{name:"DeserializationError",subtypes:[],props:{}},EmptyMethodName:{name:"EmptyMethodName",subtypes:[],props:{}},FunctionCallError:{name:"FunctionCallError",subtypes:["CompilationError","LinkError","MethodResolveError","WasmTrap","WasmUnknownError","HostError","EvmError"],props:{}},GasExceeded:{name:"GasExceeded",subtypes:[],props:{}},GasInstrumentation:{name:"GasInstrumentation",subtypes:[],props:{}},GasLimitExceeded:{name:"GasLimitExceeded",subtypes:[],props:{}},GenericTrap:{name:"GenericTrap",subtypes:[],props:{}},GuestPanic:{name:"GuestPanic",subtypes:[],props:{panic_msg:""}},HostError:{name:"HostError",subtypes:["BadUTF16","BadUTF8","GasExceeded","GasLimitExceeded","BalanceExceeded","EmptyMethodName","GuestPanic","IntegerOverflow","InvalidPromiseIndex","CannotAppendActionToJointPromise","CannotReturnJointPromise","InvalidPromiseResultIndex","InvalidRegisterId","IteratorWasInvalidated","MemoryAccessViolation","InvalidReceiptIndex","InvalidIteratorIndex","InvalidAccountId","InvalidMethodName","InvalidPublicKey","ProhibitedInView","NumberOfLogsExceeded","KeyLengthExceeded","ValueLengthExceeded","TotalLogLengthExceeded","NumberPromisesExceeded","NumberInputDataDependenciesExceeded","ReturnedValueLengthExceeded","ContractSizeExceeded","Deprecated"],props:{}},IllegalArithmetic:{name:"IllegalArithmetic",subtypes:[],props:{}},IncorrectCallIndirectSignature:{name:"IncorrectCallIndirectSignature",subtypes:[],props:{}},Instantiate:{name:"Instantiate",subtypes:[],props:{}},IntegerOverflow:{name:"IntegerOverflow",subtypes:[],props:{}},InternalMemoryDeclared:{name:"InternalMemoryDeclared",subtypes:[],props:{}},InvalidAccountId:{name:"InvalidAccountId",subtypes:[],props:{account_id:""}},InvalidIteratorIndex:{name:"InvalidIteratorIndex",subtypes:[],props:{iterator_index:""}},InvalidMethodName:{name:"InvalidMethodName",subtypes:[],props:{}},InvalidPromiseIndex:{name:"InvalidPromiseIndex",subtypes:[],props:{promise_idx:""}},InvalidPromiseResultIndex:{name:"InvalidPromiseResultIndex",subtypes:[],props:{result_idx:""}},InvalidPublicKey:{name:"InvalidPublicKey",subtypes:[],props:{}},InvalidReceiptIndex:{name:"InvalidReceiptIndex",subtypes:[],props:{receipt_index:""}},InvalidRegisterId:{name:"InvalidRegisterId",subtypes:[],props:{register_id:""}},IteratorWasInvalidated:{name:"IteratorWasInvalidated",subtypes:[],props:{iterator_index:""}},KeyLengthExceeded:{name:"KeyLengthExceeded",subtypes:[],props:{length:"",limit:""}},LinkError:{name:"LinkError",subtypes:[],props:{msg:""}},Memory:{name:"Memory",subtypes:[],props:{}},MemoryAccessViolation:{name:"MemoryAccessViolation",subtypes:[],props:{}},MemoryOutOfBounds:{name:"MemoryOutOfBounds",subtypes:[],props:{}},MethodEmptyName:{name:"MethodEmptyName",subtypes:[],props:{}},MethodInvalidSignature:{name:"MethodInvalidSignature",subtypes:[],props:{}},MethodNotFound:{name:"MethodNotFound",subtypes:[],props:{}},MethodResolveError:{name:"MethodResolveError",subtypes:["MethodEmptyName","MethodUTF8Error","MethodNotFound","MethodInvalidSignature"],props:{}},MethodUTF8Error:{name:"MethodUTF8Error",subtypes:[],props:{}},MisalignedAtomicAccess:{name:"MisalignedAtomicAccess",subtypes:[],props:{}},NumberInputDataDependenciesExceeded:{name:"NumberInputDataDependenciesExceeded",subtypes:[],props:{limit:"",number_of_input_data_dependencies:""}},NumberOfLogsExceeded:{name:"NumberOfLogsExceeded",subtypes:[],props:{limit:""}},NumberPromisesExceeded:{name:"NumberPromisesExceeded",subtypes:[],props:{limit:"",number_of_promises:""}},PrepareError:{name:"PrepareError",subtypes:["Serialization","Deserialization","InternalMemoryDeclared","GasInstrumentation","StackHeightInstrumentation","Instantiate","Memory"],props:{}},ProhibitedInView:{name:"ProhibitedInView",subtypes:[],props:{method_name:""}},ReadError:{name:"ReadError",subtypes:[],props:{}},ReturnedValueLengthExceeded:{name:"ReturnedValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},Serialization:{name:"Serialization",subtypes:[],props:{}},SerializationError:{name:"SerializationError",subtypes:[],props:{hash:""}},StackHeightInstrumentation:{name:"StackHeightInstrumentation",subtypes:[],props:{}},StackOverflow:{name:"StackOverflow",subtypes:[],props:{}},TotalLogLengthExceeded:{name:"TotalLogLengthExceeded",subtypes:[],props:{length:"",limit:""}},Unreachable:{name:"Unreachable",subtypes:[],props:{}},ValueLengthExceeded:{name:"ValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},WasmTrap:{name:"WasmTrap",subtypes:["Unreachable","IncorrectCallIndirectSignature","MemoryOutOfBounds","CallIndirectOOB","IllegalArithmetic","MisalignedAtomicAccess","BreakpointTrap","StackOverflow","GenericTrap"],props:{}},WasmUnknownError:{name:"WasmUnknownError",subtypes:[],props:{}},WasmerCompileError:{name:"WasmerCompileError",subtypes:[],props:{msg:""}},WriteError:{name:"WriteError",subtypes:[],props:{}},AccessKeyNotFound:{name:"AccessKeyNotFound",subtypes:[],props:{account_id:"",public_key:""}},AccountAlreadyExists:{name:"AccountAlreadyExists",subtypes:[],props:{account_id:""}},AccountDoesNotExist:{name:"AccountDoesNotExist",subtypes:[],props:{account_id:""}},ActionError:{name:"ActionError",subtypes:["AccountAlreadyExists","AccountDoesNotExist","CreateAccountOnlyByRegistrar","CreateAccountNotAllowed","ActorNoPermission","DeleteKeyDoesNotExist","AddKeyAlreadyExists","DeleteAccountStaking","LackBalanceForState","TriesToUnstake","TriesToStake","InsufficientStake","FunctionCallError","NewReceiptValidationError","OnlyImplicitAccountCreationAllowed"],props:{index:""}},ActionsValidationError:{name:"ActionsValidationError",subtypes:["DeleteActionMustBeFinal","TotalPrepaidGasExceeded","TotalNumberOfActionsExceeded","AddKeyMethodNamesNumberOfBytesExceeded","AddKeyMethodNameLengthExceeded","IntegerOverflow","InvalidAccountId","ContractSizeExceeded","FunctionCallMethodNameLengthExceeded","FunctionCallArgumentsLengthExceeded","UnsuitableStakingKey","FunctionCallZeroAttachedGas"],props:{}},ActorNoPermission:{name:"ActorNoPermission",subtypes:[],props:{account_id:"",actor_id:""}},AddKeyAlreadyExists:{name:"AddKeyAlreadyExists",subtypes:[],props:{account_id:"",public_key:""}},AddKeyMethodNameLengthExceeded:{name:"AddKeyMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},AddKeyMethodNamesNumberOfBytesExceeded:{name:"AddKeyMethodNamesNumberOfBytesExceeded",subtypes:[],props:{limit:"",total_number_of_bytes:""}},BalanceMismatchError:{name:"BalanceMismatchError",subtypes:[],props:{final_accounts_balance:"",final_postponed_receipts_balance:"",incoming_receipts_balance:"",incoming_validator_rewards:"",initial_accounts_balance:"",initial_postponed_receipts_balance:"",new_delayed_receipts_balance:"",other_burnt_amount:"",outgoing_receipts_balance:"",processed_delayed_receipts_balance:"",slashed_burnt_amount:"",tx_burnt_amount:""}},CostOverflow:{name:"CostOverflow",subtypes:[],props:{}},CreateAccountNotAllowed:{name:"CreateAccountNotAllowed",subtypes:[],props:{account_id:"",predecessor_id:""}},CreateAccountOnlyByRegistrar:{name:"CreateAccountOnlyByRegistrar",subtypes:[],props:{account_id:"",predecessor_id:"",registrar_account_id:""}},DeleteAccountStaking:{name:"DeleteAccountStaking",subtypes:[],props:{account_id:""}},DeleteActionMustBeFinal:{name:"DeleteActionMustBeFinal",subtypes:[],props:{}},DeleteKeyDoesNotExist:{name:"DeleteKeyDoesNotExist",subtypes:[],props:{account_id:"",public_key:""}},DepositWithFunctionCall:{name:"DepositWithFunctionCall",subtypes:[],props:{}},Expired:{name:"Expired",subtypes:[],props:{}},FunctionCallArgumentsLengthExceeded:{name:"FunctionCallArgumentsLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallMethodNameLengthExceeded:{name:"FunctionCallMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallZeroAttachedGas:{name:"FunctionCallZeroAttachedGas",subtypes:[],props:{}},InsufficientStake:{name:"InsufficientStake",subtypes:[],props:{account_id:"",minimum_stake:"",stake:""}},InvalidAccessKeyError:{name:"InvalidAccessKeyError",subtypes:["AccessKeyNotFound","ReceiverMismatch","MethodNameMismatch","RequiresFullAccess","NotEnoughAllowance","DepositWithFunctionCall"],props:{}},InvalidChain:{name:"InvalidChain",subtypes:[],props:{}},InvalidDataReceiverId:{name:"InvalidDataReceiverId",subtypes:[],props:{account_id:""}},InvalidNonce:{name:"InvalidNonce",subtypes:[],props:{ak_nonce:"",tx_nonce:""}},InvalidPredecessorId:{name:"InvalidPredecessorId",subtypes:[],props:{account_id:""}},InvalidReceiverId:{name:"InvalidReceiverId",subtypes:[],props:{account_id:""}},InvalidSignature:{name:"InvalidSignature",subtypes:[],props:{}},InvalidSignerId:{name:"InvalidSignerId",subtypes:[],props:{account_id:""}},InvalidTxError:{name:"InvalidTxError",subtypes:["InvalidAccessKeyError","InvalidSignerId","SignerDoesNotExist","InvalidNonce","InvalidReceiverId","InvalidSignature","NotEnoughBalance","LackBalanceForState","CostOverflow","InvalidChain","Expired","ActionsValidation"],props:{}},LackBalanceForState:{name:"LackBalanceForState",subtypes:[],props:{account_id:"",amount:""}},MethodNameMismatch:{name:"MethodNameMismatch",subtypes:[],props:{method_name:""}},NotEnoughAllowance:{name:"NotEnoughAllowance",subtypes:[],props:{account_id:"",allowance:"",cost:"",public_key:""}},NotEnoughBalance:{name:"NotEnoughBalance",subtypes:[],props:{balance:"",cost:"",signer_id:""}},OnlyImplicitAccountCreationAllowed:{name:"OnlyImplicitAccountCreationAllowed",subtypes:[],props:{account_id:""}},ReceiptValidationError:{name:"ReceiptValidationError",subtypes:["InvalidPredecessorId","InvalidReceiverId","InvalidSignerId","InvalidDataReceiverId","ReturnedValueLengthExceeded","NumberInputDataDependenciesExceeded","ActionsValidation"],props:{}},ReceiverMismatch:{name:"ReceiverMismatch",subtypes:[],props:{ak_receiver:"",tx_receiver:""}},RequiresFullAccess:{name:"RequiresFullAccess",subtypes:[],props:{}},SignerDoesNotExist:{name:"SignerDoesNotExist",subtypes:[],props:{signer_id:""}},TotalNumberOfActionsExceeded:{name:"TotalNumberOfActionsExceeded",subtypes:[],props:{limit:"",total_number_of_actions:""}},TotalPrepaidGasExceeded:{name:"TotalPrepaidGasExceeded",subtypes:[],props:{limit:"",total_prepaid_gas:""}},TriesToStake:{name:"TriesToStake",subtypes:[],props:{account_id:"",balance:"",locked:"",stake:""}},TriesToUnstake:{name:"TriesToUnstake",subtypes:[],props:{account_id:""}},TxExecutionError:{name:"TxExecutionError",subtypes:["ActionError","InvalidTxError"],props:{}},UnsuitableStakingKey:{name:"UnsuitableStakingKey",subtypes:[],props:{public_key:""}},Closed:{name:"Closed",subtypes:[],props:{}},InternalError:{name:"InternalError",subtypes:[],props:{}},ServerError:{name:"ServerError",subtypes:["TxExecutionError","Timeout","Closed","InternalError"],props:{}},Timeout:{name:"Timeout",subtypes:[],props:{}}};var w6={schema:v6};const _6="Exceeded the maximum amount of gas allowed to burn per contract",E6="Method name is empty",A6="Wasmer compilation error: {{msg}}",S6="Smart contract panicked: {{panic_msg}}",T6="Error creating Wasm memory",k6="Exceeded the prepaid gas",P6="Method name is not valid UTF8 string",I6="String encoding is bad UTF-16 sequence",C6="WebAssembly trap: {{msg}}",N6="Gas instrumentation failed or contract has denied instructions.",M6="{{promise_idx}} does not correspond to existing promises",B6="Accessed invalid promise result index: {{result_idx}}",R6="Error happened while deserializing the module",O6="Contract method is not found",D6="Accessed invalid register id: {{register_id}}",F6="VM Logic returned an invalid receipt index: {{receipt_index}}",L6="Method name is empty in contract call",U6="Returning joint promise is currently prohibited",K6="Stack instrumentation failed",j6="Cannot find contract code for account {{account_id}}",$6="Invalid method signature",H6="Integer overflow happened during contract execution",q6="MemoryAccessViolation",z6="Iterator index {{iterator_index}} does not exist",G6="Iterator {{iterator_index}} was invalidated after its creation by performing a mutable operation on trie",V6="VM Logic returned an invalid account id",J6="Error happened while serializing the module",W6="Actions can only be appended to non-joint promise.",Y6="Internal memory declaration has been found in the module",Q6="Error happened during instantiation",X6="{{method_name}} is not allowed in view calls",Z6="VM Logic returned an invalid method name",e4="String encoding is bad UTF-8 sequence",t4="Exceeded the account balance",r4="Wasm contract link error: {{msg}}",n4="VM Logic provided an invalid public key",i4="Actor {{actor_id}} doesn't have permission to account {{account_id}} to complete the action",s4="The account {{account_id}} wouldn't have enough balance to cover storage, required to have {{amount}} yoctoNEAR more",o4="Wrong AccessKey used for transaction: transaction is sent to receiver_id={{tx_receiver}}, but is signed with function call access key that restricted to only use with receiver_id={{ak_receiver}}. Either change receiver_id in your transaction or switch to use a FullAccessKey.",a4="Transaction gas or balance cost is too high",c4="Transaction is not signed with the given public key",u4=`Signer "{{account_id}}" doesn't have access key with the given public_key {{public_key}}`,f4="Sender {{signer_id}} does not have enough balance {{#formatNear}}{{balance}}{{/formatNear}} for operation costing {{#formatNear}}{{cost}}{{/formatNear}}",l4="Access Key {account_id}:{public_key} does not have enough balance {{#formatNear}}{{allowance}}{{/formatNear}} for transaction costing {{#formatNear}}{{cost}}{{/formatNear}}",d4="Transaction has expired",h4="Account {{account_id}} is staking and can not be deleted",p4="Signer {{signer_id}} does not exist",g4="Account {{account_id}} tried to stake {{#formatNear}}{{stake}}{{/formatNear}}, but has staked {{#formatNear}}{{locked}}{{/formatNear}} and only has {{#formatNear}}{{balance}}{{/formatNear}}",y4="The public key {{public_key}} is already used for an existing access key",m4="Invalid signer account ID {{signer_id}} according to requirements",b4="The new account_id {{account_id}} can't be created by {{predecessor_id}}",x4="The transaction contains more then one action, but it was signed with an access key which allows transaction to apply only one specific action. To apply more then one actions TX must be signed with a full access key",v4="Account {{account_id}} is not yet staked, but tried to unstake",w4="Transaction nonce {{tx_nonce}} must be larger than nonce of the used access key {{ak_nonce}}",_4="Can't create a new account {{account_id}}, because it already exists",E4="Transaction parent block hash doesn't belong to the current chain",A4="Can't complete the action because account {{account_id}} doesn't exist",S4="Transaction method name {{method_name}} isn't allowed by the access key",T4="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover the rent",k4="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover it's storage",P4="Invalid receiver account ID {{receiver_id}} according to requirements",I4="Account {{account_id}} tries to remove an access key that doesn't exist",C4="Timeout exceeded",N4="Connection closed";var M4={GasLimitExceeded:_6,MethodEmptyName:E6,WasmerCompileError:A6,GuestPanic:S6,Memory:T6,GasExceeded:k6,MethodUTF8Error:P6,BadUTF16:I6,WasmTrap:C6,GasInstrumentation:N6,InvalidPromiseIndex:M6,InvalidPromiseResultIndex:B6,Deserialization:R6,MethodNotFound:O6,InvalidRegisterId:D6,InvalidReceiptIndex:F6,EmptyMethodName:L6,CannotReturnJointPromise:U6,StackHeightInstrumentation:K6,CodeDoesNotExist:j6,MethodInvalidSignature:$6,IntegerOverflow:H6,MemoryAccessViolation:q6,InvalidIteratorIndex:z6,IteratorWasInvalidated:G6,InvalidAccountId:V6,Serialization:J6,CannotAppendActionToJointPromise:W6,InternalMemoryDeclared:Y6,Instantiate:Q6,ProhibitedInView:X6,InvalidMethodName:Z6,BadUTF8:e4,BalanceExceeded:t4,LinkError:r4,InvalidPublicKey:n4,ActorNoPermission:i4,LackBalanceForState:s4,ReceiverMismatch:o4,CostOverflow:a4,InvalidSignature:c4,AccessKeyNotFound:u4,NotEnoughBalance:f4,NotEnoughAllowance:l4,Expired:d4,DeleteAccountStaking:h4,SignerDoesNotExist:p4,TriesToStake:g4,AddKeyAlreadyExists:y4,InvalidSigner:m4,CreateAccountNotAllowed:b4,RequiresFullAccess:x4,TriesToUnstake:v4,InvalidNonce:w4,AccountAlreadyExists:_4,InvalidChain:E4,AccountDoesNotExist:A4,MethodNameMismatch:S4,DeleteAccountHasRent:T4,DeleteAccountHasEnoughBalance:k4,InvalidReceiver:P4,DeleteKeyDoesNotExist:I4,Timeout:C4,Closed:N4},Td=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ir,"__esModule",{value:!0});ir.getErrorTypeFromErrorMessage=ir.formatError=ir.parseResultError=ir.parseRpcError=ir.ServerError=void 0;const B4=Td(Om.exports),R4=Td(w6),M0=Td(M4),O4=Ad,D4=Ut,F4={formatNear:()=>(t,e)=>O4.utils.format.formatNearAmount(e(t))};class kd extends D4.TypedError{}ir.ServerError=kd;class L4 extends kd{}function Dm(t){const e={},r=Lm(t,R4.default.schema,e,""),n=new kd(Fm(r,e),r);return Object.assign(n,e),n}ir.parseRpcError=Dm;function U4(t){const e=Dm(t.status.Failure),r=new L4;return Object.assign(r,e),r.type=e.type,r.message=e.message,r.transaction_outcome=t.transaction_outcome,r}ir.parseResultError=U4;function Fm(t,e){return typeof M0.default[t]=="string"?B4.default.render(M0.default[t],{...e,...F4}):JSON.stringify(e)}ir.formatError=Fm;function Lm(t,e,r,n){let i,s,o;for(const a in e){if(j4(t[a]))return t[a];if(Xu(t[a]))i=t[a],s=e[a],o=a;else if(Xu(t.kind)&&Xu(t.kind[a]))i=t.kind[a],s=e[a],o=a;else continue}if(i&&s){for(const a of Object.keys(s.props))r[a]=i[a];return Lm(i,e,r,o)}else return r.kind=t,n}function K4(t){switch(!0){case/^account .*? does not exist while viewing$/.test(t):return"AccountDoesNotExist";case/^Account .*? doesn't exist$/.test(t):return"AccountDoesNotExist";case/^access key .*? does not exist while viewing$/.test(t):return"AccessKeyDoesNotExist";case/wasm execution failed with error: FunctionCallError\(CompilationError\(CodeDoesNotExist/.test(t):return"CodeDoesNotExist";case/Transaction nonce \d+ must be larger than nonce of the used access key \d+/.test(t):return"InvalidNonce";default:return"UntypedError"}}ir.getErrorTypeFromErrorMessage=K4;function Xu(t){return Object.prototype.toString.call(t)==="[object Object]"}function j4(t){return Object.prototype.toString.call(t)==="[object String]"}(function(t){var e=F&&F.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcProvider=t.ErrorContext=t.TypedError=void 0;const r=e(io),n=Sd,i=us,s=Ut;Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return s.TypedError}}),Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return s.ErrorContext}});const o=Gs,a=e(ba),c=ir,f=12,l=500,h=1.5;let m=123;class v extends n.Provider{constructor(x){super(),x!=null&&typeof x=="object"?this.connection=x:(r.default("JsonRpcProvider(url?: string)")("use `JsonRpcProvider(connectionInfo: ConnectionInfo)` instead"),this.connection={url:x})}async status(){return this.sendJsonRpc("status",[])}async sendTransaction(x){const b=x.encode();return this.sendJsonRpc("broadcast_tx_commit",[z.Buffer.from(b).toString("base64")])}async sendTransactionAsync(x){const b=x.encode();return this.sendJsonRpc("broadcast_tx_async",[z.Buffer.from(b).toString("base64")])}async txStatus(x,b){return typeof x=="string"?this.txStatusString(x,b):this.txStatusUint8Array(x,b)}async txStatusUint8Array(x,b){return this.sendJsonRpc("tx",[o.baseEncode(x),b])}async txStatusString(x,b){return this.sendJsonRpc("tx",[x,b])}async txStatusReceipts(x,b){return this.sendJsonRpc("EXPERIMENTAL_tx_status",[o.baseEncode(x),b])}async query(...x){let b;if(x.length===1)b=await this.sendJsonRpc("query",x[0]);else{const[_,k]=x;b=await this.sendJsonRpc("query",[_,k])}if(b&&b.error)throw new s.TypedError(`Querying ${x} failed: ${b.error}.
${JSON.stringify(b,null,2)}`,c.getErrorTypeFromErrorMessage(b.error));return b}async block(x){const{finality:b}=x;let{blockId:_}=x;return typeof x!="object"&&(r.default("JsonRpcProvider.block(blockId)")("use `block({ blockId })` or `block({ finality })` instead"),_=x),this.sendJsonRpc("block",{block_id:_,finality:b})}async blockChanges(x){const{finality:b}=x,{blockId:_}=x;return this.sendJsonRpc("EXPERIMENTAL_changes_in_block",{block_id:_,finality:b})}async chunk(x){return this.sendJsonRpc("chunk",[x])}async validators(x){return this.sendJsonRpc("validators",[x])}async experimental_genesisConfig(){return r.default("JsonRpcProvider.experimental_protocolConfig()")("use `experimental_protocolConfig({ sync_checkpoint: 'genesis' })` to fetch the up-to-date or genesis protocol config explicitly"),await this.sendJsonRpc("EXPERIMENTAL_protocol_config",{sync_checkpoint:"genesis"})}async experimental_protocolConfig(x){return await this.sendJsonRpc("EXPERIMENTAL_protocol_config",x)}async experimental_lightClientProof(x){return r.default("JsonRpcProvider.experimental_lightClientProof(request)")("use `lightClientProof` instead"),await this.lightClientProof(x)}async lightClientProof(x){return await this.sendJsonRpc("EXPERIMENTAL_light_client_proof",x)}async accessKeyChanges(x,b){const{finality:_}=b,{blockId:k}=b;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"all_access_key_changes",account_ids:x,block_id:k,finality:_})}async singleAccessKeyChanges(x,b){const{finality:_}=b,{blockId:k}=b;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"single_access_key_changes",keys:x,block_id:k,finality:_})}async accountChanges(x,b){const{finality:_}=b,{blockId:k}=b;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"account_changes",account_ids:x,block_id:k,finality:_})}async contractStateChanges(x,b,_=""){const{finality:k}=b,{blockId:N}=b;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"data_changes",account_ids:x,key_prefix_base64:_,block_id:N,finality:k})}async contractCodeChanges(x,b){const{finality:_}=b,{blockId:k}=b;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"contract_code_changes",account_ids:x,block_id:k,finality:_})}async gasPrice(x){return await this.sendJsonRpc("gas_price",[x])}async sendJsonRpc(x,b){const _=await a.default(l,f,h,async()=>{try{const N={method:x,params:b,id:m++,jsonrpc:"2.0"},D=await i.fetchJson(this.connection,JSON.stringify(N));if(D.error){if(typeof D.error.data=="object")throw typeof D.error.data.error_message=="string"&&typeof D.error.data.error_type=="string"?new s.TypedError(D.error.data.error_message,D.error.data.error_type):c.parseRpcError(D.error.data);{const C=`[${D.error.code}] ${D.error.message}: ${D.error.data}`;throw D.error.data==="Timeout"||C.includes("Timeout error")||C.includes("query has timed out")?new s.TypedError(C,"TimeoutError"):new s.TypedError(C,c.getErrorTypeFromErrorMessage(D.error.data))}}return D}catch(N){if(N.type==="TimeoutError")return ft.env.NEAR_NO_LOGS||console.warn(`Retrying request to ${x} as it has timed out`,b),null;throw N}}),{result:k}=_;if(typeof k>"u")throw new s.TypedError(`Exceeded ${f} attempts for request to ${x}.`,"RetriesExceeded");return k}}t.JsonRpcProvider=v})(Nm);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorContext=t.TypedError=t.getTransactionLastResult=t.FinalExecutionStatusBasic=t.JsonRpcProvider=t.Provider=void 0;const e=Sd;Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return e.Provider}}),Object.defineProperty(t,"getTransactionLastResult",{enumerable:!0,get:function(){return e.getTransactionLastResult}}),Object.defineProperty(t,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return e.FinalExecutionStatusBasic}});const r=Nm;Object.defineProperty(t,"JsonRpcProvider",{enumerable:!0,get:function(){return r.JsonRpcProvider}}),Object.defineProperty(t,"TypedError",{enumerable:!0,get:function(){return r.TypedError}}),Object.defineProperty(t,"ErrorContext",{enumerable:!0,get:function(){return r.ErrorContext}})})(no);var Pd={},Id={},Ai={exports:{}};(function(t){(function(e,r){function n(E,u){if(!E)throw new Error(u||"Assertion failed")}function i(E,u){E.super_=u;var g=function(){};g.prototype=u.prototype,E.prototype=new g,E.prototype.constructor=E}function s(E,u,g){if(s.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((u==="le"||u==="be")&&(g=u,u=10),this._init(E||0,u||10,g||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=require("buffer").Buffer}catch{}s.isBN=function(u){return u instanceof s?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===s.wordSize&&Array.isArray(u.words)},s.max=function(u,g){return u.cmp(g)>0?u:g},s.min=function(u,g){return u.cmp(g)<0?u:g},s.prototype._init=function(u,g,w){if(typeof u=="number")return this._initNumber(u,g,w);if(typeof u=="object")return this._initArray(u,g,w);g==="hex"&&(g=16),n(g===(g|0)&&g>=2&&g<=36),u=u.toString().replace(/\s+/g,"");var S=0;u[0]==="-"&&(S++,this.negative=1),S<u.length&&(g===16?this._parseHex(u,S,w):(this._parseBase(u,g,S),w==="le"&&this._initArray(this.toArray(),g,w)))},s.prototype._initNumber=function(u,g,w){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(n(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),g,w)},s.prototype._initArray=function(u,g,w){if(n(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var P,I,B=0;if(w==="be")for(S=u.length-1,P=0;S>=0;S-=3)I=u[S]|u[S-1]<<8|u[S-2]<<16,this.words[P]|=I<<B&67108863,this.words[P+1]=I>>>26-B&67108863,B+=24,B>=26&&(B-=26,P++);else if(w==="le")for(S=0,P=0;S<u.length;S+=3)I=u[S]|u[S+1]<<8|u[S+2]<<16,this.words[P]|=I<<B&67108863,this.words[P+1]=I>>>26-B&67108863,B+=24,B>=26&&(B-=26,P++);return this._strip()};function a(E,u){var g=E.charCodeAt(u);if(g>=48&&g<=57)return g-48;if(g>=65&&g<=70)return g-55;if(g>=97&&g<=102)return g-87;n(!1,"Invalid character in "+E)}function c(E,u,g){var w=a(E,g);return g-1>=u&&(w|=a(E,g-1)<<4),w}s.prototype._parseHex=function(u,g,w){this.length=Math.ceil((u.length-g)/6),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var P=0,I=0,B;if(w==="be")for(S=u.length-1;S>=g;S-=2)B=c(u,g,S)<<P,this.words[I]|=B&67108863,P>=18?(P-=18,I+=1,this.words[I]|=B>>>26):P+=8;else{var y=u.length-g;for(S=y%2===0?g+1:g;S<u.length;S+=2)B=c(u,g,S)<<P,this.words[I]|=B&67108863,P>=18?(P-=18,I+=1,this.words[I]|=B>>>26):P+=8}this._strip()};function f(E,u,g,w){for(var S=0,P=0,I=Math.min(E.length,g),B=u;B<I;B++){var y=E.charCodeAt(B)-48;S*=w,y>=49?P=y-49+10:y>=17?P=y-17+10:P=y,n(y>=0&&P<w,"Invalid character"),S+=P}return S}s.prototype._parseBase=function(u,g,w){this.words=[0],this.length=1;for(var S=0,P=1;P<=67108863;P*=g)S++;S--,P=P/g|0;for(var I=u.length-w,B=I%S,y=Math.min(I,I-B)+w,d=0,A=w;A<y;A+=S)d=f(u,A,A+S,g),this.imuln(P),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(B!==0){var O=1;for(d=f(u,A,u.length,g),A=0;A<B;A++)O*=g;this.imuln(O),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this._strip()},s.prototype.copy=function(u){u.words=new Array(this.length);for(var g=0;g<this.length;g++)u.words[g]=this.words[g];u.length=this.length,u.negative=this.negative,u.red=this.red};function l(E,u){E.words=u.words,E.length=u.length,E.negative=u.negative,E.red=u.red}if(s.prototype._move=function(u){l(u,this)},s.prototype.clone=function(){var u=new s(null);return this.copy(u),u},s.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],T=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(u,g){u=u||10,g=g|0||1;var w;if(u===16||u==="hex"){w="";for(var S=0,P=0,I=0;I<this.length;I++){var B=this.words[I],y=((B<<S|P)&16777215).toString(16);P=B>>>24-S&16777215,P!==0||I!==this.length-1?w=m[6-y.length]+y+w:w=y+w,S+=2,S>=26&&(S-=26,I--)}for(P!==0&&(w=P.toString(16)+w);w.length%g!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(u===(u|0)&&u>=2&&u<=36){var d=v[u],A=T[u];w="";var O=this.clone();for(O.negative=0;!O.isZero();){var p=O.modrn(A).toString(u);O=O.idivn(A),O.isZero()?w=p+w:w=m[d-p.length]+p+w}for(this.isZero()&&(w="0"+w);w.length%g!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(u,g){return this.toArrayLike(o,u,g)}),s.prototype.toArray=function(u,g){return this.toArrayLike(Array,u,g)};var x=function(u,g){return u.allocUnsafe?u.allocUnsafe(g):new u(g)};s.prototype.toArrayLike=function(u,g,w){this._strip();var S=this.byteLength(),P=w||Math.max(1,S);n(S<=P,"byte array longer than desired length"),n(P>0,"Requested array length <= 0");var I=x(u,P),B=g==="le"?"LE":"BE";return this["_toArrayLike"+B](I,S),I},s.prototype._toArrayLikeLE=function(u,g){for(var w=0,S=0,P=0,I=0;P<this.length;P++){var B=this.words[P]<<I|S;u[w++]=B&255,w<u.length&&(u[w++]=B>>8&255),w<u.length&&(u[w++]=B>>16&255),I===6?(w<u.length&&(u[w++]=B>>24&255),S=0,I=0):(S=B>>>24,I+=2)}if(w<u.length)for(u[w++]=S;w<u.length;)u[w++]=0},s.prototype._toArrayLikeBE=function(u,g){for(var w=u.length-1,S=0,P=0,I=0;P<this.length;P++){var B=this.words[P]<<I|S;u[w--]=B&255,w>=0&&(u[w--]=B>>8&255),w>=0&&(u[w--]=B>>16&255),I===6?(w>=0&&(u[w--]=B>>24&255),S=0,I=0):(S=B>>>24,I+=2)}if(w>=0)for(u[w--]=S;w>=0;)u[w--]=0},Math.clz32?s.prototype._countBits=function(u){return 32-Math.clz32(u)}:s.prototype._countBits=function(u){var g=u,w=0;return g>=4096&&(w+=13,g>>>=13),g>=64&&(w+=7,g>>>=7),g>=8&&(w+=4,g>>>=4),g>=2&&(w+=2,g>>>=2),w+g},s.prototype._zeroBits=function(u){if(u===0)return 26;var g=u,w=0;return(g&8191)===0&&(w+=13,g>>>=13),(g&127)===0&&(w+=7,g>>>=7),(g&15)===0&&(w+=4,g>>>=4),(g&3)===0&&(w+=2,g>>>=2),(g&1)===0&&w++,w},s.prototype.bitLength=function(){var u=this.words[this.length-1],g=this._countBits(u);return(this.length-1)*26+g};function b(E){for(var u=new Array(E.bitLength()),g=0;g<u.length;g++){var w=g/26|0,S=g%26;u[g]=E.words[w]>>>S&1}return u}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,g=0;g<this.length;g++){var w=this._zeroBits(this.words[g]);if(u+=w,w!==26)break}return u},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},s.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var g=0;g<u.length;g++)this.words[g]=this.words[g]|u.words[g];return this._strip()},s.prototype.ior=function(u){return n((this.negative|u.negative)===0),this.iuor(u)},s.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},s.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},s.prototype.iuand=function(u){var g;this.length>u.length?g=u:g=this;for(var w=0;w<g.length;w++)this.words[w]=this.words[w]&u.words[w];return this.length=g.length,this._strip()},s.prototype.iand=function(u){return n((this.negative|u.negative)===0),this.iuand(u)},s.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},s.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},s.prototype.iuxor=function(u){var g,w;this.length>u.length?(g=this,w=u):(g=u,w=this);for(var S=0;S<w.length;S++)this.words[S]=g.words[S]^w.words[S];if(this!==g)for(;S<g.length;S++)this.words[S]=g.words[S];return this.length=g.length,this._strip()},s.prototype.ixor=function(u){return n((this.negative|u.negative)===0),this.iuxor(u)},s.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},s.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},s.prototype.inotn=function(u){n(typeof u=="number"&&u>=0);var g=Math.ceil(u/26)|0,w=u%26;this._expand(g),w>0&&g--;for(var S=0;S<g;S++)this.words[S]=~this.words[S]&67108863;return w>0&&(this.words[S]=~this.words[S]&67108863>>26-w),this._strip()},s.prototype.notn=function(u){return this.clone().inotn(u)},s.prototype.setn=function(u,g){n(typeof u=="number"&&u>=0);var w=u/26|0,S=u%26;return this._expand(w+1),g?this.words[w]=this.words[w]|1<<S:this.words[w]=this.words[w]&~(1<<S),this._strip()},s.prototype.iadd=function(u){var g;if(this.negative!==0&&u.negative===0)return this.negative=0,g=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,g=this.isub(u),u.negative=1,g._normSign();var w,S;this.length>u.length?(w=this,S=u):(w=u,S=this);for(var P=0,I=0;I<S.length;I++)g=(w.words[I]|0)+(S.words[I]|0)+P,this.words[I]=g&67108863,P=g>>>26;for(;P!==0&&I<w.length;I++)g=(w.words[I]|0)+P,this.words[I]=g&67108863,P=g>>>26;if(this.length=w.length,P!==0)this.words[this.length]=P,this.length++;else if(w!==this)for(;I<w.length;I++)this.words[I]=w.words[I];return this},s.prototype.add=function(u){var g;return u.negative!==0&&this.negative===0?(u.negative=0,g=this.sub(u),u.negative^=1,g):u.negative===0&&this.negative!==0?(this.negative=0,g=u.sub(this),this.negative=1,g):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},s.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var g=this.iadd(u);return u.negative=1,g._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var w=this.cmp(u);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var S,P;w>0?(S=this,P=u):(S=u,P=this);for(var I=0,B=0;B<P.length;B++)g=(S.words[B]|0)-(P.words[B]|0)+I,I=g>>26,this.words[B]=g&67108863;for(;I!==0&&B<S.length;B++)g=(S.words[B]|0)+I,I=g>>26,this.words[B]=g&67108863;if(I===0&&B<S.length&&S!==this)for(;B<S.length;B++)this.words[B]=S.words[B];return this.length=Math.max(this.length,B),S!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(u){return this.clone().isub(u)};function _(E,u,g){g.negative=u.negative^E.negative;var w=E.length+u.length|0;g.length=w,w=w-1|0;var S=E.words[0]|0,P=u.words[0]|0,I=S*P,B=I&67108863,y=I/67108864|0;g.words[0]=B;for(var d=1;d<w;d++){for(var A=y>>>26,O=y&67108863,p=Math.min(d,u.length-1),R=Math.max(0,d-E.length+1);R<=p;R++){var U=d-R|0;S=E.words[U]|0,P=u.words[R]|0,I=S*P+O,A+=I/67108864|0,O=I&67108863}g.words[d]=O|0,y=A|0}return y!==0?g.words[d]=y|0:g.length--,g._strip()}var k=function(u,g,w){var S=u.words,P=g.words,I=w.words,B=0,y,d,A,O=S[0]|0,p=O&8191,R=O>>>13,U=S[1]|0,K=U&8191,H=U>>>13,Z=S[2]|0,Q=Z&8191,ee=Z>>>13,ye=S[3]|0,ne=ye&8191,se=ye>>>13,Tt=S[4]|0,Je=Tt&8191,We=Tt>>>13,an=S[5]|0,Ye=an&8191,Qe=an>>>13,cn=S[6]|0,Xe=cn&8191,Ze=cn>>>13,un=S[7]|0,et=un&8191,tt=un>>>13,Or=S[8]|0,_e=Or&8191,Ee=Or>>>13,Dr=S[9]|0,Ae=Dr&8191,Se=Dr>>>13,Fr=P[0]|0,Te=Fr&8191,ke=Fr>>>13,Lr=P[1]|0,Pe=Lr&8191,Ie=Lr>>>13,Ur=P[2]|0,Ce=Ur&8191,Ne=Ur>>>13,Kr=P[3]|0,Me=Kr&8191,Be=Kr>>>13,jr=P[4]|0,Re=jr&8191,Oe=jr>>>13,$r=P[5]|0,De=$r&8191,Fe=$r>>>13,Hr=P[6]|0,Le=Hr&8191,Ue=Hr>>>13,qr=P[7]|0,Ke=qr&8191,je=qr>>>13,zr=P[8]|0,$e=zr&8191,He=zr>>>13,Gr=P[9]|0,qe=Gr&8191,ze=Gr>>>13;w.negative=u.negative^g.negative,w.length=19,y=Math.imul(p,Te),d=Math.imul(p,ke),d=d+Math.imul(R,Te)|0,A=Math.imul(R,ke);var xr=(B+y|0)+((d&8191)<<13)|0;B=(A+(d>>>13)|0)+(xr>>>26)|0,xr&=67108863,y=Math.imul(K,Te),d=Math.imul(K,ke),d=d+Math.imul(H,Te)|0,A=Math.imul(H,ke),y=y+Math.imul(p,Pe)|0,d=d+Math.imul(p,Ie)|0,d=d+Math.imul(R,Pe)|0,A=A+Math.imul(R,Ie)|0;var vr=(B+y|0)+((d&8191)<<13)|0;B=(A+(d>>>13)|0)+(vr>>>26)|0,vr&=67108863,y=Math.imul(Q,Te),d=Math.imul(Q,ke),d=d+Math.imul(ee,Te)|0,A=Math.imul(ee,ke),y=y+Math.imul(K,Pe)|0,d=d+Math.imul(K,Ie)|0,d=d+Math.imul(H,Pe)|0,A=A+Math.imul(H,Ie)|0,y=y+Math.imul(p,Ce)|0,d=d+Math.imul(p,Ne)|0,d=d+Math.imul(R,Ce)|0,A=A+Math.imul(R,Ne)|0;var wr=(B+y|0)+((d&8191)<<13)|0;B=(A+(d>>>13)|0)+(wr>>>26)|0,wr&=67108863,y=Math.imul(ne,Te),d=Math.imul(ne,ke),d=d+Math.imul(se,Te)|0,A=Math.imul(se,ke),y=y+Math.imul(Q,Pe)|0,d=d+Math.imul(Q,Ie)|0,d=d+Math.imul(ee,Pe)|0,A=A+Math.imul(ee,Ie)|0,y=y+Math.imul(K,Ce)|0,d=d+Math.imul(K,Ne)|0,d=d+Math.imul(H,Ce)|0,A=A+Math.imul(H,Ne)|0,y=y+Math.imul(p,Me)|0,d=d+Math.imul(p,Be)|0,d=d+Math.imul(R,Me)|0,A=A+Math.imul(R,Be)|0;var _r=(B+y|0)+((d&8191)<<13)|0;B=(A+(d>>>13)|0)+(_r>>>26)|0,_r&=67108863,y=Math.imul(Je,Te),d=Math.imul(Je,ke),d=d+Math.imul(We,Te)|0,A=Math.imul(We,ke),y=y+Math.imul(ne,Pe)|0,d=d+Math.imul(ne,Ie)|0,d=d+Math.imul(se,Pe)|0,A=A+Math.imul(se,Ie)|0,y=y+Math.imul(Q,Ce)|0,d=d+Math.imul(Q,Ne)|0,d=d+Math.imul(ee,Ce)|0,A=A+Math.imul(ee,Ne)|0,y=y+Math.imul(K,Me)|0,d=d+Math.imul(K,Be)|0,d=d+Math.imul(H,Me)|0,A=A+Math.imul(H,Be)|0,y=y+Math.imul(p,Re)|0,d=d+Math.imul(p,Oe)|0,d=d+Math.imul(R,Re)|0,A=A+Math.imul(R,Oe)|0;var Er=(B+y|0)+((d&8191)<<13)|0;B=(A+(d>>>13)|0)+(Er>>>26)|0,Er&=67108863,y=Math.imul(Ye,Te),d=Math.imul(Ye,ke),d=d+Math.imul(Qe,Te)|0,A=Math.imul(Qe,ke),y=y+Math.imul(Je,Pe)|0,d=d+Math.imul(Je,Ie)|0,d=d+Math.imul(We,Pe)|0,A=A+Math.imul(We,Ie)|0,y=y+Math.imul(ne,Ce)|0,d=d+Math.imul(ne,Ne)|0,d=d+Math.imul(se,Ce)|0,A=A+Math.imul(se,Ne)|0,y=y+Math.imul(Q,Me)|0,d=d+Math.imul(Q,Be)|0,d=d+Math.imul(ee,Me)|0,A=A+Math.imul(ee,Be)|0,y=y+Math.imul(K,Re)|0,d=d+Math.imul(K,Oe)|0,d=d+Math.imul(H,Re)|0,A=A+Math.imul(H,Oe)|0,y=y+Math.imul(p,De)|0,d=d+Math.imul(p,Fe)|0,d=d+Math.imul(R,De)|0,A=A+Math.imul(R,Fe)|0;var Si=(B+y|0)+((d&8191)<<13)|0;B=(A+(d>>>13)|0)+(Si>>>26)|0,Si&=67108863,y=Math.imul(Xe,Te),d=Math.imul(Xe,ke),d=d+Math.imul(Ze,Te)|0,A=Math.imul(Ze,ke),y=y+Math.imul(Ye,Pe)|0,d=d+Math.imul(Ye,Ie)|0,d=d+Math.imul(Qe,Pe)|0,A=A+Math.imul(Qe,Ie)|0,y=y+Math.imul(Je,Ce)|0,d=d+Math.imul(Je,Ne)|0,d=d+Math.imul(We,Ce)|0,A=A+Math.imul(We,Ne)|0,y=y+Math.imul(ne,Me)|0,d=d+Math.imul(ne,Be)|0,d=d+Math.imul(se,Me)|0,A=A+Math.imul(se,Be)|0,y=y+Math.imul(Q,Re)|0,d=d+Math.imul(Q,Oe)|0,d=d+Math.imul(ee,Re)|0,A=A+Math.imul(ee,Oe)|0,y=y+Math.imul(K,De)|0,d=d+Math.imul(K,Fe)|0,d=d+Math.imul(H,De)|0,A=A+Math.imul(H,Fe)|0,y=y+Math.imul(p,Le)|0,d=d+Math.imul(p,Ue)|0,d=d+Math.imul(R,Le)|0,A=A+Math.imul(R,Ue)|0;var Ti=(B+y|0)+((d&8191)<<13)|0;B=(A+(d>>>13)|0)+(Ti>>>26)|0,Ti&=67108863,y=Math.imul(et,Te),d=Math.imul(et,ke),d=d+Math.imul(tt,Te)|0,A=Math.imul(tt,ke),y=y+Math.imul(Xe,Pe)|0,d=d+Math.imul(Xe,Ie)|0,d=d+Math.imul(Ze,Pe)|0,A=A+Math.imul(Ze,Ie)|0,y=y+Math.imul(Ye,Ce)|0,d=d+Math.imul(Ye,Ne)|0,d=d+Math.imul(Qe,Ce)|0,A=A+Math.imul(Qe,Ne)|0,y=y+Math.imul(Je,Me)|0,d=d+Math.imul(Je,Be)|0,d=d+Math.imul(We,Me)|0,A=A+Math.imul(We,Be)|0,y=y+Math.imul(ne,Re)|0,d=d+Math.imul(ne,Oe)|0,d=d+Math.imul(se,Re)|0,A=A+Math.imul(se,Oe)|0,y=y+Math.imul(Q,De)|0,d=d+Math.imul(Q,Fe)|0,d=d+Math.imul(ee,De)|0,A=A+Math.imul(ee,Fe)|0,y=y+Math.imul(K,Le)|0,d=d+Math.imul(K,Ue)|0,d=d+Math.imul(H,Le)|0,A=A+Math.imul(H,Ue)|0,y=y+Math.imul(p,Ke)|0,d=d+Math.imul(p,je)|0,d=d+Math.imul(R,Ke)|0,A=A+Math.imul(R,je)|0;var ki=(B+y|0)+((d&8191)<<13)|0;B=(A+(d>>>13)|0)+(ki>>>26)|0,ki&=67108863,y=Math.imul(_e,Te),d=Math.imul(_e,ke),d=d+Math.imul(Ee,Te)|0,A=Math.imul(Ee,ke),y=y+Math.imul(et,Pe)|0,d=d+Math.imul(et,Ie)|0,d=d+Math.imul(tt,Pe)|0,A=A+Math.imul(tt,Ie)|0,y=y+Math.imul(Xe,Ce)|0,d=d+Math.imul(Xe,Ne)|0,d=d+Math.imul(Ze,Ce)|0,A=A+Math.imul(Ze,Ne)|0,y=y+Math.imul(Ye,Me)|0,d=d+Math.imul(Ye,Be)|0,d=d+Math.imul(Qe,Me)|0,A=A+Math.imul(Qe,Be)|0,y=y+Math.imul(Je,Re)|0,d=d+Math.imul(Je,Oe)|0,d=d+Math.imul(We,Re)|0,A=A+Math.imul(We,Oe)|0,y=y+Math.imul(ne,De)|0,d=d+Math.imul(ne,Fe)|0,d=d+Math.imul(se,De)|0,A=A+Math.imul(se,Fe)|0,y=y+Math.imul(Q,Le)|0,d=d+Math.imul(Q,Ue)|0,d=d+Math.imul(ee,Le)|0,A=A+Math.imul(ee,Ue)|0,y=y+Math.imul(K,Ke)|0,d=d+Math.imul(K,je)|0,d=d+Math.imul(H,Ke)|0,A=A+Math.imul(H,je)|0,y=y+Math.imul(p,$e)|0,d=d+Math.imul(p,He)|0,d=d+Math.imul(R,$e)|0,A=A+Math.imul(R,He)|0;var Pi=(B+y|0)+((d&8191)<<13)|0;B=(A+(d>>>13)|0)+(Pi>>>26)|0,Pi&=67108863,y=Math.imul(Ae,Te),d=Math.imul(Ae,ke),d=d+Math.imul(Se,Te)|0,A=Math.imul(Se,ke),y=y+Math.imul(_e,Pe)|0,d=d+Math.imul(_e,Ie)|0,d=d+Math.imul(Ee,Pe)|0,A=A+Math.imul(Ee,Ie)|0,y=y+Math.imul(et,Ce)|0,d=d+Math.imul(et,Ne)|0,d=d+Math.imul(tt,Ce)|0,A=A+Math.imul(tt,Ne)|0,y=y+Math.imul(Xe,Me)|0,d=d+Math.imul(Xe,Be)|0,d=d+Math.imul(Ze,Me)|0,A=A+Math.imul(Ze,Be)|0,y=y+Math.imul(Ye,Re)|0,d=d+Math.imul(Ye,Oe)|0,d=d+Math.imul(Qe,Re)|0,A=A+Math.imul(Qe,Oe)|0,y=y+Math.imul(Je,De)|0,d=d+Math.imul(Je,Fe)|0,d=d+Math.imul(We,De)|0,A=A+Math.imul(We,Fe)|0,y=y+Math.imul(ne,Le)|0,d=d+Math.imul(ne,Ue)|0,d=d+Math.imul(se,Le)|0,A=A+Math.imul(se,Ue)|0,y=y+Math.imul(Q,Ke)|0,d=d+Math.imul(Q,je)|0,d=d+Math.imul(ee,Ke)|0,A=A+Math.imul(ee,je)|0,y=y+Math.imul(K,$e)|0,d=d+Math.imul(K,He)|0,d=d+Math.imul(H,$e)|0,A=A+Math.imul(H,He)|0,y=y+Math.imul(p,qe)|0,d=d+Math.imul(p,ze)|0,d=d+Math.imul(R,qe)|0,A=A+Math.imul(R,ze)|0;var Ii=(B+y|0)+((d&8191)<<13)|0;B=(A+(d>>>13)|0)+(Ii>>>26)|0,Ii&=67108863,y=Math.imul(Ae,Pe),d=Math.imul(Ae,Ie),d=d+Math.imul(Se,Pe)|0,A=Math.imul(Se,Ie),y=y+Math.imul(_e,Ce)|0,d=d+Math.imul(_e,Ne)|0,d=d+Math.imul(Ee,Ce)|0,A=A+Math.imul(Ee,Ne)|0,y=y+Math.imul(et,Me)|0,d=d+Math.imul(et,Be)|0,d=d+Math.imul(tt,Me)|0,A=A+Math.imul(tt,Be)|0,y=y+Math.imul(Xe,Re)|0,d=d+Math.imul(Xe,Oe)|0,d=d+Math.imul(Ze,Re)|0,A=A+Math.imul(Ze,Oe)|0,y=y+Math.imul(Ye,De)|0,d=d+Math.imul(Ye,Fe)|0,d=d+Math.imul(Qe,De)|0,A=A+Math.imul(Qe,Fe)|0,y=y+Math.imul(Je,Le)|0,d=d+Math.imul(Je,Ue)|0,d=d+Math.imul(We,Le)|0,A=A+Math.imul(We,Ue)|0,y=y+Math.imul(ne,Ke)|0,d=d+Math.imul(ne,je)|0,d=d+Math.imul(se,Ke)|0,A=A+Math.imul(se,je)|0,y=y+Math.imul(Q,$e)|0,d=d+Math.imul(Q,He)|0,d=d+Math.imul(ee,$e)|0,A=A+Math.imul(ee,He)|0,y=y+Math.imul(K,qe)|0,d=d+Math.imul(K,ze)|0,d=d+Math.imul(H,qe)|0,A=A+Math.imul(H,ze)|0;var Ci=(B+y|0)+((d&8191)<<13)|0;B=(A+(d>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,y=Math.imul(Ae,Ce),d=Math.imul(Ae,Ne),d=d+Math.imul(Se,Ce)|0,A=Math.imul(Se,Ne),y=y+Math.imul(_e,Me)|0,d=d+Math.imul(_e,Be)|0,d=d+Math.imul(Ee,Me)|0,A=A+Math.imul(Ee,Be)|0,y=y+Math.imul(et,Re)|0,d=d+Math.imul(et,Oe)|0,d=d+Math.imul(tt,Re)|0,A=A+Math.imul(tt,Oe)|0,y=y+Math.imul(Xe,De)|0,d=d+Math.imul(Xe,Fe)|0,d=d+Math.imul(Ze,De)|0,A=A+Math.imul(Ze,Fe)|0,y=y+Math.imul(Ye,Le)|0,d=d+Math.imul(Ye,Ue)|0,d=d+Math.imul(Qe,Le)|0,A=A+Math.imul(Qe,Ue)|0,y=y+Math.imul(Je,Ke)|0,d=d+Math.imul(Je,je)|0,d=d+Math.imul(We,Ke)|0,A=A+Math.imul(We,je)|0,y=y+Math.imul(ne,$e)|0,d=d+Math.imul(ne,He)|0,d=d+Math.imul(se,$e)|0,A=A+Math.imul(se,He)|0,y=y+Math.imul(Q,qe)|0,d=d+Math.imul(Q,ze)|0,d=d+Math.imul(ee,qe)|0,A=A+Math.imul(ee,ze)|0;var Ni=(B+y|0)+((d&8191)<<13)|0;B=(A+(d>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,y=Math.imul(Ae,Me),d=Math.imul(Ae,Be),d=d+Math.imul(Se,Me)|0,A=Math.imul(Se,Be),y=y+Math.imul(_e,Re)|0,d=d+Math.imul(_e,Oe)|0,d=d+Math.imul(Ee,Re)|0,A=A+Math.imul(Ee,Oe)|0,y=y+Math.imul(et,De)|0,d=d+Math.imul(et,Fe)|0,d=d+Math.imul(tt,De)|0,A=A+Math.imul(tt,Fe)|0,y=y+Math.imul(Xe,Le)|0,d=d+Math.imul(Xe,Ue)|0,d=d+Math.imul(Ze,Le)|0,A=A+Math.imul(Ze,Ue)|0,y=y+Math.imul(Ye,Ke)|0,d=d+Math.imul(Ye,je)|0,d=d+Math.imul(Qe,Ke)|0,A=A+Math.imul(Qe,je)|0,y=y+Math.imul(Je,$e)|0,d=d+Math.imul(Je,He)|0,d=d+Math.imul(We,$e)|0,A=A+Math.imul(We,He)|0,y=y+Math.imul(ne,qe)|0,d=d+Math.imul(ne,ze)|0,d=d+Math.imul(se,qe)|0,A=A+Math.imul(se,ze)|0;var Mi=(B+y|0)+((d&8191)<<13)|0;B=(A+(d>>>13)|0)+(Mi>>>26)|0,Mi&=67108863,y=Math.imul(Ae,Re),d=Math.imul(Ae,Oe),d=d+Math.imul(Se,Re)|0,A=Math.imul(Se,Oe),y=y+Math.imul(_e,De)|0,d=d+Math.imul(_e,Fe)|0,d=d+Math.imul(Ee,De)|0,A=A+Math.imul(Ee,Fe)|0,y=y+Math.imul(et,Le)|0,d=d+Math.imul(et,Ue)|0,d=d+Math.imul(tt,Le)|0,A=A+Math.imul(tt,Ue)|0,y=y+Math.imul(Xe,Ke)|0,d=d+Math.imul(Xe,je)|0,d=d+Math.imul(Ze,Ke)|0,A=A+Math.imul(Ze,je)|0,y=y+Math.imul(Ye,$e)|0,d=d+Math.imul(Ye,He)|0,d=d+Math.imul(Qe,$e)|0,A=A+Math.imul(Qe,He)|0,y=y+Math.imul(Je,qe)|0,d=d+Math.imul(Je,ze)|0,d=d+Math.imul(We,qe)|0,A=A+Math.imul(We,ze)|0;var Bi=(B+y|0)+((d&8191)<<13)|0;B=(A+(d>>>13)|0)+(Bi>>>26)|0,Bi&=67108863,y=Math.imul(Ae,De),d=Math.imul(Ae,Fe),d=d+Math.imul(Se,De)|0,A=Math.imul(Se,Fe),y=y+Math.imul(_e,Le)|0,d=d+Math.imul(_e,Ue)|0,d=d+Math.imul(Ee,Le)|0,A=A+Math.imul(Ee,Ue)|0,y=y+Math.imul(et,Ke)|0,d=d+Math.imul(et,je)|0,d=d+Math.imul(tt,Ke)|0,A=A+Math.imul(tt,je)|0,y=y+Math.imul(Xe,$e)|0,d=d+Math.imul(Xe,He)|0,d=d+Math.imul(Ze,$e)|0,A=A+Math.imul(Ze,He)|0,y=y+Math.imul(Ye,qe)|0,d=d+Math.imul(Ye,ze)|0,d=d+Math.imul(Qe,qe)|0,A=A+Math.imul(Qe,ze)|0;var pu=(B+y|0)+((d&8191)<<13)|0;B=(A+(d>>>13)|0)+(pu>>>26)|0,pu&=67108863,y=Math.imul(Ae,Le),d=Math.imul(Ae,Ue),d=d+Math.imul(Se,Le)|0,A=Math.imul(Se,Ue),y=y+Math.imul(_e,Ke)|0,d=d+Math.imul(_e,je)|0,d=d+Math.imul(Ee,Ke)|0,A=A+Math.imul(Ee,je)|0,y=y+Math.imul(et,$e)|0,d=d+Math.imul(et,He)|0,d=d+Math.imul(tt,$e)|0,A=A+Math.imul(tt,He)|0,y=y+Math.imul(Xe,qe)|0,d=d+Math.imul(Xe,ze)|0,d=d+Math.imul(Ze,qe)|0,A=A+Math.imul(Ze,ze)|0;var gu=(B+y|0)+((d&8191)<<13)|0;B=(A+(d>>>13)|0)+(gu>>>26)|0,gu&=67108863,y=Math.imul(Ae,Ke),d=Math.imul(Ae,je),d=d+Math.imul(Se,Ke)|0,A=Math.imul(Se,je),y=y+Math.imul(_e,$e)|0,d=d+Math.imul(_e,He)|0,d=d+Math.imul(Ee,$e)|0,A=A+Math.imul(Ee,He)|0,y=y+Math.imul(et,qe)|0,d=d+Math.imul(et,ze)|0,d=d+Math.imul(tt,qe)|0,A=A+Math.imul(tt,ze)|0;var yu=(B+y|0)+((d&8191)<<13)|0;B=(A+(d>>>13)|0)+(yu>>>26)|0,yu&=67108863,y=Math.imul(Ae,$e),d=Math.imul(Ae,He),d=d+Math.imul(Se,$e)|0,A=Math.imul(Se,He),y=y+Math.imul(_e,qe)|0,d=d+Math.imul(_e,ze)|0,d=d+Math.imul(Ee,qe)|0,A=A+Math.imul(Ee,ze)|0;var mu=(B+y|0)+((d&8191)<<13)|0;B=(A+(d>>>13)|0)+(mu>>>26)|0,mu&=67108863,y=Math.imul(Ae,qe),d=Math.imul(Ae,ze),d=d+Math.imul(Se,qe)|0,A=Math.imul(Se,ze);var bu=(B+y|0)+((d&8191)<<13)|0;return B=(A+(d>>>13)|0)+(bu>>>26)|0,bu&=67108863,I[0]=xr,I[1]=vr,I[2]=wr,I[3]=_r,I[4]=Er,I[5]=Si,I[6]=Ti,I[7]=ki,I[8]=Pi,I[9]=Ii,I[10]=Ci,I[11]=Ni,I[12]=Mi,I[13]=Bi,I[14]=pu,I[15]=gu,I[16]=yu,I[17]=mu,I[18]=bu,B!==0&&(I[19]=B,w.length++),w};Math.imul||(k=_);function N(E,u,g){g.negative=u.negative^E.negative,g.length=E.length+u.length;for(var w=0,S=0,P=0;P<g.length-1;P++){var I=S;S=0;for(var B=w&67108863,y=Math.min(P,u.length-1),d=Math.max(0,P-E.length+1);d<=y;d++){var A=P-d,O=E.words[A]|0,p=u.words[d]|0,R=O*p,U=R&67108863;I=I+(R/67108864|0)|0,U=U+B|0,B=U&67108863,I=I+(U>>>26)|0,S+=I>>>26,I&=67108863}g.words[P]=B,w=I,I=S}return w!==0?g.words[P]=w:g.length--,g._strip()}function D(E,u,g){return N(E,u,g)}s.prototype.mulTo=function(u,g){var w,S=this.length+u.length;return this.length===10&&u.length===10?w=k(this,u,g):S<63?w=_(this,u,g):S<1024?w=N(this,u,g):w=D(this,u,g),w},s.prototype.mul=function(u){var g=new s(null);return g.words=new Array(this.length+u.length),this.mulTo(u,g)},s.prototype.mulf=function(u){var g=new s(null);return g.words=new Array(this.length+u.length),D(this,u,g)},s.prototype.imul=function(u){return this.clone().mulTo(u,this)},s.prototype.imuln=function(u){var g=u<0;g&&(u=-u),n(typeof u=="number"),n(u<67108864);for(var w=0,S=0;S<this.length;S++){var P=(this.words[S]|0)*u,I=(P&67108863)+(w&67108863);w>>=26,w+=P/67108864|0,w+=I>>>26,this.words[S]=I&67108863}return w!==0&&(this.words[S]=w,this.length++),g?this.ineg():this},s.prototype.muln=function(u){return this.clone().imuln(u)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(u){var g=b(u);if(g.length===0)return new s(1);for(var w=this,S=0;S<g.length&&g[S]===0;S++,w=w.sqr());if(++S<g.length)for(var P=w.sqr();S<g.length;S++,P=P.sqr())g[S]!==0&&(w=w.mul(P));return w},s.prototype.iushln=function(u){n(typeof u=="number"&&u>=0);var g=u%26,w=(u-g)/26,S=67108863>>>26-g<<26-g,P;if(g!==0){var I=0;for(P=0;P<this.length;P++){var B=this.words[P]&S,y=(this.words[P]|0)-B<<g;this.words[P]=y|I,I=B>>>26-g}I&&(this.words[P]=I,this.length++)}if(w!==0){for(P=this.length-1;P>=0;P--)this.words[P+w]=this.words[P];for(P=0;P<w;P++)this.words[P]=0;this.length+=w}return this._strip()},s.prototype.ishln=function(u){return n(this.negative===0),this.iushln(u)},s.prototype.iushrn=function(u,g,w){n(typeof u=="number"&&u>=0);var S;g?S=(g-g%26)/26:S=0;var P=u%26,I=Math.min((u-P)/26,this.length),B=67108863^67108863>>>P<<P,y=w;if(S-=I,S=Math.max(0,S),y){for(var d=0;d<I;d++)y.words[d]=this.words[d];y.length=I}if(I!==0)if(this.length>I)for(this.length-=I,d=0;d<this.length;d++)this.words[d]=this.words[d+I];else this.words[0]=0,this.length=1;var A=0;for(d=this.length-1;d>=0&&(A!==0||d>=S);d--){var O=this.words[d]|0;this.words[d]=A<<26-P|O>>>P,A=O&B}return y&&A!==0&&(y.words[y.length++]=A),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(u,g,w){return n(this.negative===0),this.iushrn(u,g,w)},s.prototype.shln=function(u){return this.clone().ishln(u)},s.prototype.ushln=function(u){return this.clone().iushln(u)},s.prototype.shrn=function(u){return this.clone().ishrn(u)},s.prototype.ushrn=function(u){return this.clone().iushrn(u)},s.prototype.testn=function(u){n(typeof u=="number"&&u>=0);var g=u%26,w=(u-g)/26,S=1<<g;if(this.length<=w)return!1;var P=this.words[w];return!!(P&S)},s.prototype.imaskn=function(u){n(typeof u=="number"&&u>=0);var g=u%26,w=(u-g)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(g!==0&&w++,this.length=Math.min(w,this.length),g!==0){var S=67108863^67108863>>>g<<g;this.words[this.length-1]&=S}return this._strip()},s.prototype.maskn=function(u){return this.clone().imaskn(u)},s.prototype.iaddn=function(u){return n(typeof u=="number"),n(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<=u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},s.prototype._iaddn=function(u){this.words[0]+=u;for(var g=0;g<this.length&&this.words[g]>=67108864;g++)this.words[g]-=67108864,g===this.length-1?this.words[g+1]=1:this.words[g+1]++;return this.length=Math.max(this.length,g+1),this},s.prototype.isubn=function(u){if(n(typeof u=="number"),n(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var g=0;g<this.length&&this.words[g]<0;g++)this.words[g]+=67108864,this.words[g+1]-=1;return this._strip()},s.prototype.addn=function(u){return this.clone().iaddn(u)},s.prototype.subn=function(u){return this.clone().isubn(u)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(u,g,w){var S=u.length+w,P;this._expand(S);var I,B=0;for(P=0;P<u.length;P++){I=(this.words[P+w]|0)+B;var y=(u.words[P]|0)*g;I-=y&67108863,B=(I>>26)-(y/67108864|0),this.words[P+w]=I&67108863}for(;P<this.length-w;P++)I=(this.words[P+w]|0)+B,B=I>>26,this.words[P+w]=I&67108863;if(B===0)return this._strip();for(n(B===-1),B=0,P=0;P<this.length;P++)I=-(this.words[P]|0)+B,B=I>>26,this.words[P]=I&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(u,g){var w=this.length-u.length,S=this.clone(),P=u,I=P.words[P.length-1]|0,B=this._countBits(I);w=26-B,w!==0&&(P=P.ushln(w),S.iushln(w),I=P.words[P.length-1]|0);var y=S.length-P.length,d;if(g!=="mod"){d=new s(null),d.length=y+1,d.words=new Array(d.length);for(var A=0;A<d.length;A++)d.words[A]=0}var O=S.clone()._ishlnsubmul(P,1,y);O.negative===0&&(S=O,d&&(d.words[y]=1));for(var p=y-1;p>=0;p--){var R=(S.words[P.length+p]|0)*67108864+(S.words[P.length+p-1]|0);for(R=Math.min(R/I|0,67108863),S._ishlnsubmul(P,R,p);S.negative!==0;)R--,S.negative=0,S._ishlnsubmul(P,1,p),S.isZero()||(S.negative^=1);d&&(d.words[p]=R)}return d&&d._strip(),S._strip(),g!=="div"&&w!==0&&S.iushrn(w),{div:d||null,mod:S}},s.prototype.divmod=function(u,g,w){if(n(!u.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var S,P,I;return this.negative!==0&&u.negative===0?(I=this.neg().divmod(u,g),g!=="mod"&&(S=I.div.neg()),g!=="div"&&(P=I.mod.neg(),w&&P.negative!==0&&P.iadd(u)),{div:S,mod:P}):this.negative===0&&u.negative!==0?(I=this.divmod(u.neg(),g),g!=="mod"&&(S=I.div.neg()),{div:S,mod:I.mod}):(this.negative&u.negative)!==0?(I=this.neg().divmod(u.neg(),g),g!=="div"&&(P=I.mod.neg(),w&&P.negative!==0&&P.isub(u)),{div:I.div,mod:P}):u.length>this.length||this.cmp(u)<0?{div:new s(0),mod:this}:u.length===1?g==="div"?{div:this.divn(u.words[0]),mod:null}:g==="mod"?{div:null,mod:new s(this.modrn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new s(this.modrn(u.words[0]))}:this._wordDiv(u,g)},s.prototype.div=function(u){return this.divmod(u,"div",!1).div},s.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},s.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},s.prototype.divRound=function(u){var g=this.divmod(u);if(g.mod.isZero())return g.div;var w=g.div.negative!==0?g.mod.isub(u):g.mod,S=u.ushrn(1),P=u.andln(1),I=w.cmp(S);return I<0||P===1&&I===0?g.div:g.div.negative!==0?g.div.isubn(1):g.div.iaddn(1)},s.prototype.modrn=function(u){var g=u<0;g&&(u=-u),n(u<=67108863);for(var w=(1<<26)%u,S=0,P=this.length-1;P>=0;P--)S=(w*S+(this.words[P]|0))%u;return g?-S:S},s.prototype.modn=function(u){return this.modrn(u)},s.prototype.idivn=function(u){var g=u<0;g&&(u=-u),n(u<=67108863);for(var w=0,S=this.length-1;S>=0;S--){var P=(this.words[S]|0)+w*67108864;this.words[S]=P/u|0,w=P%u}return this._strip(),g?this.ineg():this},s.prototype.divn=function(u){return this.clone().idivn(u)},s.prototype.egcd=function(u){n(u.negative===0),n(!u.isZero());var g=this,w=u.clone();g.negative!==0?g=g.umod(u):g=g.clone();for(var S=new s(1),P=new s(0),I=new s(0),B=new s(1),y=0;g.isEven()&&w.isEven();)g.iushrn(1),w.iushrn(1),++y;for(var d=w.clone(),A=g.clone();!g.isZero();){for(var O=0,p=1;(g.words[0]&p)===0&&O<26;++O,p<<=1);if(O>0)for(g.iushrn(O);O-- >0;)(S.isOdd()||P.isOdd())&&(S.iadd(d),P.isub(A)),S.iushrn(1),P.iushrn(1);for(var R=0,U=1;(w.words[0]&U)===0&&R<26;++R,U<<=1);if(R>0)for(w.iushrn(R);R-- >0;)(I.isOdd()||B.isOdd())&&(I.iadd(d),B.isub(A)),I.iushrn(1),B.iushrn(1);g.cmp(w)>=0?(g.isub(w),S.isub(I),P.isub(B)):(w.isub(g),I.isub(S),B.isub(P))}return{a:I,b:B,gcd:w.iushln(y)}},s.prototype._invmp=function(u){n(u.negative===0),n(!u.isZero());var g=this,w=u.clone();g.negative!==0?g=g.umod(u):g=g.clone();for(var S=new s(1),P=new s(0),I=w.clone();g.cmpn(1)>0&&w.cmpn(1)>0;){for(var B=0,y=1;(g.words[0]&y)===0&&B<26;++B,y<<=1);if(B>0)for(g.iushrn(B);B-- >0;)S.isOdd()&&S.iadd(I),S.iushrn(1);for(var d=0,A=1;(w.words[0]&A)===0&&d<26;++d,A<<=1);if(d>0)for(w.iushrn(d);d-- >0;)P.isOdd()&&P.iadd(I),P.iushrn(1);g.cmp(w)>=0?(g.isub(w),S.isub(P)):(w.isub(g),P.isub(S))}var O;return g.cmpn(1)===0?O=S:O=P,O.cmpn(0)<0&&O.iadd(u),O},s.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var g=this.clone(),w=u.clone();g.negative=0,w.negative=0;for(var S=0;g.isEven()&&w.isEven();S++)g.iushrn(1),w.iushrn(1);do{for(;g.isEven();)g.iushrn(1);for(;w.isEven();)w.iushrn(1);var P=g.cmp(w);if(P<0){var I=g;g=w,w=I}else if(P===0||w.cmpn(1)===0)break;g.isub(w)}while(!0);return w.iushln(S)},s.prototype.invm=function(u){return this.egcd(u).a.umod(u)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(u){return this.words[0]&u},s.prototype.bincn=function(u){n(typeof u=="number");var g=u%26,w=(u-g)/26,S=1<<g;if(this.length<=w)return this._expand(w+1),this.words[w]|=S,this;for(var P=S,I=w;P!==0&&I<this.length;I++){var B=this.words[I]|0;B+=P,P=B>>>26,B&=67108863,this.words[I]=B}return P!==0&&(this.words[I]=P,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(u){var g=u<0;if(this.negative!==0&&!g)return-1;if(this.negative===0&&g)return 1;this._strip();var w;if(this.length>1)w=1;else{g&&(u=-u),n(u<=67108863,"Number is too big");var S=this.words[0]|0;w=S===u?0:S<u?-1:1}return this.negative!==0?-w|0:w},s.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var g=this.ucmp(u);return this.negative!==0?-g|0:g},s.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var g=0,w=this.length-1;w>=0;w--){var S=this.words[w]|0,P=u.words[w]|0;if(S!==P){S<P?g=-1:S>P&&(g=1);break}}return g},s.prototype.gtn=function(u){return this.cmpn(u)===1},s.prototype.gt=function(u){return this.cmp(u)===1},s.prototype.gten=function(u){return this.cmpn(u)>=0},s.prototype.gte=function(u){return this.cmp(u)>=0},s.prototype.ltn=function(u){return this.cmpn(u)===-1},s.prototype.lt=function(u){return this.cmp(u)===-1},s.prototype.lten=function(u){return this.cmpn(u)<=0},s.prototype.lte=function(u){return this.cmp(u)<=0},s.prototype.eqn=function(u){return this.cmpn(u)===0},s.prototype.eq=function(u){return this.cmp(u)===0},s.red=function(u){return new te(u)},s.prototype.toRed=function(u){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(u){return this.red=u,this},s.prototype.forceRed=function(u){return n(!this.red,"Already a number in reduction context"),this._forceRed(u)},s.prototype.redAdd=function(u){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},s.prototype.redIAdd=function(u){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},s.prototype.redSub=function(u){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},s.prototype.redISub=function(u){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},s.prototype.redShl=function(u){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},s.prototype.redMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},s.prototype.redIMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(u){return n(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var C={k256:null,p224:null,p192:null,p25519:null};function L(E,u){this.name=E,this.p=new s(u,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}L.prototype._tmp=function(){var u=new s(null);return u.words=new Array(Math.ceil(this.n/13)),u},L.prototype.ireduce=function(u){var g=u,w;do this.split(g,this.tmp),g=this.imulK(g),g=g.iadd(this.tmp),w=g.bitLength();while(w>this.n);var S=w<this.n?-1:g.ucmp(this.p);return S===0?(g.words[0]=0,g.length=1):S>0?g.isub(this.p):g.strip!==void 0?g.strip():g._strip(),g},L.prototype.split=function(u,g){u.iushrn(this.n,0,g)},L.prototype.imulK=function(u){return u.imul(this.k)};function $(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i($,L),$.prototype.split=function(u,g){for(var w=4194303,S=Math.min(u.length,9),P=0;P<S;P++)g.words[P]=u.words[P];if(g.length=S,u.length<=9){u.words[0]=0,u.length=1;return}var I=u.words[9];for(g.words[g.length++]=I&w,P=10;P<u.length;P++){var B=u.words[P]|0;u.words[P-10]=(B&w)<<4|I>>>22,I=B}I>>>=22,u.words[P-10]=I,I===0&&u.length>10?u.length-=10:u.length-=9},$.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var g=0,w=0;w<u.length;w++){var S=u.words[w]|0;g+=S*977,u.words[w]=g&67108863,g=S*64+(g/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function q(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(q,L);function J(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(J,L);function re(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(re,L),re.prototype.imulK=function(u){for(var g=0,w=0;w<u.length;w++){var S=(u.words[w]|0)*19+g,P=S&67108863;S>>>=26,u.words[w]=P,g=S}return g!==0&&(u.words[u.length++]=g),u},s._prime=function(u){if(C[u])return C[u];var g;if(u==="k256")g=new $;else if(u==="p224")g=new q;else if(u==="p192")g=new J;else if(u==="p25519")g=new re;else throw new Error("Unknown prime "+u);return C[u]=g,g};function te(E){if(typeof E=="string"){var u=s._prime(E);this.m=u.p,this.prime=u}else n(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}te.prototype._verify1=function(u){n(u.negative===0,"red works only with positives"),n(u.red,"red works only with red numbers")},te.prototype._verify2=function(u,g){n((u.negative|g.negative)===0,"red works only with positives"),n(u.red&&u.red===g.red,"red works only with red numbers")},te.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):(l(u,u.umod(this.m)._forceRed(this)),u)},te.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},te.prototype.add=function(u,g){this._verify2(u,g);var w=u.add(g);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},te.prototype.iadd=function(u,g){this._verify2(u,g);var w=u.iadd(g);return w.cmp(this.m)>=0&&w.isub(this.m),w},te.prototype.sub=function(u,g){this._verify2(u,g);var w=u.sub(g);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},te.prototype.isub=function(u,g){this._verify2(u,g);var w=u.isub(g);return w.cmpn(0)<0&&w.iadd(this.m),w},te.prototype.shl=function(u,g){return this._verify1(u),this.imod(u.ushln(g))},te.prototype.imul=function(u,g){return this._verify2(u,g),this.imod(u.imul(g))},te.prototype.mul=function(u,g){return this._verify2(u,g),this.imod(u.mul(g))},te.prototype.isqr=function(u){return this.imul(u,u.clone())},te.prototype.sqr=function(u){return this.mul(u,u)},te.prototype.sqrt=function(u){if(u.isZero())return u.clone();var g=this.m.andln(3);if(n(g%2===1),g===3){var w=this.m.add(new s(1)).iushrn(2);return this.pow(u,w)}for(var S=this.m.subn(1),P=0;!S.isZero()&&S.andln(1)===0;)P++,S.iushrn(1);n(!S.isZero());var I=new s(1).toRed(this),B=I.redNeg(),y=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new s(2*d*d).toRed(this);this.pow(d,y).cmp(B)!==0;)d.redIAdd(B);for(var A=this.pow(d,S),O=this.pow(u,S.addn(1).iushrn(1)),p=this.pow(u,S),R=P;p.cmp(I)!==0;){for(var U=p,K=0;U.cmp(I)!==0;K++)U=U.redSqr();n(K<R);var H=this.pow(A,new s(1).iushln(R-K-1));O=O.redMul(H),A=H.redSqr(),p=p.redMul(A),R=K}return O},te.prototype.invm=function(u){var g=u._invmp(this.m);return g.negative!==0?(g.negative=0,this.imod(g).redNeg()):this.imod(g)},te.prototype.pow=function(u,g){if(g.isZero())return new s(1).toRed(this);if(g.cmpn(1)===0)return u.clone();var w=4,S=new Array(1<<w);S[0]=new s(1).toRed(this),S[1]=u;for(var P=2;P<S.length;P++)S[P]=this.mul(S[P-1],u);var I=S[0],B=0,y=0,d=g.bitLength()%26;for(d===0&&(d=26),P=g.length-1;P>=0;P--){for(var A=g.words[P],O=d-1;O>=0;O--){var p=A>>O&1;if(I!==S[0]&&(I=this.sqr(I)),p===0&&B===0){y=0;continue}B<<=1,B|=p,y++,!(y!==w&&(P!==0||O!==0))&&(I=this.mul(I,S[B]),y=0,B=0)}d=26}return I},te.prototype.convertTo=function(u){var g=u.umod(this.m);return g===u?g.clone():g},te.prototype.convertFrom=function(u){var g=u.clone();return g.red=null,g},s.mont=function(u){return new V(u)};function V(E){te.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(V,te),V.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},V.prototype.convertFrom=function(u){var g=this.imod(u.mul(this.rinv));return g.red=null,g},V.prototype.imul=function(u,g){if(u.isZero()||g.isZero())return u.words[0]=0,u.length=1,u;var w=u.imul(g),S=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),P=w.isub(S).iushrn(this.shift),I=P;return P.cmp(this.m)>=0?I=P.isub(this.m):P.cmpn(0)<0&&(I=P.iadd(this.m)),I._forceRed(this)},V.prototype.mul=function(u,g){if(u.isZero()||g.isZero())return new s(0)._forceRed(this);var w=u.mul(g),S=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),P=w.isub(S).iushrn(this.shift),I=P;return P.cmp(this.m)>=0?I=P.isub(this.m):P.cmpn(0)<0&&(I=P.iadd(this.m)),I._forceRed(this)},V.prototype.invm=function(u){var g=this.imod(u._invmp(this.m).mul(this.r2));return g._forceRed(this)}})(t,F)})(Ai);(function(t){var e=F&&F.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseNearAmount=t.formatNearAmount=t.NEAR_NOMINATION=t.NEAR_NOMINATION_EXP=void 0;const r=e(Ai.exports);t.NEAR_NOMINATION_EXP=24,t.NEAR_NOMINATION=new r.default("10",10).pow(new r.default(t.NEAR_NOMINATION_EXP,10));const n=[],i=new r.default(10);for(let h=0,m=new r.default(5);h<t.NEAR_NOMINATION_EXP;h++,m=m.mul(i))n[h]=m;function s(h,m=t.NEAR_NOMINATION_EXP){const v=new r.default(h,10);if(m!==t.NEAR_NOMINATION_EXP){const b=t.NEAR_NOMINATION_EXP-m-1;b>0&&v.iadd(n[b])}h=v.toString();const T=h.substring(0,h.length-t.NEAR_NOMINATION_EXP)||"0",x=h.substring(h.length-t.NEAR_NOMINATION_EXP).padStart(t.NEAR_NOMINATION_EXP,"0").substring(0,m);return c(`${l(T)}.${x}`)}t.formatNearAmount=s;function o(h){if(!h)return null;h=a(h);const m=h.split("."),v=m[0],T=m[1]||"";if(m.length>2||T.length>t.NEAR_NOMINATION_EXP)throw new Error(`Cannot parse '${h}' as NEAR amount`);return f(v+T.padEnd(t.NEAR_NOMINATION_EXP,"0"))}t.parseNearAmount=o;function a(h){return h.replace(/,/g,"").trim()}function c(h){return h.replace(/\.?0*$/,"")}function f(h){return h=h.replace(/^0+/,""),h===""?"0":h}function l(h){const m=/(-?\d+)(\d{3})/;for(;m.test(h);)h=h.replace(m,"$1,$2");return h}})(Id);(function(t){var e=F&&F.__createBinding||(Object.create?function(m,v,T,x){x===void 0&&(x=T),Object.defineProperty(m,x,{enumerable:!0,get:function(){return v[T]}})}:function(m,v,T,x){x===void 0&&(x=T),m[x]=v[T]}),r=F&&F.__setModuleDefault||(Object.create?function(m,v){Object.defineProperty(m,"default",{enumerable:!0,value:v})}:function(m,v){m.default=v}),n=F&&F.__importStar||function(m){if(m&&m.__esModule)return m;var v={};if(m!=null)for(var T in m)T!=="default"&&Object.hasOwnProperty.call(m,T)&&e(v,m,T);return r(v,m),v};Object.defineProperty(t,"__esModule",{value:!0}),t.logWarning=t.rpc_errors=t.KeyPairEd25519=t.KeyPair=t.PublicKey=t.format=t.enums=t.web=t.serialize=t.key_pair=void 0;const i=n(kn);t.key_pair=i;const s=n(Ed);t.serialize=s;const o=n(us);t.web=o;const a=n(di);t.enums=a;const c=n(Id);t.format=c;const f=n(ir);t.rpc_errors=f;const l=kn;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return l.PublicKey}}),Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return l.KeyPair}}),Object.defineProperty(t,"KeyPairEd25519",{enumerable:!0,get:function(){return l.KeyPairEd25519}});const h=Ut;Object.defineProperty(t,"logWarning",{enumerable:!0,get:function(){return h.logWarning}})})(Pd);var xa={};(function(t){var e=F&&F.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(t,"__esModule",{value:!0}),t.signTransaction=t.createTransaction=t.SCHEMA=t.Action=t.SignedTransaction=t.Transaction=t.Signature=t.deleteAccount=t.deleteKey=t.addKey=t.stake=t.transfer=t.functionCall=t.stringifyJsonOrBytes=t.deployContract=t.createAccount=t.DeleteAccount=t.DeleteKey=t.AddKey=t.Stake=t.Transfer=t.FunctionCall=t.DeployContract=t.CreateAccount=t.IAction=t.functionCallAccessKey=t.fullAccessKey=t.AccessKey=t.AccessKeyPermission=t.FullAccessPermission=t.FunctionCallPermission=void 0;const r=e(Df.exports),n=di,i=Gs,s=kn;class o extends n.Assignable{}t.FunctionCallPermission=o;class a extends n.Assignable{}t.FullAccessPermission=a;class c extends n.Enum{}t.AccessKeyPermission=c;class f extends n.Assignable{}t.AccessKey=f;function l(){return new f({nonce:0,permission:new c({fullAccess:new a({})})})}t.fullAccessKey=l;function h(y,d,A){return new f({nonce:0,permission:new c({functionCall:new o({receiverId:y,allowance:A,methodNames:d})})})}t.functionCallAccessKey=h;class m extends n.Assignable{}t.IAction=m;class v extends m{}t.CreateAccount=v;class T extends m{}t.DeployContract=T;class x extends m{}t.FunctionCall=x;class b extends m{}t.Transfer=b;class _ extends m{}t.Stake=_;class k extends m{}t.AddKey=k;class N extends m{}t.DeleteKey=N;class D extends m{}t.DeleteAccount=D;function C(){return new S({createAccount:new v({})})}t.createAccount=C;function L(y){return new S({deployContract:new T({code:y})})}t.deployContract=L;function $(y){return y.byteLength!==void 0&&y.byteLength===y.length?y:z.Buffer.from(JSON.stringify(y))}t.stringifyJsonOrBytes=$;function q(y,d,A,O,p=$){return new S({functionCall:new x({methodName:y,args:p(d),gas:A,deposit:O})})}t.functionCall=q;function J(y){return new S({transfer:new b({deposit:y})})}t.transfer=J;function re(y,d){return new S({stake:new _({stake:y,publicKey:d})})}t.stake=re;function te(y,d){return new S({addKey:new k({publicKey:y,accessKey:d})})}t.addKey=te;function V(y){return new S({deleteKey:new N({publicKey:y})})}t.deleteKey=V;function E(y){return new S({deleteAccount:new D({beneficiaryId:y})})}t.deleteAccount=E;class u extends n.Assignable{}t.Signature=u;class g extends n.Assignable{encode(){return i.serialize(t.SCHEMA,this)}static decode(d){return i.deserialize(t.SCHEMA,g,d)}}t.Transaction=g;class w extends n.Assignable{encode(){return i.serialize(t.SCHEMA,this)}static decode(d){return i.deserialize(t.SCHEMA,w,d)}}t.SignedTransaction=w;class S extends n.Enum{}t.Action=S,t.SCHEMA=new Map([[u,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[w,{kind:"struct",fields:[["transaction",g],["signature",u]]}],[g,{kind:"struct",fields:[["signerId","string"],["publicKey",s.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[S]]]}],[s.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[f,{kind:"struct",fields:[["nonce","u64"],["permission",c]]}],[c,{kind:"enum",field:"enum",values:[["functionCall",o],["fullAccess",a]]}],[o,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[a,{kind:"struct",fields:[]}],[S,{kind:"enum",field:"enum",values:[["createAccount",v],["deployContract",T],["functionCall",x],["transfer",b],["stake",_],["addKey",k],["deleteKey",N],["deleteAccount",D]]}],[v,{kind:"struct",fields:[]}],[T,{kind:"struct",fields:[["code",["u8"]]]}],[x,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[b,{kind:"struct",fields:[["deposit","u128"]]}],[_,{kind:"struct",fields:[["stake","u128"],["publicKey",s.PublicKey]]}],[k,{kind:"struct",fields:[["publicKey",s.PublicKey],["accessKey",f]]}],[N,{kind:"struct",fields:[["publicKey",s.PublicKey]]}],[D,{kind:"struct",fields:[["beneficiaryId","string"]]}]]);function P(y,d,A,O,p,R){return new g({signerId:y,publicKey:d,nonce:O,receiverId:A,actions:p,blockHash:R})}t.createTransaction=P;async function I(y,d,A,O){const p=i.serialize(t.SCHEMA,y),R=new Uint8Array(r.default.sha256.array(p)),U=await d.signMessage(p,A,O),K=new w({transaction:y,signature:new u({keyType:y.publicKey.keyType,data:U.signature})});return[R,K]}async function B(...y){if(y[0].constructor===g){const[d,A,O,p]=y;return I(d,A,O,p)}else{const[d,A,O,p,R,U,K]=y,H=await R.getPublicKey(U,K),Z=P(U,H,d,A,O,p);return I(Z,R,U,K)}}t.signTransaction=B})(xa);var qs={},Um=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qs,"__esModule",{value:!0});qs.diffEpochValidators=qs.findSeatPrice=void 0;const Yr=Um(Ai.exports),$4=Um(io);function H4(t,e,r,n){return n&&n<49?q4(t,e):(r||($4.default("findSeatPrice(validators, maxNumberOfSeats)")("`use `findSeatPrice(validators, maxNumberOfSeats, minimumStakeRatio)` instead"),r=[1,6250]),z4(t,e,r))}qs.findSeatPrice=H4;function q4(t,e){const r=t.map(a=>new Yr.default(a.stake,10)).sort((a,c)=>a.cmp(c)),n=new Yr.default(e),i=r.reduce((a,c)=>a.add(c));if(i.lt(n))throw new Error("Stakes are below seats");let s=new Yr.default(1),o=i.add(new Yr.default(1));for(;!s.eq(o.sub(new Yr.default(1)));){const a=s.add(o).div(new Yr.default(2));let c=!1,f=new Yr.default(0);for(let l=0;l<r.length;++l)if(f=f.add(r[l].div(a)),f.gte(n)){s=a,c=!0;break}c||(o=a)}return s}function z4(t,e,r){if(r.length!=2)throw Error("minimumStakeRatio should have 2 elements");const n=t.map(s=>new Yr.default(s.stake,10)).sort((s,o)=>s.cmp(o)),i=n.reduce((s,o)=>s.add(o));return t.length<e?i.mul(new Yr.default(r[0])).div(new Yr.default(r[1])):n[0].add(new Yr.default(1))}function G4(t,e){const r=new Map;t.forEach(i=>r.set(i.account_id,i));const n=new Set(e.map(i=>i.account_id));return{newValidators:e.filter(i=>!r.has(i.account_id)),removedValidators:t.filter(i=>!n.has(i.account_id)),changedValidators:e.filter(i=>r.has(i.account_id)&&r.get(i.account_id).stake!=i.stake).map(i=>({current:r.get(i.account_id),next:i}))}}qs.diffEpochValidators=G4;var fs={},lu={},V4=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lu,"__esModule",{value:!0});lu.DEFAULT_FUNCTION_CALL_GAS=void 0;const J4=V4(Ai.exports);lu.DEFAULT_FUNCTION_CALL_GAS=new J4.default("30000000000000");var Cd=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fs,"__esModule",{value:!0});fs.Account=void 0;const bo=Cd(Ai.exports),Ua=Cd(io),vt=xa,Ka=no,ja=Gs,xo=kn,Zu=Ut,B0=ir,R0=lu,W4=Cd(ba),Y4=12,Q4=500,X4=1.5;function Z4(t){return JSON.parse(z.Buffer.from(t).toString())}function e8(t){return z.Buffer.from(JSON.stringify(t))}class Nd{constructor(e,r){this.accessKeyByPublicKeyCache={},this.connection=e,this.accountId=r}get ready(){return Ua.default("Account.ready()")("not needed anymore, always ready"),Promise.resolve()}async fetchState(){Ua.default("Account.fetchState()")("use `Account.state()` instead")}async state(){return this.connection.provider.query({request_type:"view_account",account_id:this.accountId,finality:"optimistic"})}printLogsAndFailures(e,r){if(!ft.env.NEAR_NO_LOGS)for(const n of r)console.log(`Receipt${n.receiptIds.length>1?"s":""}: ${n.receiptIds.join(", ")}`),this.printLogs(e,n.logs,"	"),n.failure&&console.warn(`	Failure [${e}]: ${n.failure}`)}printLogs(e,r,n=""){if(!ft.env.NEAR_NO_LOGS)for(const i of r)console.log(`${n}Log [${e}]: ${i}`)}async signTransaction(e,r){const n=await this.findAccessKey(e,r);if(!n)throw new Ka.TypedError(`Can not sign transactions for account ${this.accountId} on network ${this.connection.networkId}, no matching key pair found in ${this.connection.signer}.`,"KeyNotFound");const{accessKey:i}=n,o=(await this.connection.provider.block({finality:"final"})).header.hash,a=++i.nonce;return await vt.signTransaction(e,a,r,ja.baseDecode(o),this.connection.signer,this.accountId,this.connection.networkId)}signAndSendTransaction(...e){return typeof e[0]=="string"?this.signAndSendTransactionV1(e[0],e[1]):this.signAndSendTransactionV2(e[0])}signAndSendTransactionV1(e,r){return Ua.default("Account.signAndSendTransaction(receiverId, actions")("use `Account.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.signAndSendTransactionV2({receiverId:e,actions:r})}async signAndSendTransactionV2({receiverId:e,actions:r,returnError:n}){let i,s;const o=await W4.default(Q4,Y4,X4,async()=>{[i,s]=await this.signTransaction(e,r);const c=s.transaction.publicKey;try{return await this.connection.provider.sendTransaction(s)}catch(f){if(f.type==="InvalidNonce")return Zu.logWarning(`Retrying transaction ${e}:${ja.baseEncode(i)} with new nonce.`),delete this.accessKeyByPublicKeyCache[c.toString()],null;if(f.type==="Expired")return Zu.logWarning(`Retrying transaction ${e}:${ja.baseEncode(i)} due to expired block hash`),null;throw f.context=new Ka.ErrorContext(ja.baseEncode(i)),f}});if(!o)throw new Ka.TypedError("nonce retries exceeded for transaction. This usually means there are too many parallel requests with the same access key.","RetriesExceeded");const a=[o.transaction_outcome,...o.receipts_outcome].reduce((c,f)=>f.outcome.logs.length||typeof f.outcome.status=="object"&&typeof f.outcome.status.Failure=="object"?c.concat({receiptIds:f.outcome.receipt_ids,logs:f.outcome.logs,failure:typeof f.outcome.status.Failure<"u"?B0.parseRpcError(f.outcome.status.Failure):null}):c,[]);if(this.printLogsAndFailures(s.transaction.receiverId,a),!n&&typeof o.status=="object"&&typeof o.status.Failure=="object")throw o.status.Failure.error_message&&o.status.Failure.error_type?new Ka.TypedError(`Transaction ${o.transaction_outcome.id} failed. ${o.status.Failure.error_message}`,o.status.Failure.error_type):B0.parseResultError(o);return o}async findAccessKey(e,r){const n=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);if(!n)return null;const i=this.accessKeyByPublicKeyCache[n.toString()];if(i!==void 0)return{publicKey:n,accessKey:i};try{const s=await this.connection.provider.query({request_type:"view_access_key",account_id:this.accountId,public_key:n.toString(),finality:"optimistic"});return this.accessKeyByPublicKeyCache[n.toString()]?{publicKey:n,accessKey:this.accessKeyByPublicKeyCache[n.toString()]}:(this.accessKeyByPublicKeyCache[n.toString()]=s,{publicKey:n,accessKey:s})}catch(s){if(s.type=="AccessKeyDoesNotExist")return null;throw s}}async createAndDeployContract(e,r,n,i){const s=vt.fullAccessKey();return await this.signAndSendTransaction({receiverId:e,actions:[vt.createAccount(),vt.transfer(i),vt.addKey(xo.PublicKey.from(r),s),vt.deployContract(n)]}),new Nd(this.connection,e)}async sendMoney(e,r){return this.signAndSendTransaction({receiverId:e,actions:[vt.transfer(r)]})}async createAccount(e,r,n){const i=vt.fullAccessKey();return this.signAndSendTransaction({receiverId:e,actions:[vt.createAccount(),vt.transfer(n),vt.addKey(xo.PublicKey.from(r),i)]})}async deleteAccount(e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[vt.deleteAccount(e)]})}async deployContract(e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[vt.deployContract(e)]})}async functionCall(...e){return typeof e[0]=="string"?this.functionCallV1(e[0],e[1],e[2],e[3],e[4]):this.functionCallV2(e[0])}functionCallV1(e,r,n,i,s){return Ua.default("Account.functionCall(contractId, methodName, args, gas, amount)")("use `Account.functionCall(FunctionCallOptions)` instead"),n=n||{},this.validateArgs(n),this.signAndSendTransaction({receiverId:e,actions:[vt.functionCall(r,n,i||R0.DEFAULT_FUNCTION_CALL_GAS,s)]})}functionCallV2({contractId:e,methodName:r,args:n={},gas:i=R0.DEFAULT_FUNCTION_CALL_GAS,attachedDeposit:s,walletMeta:o,walletCallbackUrl:a,stringify:c}){this.validateArgs(n);const f=c===void 0?vt.stringifyJsonOrBytes:c;return this.signAndSendTransaction({receiverId:e,actions:[vt.functionCall(r,n,i,s,f)],walletMeta:o,walletCallbackUrl:a})}async addKey(e,r,n,i){n||(n=[]),Array.isArray(n)||(n=[n]);let s;return r?s=vt.functionCallAccessKey(r,n,i):s=vt.fullAccessKey(),this.signAndSendTransaction({receiverId:this.accountId,actions:[vt.addKey(xo.PublicKey.from(e),s)]})}async deleteKey(e){return this.signAndSendTransaction({receiverId:this.accountId,actions:[vt.deleteKey(xo.PublicKey.from(e))]})}async stake(e,r){return this.signAndSendTransaction({receiverId:this.accountId,actions:[vt.stake(r,xo.PublicKey.from(e))]})}validateArgs(e){if(!(e.byteLength!==void 0&&e.byteLength===e.length)&&(Array.isArray(e)||typeof e!="object"))throw new Zu.PositionalArgsError}async viewFunction(e,r,n={},{parse:i=Z4,stringify:s=e8}={}){this.validateArgs(n);const o=s(n).toString("base64"),a=await this.connection.provider.query({request_type:"call_function",account_id:e,method_name:r,args_base64:o,finality:"optimistic"});return a.logs&&this.printLogs(e,a.logs),a.result&&a.result.length>0&&i(z.Buffer.from(a.result))}async viewState(e,r={finality:"optimistic"}){const{values:n}=await this.connection.provider.query({request_type:"view_state",...r,account_id:this.accountId,prefix_base64:z.Buffer.from(e).toString("base64")});return n.map(({key:i,value:s})=>({key:z.Buffer.from(i,"base64"),value:z.Buffer.from(s,"base64")}))}async getAccessKeys(){const e=await this.connection.provider.query({request_type:"view_access_key_list",account_id:this.accountId,finality:"optimistic"});return Array.isArray(e)?e:e.keys}async getAccountDetails(){return{authorizedApps:(await this.getAccessKeys()).filter(n=>n.access_key.permission!=="FullAccess").map(n=>{const i=n.access_key.permission;return{contractId:i.FunctionCall.receiver_id,amount:i.FunctionCall.allowance,publicKey:n.public_key}})}}async getAccountBalance(){const e=await this.connection.provider.experimental_protocolConfig({finality:"final"}),r=await this.state(),n=new bo.default(e.runtime_config.storage_amount_per_byte),i=new bo.default(r.storage_usage).mul(n),s=new bo.default(r.locked),o=new bo.default(r.amount).add(s),a=o.sub(bo.default.max(s,i));return{total:o.toString(),stateStaked:i.toString(),staked:s.toString(),available:a.toString()}}}fs.Account=Nd;var Km={};(function(t){var e=F&&F.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(t,"__esModule",{value:!0}),t.Account2FA=t.AccountMultisig=t.MULTISIG_CONFIRM_METHODS=t.MULTISIG_CHANGE_METHODS=t.MULTISIG_DEPOSIT=t.MULTISIG_GAS=t.MULTISIG_ALLOWANCE=t.MULTISIG_STORAGE_KEY=void 0;const r=e(Ai.exports),n=e(io),i=fs,s=Id,o=kn,a=xa,c=us;t.MULTISIG_STORAGE_KEY="__multisigRequest",t.MULTISIG_ALLOWANCE=new r.default(s.parseNearAmount("1")),t.MULTISIG_GAS=new r.default("100000000000000"),t.MULTISIG_DEPOSIT=new r.default("0"),t.MULTISIG_CHANGE_METHODS=["add_request","add_request_and_confirm","delete_request","confirm"],t.MULTISIG_CONFIRM_METHODS=["confirm"];const f={[t.MULTISIG_STORAGE_KEY]:null};class l extends i.Account{constructor(b,_,k){super(b,_),this.storage=k.storage,this.onAddRequestResult=k.onAddRequestResult}async signAndSendTransactionWithAccount(b,_){return super.signAndSendTransaction({receiverId:b,actions:_})}signAndSendTransaction(...b){return typeof b[0]=="string"?this._signAndSendTransaction({receiverId:b[0],actions:b[1]}):this._signAndSendTransaction(b[0])}async _signAndSendTransaction({receiverId:b,actions:_}){const{accountId:k}=this,N=z.Buffer.from(JSON.stringify({request:{receiver_id:b,actions:T(_,k,b)}}));let D;try{D=await super.signAndSendTransaction({receiverId:k,actions:[a.functionCall("add_request_and_confirm",N,t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)]})}catch(L){if(L.toString().includes("Account has too many active requests. Confirm or delete some"))return await this.deleteUnconfirmedRequests(),await this.signAndSendTransaction(b,_);throw L}if(!D.status)throw new Error("Request failed");const C={...D.status};if(!C.SuccessValue||typeof C.SuccessValue!="string")throw new Error("Request failed");return this.setRequest({accountId:k,actions:_,requestId:parseInt(z.Buffer.from(C.SuccessValue,"base64").toString("ascii"),10)}),this.onAddRequestResult&&await this.onAddRequestResult(D),this.deleteUnconfirmedRequests(),D}async deleteUnconfirmedRequests(){const b=await this.getRequestIds(),{requestId:_}=this.getRequest();for(const k of b)if(k!=_)try{await super.signAndSendTransaction({receiverId:this.accountId,actions:[a.functionCall("delete_request",{request_id:k},t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)]})}catch{console.warn("Attempt to delete an earlier request before 15 minutes failed. Will try again.")}}async getRequestIds(){return this.viewFunction(this.accountId,"list_request_ids")}getRequest(){return this.storage?JSON.parse(this.storage.getItem(t.MULTISIG_STORAGE_KEY)||"{}"):f[t.MULTISIG_STORAGE_KEY]}setRequest(b){if(this.storage)return this.storage.setItem(t.MULTISIG_STORAGE_KEY,JSON.stringify(b));f[t.MULTISIG_STORAGE_KEY]=b}}t.AccountMultisig=l;class h extends l{constructor(b,_,k){super(b,_,k),this.helperUrl="https://helper.testnet.near.org",this.helperUrl=k.helperUrl||this.helperUrl,this.storage=k.storage,this.sendCode=k.sendCode||this.sendCodeDefault,this.getCode=k.getCode||this.getCodeDefault,this.verifyCode=k.verifyCode||this.verifyCodeDefault,this.onConfirmResult=k.onConfirmResult}async signAndSendTransaction(...b){return typeof b[0]=="string"?(n.default("Account.signAndSendTransaction(receiverId, actions")("use `Account2FA.signAndSendTransaction(SignAndSendTransactionOptions)` instead"),this.__signAndSendTransaction({receiverId:b[0],actions:b[1]})):this.__signAndSendTransaction(b[0])}async __signAndSendTransaction({receiverId:b,actions:_}){await super.signAndSendTransaction({receiverId:b,actions:_}),await this.sendCode();const k=await this.promptAndVerify();return this.onConfirmResult&&await this.onConfirmResult(k),k}async deployMultisig(b){const{accountId:_}=this,k=(await this.getRecoveryMethods()).data.filter(({kind:$,publicKey:q})=>($==="phrase"||$==="ledger")&&q!==null).map($=>$.publicKey),N=(await this.getAccessKeys()).filter(({public_key:$,access_key:{permission:q}})=>q==="FullAccess"&&!k.includes($)).map($=>$.public_key).map(m),D=m((await this.postSignedJson("/2fa/getAccessKey",{accountId:_})).publicKey),C=z.Buffer.from(JSON.stringify({num_confirmations:2})),L=[...N.map($=>a.deleteKey($)),...N.map($=>a.addKey($,a.functionCallAccessKey(_,t.MULTISIG_CHANGE_METHODS,null))),a.addKey(D,a.functionCallAccessKey(_,t.MULTISIG_CONFIRM_METHODS,null)),a.deployContract(b)];return(await this.state()).code_hash==="11111111111111111111111111111111"&&L.push(a.functionCall("new",C,t.MULTISIG_GAS,t.MULTISIG_DEPOSIT)),console.log("deploying multisig contract for",_),await super.signAndSendTransactionWithAccount(_,L)}async disable(b){const{accountId:_}=this,N=(await this.getAccessKeys()).filter(({access_key:L})=>L.permission!=="FullAccess").filter(({access_key:L})=>{const $=L.permission.FunctionCall;return $.receiver_id===_&&$.method_names.length===4&&$.method_names.includes("add_request_and_confirm")}),D=o.PublicKey.from((await this.postSignedJson("/2fa/getAccessKey",{accountId:_})).publicKey),C=[a.deleteKey(D),...N.map(({public_key:L})=>a.deleteKey(o.PublicKey.from(L))),...N.map(({public_key:L})=>a.addKey(o.PublicKey.from(L),null)),a.deployContract(b)];return console.log("disabling 2fa for",_),await this.signAndSendTransaction({receiverId:_,actions:C})}async sendCodeDefault(){const{accountId:b}=this,{requestId:_}=this.getRequest(),k=await this.get2faMethod();return await this.postSignedJson("/2fa/send",{accountId:b,method:k,requestId:_}),_}async getCodeDefault(b){throw new Error('There is no getCode callback provided. Please provide your own in AccountMultisig constructor options. It has a parameter method where method.kind is "email" or "phone".')}async promptAndVerify(){const b=await this.get2faMethod(),_=await this.getCode(b);try{return await this.verifyCode(_)}catch(k){if(console.warn("Error validating security code:",k),k.toString().includes("invalid 2fa code provided")||k.toString().includes("2fa code not valid"))return await this.promptAndVerify();throw k}}async verifyCodeDefault(b){const{accountId:_}=this,k=this.getRequest();if(!k)throw new Error("no request pending");const{requestId:N}=k;return await this.postSignedJson("/2fa/verify",{accountId:_,securityCode:b,requestId:N})}async getRecoveryMethods(){const{accountId:b}=this;return{accountId:b,data:await this.postSignedJson("/account/recoveryMethods",{accountId:b})}}async get2faMethod(){let{data:b}=await this.getRecoveryMethods();if(b&&b.length&&(b=b.find(N=>N.kind.indexOf("2fa-")===0)),!b)return null;const{kind:_,detail:k}=b;return{kind:_,detail:k}}async signatureFor(){const{accountId:b}=this,k=(await this.connection.provider.block({finality:"final"})).header.height.toString(),N=await this.connection.signer.signMessage(z.Buffer.from(k),b,this.connection.networkId),D=z.Buffer.from(N.signature).toString("base64");return{blockNumber:k,blockNumberSignature:D}}async postSignedJson(b,_){return await c.fetchJson(this.helperUrl+b,JSON.stringify({..._,...await this.signatureFor()}))}}t.Account2FA=h;const m=x=>o.PublicKey.from(x),v=x=>x.toString().replace("ed25519:",""),T=(x,b,_)=>x.map(k=>{const N=k.enum,{gas:D,publicKey:C,methodName:L,args:$,deposit:q,accessKey:J,code:re}=k[N],te={type:N[0].toUpperCase()+N.substr(1),gas:D&&D.toString()||void 0,public_key:C&&v(C)||void 0,method_name:L,args:$&&z.Buffer.from($).toString("base64")||void 0,code:re&&z.Buffer.from(re).toString("base64")||void 0,amount:q&&q.toString()||void 0,deposit:q&&q.toString()||"0",permission:void 0};if(J&&(_===b&&J.permission.enum!=="fullAccess"&&(te.permission={receiver_id:b,allowance:t.MULTISIG_ALLOWANCE.toString(),method_names:t.MULTISIG_CHANGE_METHODS}),J.permission.enum==="functionCall")){const{receiverId:V,methodNames:E,allowance:u}=J.permission.functionCall;te.permission={receiver_id:V,allowance:u&&u.toString()||void 0,method_names:E}}return te})})(Km);var Un={};Object.defineProperty(Un,"__esModule",{value:!0});Un.UrlAccountCreator=Un.LocalAccountCreator=Un.AccountCreator=void 0;const t8=us;class Md{}Un.AccountCreator=Md;class r8 extends Md{constructor(e,r){super(),this.masterAccount=e,this.initialBalance=r}async createAccount(e,r){await this.masterAccount.createAccount(e,r,this.initialBalance)}}Un.LocalAccountCreator=r8;class n8 extends Md{constructor(e,r){super(),this.connection=e,this.helperUrl=r}async createAccount(e,r){await t8.fetchJson(`${this.helperUrl}/account`,JSON.stringify({newAccountId:e,newAccountPublicKey:r.toString()}))}}Un.UrlAccountCreator=n8;var va={},Ji={},i8=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.InMemorySigner=Ji.Signer=void 0;const s8=i8(Df.exports),o8=kn,a8=ma;class jm{}Ji.Signer=jm;class Bd extends jm{constructor(e){super(),this.keyStore=e}static async fromKeyPair(e,r,n){const i=new a8.InMemoryKeyStore;return await i.setKey(e,r,n),new Bd(i)}async createKey(e,r){const n=o8.KeyPair.fromRandom("ed25519");return await this.keyStore.setKey(r,e,n),n.getPublicKey()}async getPublicKey(e,r){const n=await this.keyStore.getKey(r,e);return n===null?null:n.getPublicKey()}async signMessage(e,r,n){const i=new Uint8Array(s8.default.sha256.array(e));if(!r)throw new Error("InMemorySigner requires provided account id");const s=await this.keyStore.getKey(n,r);if(s===null)throw new Error(`Key for ${r} not found in ${n}`);return s.sign(i)}toString(){return`InMemorySigner(${this.keyStore})`}}Ji.InMemorySigner=Bd;Object.defineProperty(va,"__esModule",{value:!0});va.Connection=void 0;const c8=no,u8=Ji;function f8(t){switch(t.type){case void 0:return t;case"JsonRpcProvider":return new c8.JsonRpcProvider({...t.args});default:throw new Error(`Unknown provider type ${t.type}`)}}function l8(t){switch(t.type){case void 0:return t;case"InMemorySigner":return new u8.InMemorySigner(t.keyStore);default:throw new Error(`Unknown signer type ${t.type}`)}}class Rd{constructor(e,r,n){this.networkId=e,this.provider=r,this.signer=n}static fromConfig(e){const r=f8(e.provider),n=l8(e.signer);return new Rd(e.networkId,r,n)}}va.Connection=Rd;var wa={},$m=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wa,"__esModule",{value:!0});wa.Contract=void 0;const d8=$m(Ai.exports),h8=$m(io),p8=no,Mf=Ut;function O0(t,e){return{[t](...r){return e(...r)}}[t]}const D0=t=>t&&t.byteLength!==void 0&&t.byteLength===t.length,ef=t=>Object.prototype.toString.call(t)==="[object Object]";class g8{constructor(e,r,n){this.account=e,this.contractId=r;const{viewMethods:i=[],changeMethods:s=[]}=n;i.forEach(o=>{Object.defineProperty(this,o,{writable:!1,enumerable:!0,value:O0(o,async(a={},c={},...f)=>{if(f.length||!(ef(a)||D0(a))||!ef(c))throw new Mf.PositionalArgsError;return this.account.viewFunction(this.contractId,o,a,c)})})}),s.forEach(o=>{Object.defineProperty(this,o,{writable:!1,enumerable:!0,value:O0(o,async(...a)=>{if(a.length&&(a.length>3||!(ef(a[0])||D0(a[0]))))throw new Mf.PositionalArgsError;return a.length>1||!(a[0]&&a[0].args)?(h8.default("contract.methodName(args, gas, amount)")("use `contract.methodName({ args, gas?, amount?, callbackUrl?, meta? })` instead"),this._changeMethod({methodName:o,args:a[0],gas:a[1],amount:a[2]})):this._changeMethod({methodName:o,...a[0]})})})})}async _changeMethod({args:e,methodName:r,gas:n,amount:i,meta:s,callbackUrl:o}){y8({gas:n,amount:i});const a=await this.account.functionCall({contractId:this.contractId,methodName:r,args:e,gas:n,attachedDeposit:i,walletMeta:s,walletCallbackUrl:o});return p8.getTransactionLastResult(a)}}wa.Contract=g8;function y8(t){const e="number, decimal string or BN";for(const r of Object.keys(t)){const n=t[r];if(n&&!d8.default.isBN(n)&&isNaN(n))throw new Mf.ArgumentTypeError(r,e,n)}}var _a={},m8=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_a,"__esModule",{value:!0});_a.Near=void 0;const F0=m8(Ai.exports),vo=fs,b8=va,x8=wa,L0=Un;class v8{constructor(e){if(this.config=e,this.connection=b8.Connection.fromConfig({networkId:e.networkId,provider:{type:"JsonRpcProvider",args:{url:e.nodeUrl,headers:e.headers}},signer:e.signer||{type:"InMemorySigner",keyStore:e.keyStore||e.deps.keyStore}}),e.masterAccount){const r=e.initialBalance?new F0.default(e.initialBalance):new F0.default("500000000000000000000000000");this.accountCreator=new L0.LocalAccountCreator(new vo.Account(this.connection,e.masterAccount),r)}else e.helperUrl?this.accountCreator=new L0.UrlAccountCreator(this.connection,e.helperUrl):this.accountCreator=null}async account(e){return new vo.Account(this.connection,e)}async createAccount(e,r){if(!this.accountCreator)throw new Error("Must specify account creator, either via masterAccount or helperUrl configuration settings.");return await this.accountCreator.createAccount(e,r),new vo.Account(this.connection,e)}async loadContract(e,r){const n=new vo.Account(this.connection,r.sender);return new x8.Contract(n,e,r)}async sendTokens(e,r,n){return console.warn("near.sendTokens is deprecated. Use `yourAccount.sendMoney` instead."),(await new vo.Account(this.connection,r).sendMoney(n,e)).transaction_outcome.id}}_a.Near=v8;var ui={},w8=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ui,"__esModule",{value:!0});ui.ConnectedWalletAccount=ui.WalletAccount=ui.WalletConnection=void 0;const U0=w8(io),_8=fs,Hm=xa,qm=Pd,E8=Gs,A8=Gs,S8="/login/",T8="add_request_and_confirm",k8="_wallet_auth_key",tf="pending_key";class zm{constructor(e,r){this._near=e;const n=r+k8,i=JSON.parse(window.localStorage.getItem(n));this._networkId=e.config.networkId,this._walletBaseUrl=e.config.walletUrl,r=r||e.config.contractName||"default",this._keyStore=e.connection.signer.keyStore,this._authData=i||{allKeys:[]},this._authDataKey=n,this.isSignedIn()||this._completeSignInWithAccessKey()}isSignedIn(){return!!this._authData.accountId}getAccountId(){return this._authData.accountId||""}async requestSignIn(e={},r,n,i){let s;typeof e=="string"?(U0.default("requestSignIn(contractId, title)")("`title` ignored; use `requestSignIn({ contractId, methodNames, successUrl, failureUrl })` instead"),s={contractId:e,successUrl:n,failureUrl:i}):s=e;const o=new URL(window.location.href),a=new URL(this._walletBaseUrl+S8);if(a.searchParams.set("success_url",s.successUrl||o.href),a.searchParams.set("failure_url",s.failureUrl||o.href),s.contractId){await(await this._near.account(s.contractId)).state(),a.searchParams.set("contract_id",s.contractId);const f=qm.KeyPair.fromRandom("ed25519");a.searchParams.set("public_key",f.getPublicKey().toString()),await this._keyStore.setKey(this._networkId,tf+f.getPublicKey(),f)}s.methodNames&&s.methodNames.forEach(c=>{a.searchParams.append("methodNames",c)}),window.location.assign(a.toString())}async requestSignTransactions(...e){return Array.isArray(e[0])?(U0.default("WalletConnection.requestSignTransactions(transactions, callbackUrl, meta)")("use `WalletConnection.requestSignTransactions(RequestSignTransactionsOptions)` instead"),this._requestSignTransactions({transactions:e[0],callbackUrl:e[1],meta:e[2]})):this._requestSignTransactions(e[0])}async _requestSignTransactions({transactions:e,meta:r,callbackUrl:n}){const i=new URL(window.location.href),s=new URL("sign",this._walletBaseUrl);s.searchParams.set("transactions",e.map(o=>A8.serialize(Hm.SCHEMA,o)).map(o=>z.Buffer.from(o).toString("base64")).join(",")),s.searchParams.set("callbackUrl",n||i.href),r&&s.searchParams.set("meta",r),window.location.assign(s.toString())}async _completeSignInWithAccessKey(){const e=new URL(window.location.href),r=e.searchParams.get("public_key")||"",n=(e.searchParams.get("all_keys")||"").split(","),i=e.searchParams.get("account_id")||"";i&&(this._authData={accountId:i,allKeys:n},window.localStorage.setItem(this._authDataKey,JSON.stringify(this._authData)),r&&await this._moveKeyFromTempToPermanent(i,r)),e.searchParams.delete("public_key"),e.searchParams.delete("all_keys"),e.searchParams.delete("account_id"),e.searchParams.delete("meta"),e.searchParams.delete("transactionHashes"),window.history.replaceState({},document.title,e.toString())}async _moveKeyFromTempToPermanent(e,r){const n=await this._keyStore.getKey(this._networkId,tf+r);await this._keyStore.setKey(this._networkId,e,n),await this._keyStore.removeKey(this._networkId,tf+r)}signOut(){this._authData={},window.localStorage.removeItem(this._authDataKey)}account(){return this._connectedAccount||(this._connectedAccount=new Gm(this,this._near.connection,this._authData.accountId)),this._connectedAccount}}ui.WalletConnection=zm;ui.WalletAccount=zm;class Gm extends _8.Account{constructor(e,r,n){super(r,n),this.walletConnection=e}signAndSendTransaction(...e){return typeof e[0]=="string"?this._signAndSendTransaction({receiverId:e[0],actions:e[1]}):this._signAndSendTransaction(e[0])}async _signAndSendTransaction({receiverId:e,actions:r,walletMeta:n,walletCallbackUrl:i=window.location.href}){const s=await this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);let o=await this.accessKeyForTransaction(e,r,s);if(!o)throw new Error(`Cannot find matching key for transaction sent to ${e}`);if(s&&s.toString()===o.public_key)try{return await super.signAndSendTransaction({receiverId:e,actions:r})}catch(m){if(m.type==="NotEnoughAllowance")o=await this.accessKeyForTransaction(e,r);else throw m}const a=await this.connection.provider.block({finality:"final"}),c=E8.baseDecode(a.header.hash),f=qm.PublicKey.from(o.public_key),l=o.access_key.nonce+1,h=Hm.createTransaction(this.accountId,f,e,l,r,c);return await this.walletConnection.requestSignTransactions({transactions:[h],meta:n,callbackUrl:i}),new Promise((m,v)=>{setTimeout(()=>{v(new Error("Failed to redirect to sign transaction"))},1e3)})}async accessKeyMatchesTransaction(e,r,n){const{access_key:{permission:i}}=e;if(i==="FullAccess")return!0;if(i.FunctionCall){const{receiver_id:s,method_names:o}=i.FunctionCall;if(s===this.accountId&&o.includes(T8))return!0;if(s===r){if(n.length!==1)return!1;const[{functionCall:a}]=n;return a&&(!a.deposit||a.deposit.toString()==="0")&&(o.length===0||o.includes(a.methodName))}}return!1}async accessKeyForTransaction(e,r,n){const i=await this.getAccessKeys();if(n){const o=i.find(a=>a.public_key.toString()===n.toString());if(o&&await this.accessKeyMatchesTransaction(o,e,r))return o}const s=this.walletConnection._authData.allKeys;for(const o of i)if(s.indexOf(o.public_key)!==-1&&await this.accessKeyMatchesTransaction(o,e,r))return o;return null}}ui.ConnectedWalletAccount=Gm;(function(t){var e=F&&F.__createBinding||(Object.create?function(_,k,N,D){D===void 0&&(D=N),Object.defineProperty(_,D,{enumerable:!0,get:function(){return k[N]}})}:function(_,k,N,D){D===void 0&&(D=N),_[D]=k[N]}),r=F&&F.__setModuleDefault||(Object.create?function(_,k){Object.defineProperty(_,"default",{enumerable:!0,value:k})}:function(_,k){_.default=k}),n=F&&F.__importStar||function(_){if(_&&_.__esModule)return _;var k={};if(_!=null)for(var N in _)N!=="default"&&Object.hasOwnProperty.call(_,N)&&e(k,_,N);return r(k,_),k};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnection=t.WalletAccount=t.ConnectedWalletAccount=t.Near=t.KeyPair=t.Signer=t.InMemorySigner=t.Contract=t.Connection=t.Account=t.multisig=t.validators=t.transactions=t.utils=t.providers=t.accountCreator=void 0;const i=n(no);t.providers=i;const s=n(Pd);t.utils=s;const o=n(xa);t.transactions=o;const a=n(qs);t.validators=a;const c=fs;Object.defineProperty(t,"Account",{enumerable:!0,get:function(){return c.Account}});const f=n(Km);t.multisig=f;const l=n(Un);t.accountCreator=l;const h=va;Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return h.Connection}});const m=Ji;Object.defineProperty(t,"Signer",{enumerable:!0,get:function(){return m.Signer}}),Object.defineProperty(t,"InMemorySigner",{enumerable:!0,get:function(){return m.InMemorySigner}});const v=wa;Object.defineProperty(t,"Contract",{enumerable:!0,get:function(){return v.Contract}});const T=kn;Object.defineProperty(t,"KeyPair",{enumerable:!0,get:function(){return T.KeyPair}});const x=_a;Object.defineProperty(t,"Near",{enumerable:!0,get:function(){return x.Near}});const b=ui;Object.defineProperty(t,"ConnectedWalletAccount",{enumerable:!0,get:function(){return b.ConnectedWalletAccount}}),Object.defineProperty(t,"WalletAccount",{enumerable:!0,get:function(){return b.WalletAccount}}),Object.defineProperty(t,"WalletConnection",{enumerable:!0,get:function(){return b.WalletConnection}})})(Ad);var du={};Object.defineProperty(du,"__esModule",{value:!0});du.connect=void 0;const P8=_a;async function I8(t){return new P8.Near(t)}du.connect=I8;var Bf=function(){this.tests={},this.cache={}};Bf.prototype={constructor:Bf,define:function(t,e){if(typeof t!="string"||!(e instanceof Function))throw new Error("Invalid capability definition.");if(this.tests[t])throw new Error('Duplicated capability definition by "'+t+'".');this.tests[t]=e},check:function(t){if(!this.test(t))throw new Error('The current environment does not support "'+t+'", therefore we cannot continue.')},test:function(t){if(this.cache[t]!==void 0)return this.cache[t];if(!this.tests[t])throw new Error('Unknown capability with name "'+t+'".');var e=this.tests[t];return this.cache[t]=!!e(),this.cache[t]}};var C8=Bf,N8=C8,Od=new N8,Jo=function(t){return Od.test(t)};Jo.define=function(t,e){Od.define(t,e)};Jo.check=function(t){Od.check(t)};Jo.test=Jo;var Vm=Jo,Jm=Vm,Rr=Jm.define,Li=Jm.test;Rr("strict mode",function(){return this===void 0});Rr("arguments.callee.caller",function(){try{return function(){return arguments.callee.caller}()===arguments.callee}catch{return!1}});Rr("es5",function(){return Li("Array.prototype.forEach")&&Li("Array.prototype.map")&&Li("Function.prototype.bind")&&Li("Object.create")&&Li("Object.defineProperties")&&Li("Object.defineProperty")&&Li("Object.prototype.hasOwnProperty")});Rr("Array.prototype.forEach",function(){return Array.prototype.forEach});Rr("Array.prototype.map",function(){return Array.prototype.map});Rr("Function.prototype.bind",function(){return Function.prototype.bind});Rr("Object.create",function(){return Object.create});Rr("Object.defineProperties",function(){return Object.defineProperties});Rr("Object.defineProperty",function(){return Object.defineProperty});Rr("Object.prototype.hasOwnProperty",function(){return Object.prototype.hasOwnProperty});Rr("Error.captureStackTrace",function(){return Error.captureStackTrace});Rr("Error.prototype.stack",function(){try{throw new Error}catch(t){return t.stack||t.stacktrace}});var Dd=Vm;Dd.check("es5");var M8=function(t,e,r){var n="";if(n+=t.name||"Error",n+=": "+(t.message||""),r instanceof Array)for(var i in r){var s=r[i];n+=`
   # `+s}for(var o in e){var a=e[o];n+=`
   at `+a.toString()}return n},Fd=M8,B8=Fd,R8=function(){return Error.getStackTrace=function(t){return t.stack},{prepareStackTrace:B8}},St=function(){var t=Object.create({Source:Object,config:{},buildArgs:[]});function e(a){var c="config";if(a instanceof Function)c="Source";else if(a instanceof Array)c="buildArgs";else if(a instanceof Object)c="config";else throw new Error("Invalid configuration option.");if(t.hasOwnProperty(c))throw new Error("Duplicated configuration option: "+c+".");t[c]=a}for(var r=0,n=arguments.length;r<n;++r)e(arguments[r]);var i=t.Source,s=t.config,o=t.buildArgs;return(i.extend||St.extend).call(i,s,o)};St.factory=function(){return function(){var t=this;t.build instanceof Function&&t.build.apply(t,arguments),t.init instanceof Function&&t.init.apply(t,arguments)}};St.extend=function(t,e){var r=this;t||(t={});var n;return t.prototype instanceof Object&&t.prototype.constructor!==Object?n=t.prototype.constructor:t.factory instanceof Function&&(n=t.factory.call(r)),n=(r.clone||St.clone).call(r,n,e),(n.merge||St.merge).call(n,t),n};St.prototype.extend=function(t,e){var r=this,n=(r.clone||St.prototype.clone).apply(r,e);return(n.merge||St.prototype.merge).call(n,t),n};St.clone=function(t,e){var r=this;t instanceof Function||(t=(r.factory||St.factory).call(r)),t.prototype=(r.prototype.clone||St.prototype.clone).apply(r.prototype,e||[]),t.prototype.constructor=t;for(var n in r)n!=="prototype"&&(t[n]=r[n]);return t};St.prototype.clone=function(){var t=this,e=Object.create(t);return e.build instanceof Function&&e.build.apply(e,arguments),e};St.merge=function(t){var e=this;for(var r in t)r!=="prototype"&&(e[r]=t[r]);return t.prototype instanceof Object&&(e.prototype.merge||St.prototype.merge).call(e.prototype,t.prototype),e};St.prototype.merge=function(t){var e=this;for(var r in t)r!=="constructor"&&(e[r]=t[r]);return e};St.absorb=function(t){var e=this;for(var r in t)r!=="prototype"&&(e[r]===void 0||e[r]===Function.prototype[r])&&(e[r]=t[r]);return t.prototype instanceof Object&&(e.prototype.absorb||St.prototype.absorb).call(e.prototype,t.prototype),e};St.prototype.absorb=function(t){var e=this;for(var r in t)r!=="constructor"&&(e[r]===void 0||e[r]===Object.prototype[r])&&(e[r]=t[r]);return e};St.getAncestor=function(){var t=this;if(t!==t.prototype.constructor)return t.prototype.constructor};St.newInstance=function(){var t=this,e=Object.create(this.prototype);return t.apply(e,arguments),e};var O8=St,D8=function(){throw new Error("Not implemented.")},F8={Class:O8,abstractMethod:D8},Ea=F8,L8=function(t){var e=!1,r;return t instanceof Function||(e=!0,r=t,t=null),function(){return e||(e=!0,r=t.apply(this,arguments),t=null),r}},U8=L8,K8=function t(e,r,n){if(n||(n=[]),n.length<e.length){var i=e[n.length];for(var s in i)n[n.length]=i[s],t(e,r,n),--n.length}else r.apply(null,n)},j8={cache:U8,eachCombination:K8},Aa=j8,Do=Ea.Class,K0=Ea.abstractMethod,$8=Aa.eachCombination,j0=Aa.cache,H8=Dd,q8=Do(Object,{prototype:{captureFrameStrings:function(t){var e=this.createError();t.unshift(this.captureFrameStrings),t.unshift(this.createError);var r=this.getFrameStrings(e),n=r.slice(t.length),i=[];if(H8("arguments.callee.caller")){var s=[this.createError,this.captureFrameStrings];try{for(var o=arguments.callee;o=o.caller;)s.push(o)}catch{}i=s.slice(t.length)}return{frameStrings:n,functionValues:i}},getFrameStrings:function(t){var e=t.message||"",r=t.name||"",n=this.getStackString(t);if(n!==void 0){var i=n.split(`
`),s=0,o=i.length;return this.hasHeader&&(s+=r.split(`
`).length+e.split(`
`).length-1),this.hasFooter&&(o-=1),i.slice(s,o)}},createError:K0,getStackString:K0,hasHeader:void 0,hasFooter:void 0}}),z8=Do(Object,{prototype:{calibrateClass:function(t){return this.calibrateMethods(t)&&this.calibrateEnvelope(t)},calibrateMethods:function(t){try{$8([[function(e){return new Error(e)},function(e){try{throw new Error(e)}catch(r){return r}}],[function(e){return e.stack},function(e){return e.stacktrace}]],function(e,r){if(r(e()))throw{getStackString:r,createError:e}})}catch(e){return Do.merge.call(t,{prototype:e}),!0}return!1},calibrateEnvelope:function(t){var e=t.prototype.getStackString,r=t.prototype.createError,n=e(r("marker")),i=n.split(`
`);return Do.merge.call(t,{prototype:{hasHeader:/marker/.test(i[0]),hasFooter:i[i.length-1]===""}}),!0}}}),G8={getClass:j0(function(){var t;if(t)return t;t=Do(q8,{});var e=new z8;if(!e.calibrateClass(t))throw new Error("Cannot read Error.prototype.stack in this environment.");return t}),getInstance:j0(function(){var t=this.getClass(),e=new t;return e})},$0=Ea.Class,Sr=Ea.abstractMethod,V8=$0(Object,{prototype:{init:$0.prototype.merge,frameString:void 0,toString:function(){return this.frameString},functionValue:void 0,getThis:Sr,getTypeName:Sr,getFunction:function(){return this.functionValue},getFunctionName:Sr,getMethodName:Sr,getFileName:Sr,getLineNumber:Sr,getColumnNumber:Sr,getEvalOrigin:Sr,isTopLevel:Sr,isEval:Sr,isNative:Sr,isConstructor:Sr}}),J8=V8,H0=Ea.Class,W8=J8,q0=Aa.cache,Y8=H0(Object,{prototype:{stackParser:null,frameParser:null,locationParsers:null,constructor:function(t){H0.prototype.merge.call(this,t)},getFrames:function(t,e){for(var r=[],n=0,i=t.length;n<i;++n)r[n]=this.getFrame(t[n],e[n]);return r},getFrame:function(t,e){var r={frameString:t,functionValue:e};return new W8(r)}}}),Q8={getClass:q0(function(){return Y8}),getInstance:q0(function(){var t=this.getClass(),e=new t;return e})},z0=G8,G0=Q8,X8=Aa.cache,rf=Fd,Z8=function(){return Error.captureStackTrace=function t(e,r){var n,i=[t];r&&i.push(r);var s=z0.getInstance().captureFrameStrings(i);Object.defineProperties(e,{stack:{configurable:!0,get:X8(function(){var o=G0.getInstance().getFrames(s.frameStrings,s.functionValues);return(Error.prepareStackTrace||rf)(e,o,n)})},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})},Error.getStackTrace=function(t){if(t.cachedStack)return t.stack;var e=z0.getInstance().getFrameStrings(t),r=[],n;e?r=G0.getInstance().getFrames(e,[]):n=["The stack is not readable by unthrown errors in this environment."];var i=(Error.prepareStackTrace||rf)(t,r,n);if(e)try{Object.defineProperties(t,{stack:{configurable:!0,writable:!0,enumerable:!1,value:i},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})}catch{}return i},{prepareStackTrace:rf}},e5=Aa.cache,nf=Fd,t5=function(){return Error.captureStackTrace=function(t,e){Object.defineProperties(t,{stack:{configurable:!0,get:e5(function(){return(Error.prepareStackTrace||nf)(t,[])})},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})},Error.getStackTrace=function(t){if(t.cachedStack)return t.stack;var e=(Error.prepareStackTrace||nf)(t,[]);try{Object.defineProperties(t,{stack:{configurable:!0,writable:!0,enumerable:!1,value:e},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})}catch{}return e},{prepareStackTrace:nf}},V0=Dd,tc;V0("Error.captureStackTrace")?tc=R8:V0("Error.prototype.stack")?tc=Z8:tc=t5;tc();(function(t){var e=F&&F.__createBinding||(Object.create?function(s,o,a,c){c===void 0&&(c=a),Object.defineProperty(s,c,{enumerable:!0,get:function(){return o[a]}})}:function(s,o,a,c){c===void 0&&(c=a),s[c]=o[a]}),r=F&&F.__setModuleDefault||(Object.create?function(s,o){Object.defineProperty(s,"default",{enumerable:!0,value:o})}:function(s,o){s.default=o}),n=F&&F.__importStar||function(s){if(s&&s.__esModule)return s;var o={};if(s!=null)for(var a in s)a!=="default"&&Object.hasOwnProperty.call(s,a)&&e(o,s,a);return r(o,s),o},i=F&&F.__exportStar||function(s,o){for(var a in s)a!=="default"&&!o.hasOwnProperty(a)&&e(o,s,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.keyStores=n(Cm),i(Ad,t),i(du,t)})(Im);var Ld=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_d,"__esModule",{value:!0});const J0=Xs,wo=Ld(hi),Bn=Im,sf=Of,r5=Ld(Q0.exports),n5=Df.exports,i5=Ld(Ei);class s5 extends i5.default{constructor(e){super(e),this.near=this.wallet._near,this.base=["yoctoNEAR",1e25]}async ready(){if(!this.wallet.isSignedIn())throw new Error("Wallet has not been signed in!");const e=new Bn.keyStores.BrowserLocalStorageKeyStore,r=this.wallet.account();if(this.keyPair=await e.getKey(this.wallet._networkId,r.accountId),!this.keyPair){this.keyPair=Bn.KeyPair.fromRandom("ed25519");const n=this.keyPair.getPublicKey().toString();await e.setKey(this.wallet._networkId,r.accountId,this.keyPair),await r.addKey(n)}this._address=await this.wallet.getAccountId(),this.providerInstance=this.wallet._near.connection.provider}async getTx(e){var r;const n=await this.providerInstance,[i,s]=e.split(":"),o=await n.txStatusReceipts((0,sf.decode)(s),i),a=await n.block(o.transaction_outcome.block_hash),c=(await n.block({finality:"final"})).header.height;if(o.receipts_outcome[0].outcome.status.SuccessValue!=="")throw new Error("Transaction failed!");const f=(r=o.receipts[0].receipt.Action.actions[0].Transfer.deposit)!==null&&r!==void 0?r:0;return{from:i,to:o.transaction.receiver_id,amount:new wo.default(f),blockHeight:new wo.default(a.header.height),pending:!1,confirmed:c-a.header.height>=this.minConfirm}}ownerToAddress(e){const r=typeof e=="string"?e:(0,sf.encode)(e);return(0,sf.decode)(r.replace("ed25519:","")).toString("hex")}async sign(e){return this.getSigner().sign(e)}getSigner(){return new J0.NearSigner(this.keyPair.secretKey)}async verify(e,r,n){return J0.NearSigner.verify(e,r,n)}async getCurrentHeight(){const e=await this.providerInstance.status();return new wo.default(e.sync_info.latest_block_height)}async getFee(e,r){const n=await this.providerInstance.gasPrice(null);return new wo.default(n.gas_price).multipliedBy(45e10)}async sendTx(e){const r=await this.providerInstance.sendTransaction(e);return`${this.address}:${r.transaction.hash}`}async createTx(e,r,n){const i=await this.providerInstance.query({request_type:"view_access_key",finality:"final",account_id:this.address,public_key:this.keyPair.getPublicKey().toString()}),s=++i.nonce,o=Bn.utils.serialize.base_decode(i.block_hash),a=[Bn.transactions.transfer(new r5.default(new wo.default(e).toString()))],c=Bn.transactions.createTransaction(this.address,this.keyPair.getPublicKey(),r,s,a,o),f=Bn.utils.serialize.serialize(Bn.transactions.SCHEMA,c),l=new Uint8Array(n5.sha256.array(f)),h=this.keyPair.sign(l);return{tx:new Bn.transactions.SignedTransaction({transaction:c,signature:new Bn.transactions.Signature({keyType:c.publicKey.keyType,data:h.signature})}),txId:void 0}}async getPublicKey(){return z.Buffer.from(this.keyPair.getPublicKey().data)}}_d.default=s5;var Ud={},o5=F&&F.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),a5=F&&F.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),c5=F&&F.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&o5(e,t,r);return a5(e,t),e},hu=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ud,"__esModule",{value:!0});const W0=Xs,vs=hu(hi),u5=hu(Ei),_o=c5(sb),f5=hu(Of),l5=hu(nu);class d5 extends u5.default{constructor(e){super(e),this.minConfirm=1,this.base=["lamports",1e9]}async getProvider(){return this.providerInstance||(this.providerInstance=new _o.Connection(this.providerUrl,{confirmTransactionInitialTimeout:6e4,commitment:"confirmed"})),this.providerInstance}async getTx(e){const r=await this.getProvider(),n=await r.getTransaction(e,{commitment:"confirmed"});if(!n)throw new Error("Confirmed tx not found");const i=await r.getSlot("confirmed"),s=new vs.default(n.meta.postBalances[1]).minus(new vs.default(n.meta.preBalances[1]));return{from:n.transaction.message.accountKeys[0].toBase58(),to:n.transaction.message.accountKeys[1].toBase58(),amount:s,blockHeight:new vs.default(n.slot),pending:!1,confirmed:i-n.slot>=1}}ownerToAddress(e){return typeof e=="string"&&(e=z.Buffer.from(e)),f5.default.encode(e)}async sign(e){return await(await this.getSigner()).sign(e)}getSigner(){return this.signer||(this.signer=new W0.HexInjectedSolanaSigner(this.wallet)),this.signer}verify(e,r,n){return W0.HexInjectedSolanaSigner.verify(e,r,n)}async getCurrentHeight(){return new vs.default((await(await this.getProvider()).getEpochInfo()).blockHeight)}async getFee(e,r){return new vs.default(5e3)}async sendTx(e){return await this.wallet.sendTransaction(e,await this.getProvider(),{skipPreflight:!0})}async createTx(e,r,n){const i=new _o.PublicKey(await this.getPublicKey()),s=await(0,l5.default)(async a=>{var c;try{return(await(await this.getProvider()).getRecentBlockhash()).blockhash}catch(f){throw!((c=f.message)===null||c===void 0)&&c.includes("blockhash")?f:(a(f),new Error("Unreachable"))}},{retries:3,minTimeout:1e3}),o=new _o.Transaction({recentBlockhash:s,feePayer:i});return o.add(_o.SystemProgram.transfer({fromPubkey:i,toPubkey:new _o.PublicKey(r),lamports:+new vs.default(e).toNumber()})),{tx:o,txId:void 0}}async getPublicKey(){return this.wallet.publicKey.toBuffer()}}Ud.default=d5;var Wm={};(function(t){var e=F&&F.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0}),t.erc20abi=void 0;const r=e(hi),n=Zc,i=Ei,s=e(au);class o extends s.default{constructor(c){super(c),this.contractAddress=c.contractAddress}async getContract(){return this.contractInstance||(this.contractInstance=new n.ethers.Contract(this.contractAddress,t.erc20abi,this.w3signer),this.base=["wei",Math.pow(10,await this.contractInstance.decimals())]),this.contractInstance}async getTx(c){const f=await this.providerInstance.getTransaction(c);if(!f)throw new Error("Tx doesn't exist");if(f.data.length!==138||f.data.slice(2,10)!=="a9059cbb")throw new Error("Tx isn't a ERC20 transfer");const l=`0x${f.data.slice(34,74)}`,h=new r.default(f.data.slice(74),16);return{from:f.from,to:l,blockHeight:f.blockNumber?new r.default(f.blockNumber):null,amount:h,pending:!f.blockNumber,confirmed:f.confirmations>=this.minConfirm}}async getFee(c,f){const l="0x"+new r.default(c).toString(16),h=await this.getContract(),m=await this.providerInstance.getGasPrice(),v=await h.estimateGas.transfer(f,l),T=new r.default(m.mul(v).toString()),[x]=await this.getGas(),b=x.multipliedBy(T),_=new r.default(await this.price());return new r.default(b).dividedToIntegerBy(_)}async createTx(c,f,l){const h=await this.getContract(),m="0x"+new r.default(c).toString(16),v=await h.populateTransaction.transfer(f,m);return v.gasPrice=await this.providerInstance.getGasPrice(),v.gasLimit=await h.estimateGas.transfer(f,m),v.chainId=(await this.providerInstance.getNetwork()).chainId,v.nonce=await this.providerInstance.getTransactionCount(this.address),{txId:void 0,tx:v}}async getGas(){return[new r.default(await(0,i.getRedstonePrice)("ETH")),1e18]}}t.default=o,t.erc20abi=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}]})(Wm);var so=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vd,"__esModule",{value:!0});const ws=so(au),h5=so(_d),p5=so(Ud),g5=so(Wm),y5=so(Vf),m5=so(as);function b5(t,e,r,n){switch(t){case"ethereum":return new ws.default({name:"ethereum",ticker:"ETH",providerUrl:r??"https://cloudflare-eth.com/",wallet:e});case"matic":return new ws.default({name:"matic",ticker:"MATIC",providerUrl:r??"https://polygon-rpc.com",wallet:e,minConfirm:1});case"arbitrum":return new ws.default({name:"arbitrum",ticker:"ETH",providerUrl:r??"https://arb1.arbitrum.io/rpc",wallet:e});case"bnb":return new ws.default({name:"bnb",ticker:"BNB",providerUrl:r??"https://bsc-dataseed.binance.org",wallet:e});case"avalanche":return new ws.default({name:"avalanche",ticker:"AVAX",providerUrl:r??"https://api.avax.network/ext/bc/C/rpc",wallet:e});case"boba-eth":return new ws.default({name:"boba-eth",ticker:"ETH",providerUrl:r??"https://mainnet.boba.network/",minConfirm:1,wallet:e});case"boba":{const i=new g5.default({name:"boba",ticker:"BOBA",providerUrl:r??"https://mainnet.boba.network/",contractAddress:n??"0xa18bF3994C0Cc6E3b63ac420308E5383f53120D7",minConfirm:1,wallet:e});return i.price=async()=>{var s;const o=await y5.default.post("https://api.livecoinwatch.com/coins/single",JSON.stringify({currency:"USD",code:`${i.ticker}`}),{headers:{"x-api-key":"75a7a824-6577-45e6-ad86-511d590c7cc8","content-type":"application/json"}});if(await m5.default.checkAndThrow(o,"Getting price data"),!(!((s=o?.data)===null||s===void 0)&&s.rate))throw new Error(`unable to get price for ${i.name}`);return+o.data.rate},i}case"solana":return new p5.default({name:"solana",ticker:"SOL",providerUrl:r??"https://api.mainnet-beta.solana.com/",wallet:e});case"near":return new h5.default({name:"near",ticker:"NEAR",providerUrl:r??"https://rpc.mainnet.near.org",wallet:e});default:throw new Error(`Unknown/Unsupported currency ${t}`)}}vd.default=b5;var oo=F&&F.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nc,"__esModule",{value:!0});const x5=oo(jf),v5=oo(Jf),w5=oo(bd),_5=oo(ha),E5=oo(as),A5=oo(vd);class S5 extends v5.default{constructor(e,r,n,i){var s;super();const o=new URL(e);this.api=new x5.default({protocol:o.protocol.slice(0,-1),port:o.port,host:o.hostname,timeout:(s=i?.timeout)!==null&&s!==void 0?s:1e5}),this.currency=r.toLowerCase(),this.currencyConfig=(0,A5.default)(r,n,i?.providerUrl,i?.contractAddress),this.utils=new E5.default(this.api,this.currency,this.currencyConfig),this.uploader=new _5.default(this.api,this.utils,this.currency,this.currencyConfig),this.funder=new w5.default(this.utils)}async ready(){await this.currencyConfig.ready(),this.address=this.currencyConfig.address}}nc.default=S5;(function(t){var e=F&&F.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebBundlr=t.default=void 0;var r=nc;Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e(r).default}});var n=nc;Object.defineProperty(t,"WebBundlr",{enumerable:!0,get:function(){return e(n).default}})})(Kf);var T5=Ym(Kf),N5=ab({__proto__:null,default:T5},[Kf]);export{N5 as i};
